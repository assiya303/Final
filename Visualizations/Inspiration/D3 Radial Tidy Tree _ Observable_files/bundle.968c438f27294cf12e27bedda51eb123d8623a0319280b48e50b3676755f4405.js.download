/* Copyright 2019 Observable, Inc. */
!function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;var s=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(a[c]=n[c]);if(r){s=r(n);for(var u=0;u<s.length;u++)o.call(n,s[u])&&(a[s[u]]=n[s[u]])}}return a},a="function"==typeof Symbol&&Symbol.for,l=a?Symbol.for("react.element"):60103,c=a?Symbol.for("react.portal"):60106,u=a?Symbol.for("react.fragment"):60107,h=a?Symbol.for("react.strict_mode"):60108,d=a?Symbol.for("react.profiler"):60114,p=a?Symbol.for("react.provider"):60109,f=a?Symbol.for("react.context"):60110,m=a?Symbol.for("react.concurrent_mode"):60111,g=a?Symbol.for("react.forward_ref"):60112,v=a?Symbol.for("react.suspense"):60113,b=a?Symbol.for("react.memo"):60115,y=a?Symbol.for("react.lazy"):60116,w="function"==typeof Symbol&&Symbol.iterator;function k(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,s,a){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,a],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x={};function S(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||E}function C(){}function _(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||E}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&k("85"),this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},C.prototype=S.prototype;var T=_.prototype=new C;T.constructor=_,s(T,S.prototype),T.isPureReactComponent=!0;var N={current:null,currentDispatcher:null},P=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function L(e,t,n){var r=void 0,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)P.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return{$$typeof:l,type:e,key:o,ref:s,props:i,_owner:N.current}}function M(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var O=/\/+/g,I=[];function R(e,t,n,r){if(I.length){var i=I.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>I.length&&I.push(e)}function F(e,t,n){return null==e?0:function e(t,n,r,i){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var s=!1;if(null===t)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case l:case c:s=!0}}if(s)return r(i,t,""===n?"."+j(t,0):n),1;if(s=0,n=""===n?".":n+":",Array.isArray(t))for(var a=0;a<t.length;a++){var u=n+j(o=t[a],a);s+=e(o,u,r,i)}else if(u=null===t||"object"!=typeof t?null:"function"==typeof(u=w&&t[w]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),a=0;!(o=t.next()).done;)s+=e(o=o.value,u=n+j(o,a++),r,i);else"object"===o&&k("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return s}(e,"",t,n)}function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function H(e,t){e.func.call(e.context,t,e.count++)}function $(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,function(e){return e}):null!=e&&(M(e)&&(e=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(O,"$&/")+"/"),F(e,$,t=R(t,o,r,i)),D(t)}var W={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;F(e,H,t=R(null,null,t,n)),D(t)},count:function(e){return F(e,function(){return null},null)},toArray:function(e){var t=[];return U(e,t,null,function(e){return e}),t},only:function(e){return M(e)||k("143"),e}},createRef:function(){return{current:null}},Component:S,PureComponent:_,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:p,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:g,render:e}},lazy:function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:b,type:e,compare:void 0===t?null:t}},Fragment:u,StrictMode:h,Suspense:v,createElement:L,cloneElement:function(e,t,n){null==e&&k("267",e);var r=void 0,i=s({},e.props),o=e.key,a=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(a=t.ref,c=N.current),void 0!==t.key&&(o=""+t.key);var u=void 0;for(r in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)P.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=void 0===t[r]&&void 0!==u?u[r]:t[r])}if(1===(r=arguments.length-2))i.children=n;else if(1<r){u=Array(r);for(var h=0;h<r;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:l,type:e.type,key:o,ref:a,props:i,_owner:c}},createFactory:function(e){var t=L.bind(null,e);return t.type=e,t},isValidElement:M,version:"16.6.3",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:N,assign:s}};W.unstable_ConcurrentMode=m,W.unstable_Profiler=d;var B={default:W},V=B&&W||B,z=V.default||V,q="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",G=(n(function(e){}),n(function(e){e.exports=z})),K=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,o=-1,s=-1,a=!1,l=!1;function c(){if(!a){var e=n.expirationTime;l?g():l=!0,m(d,e)}}function u(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var o=i,a=s;i=e,s=t;try{var l=r()}finally{i=o,s=a}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=l.next=l.previous=l;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=l,c()),(t=r.previous).next=r.previous=l,l.next=r,l.previous=t}}function h(){if(-1===o&&null!==n&&1===n.priorityLevel){a=!0;try{do{u()}while(null!==n&&1===n.priorityLevel)}finally{a=!1,null!==n?c():l=!1}}}function d(e){a=!0;var i=r;r=e;try{if(e)for(;null!==n;){var o=t.unstable_now();if(!(n.expirationTime<=o))break;do{u()}while(null!==n&&n.expirationTime<=o)}else if(null!==n)do{u()}while(null!==n&&!v())}finally{a=!1,r=i,null!==n?c():l=!1,h()}}var p,f,m,g,v,b=Date,y="function"==typeof setTimeout?setTimeout:void 0,w="function"==typeof clearTimeout?clearTimeout:void 0,k="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,E="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function x(e){p=k(function(t){w(f),e(t)}),f=y(function(){E(p),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var S=performance;t.unstable_now=function(){return S.now()}}else t.unstable_now=function(){return b.now()};if("undefined"!=typeof window&&window._schedMock){var C=window._schedMock;m=C[0],g=C[1],v=C[2]}else if("undefined"==typeof window||"function"!=typeof window.addEventListener){var _=null,T=-1,N=function(e,t){if(null!==_){var n=_;_=null;try{T=t,n(e)}finally{T=-1}}};m=function(e,t){-1!==T?setTimeout(m,0,e,t):(_=e,setTimeout(N,t,!0,t),setTimeout(N,1073741823,!1,1073741823))},g=function(){_=null},v=function(){return!1},t.unstable_now=function(){return-1===T?0:T}}else{"undefined"!=typeof console&&("function"!=typeof k&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof E&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var P=null,A=!1,L=-1,M=!1,O=!1,I=0,R=33,D=33;v=function(){return I<=t.unstable_now()};var F="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===F){A=!1,e=P;var n=L;P=null,L=-1;var r=t.unstable_now(),i=!1;if(0>=I-r){if(!(-1!==n&&n<=r))return M||(M=!0,x(j)),P=e,void(L=n);i=!0}if(null!==e){O=!0;try{e(i)}finally{O=!1}}}},!1);var j=function(e){if(null!==P){x(j);var t=e-I+D;t<D&&R<D?(8>t&&(t=8),D=t<R?R:t):R=t,I=e+D,A||(A=!0,window.postMessage(F,"*"))}else M=!1};m=function(e,t){P=e,L=t,O||0>t?window.postMessage(F,"*"):M||(M=!0,x(j))},g=function(){P=null,A=!1,L=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,s=o;i=e,o=t.unstable_now();try{return n()}finally{i=r,o=s,h()}},t.unstable_scheduleCallback=function(e,r){var s=-1!==o?o:t.unstable_now();if("object"==typeof r&&null!==r&&"number"==typeof r.timeout)r=s+r.timeout;else switch(i){case 1:r=s+-1;break;case 2:r=s+250;break;case 5:r=s+1073741823;break;case 4:r=s+1e4;break;default:r=s+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,c();else{s=null;var a=n;do{if(a.expirationTime>r){s=a;break}a=a.next}while(a!==n);null===s?s=n:s===n&&(n=e,c()),(r=s.previous).next=s.previous=e,e.next=s,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,s=o;i=n,o=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,o=s,h()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<s||v())}});t(K);K.unstable_now,K.unstable_ImmediatePriority,K.unstable_UserBlockingPriority,K.unstable_NormalPriority,K.unstable_IdlePriority,K.unstable_LowPriority,K.unstable_runWithPriority,K.unstable_scheduleCallback,K.unstable_cancelCallback,K.unstable_wrapCallback,K.unstable_getCurrentPriorityLevel,K.unstable_shouldYield;var Y=n(function(e,t){});t(Y);Y.unstable_now,Y.unstable_ImmediatePriority,Y.unstable_UserBlockingPriority,Y.unstable_NormalPriority,Y.unstable_IdlePriority,Y.unstable_LowPriority,Y.unstable_runWithPriority,Y.unstable_scheduleCallback,Y.unstable_cancelCallback,Y.unstable_wrapCallback,Y.unstable_getCurrentPriorityLevel,Y.unstable_shouldYield;var X=n(function(e){e.exports=K});function Q(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,s,a){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,a],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}G||Q("227");var J=!1,Z=null,ee=!1,te=null,ne={onError:function(e){J=!0,Z=e}};function re(e,t,n,r,i,o,s,a,l){J=!1,Z=null,function(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}.apply(ne,arguments)}var ie=null,oe={};function se(){if(ie)for(var e in oe){var t=oe[e],n=ie.indexOf(e);if(-1<n||Q("96",e),!le[n])for(var r in t.extractEvents||Q("97",e),le[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,a=r;ce.hasOwnProperty(a)&&Q("99",a),ce[a]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&ae(l[i],s,a);i=!0}else o.registrationName?(ae(o.registrationName,s,a),i=!0):i=!1;i||Q("98",r,e)}}}function ae(e,t,n){ue[e]&&Q("100",e),ue[e]=t,he[e]=t.eventTypes[n].dependencies}var le=[],ce={},ue={},he={},de=null,pe=null,fe=null;function me(e,t,n){var r=e.type||"unknown-event";e.currentTarget=fe(n),function(e,t,n,r,i,o,s,a,l){if(re.apply(this,arguments),J){if(J){var c=Z;J=!1,Z=null}else Q("198"),c=void 0;ee||(ee=!0,te=c)}}(r,t,void 0,e),e.currentTarget=null}function ge(e,t){return null==t&&Q("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ve(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var be=null;function ye(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)me(e,t[r],n[r]);else t&&me(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var we={injectEventPluginOrder:function(e){ie&&Q("101"),ie=Array.prototype.slice.call(e),se()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];oe.hasOwnProperty(t)&&oe[t]===r||(oe[t]&&Q("102",t),oe[t]=r,n=!0)}n&&se()}};function ke(e,t){var n=e.stateNode;if(!n)return null;var r=de(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&Q("231",t,typeof n),n)}function Ee(e){if(null!==e&&(be=ge(be,e)),e=be,be=null,e&&(ve(e,ye),be&&Q("95"),ee))throw e=te,ee=!1,te=null,e}var xe=Math.random().toString(36).slice(2),Se="__reactInternalInstance$"+xe,Ce="__reactEventHandlers$"+xe;function _e(e){if(e[Se])return e[Se];for(;!e[Se];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[Se]).tag||6===e.tag?e:null}function Te(e){return!(e=e[Se])||5!==e.tag&&6!==e.tag?null:e}function Ne(e){if(5===e.tag||6===e.tag)return e.stateNode;Q("33")}function Pe(e){return e[Ce]||null}function Ae(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Le(e,t,n){(t=ke(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=ge(n._dispatchListeners,t),n._dispatchInstances=ge(n._dispatchInstances,e))}function Me(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Ae(t);for(t=n.length;0<t--;)Le(n[t],"captured",e);for(t=0;t<n.length;t++)Le(n[t],"bubbled",e)}}function Oe(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=ke(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=ge(n._dispatchListeners,t),n._dispatchInstances=ge(n._dispatchInstances,e))}function Ie(e){e&&e.dispatchConfig.registrationName&&Oe(e._targetInst,null,e)}function Re(e){ve(e,Me)}var De=!("undefined"==typeof window||!window.document||!window.document.createElement);function Fe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var je={animationend:Fe("Animation","AnimationEnd"),animationiteration:Fe("Animation","AnimationIteration"),animationstart:Fe("Animation","AnimationStart"),transitionend:Fe("Transition","TransitionEnd")},He={},$e={};function Ue(e){if(He[e])return He[e];if(!je[e])return e;var t,n=je[e];for(t in n)if(n.hasOwnProperty(t)&&t in $e)return He[e]=n[t];return e}De&&($e=document.createElement("div").style,"AnimationEvent"in window||(delete je.animationend.animation,delete je.animationiteration.animation,delete je.animationstart.animation),"TransitionEvent"in window||delete je.transitionend.transition);var We=Ue("animationend"),Be=Ue("animationiteration"),Ve=Ue("animationstart"),ze=Ue("transitionend"),qe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ge=null,Ke=null,Ye=null;function Xe(){if(Ye)return Ye;var e,t,n=Ke,r=n.length,i="value"in Ge?Ge.value:Ge.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Ye=i.slice(e,1<t?1-t:void 0)}function Qe(){return!0}function Je(){return!1}function Ze(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qe:Je,this.isPropagationStopped=Je,this}function et(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function tt(e){e instanceof this||Q("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function nt(e){e.eventPool=[],e.getPooled=et,e.release=tt}s(Ze.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qe)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qe)},persist:function(){this.isPersistent=Qe},isPersistent:Je,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Je,this._dispatchInstances=this._dispatchListeners=null}}),Ze.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ze.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return s(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=s({},r.Interface,e),n.extend=r.extend,nt(n),n},nt(Ze);var rt=Ze.extend({data:null}),it=Ze.extend({data:null}),ot=[9,13,27,32],st=De&&"CompositionEvent"in window,at=null;De&&"documentMode"in document&&(at=document.documentMode);var lt=De&&"TextEvent"in window&&!at,ct=De&&(!st||at&&8<at&&11>=at),ut=String.fromCharCode(32),ht={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},dt=!1;function pt(e,t){switch(e){case"keyup":return-1!==ot.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ft(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var mt=!1;var gt={eventTypes:ht,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(st)e:{switch(e){case"compositionstart":i=ht.compositionStart;break e;case"compositionend":i=ht.compositionEnd;break e;case"compositionupdate":i=ht.compositionUpdate;break e}i=void 0}else mt?pt(e,n)&&(i=ht.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=ht.compositionStart);return i?(ct&&"ko"!==n.locale&&(mt||i!==ht.compositionStart?i===ht.compositionEnd&&mt&&(o=Xe()):(Ke="value"in(Ge=r)?Ge.value:Ge.textContent,mt=!0)),i=rt.getPooled(i,t,n,r),o?i.data=o:null!==(o=ft(n))&&(i.data=o),Re(i),o=i):o=null,(e=lt?function(e,t){switch(e){case"compositionend":return ft(t);case"keypress":return 32!==t.which?null:(dt=!0,ut);case"textInput":return(e=t.data)===ut&&dt?null:e;default:return null}}(e,n):function(e,t){if(mt)return"compositionend"===e||!st&&pt(e,t)?(e=Xe(),Ye=Ke=Ge=null,mt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ct&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=it.getPooled(ht.beforeInput,t,n,r)).data=e,Re(t)):t=null,null===o?t:null===t?o:[o,t]}},vt=null,bt=null,yt=null;function wt(e){if(e=pe(e)){"function"!=typeof vt&&Q("280");var t=de(e.stateNode);vt(e.stateNode,e.type,t)}}function kt(e){bt?yt?yt.push(e):yt=[e]:bt=e}function Et(){if(bt){var e=bt,t=yt;if(yt=bt=null,wt(e),t)for(e=0;e<t.length;e++)wt(t[e])}}function xt(e,t){return e(t)}function St(e,t,n){return e(t,n)}function Ct(){}var _t=!1;function Tt(e,t){if(_t)return e(t);_t=!0;try{return xt(e,t)}finally{_t=!1,(null!==bt||null!==yt)&&(Ct(),Et())}}var Nt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Nt[e.type]:"textarea"===t}function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Lt(e){if(!De)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Mt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ot(e){e._valueTracker||(e._valueTracker=function(e){var t=Mt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function It(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Mt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Rt=G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dt=/^(.*)[\\\/]/,Ft="function"==typeof Symbol&&Symbol.for,jt=Ft?Symbol.for("react.element"):60103,Ht=Ft?Symbol.for("react.portal"):60106,$t=Ft?Symbol.for("react.fragment"):60107,Ut=Ft?Symbol.for("react.strict_mode"):60108,Wt=Ft?Symbol.for("react.profiler"):60114,Bt=Ft?Symbol.for("react.provider"):60109,Vt=Ft?Symbol.for("react.context"):60110,zt=Ft?Symbol.for("react.concurrent_mode"):60111,qt=Ft?Symbol.for("react.forward_ref"):60112,Gt=Ft?Symbol.for("react.suspense"):60113,Kt=Ft?Symbol.for("react.memo"):60115,Yt=Ft?Symbol.for("react.lazy"):60116,Xt="function"==typeof Symbol&&Symbol.iterator;function Qt(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Xt&&e[Xt]||e["@@iterator"])?e:null}function Jt(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case zt:return"ConcurrentMode";case $t:return"Fragment";case Ht:return"Portal";case Wt:return"Profiler";case Ut:return"StrictMode";case Gt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case Vt:return"Context.Consumer";case Bt:return"Context.Provider";case qt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Kt:return Jt(e.type);case Yt:if(e=1===e._status?e._result:null)return Jt(e)}return null}function Zt(e){var t="";do{e:switch(e.tag){case 2:case 16:case 0:case 1:case 5:case 8:case 13:var n=e._debugOwner,r=e._debugSource,i=Jt(e.type),o=null;n&&(o=Jt(n.type)),n=i,i="",r?i=" (at "+r.fileName.replace(Dt,"")+":"+r.lineNumber+")":o&&(i=" (created by "+o+")"),o="\n    in "+(n||"Unknown")+i;break e;default:o=""}t+=o,e=e.return}while(e);return t}var en=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tn=Object.prototype.hasOwnProperty,nn={},rn={};function on(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){sn[e]=new on(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];sn[t]=new on(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){sn[e]=new on(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){sn[e]=new on(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){sn[e]=new on(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){sn[e]=new on(e,3,!0,e,null)}),["capture","download"].forEach(function(e){sn[e]=new on(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){sn[e]=new on(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){sn[e]=new on(e,5,!1,e.toLowerCase(),null)});var an=/[\-:]([a-z])/g;function ln(e){return e[1].toUpperCase()}function cn(e,t,n,r){var i=sn.hasOwnProperty(t)?sn[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!tn.call(rn,e)||!tn.call(nn,e)&&(en.test(e)?rn[e]=!0:(nn[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function un(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function hn(e,t){var n=t.checked;return s({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function dn(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=un(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function pn(e,t){null!=(t=t.checked)&&cn(e,"checked",t,!1)}function fn(e,t){pn(e,t);var n=un(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?gn(e,t.type,n):t.hasOwnProperty("defaultValue")&&gn(e,t.type,un(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function mn(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function gn(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(an,ln);sn[t]=new on(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(an,ln);sn[t]=new on(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(an,ln);sn[t]=new on(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),sn.tabIndex=new on("tabIndex",1,!1,"tabindex",null);var vn={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function bn(e,t,n){return(e=Ze.getPooled(vn.change,e,t,n)).type="change",kt(n),Re(e),e}var yn=null,wn=null;function kn(e){Ee(e)}function En(e){if(It(Ne(e)))return e}function xn(e,t){if("change"===e)return t}var Sn=!1;function Cn(){yn&&(yn.detachEvent("onpropertychange",_n),wn=yn=null)}function _n(e){"value"===e.propertyName&&En(wn)&&Tt(kn,e=bn(wn,e,At(e)))}function Tn(e,t,n){"focus"===e?(Cn(),wn=n,(yn=t).attachEvent("onpropertychange",_n)):"blur"===e&&Cn()}function Nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return En(wn)}function Pn(e,t){if("click"===e)return En(t)}function An(e,t){if("input"===e||"change"===e)return En(t)}De&&(Sn=Lt("input")&&(!document.documentMode||9<document.documentMode));var Ln={eventTypes:vn,_isInputEventSupported:Sn,extractEvents:function(e,t,n,r){var i=t?Ne(t):window,o=void 0,s=void 0,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type?o=xn:Pt(i)?Sn?o=An:(o=Nn,s=Tn):(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Pn),o&&(o=o(e,t)))return bn(o,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&gn(i,"number",i.value)}},Mn=Ze.extend({view:null,detail:null}),On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=On[e])&&!!t[e]}function Rn(){return In}var Dn=0,Fn=0,jn=!1,Hn=!1,$n=Mn.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Rn,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Dn;return Dn=e.screenX,jn?"mousemove"===e.type?e.screenX-t:0:(jn=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Fn;return Fn=e.screenY,Hn?"mousemove"===e.type?e.screenY-t:0:(Hn=!0,0)}}),Un=$n.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Wn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Bn={eventTypes:Wn,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?_e(t):null):o=null,o===t)return null;var s=void 0,a=void 0,l=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(s=$n,a=Wn.mouseLeave,l=Wn.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(s=Un,a=Wn.pointerLeave,l=Wn.pointerEnter,c="pointer");var u=null==o?i:Ne(o);if(i=null==t?i:Ne(t),(e=s.getPooled(a,o,n,r)).type=c+"leave",e.target=u,e.relatedTarget=i,(n=s.getPooled(l,t,n,r)).type=c+"enter",n.target=i,n.relatedTarget=u,r=t,o&&r)e:{for(i=r,c=0,s=t=o;s;s=Ae(s))c++;for(s=0,l=i;l;l=Ae(l))s++;for(;0<c-s;)t=Ae(t),c--;for(;0<s-c;)i=Ae(i),s--;for(;c--;){if(t===i||t===i.alternate)break e;t=Ae(t),i=Ae(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(c=o.alternate)||c!==i);)t.push(o),o=Ae(o);for(o=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)o.push(r),r=Ae(r);for(r=0;r<t.length;r++)Oe(t[r],"bubbled",e);for(r=o.length;0<r--;)Oe(o[r],"captured",n);return[e,n]}},Vn=Object.prototype.hasOwnProperty;function zn(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function qn(e,t){if(zn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Vn.call(t,n[r])||!zn(e[n[r]],t[n[r]]))return!1;return!0}function Gn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function Kn(e){2!==Gn(e)&&Q("188")}function Yn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=Gn(e))&&Q("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var s=i.child;s;){if(s===n)return Kn(i),e;if(s===r)return Kn(i),t;s=s.sibling}Q("188")}if(n.return!==r.return)n=i,r=o;else{s=!1;for(var a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}s||Q("189")}}n.alternate!==r&&Q("190")}return 3!==n.tag&&Q("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var Xn=Ze.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Qn=Ze.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jn=Mn.extend({relatedTarget:null});function Zn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var er={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nr=Mn.extend({key:function(e){if(e.key){var t=er[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?tr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Rn,charCode:function(e){return"keypress"===e.type?Zn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),rr=$n.extend({dataTransfer:null}),ir=Mn.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Rn}),or=Ze.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),sr=$n.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ar=[["abort","abort"],[We,"animationEnd"],[Be,"animationIteration"],[Ve,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ze,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],lr={},cr={};function ur(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},lr[e]=t,cr[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){ur(e,!0)}),ar.forEach(function(e){ur(e,!1)});var hr={eventTypes:lr,isInteractiveTopLevelEventType:function(e){return void 0!==(e=cr[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=cr[e];if(!i)return null;switch(e){case"keypress":if(0===Zn(n))return null;case"keydown":case"keyup":e=nr;break;case"blur":case"focus":e=Jn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=rr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ir;break;case We:case Be:case Ve:e=Xn;break;case ze:e=or;break;case"scroll":e=Mn;break;case"wheel":e=sr;break;case"copy":case"cut":case"paste":e=Qn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Un;break;default:e=Ze}return Re(t=e.getPooled(i,t,n,r)),t}},dr=hr.isInteractiveTopLevelEventType,pr=[];function fr(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=_e(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=At(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,s=null,a=0;a<le.length;a++){var l=le[a];l&&(l=l.extractEvents(r,t,o,i))&&(s=ge(s,l))}Ee(s)}}var mr=!0;function gr(e,t){if(!t)return null;var n=(dr(e)?br:yr).bind(null,e);t.addEventListener(e,n,!1)}function vr(e,t){if(!t)return null;var n=(dr(e)?br:yr).bind(null,e);t.addEventListener(e,n,!0)}function br(e,t){St(yr,e,t)}function yr(e,t){if(mr){var n=At(t);if(null===(n=_e(n))||"number"!=typeof n.tag||2===Gn(n)||(n=null),pr.length){var r=pr.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Tt(fr,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>pr.length&&pr.push(e)}}}var wr={},kr=0,Er="_reactListenersID"+(""+Math.random()).slice(2);function xr(e){return Object.prototype.hasOwnProperty.call(e,Er)||(e[Er]=kr++,wr[e[Er]]={}),wr[e[Er]]}function Sr(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _r(e,t){var n,r=Cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cr(r)}}function Tr(){for(var e=window,t=Sr();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(n){break}t=Sr(e.document)}return t}function Nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Pr=De&&"documentMode"in document&&11>=document.documentMode,Ar={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Lr=null,Mr=null,Or=null,Ir=!1;function Rr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Ir||null==Lr||Lr!==Sr(n)?null:("selectionStart"in(n=Lr)&&Nr(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Or&&qn(Or,n)?null:(Or=n,(e=Ze.getPooled(Ar.select,Mr,e,t)).type="select",e.target=Lr,Re(e),e))}var Dr={eventTypes:Ar,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=xr(o),i=he.onSelect;for(var s=0;s<i.length;s++){var a=i[s];if(!o.hasOwnProperty(a)||!o[a]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?Ne(t):window,e){case"focus":(Pt(o)||"true"===o.contentEditable)&&(Lr=o,Mr=t,Or=null);break;case"blur":Or=Mr=Lr=null;break;case"mousedown":Ir=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ir=!1,Rr(n,r);case"selectionchange":if(Pr)break;case"keydown":case"keyup":return Rr(n,r)}return null}};function Fr(e,t){return e=s({children:void 0},t),(t=function(e){var t="";return G.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function jr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+un(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Hr(e,t){return null!=t.dangerouslySetInnerHTML&&Q("91"),s({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $r(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&Q("92"),Array.isArray(t)&&(1>=t.length||Q("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:un(n)}}function Ur(e,t){var n=un(t.value),r=un(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Wr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}we.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),de=Pe,pe=Te,fe=Ne,we.injectEventPluginsByName({SimpleEventPlugin:hr,EnterLeaveEventPlugin:Bn,ChangeEventPlugin:Ln,SelectEventPlugin:Dr,BeforeInputEventPlugin:gt});var Br={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Vr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Vr(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var qr,Gr=void 0,Kr=(qr=function(e,t){if(e.namespaceURI!==Br.svg||"innerHTML"in e)e.innerHTML=t;else{for((Gr=Gr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=Gr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return qr(e,t)})}:qr);function Yr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Xr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qr=["Webkit","ms","Moz","O"];function Jr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Xr.hasOwnProperty(e)&&Xr[e]?(""+t).trim():t+"px"}function Zr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Jr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Xr).forEach(function(e){Qr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xr[t]=Xr[e]})});var ei=s({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ti(e,t){t&&(ei[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&Q("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&Q("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||Q("61")),null!=t.style&&"object"!=typeof t.style&&Q("62",""))}function ni(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ri(e,t){var n=xr(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=he[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":vr("scroll",e);break;case"focus":case"blur":vr("focus",e),vr("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Lt(i)&&vr(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===qe.indexOf(i)&&gr(i,e)}n[i]=!0}}}function ii(){}var oi=null,si=null;function ai(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function li(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ci="function"==typeof setTimeout?setTimeout:void 0,ui="function"==typeof clearTimeout?clearTimeout:void 0;function hi(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function di(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}var pi=[],fi=-1;function mi(e){0>fi||(e.current=pi[fi],pi[fi]=null,fi--)}function gi(e,t){pi[++fi]=e.current,e.current=t}var vi={},bi={current:vi},yi={current:!1},wi=vi;function ki(e,t){var n=e.type.contextTypes;if(!n)return vi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ei(e){return null!=(e=e.childContextTypes)}function xi(e){mi(yi),mi(bi)}function Si(e){mi(yi),mi(bi)}function Ci(e,t,n){bi.current!==vi&&Q("168"),gi(bi,t),gi(yi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())i in e||Q("108",Jt(t)||"Unknown",i);return s({},n,r)}function Ti(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||vi,wi=bi.current,gi(bi,t),gi(yi,yi.current),!0}function Ni(e,t,n){var r=e.stateNode;r||Q("169"),n?(t=_i(e,t,wi),r.__reactInternalMemoizedMergedChildContext=t,mi(yi),mi(bi),gi(bi,t)):mi(yi),gi(yi,n)}var Pi=null,Ai=null;function Li(e){return function(t){try{return e(t)}catch(n){}}}function Mi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Oi(e,t,n,r){return new Mi(e,t,n,r)}function Ii(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ri(e,t){var n=e.alternate;return null===n?((n=Oi(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.firstContextDependency=e.firstContextDependency,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Di(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Ii(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case $t:return Fi(n.children,i,o,t);case zt:return ji(n,3|i,o,t);case Ut:return ji(n,2|i,o,t);case Wt:return(e=Oi(12,n,t,4|i)).elementType=Wt,e.type=Wt,e.expirationTime=o,e;case Gt:return(e=Oi(13,n,t,i)).elementType=Gt,e.type=Gt,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Bt:s=10;break e;case Vt:s=9;break e;case qt:s=11;break e;case Kt:s=14;break e;case Yt:s=16,r=null;break e}Q("130",null==e?e:typeof e,"")}return(t=Oi(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Fi(e,t,n,r){return(e=Oi(7,e,r,t)).expirationTime=n,e}function ji(e,t,n,r){return e=Oi(8,e,r,t),t=0==(1&t)?Ut:zt,e.elementType=t,e.type=t,e.expirationTime=n,e}function Hi(e,t,n){return(e=Oi(6,e,null,t)).expirationTime=n,e}function $i(e,t,n){return(t=Oi(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ui(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),Vi(t,e)}function Wi(e,t){e.didError=!1;var n=e.latestPingedTime;0!==n&&n>=t&&(e.latestPingedTime=0),n=e.earliestPendingTime;var r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),Vi(t,e)}function Bi(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function Vi(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;0===(i=0!==i?i:o)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}var zi=!1;function qi(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Gi(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ki(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Yi(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Xi(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=qi(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=qi(e.memoizedState),i=n.updateQueue=qi(n.memoizedState)):r=e.updateQueue=Gi(i):null===i&&(i=n.updateQueue=Gi(r));null===i||r===i?Yi(r,t):null===r.lastUpdate||null===i.lastUpdate?(Yi(r,t),Yi(i,t)):(Yi(r,t),i.lastUpdate=t)}function Qi(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=qi(e.memoizedState):Ji(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Ji(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Gi(t)),t}function Zi(e,t,n,r,i,o){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(o,r,i):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null==(i="function"==typeof(e=n.payload)?e.call(o,r,i):e))break;return s({},r,i);case 2:zi=!0}return r}function eo(e,t,n,r,i){zi=!1;for(var o=(t=Ji(e,t)).baseState,s=null,a=0,l=t.firstUpdate,c=o;null!==l;){var u=l.expirationTime;u<i?(null===s&&(s=l,o=c),a<u&&(a=u)):(c=Zi(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(u=null,l=t.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<i?(null===u&&(u=l,null===s&&(o=c)),a<h&&(a=h)):(c=Zi(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===s&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===s&&null===u&&(o=c),t.baseState=o,t.firstUpdate=s,t.firstCapturedUpdate=u,e.expirationTime=a,e.memoizedState=c}function to(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),no(t.firstEffect,n),t.firstEffect=t.lastEffect=null,no(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function no(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&Q("191",n),n.call(r)}e=e.nextEffect}}function ro(e,t){return{value:e,source:t,stack:Zt(t)}}var io={current:null},oo=null,so=null,ao=null;function lo(e,t){var n=e.type._context;gi(io,n._currentValue),n._currentValue=t}function co(e){var t=io.current;mi(io),e.type._context._currentValue=t}function uo(e){oo=e,ao=so=null,e.firstContextDependency=null}function ho(e,t){return ao!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(ao=e,t=1073741823),t={context:e,observedBits:t,next:null},null===so?(null===oo&&Q("293"),oo.firstContextDependency=so=t):so=so.next=t),e._currentValue}var po={},fo={current:po},mo={current:po},go={current:po};function vo(e){return e===po&&Q("174"),e}function bo(e,t){gi(go,t),gi(mo,e),gi(fo,po);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zr(null,"");break;default:t=zr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}mi(fo),gi(fo,t)}function yo(e){mi(fo),mi(mo),mi(go)}function wo(e){vo(go.current);var t=vo(fo.current),n=zr(t,e.type);t!==n&&(gi(mo,e),gi(fo,n))}function ko(e){mo.current===e&&(mi(fo),mi(mo))}function Eo(e,t){if(e&&e.defaultProps)for(var n in t=s({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var xo=Rt.ReactCurrentOwner,So=(new G.Component).refs;function Co(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:s({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var _o={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===Gn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=da(),i=Ki(r=js(r,e));i.payload=t,null!=n&&(i.callback=n),Xi(e,i),Us(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=da(),i=Ki(r=js(r,e));i.tag=1,i.payload=t,null!=n&&(i.callback=n),Xi(e,i),Us(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=da(),r=Ki(n=js(n,e));r.tag=2,null!=t&&(r.callback=t),Xi(e,r),Us(e,n)}};function To(e,t,n,r,i,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!qn(n,r)||!qn(i,o))}function No(e,t,n){var r=!1,i=vi,o=t.contextType;return"object"==typeof o&&null!==o?o=xo.currentDispatcher.readContext(o):(i=Ei(t)?wi:bi.current,o=(r=null!=(r=t.contextTypes))?ki(e,i):vi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_o,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Po(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_o.enqueueReplaceState(t,t.state,null)}function Ao(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=So;var o=t.contextType;"object"==typeof o&&null!==o?i.context=xo.currentDispatcher.readContext(o):(o=Ei(t)?wi:bi.current,i.context=ki(e,o)),null!==(o=e.updateQueue)&&(eo(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(Co(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&_o.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(eo(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Lo=Array.isArray;function Mo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&Q("289"),r=n.stateNode),r||Q("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===So&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&Q("284"),n._owner||Q("290",e)}return e}function Oo(e,t){"textarea"!==e.type&&Q("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Io(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Ri(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function a(e,t,n,r){return null===t||6!==t.tag?((t=Hi(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Mo(e,t,n),r.return=e,r):((r=Di(n.type,n.key,n.props,null,e.mode,r)).ref=Mo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$i(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=Fi(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Hi(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case jt:return(n=Di(t.type,t.key,t.props,null,e.mode,n)).ref=Mo(e,null,t),n.return=e,n;case Ht:return(t=$i(t,e.mode,n)).return=e,t}if(Lo(t)||Qt(t))return(t=Fi(t,e.mode,n,null)).return=e,t;Oo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case jt:return n.key===i?n.type===$t?u(e,t,n.props.children,r,i):l(e,t,n,r):null;case Ht:return n.key===i?c(e,t,n,r):null}if(Lo(n)||Qt(n))return null!==i?null:u(e,t,n,r,null);Oo(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return a(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case jt:return e=e.get(null===r.key?n:r.key)||null,r.type===$t?u(t,e,r.props.children,i,r.key):l(t,e,r,i);case Ht:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Lo(r)||Qt(r))return u(t,e=e.get(n)||null,r,i,null);Oo(t,r)}return null}function f(i,s,a,l){for(var c=null,u=null,f=s,m=s=0,g=null;null!==f&&m<a.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=d(i,f,a[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(i,f),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,f=g}if(m===a.length)return n(i,f),c;if(null===f){for(;m<a.length;m++)(f=h(i,a[m],l))&&(s=o(f,s,m),null===u?c=f:u.sibling=f,u=f);return c}for(f=r(i,f);m<a.length;m++)(g=p(f,i,m,a[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach(function(e){return t(i,e)}),c}function m(i,s,a,l){var c=Qt(a);"function"!=typeof c&&Q("150"),null==(a=c.call(a))&&Q("151");for(var u=c=null,f=s,m=s=0,g=null,v=a.next();null!==f&&!v.done;m++,v=a.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=d(i,f,v.value,l);if(null===b){f||(f=g);break}e&&f&&null===b.alternate&&t(i,f),s=o(b,s,m),null===u?c=b:u.sibling=b,u=b,f=g}if(v.done)return n(i,f),c;if(null===f){for(;!v.done;m++,v=a.next())null!==(v=h(i,v.value,l))&&(s=o(v,s,m),null===u?c=v:u.sibling=v,u=v);return c}for(f=r(i,f);!v.done;m++,v=a.next())null!==(v=p(f,i,m,v.value,l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(i,e)}),c}return function(e,r,o,a){var l="object"==typeof o&&null!==o&&o.type===$t&&null===o.key;l&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case jt:e:{for(c=o.key,l=r;null!==l;){if(l.key===c){if(7===l.tag?o.type===$t:l.elementType===o.type){n(e,l.sibling),(r=i(l,o.type===$t?o.props.children:o.props)).ref=Mo(e,l,o),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}o.type===$t?((r=Fi(o.props.children,e.mode,a,o.key)).return=e,e=r):((a=Di(o.type,o.key,o.props,null,e.mode,a)).ref=Mo(e,r,o),a.return=e,e=a)}return s(e);case Ht:e:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$i(o,e.mode,a)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Hi(o,e.mode,a)).return=e,e=r),s(e);if(Lo(o))return f(e,r,o,a);if(Qt(o))return m(e,r,o,a);if(c&&Oo(e,o),void 0===o&&!l)switch(e.tag){case 1:case 0:Q("152",(a=e.type).displayName||a.name||"Component")}return n(e,r)}}var Ro=Io(!0),Do=Io(!1),Fo=null,jo=null,Ho=!1;function $o(e,t){var n=Oi(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Uo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wo(e){if(Ho){var t=jo;if(t){var n=t;if(!Uo(e,t)){if(!(t=hi(n))||!Uo(e,t))return e.effectTag|=2,Ho=!1,void(Fo=e);$o(Fo,n)}Fo=e,jo=di(t)}else e.effectTag|=2,Ho=!1,Fo=e}}function Bo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;Fo=e}function Vo(e){if(e!==Fo)return!1;if(!Ho)return Bo(e),Ho=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!li(t,e.memoizedProps))for(t=jo;t;)$o(e,t),t=hi(t);return Bo(e),jo=Fo?hi(e.stateNode):null,!0}function zo(){jo=Fo=null,Ho=!1}var qo=Rt.ReactCurrentOwner;function Go(e,t,n,r){t.child=null===e?Do(t,null,n,r):Ro(t,e.child,n,r)}function Ko(e,t,n,r,i){n=n.render;var o=t.ref;return uo(t),r=n(r,o),t.effectTag|=1,Go(e,t,r,i),t.child}function Yo(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!=typeof s||Ii(s)||void 0!==s.defaultProps||null!==n.compare?((e=Di(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Xo(e,t,s,r,i,o))}return s=e.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:qn)(i,r)&&e.ref===t.ref)?rs(e,t,o):(t.effectTag|=1,(e=Ri(s,r)).ref=t.ref,e.return=t,t.child=e)}function Xo(e,t,n,r,i,o){return null!==e&&i<o&&qn(e.memoizedProps,r)&&e.ref===t.ref?rs(e,t,o):Jo(e,t,n,r,o)}function Qo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Jo(e,t,n,r,i){var o=Ei(n)?wi:bi.current;return o=ki(t,o),uo(t),n=n(r,o),t.effectTag|=1,Go(e,t,n,i),t.child}function Zo(e,t,n,r,i){if(Ei(n)){var o=!0;Ti(t)}else o=!1;if(uo(t),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),No(t,n,r),Ao(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=xo.currentDispatcher.readContext(c):c=ki(t,c=Ei(n)?wi:bi.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Po(t,s,r,c),zi=!1;var d=t.memoizedState;l=s.state=d;var p=t.updateQueue;null!==p&&(eo(t,p,r,s,i),l=t.memoizedState),a!==r||d!==l||yi.current||zi?("function"==typeof u&&(Co(t,n,u,r),l=t.memoizedState),(a=zi||To(t,n,a,r,d,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.effectTag|=4)):("function"==typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"==typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,a=t.memoizedProps,s.props=t.type===t.elementType?a:Eo(t.type,a),l=s.context,"object"==typeof(c=n.contextType)&&null!==c?c=xo.currentDispatcher.readContext(c):c=ki(t,c=Ei(n)?wi:bi.current),(h="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Po(t,s,r,c),zi=!1,l=t.memoizedState,d=s.state=l,null!==(p=t.updateQueue)&&(eo(t,p,r,s,i),d=t.memoizedState),a!==r||l!==d||yi.current||zi?("function"==typeof u&&(Co(t,n,u,r),d=t.memoizedState),(u=zi||To(t,n,a,r,l,d,c))?(h||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,c)),"function"==typeof s.componentDidUpdate&&(t.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=c,r=u):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return es(e,t,n,r,o,i)}function es(e,t,n,r,i,o){Qo(e,t);var s=0!=(64&t.effectTag);if(!r&&!s)return i&&Ni(t,n,!1),rs(e,t,o);r=t.stateNode,qo.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=Ro(t,e.child,null,o),t.child=Ro(t,null,a,o)):Go(e,t,a,o),t.memoizedState=r.state,i&&Ni(t,n,!0),t.child}function ts(e){var t=e.stateNode;t.pendingContext?Ci(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ci(0,t.context,!1),bo(e,t.containerInfo)}function ns(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0==(64&t.effectTag)){o=null;var s=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},s=!0,t.effectTag&=-65;return null===e?s?(s=i.fallback,i=Fi(null,r,0,null),0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),r=Fi(s,r,n,null),i.sibling=r,(n=i).return=r.return=t):n=r=Do(t,null,i.children,n):null!==e.memoizedState?(e=(r=e.child).sibling,s?(n=i.fallback,i=Ri(r,r.pendingProps),0==(1&t.mode)&&((s=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=s)),r=i.sibling=Ri(e,n,e.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=Ro(t,r.child,i.children,n)):(e=e.child,s?(s=i.fallback,(i=Fi(null,r,0,null)).child=e,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Fi(s,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=Ro(t,e,i.children,n)),t.memoizedState=o,t.child=n,r}function rs(e,t,n){if(null!==e&&(t.firstContextDependency=e.firstContextDependency),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&Q("153"),null!==t.child){for(n=Ri(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ri(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function is(e,t,n){var r=t.expirationTime;if(null!==e&&e.memoizedProps===t.pendingProps&&!yi.current&&r<n){switch(t.tag){case 3:ts(t),zo();break;case 5:wo(t);break;case 1:Ei(t.type)&&Ti(t);break;case 4:bo(t,t.stateNode.containerInfo);break;case 10:lo(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?ns(e,t,n):null!==(t=rs(e,t,n))?t.sibling:null}return rs(e,t,n)}switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=ki(t,bi.current);if(uo(t),i=r(e,i),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Ei(r)){var o=!0;Ti(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&Co(t,r,s,e),i.updater=_o,t.stateNode=i,i._reactInternalFiber=t,Ao(t,r,e,n),t=es(null,t,r,!0,o,n)}else t.tag=0,Go(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),o=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:throw e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"==typeof e)return Ii(e)?1:0;if(null!=e){if((e=e.$$typeof)===qt)return 11;if(e===Kt)return 14}return 2}(e),o=Eo(e,o),s=void 0,i){case 0:s=Jo(null,t,e,o,n);break;case 1:s=Zo(null,t,e,o,n);break;case 11:s=Ko(null,t,e,o,n);break;case 14:s=Yo(null,t,e,Eo(e.type,o),r,n);break;default:Q("283",e)}return s;case 0:return r=t.type,i=t.pendingProps,Jo(e,t,r,i=t.elementType===r?i:Eo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Zo(e,t,r,i=t.elementType===r?i:Eo(r,i),n);case 3:return ts(t),null===(r=t.updateQueue)&&Q("282"),i=null!==(i=t.memoizedState)?i.element:null,eo(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(zo(),t=rs(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(jo=di(t.stateNode.containerInfo),Fo=t,i=Ho=!0),i?(t.effectTag|=2,t.child=Do(t,null,r,n)):(Go(e,t,r,n),zo()),t=t.child),t;case 5:return wo(t),null===e&&Wo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,li(r,i)?s=null:null!==o&&li(r,o)&&(t.effectTag|=16),Qo(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=1,t=null):(Go(e,t,s,n),t=t.child),t;case 6:return null===e&&Wo(t),null;case 13:return ns(e,t,n);case 4:return bo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ro(t,null,r,n):Go(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Eo(r,i),n);case 7:return Go(e,t,t.pendingProps,n),t.child;case 8:case 12:return Go(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,lo(t,o=i.value),null!==s){var a=s.value;if(0===(o=a===o&&(0!==a||1/a==1/o)||a!=a&&o!=o?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(a,o):1073741823))){if(s.children===i.children&&!yi.current){t=rs(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){if(null!==(a=s.firstContextDependency))do{if(a.context===r&&0!=(a.observedBits&o)){if(1===s.tag){var l=Ki(n);l.tag=2,Xi(s,l)}s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n);for(var c=s.return;null!==c;){if(l=c.alternate,c.childExpirationTime<n)c.childExpirationTime=n,null!==l&&l.childExpirationTime<n&&(l.childExpirationTime=n);else{if(!(null!==l&&l.childExpirationTime<n))break;l.childExpirationTime=n}c=c.return}}l=s.child,a=a.next}while(null!==a);else l=10===s.tag&&s.type===t.type?null:s.child;if(null!==l)l.return=s;else for(l=s;null!==l;){if(l===t){l=null;break}if(null!==(s=l.sibling)){s.return=l.return,l=s;break}l=l.return}s=l}}Go(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,uo(t),r=r(i=ho(i,o.unstable_observedBits)),t.effectTag|=1,Go(e,t,r,n),t.child;case 14:return Yo(e,t,i=t.type,o=Eo(i.type,t.pendingProps),r,n);case 15:return Xo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Eo(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Ei(r)?(e=!0,Ti(t)):e=!1,uo(t),No(t,r,i),Ao(t,r,i,n),es(null,t,r,!0,e,n);default:Q("156")}}function os(e){e.effectTag|=4}var ss=void 0,as=void 0,ls=void 0,cs=void 0;function us(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=Zt(n)),null!==n&&Jt(n.type),t=t.value,null!==e&&1===e.tag&&Jt(e.type);try{console.error(t)}catch(i){setTimeout(function(){throw i})}}function hs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(n){Fs(e,n)}else t.current=null}function ds(e){switch("function"==typeof Ai&&Ai(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(null!==r){var i=e;try{r()}catch(o){Fs(i,o)}}n=n.next}while(n!==t)}break;case 1:if(hs(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Fs(e,o)}break;case 5:hs(e);break;case 4:ms(e)}}function ps(e){return 5===e.tag||3===e.tag||4===e.tag}function fs(e){e:{for(var t=e.return;null!==t;){if(ps(t)){var n=t;break e}t=t.return}Q("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:Q("161")}16&n.effectTag&&(Yr(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ps(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,s=i.stateNode,a=n;8===o.nodeType?o.parentNode.insertBefore(s,a):o.insertBefore(s,a)}else t.insertBefore(i.stateNode,n);else r?(s=t,a=i.stateNode,8===s.nodeType?(o=s.parentNode).insertBefore(a,s):(o=s).appendChild(a),null!=(s=s._reactRootContainer)||null!==o.onclick||(o.onclick=ii)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ms(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&Q("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,s=o;;)if(ds(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===o)break;for(;null===s.sibling;){if(null===s.return||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(o=r,s=t.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag?(r=t.stateNode.containerInfo,i=!0):ds(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function gs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Ce]=r,"input"===e&&"radio"===r.type&&null!=r.name&&pn(n,r),ni(e,i),t=ni(e,r),i=0;i<o.length;i+=2){var s=o[i],a=o[i+1];"style"===s?Zr(n,a):"dangerouslySetInnerHTML"===s?Kr(n,a):"children"===s?Yr(n,a):cn(n,s,a,t)}switch(e){case"input":fn(n,r);break;case"textarea":Ur(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?jr(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?jr(n,!!r.multiple,r.defaultValue,!0):jr(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:null===t.stateNode&&Q("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(e=t,null===(n=t.memoizedState)?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=da())),null!==e)e:for(t=n=e;;){if(5===t.tag)e=t.stateNode,r?e.style.display="none":(e=t.stateNode,o=null!=(o=t.memoizedProps.style)&&o.hasOwnProperty("display")?o.display:null,e.style.display=Jr("display",o));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState){(e=t.child.sibling).return=t,t=e;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break e;for(;null===t.sibling;){if(null===t.return||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}break;case 17:break;default:Q("163")}}function vs(e,t,n){(n=Ki(n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){xa(r),us(e,t)},n}function bs(e,t,n){(n=Ki(n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ms?Ms=new Set([this]):Ms.add(this));var n=t.value,i=t.stack;us(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function ys(e){switch(e.tag){case 1:Ei(e.type)&&xi();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return yo(),Si(),0!=(64&(t=e.effectTag))&&Q("285"),e.effectTag=-2049&t|64,e;case 5:return ko(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 4:return yo(),null;case 10:return co(e),null;default:return null}}ss=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},as=function(){},ls=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var a=t.stateNode;switch(vo(fo.current),e=null,n){case"input":o=hn(a,o),r=hn(a,r),e=[];break;case"option":o=Fr(a,o),r=Fr(a,r),e=[];break;case"select":o=s({},o,{value:void 0}),r=s({},r,{value:void 0}),e=[];break;case"textarea":o=Hr(a,o),r=Hr(a,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(a.onclick=ii)}ti(n,r),a=n=void 0;var l=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var c=o[n];for(a in c)c.hasOwnProperty(a)&&(l||(l={}),l[a]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(ue.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var u=r[n];if(c=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&u!==c&&(null!=u||null!=c))if("style"===n)if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(l||(l={}),l[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(l||(l={}),l[a]=u[a])}else l||(e||(e=[]),e.push(n,l)),l=u;else"dangerouslySetInnerHTML"===n?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(n,""+u)):"children"===n?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(n,""+u):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(ue.hasOwnProperty(n)?(null!=u&&ri(i,n),e||c===u||(e=[])):(e=e||[]).push(n,u))}l&&(e=e||[]).push("style",l),i=e,(t.updateQueue=i)&&os(t)}},cs=function(e,t,n,r){n!==r&&os(t)};var ws={readContext:ho},ks=Rt.ReactCurrentOwner,Es=1073741822,xs=0,Ss=!1,Cs=null,_s=null,Ts=0,Ns=-1,Ps=!1,As=null,Ls=!1,Ms=null;function Os(){if(null!==Cs)for(var e=Cs.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!=n&&xi();break;case 3:yo(),Si();break;case 5:ko(t);break;case 4:yo();break;case 10:co(t)}e=e.return}_s=null,Ts=0,Ns=-1,Ps=!1,Cs=null}function Is(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){Cs=e;e:{var i=t,o=Ts,a=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Ei(t.type)&&xi();break;case 3:yo(),Si(),(a=t.stateNode).pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==i&&null!==i.child||(Vo(t),t.effectTag&=-3),as(t);break;case 5:ko(t);var l=vo(go.current);if(o=t.type,null!==i&&null!=t.stateNode)ls(i,t,o,a,l),i.ref!==t.ref&&(t.effectTag|=128);else if(a){var c=vo(fo.current);if(Vo(t)){i=(a=t).stateNode;var u=a.type,h=a.memoizedProps,d=l;switch(i[Se]=a,i[Ce]=h,o=void 0,l=u){case"iframe":case"object":gr("load",i);break;case"video":case"audio":for(u=0;u<qe.length;u++)gr(qe[u],i);break;case"source":gr("error",i);break;case"img":case"image":case"link":gr("error",i),gr("load",i);break;case"form":gr("reset",i),gr("submit",i);break;case"details":gr("toggle",i);break;case"input":dn(i,h),gr("invalid",i),ri(d,"onChange");break;case"select":i._wrapperState={wasMultiple:!!h.multiple},gr("invalid",i),ri(d,"onChange");break;case"textarea":$r(i,h),gr("invalid",i),ri(d,"onChange")}for(o in ti(l,h),u=null,h)h.hasOwnProperty(o)&&(c=h[o],"children"===o?"string"==typeof c?i.textContent!==c&&(u=["children",c]):"number"==typeof c&&i.textContent!==""+c&&(u=["children",""+c]):ue.hasOwnProperty(o)&&null!=c&&ri(d,o));switch(l){case"input":Ot(i),mn(i,h,!0);break;case"textarea":Ot(i),Wr(i);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(i.onclick=ii)}o=u,a.updateQueue=o,(a=null!==o)&&os(t)}else{h=t,i=o,d=a,u=9===l.nodeType?l:l.ownerDocument,c===Br.html&&(c=Vr(i)),c===Br.html?"script"===i?((i=u.createElement("div")).innerHTML="<script><\/script>",u=i.removeChild(i.firstChild)):"string"==typeof d.is?u=u.createElement(i,{is:d.is}):(u=u.createElement(i),"select"===i&&d.multiple&&(u.multiple=!0)):u=u.createElementNS(c,i),(i=u)[Se]=h,i[Ce]=a,ss(i,t,!1,!1),d=i;var p=l,f=ni(u=o,h=a);switch(u){case"iframe":case"object":gr("load",d),l=h;break;case"video":case"audio":for(l=0;l<qe.length;l++)gr(qe[l],d);l=h;break;case"source":gr("error",d),l=h;break;case"img":case"image":case"link":gr("error",d),gr("load",d),l=h;break;case"form":gr("reset",d),gr("submit",d),l=h;break;case"details":gr("toggle",d),l=h;break;case"input":dn(d,h),l=hn(d,h),gr("invalid",d),ri(p,"onChange");break;case"option":l=Fr(d,h);break;case"select":d._wrapperState={wasMultiple:!!h.multiple},l=s({},h,{value:void 0}),gr("invalid",d),ri(p,"onChange");break;case"textarea":$r(d,h),l=Hr(d,h),gr("invalid",d),ri(p,"onChange");break;default:l=h}ti(u,l),c=void 0;var m=u,g=d,v=l;for(c in v)if(v.hasOwnProperty(c)){var b=v[c];"style"===c?Zr(g,b):"dangerouslySetInnerHTML"===c?null!=(b=b?b.__html:void 0)&&Kr(g,b):"children"===c?"string"==typeof b?("textarea"!==m||""!==b)&&Yr(g,b):"number"==typeof b&&Yr(g,""+b):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(ue.hasOwnProperty(c)?null!=b&&ri(p,c):null!=b&&cn(g,c,b,f))}switch(u){case"input":Ot(d),mn(d,h,!1);break;case"textarea":Ot(d),Wr(d);break;case"option":null!=h.value&&d.setAttribute("value",""+un(h.value));break;case"select":(l=d).multiple=!!h.multiple,null!=(d=h.value)?jr(l,!!h.multiple,d,!1):null!=h.defaultValue&&jr(l,!!h.multiple,h.defaultValue,!0);break;default:"function"==typeof l.onClick&&(d.onclick=ii)}(a=ai(o,a))&&os(t),t.stateNode=i}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&Q("166");break;case 6:i&&null!=t.stateNode?cs(i,t,i.memoizedProps,a):("string"!=typeof a&&(null===t.stateNode&&Q("166")),i=vo(go.current),vo(fo.current),Vo(t)?(o=(a=t).stateNode,i=a.memoizedProps,o[Se]=a,(a=o.nodeValue!==i)&&os(t)):(o=t,(a=(9===i.nodeType?i:i.ownerDocument).createTextNode(a))[Se]=t,o.stateNode=a));break;case 11:break;case 13:if(a=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=o,Cs=t;break e}a=null!==a,o=null!==i&&null!==i.memoizedState,null!==i&&!a&&o&&(null!==(i=i.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=i,i.nextEffect=l):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),(a!==o||0==(1&t.effectTag)&&a)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:yo(),as(t);break;case 10:co(t);break;case 9:case 14:break;case 17:Ei(t.type)&&xi();break;default:Q("156")}Cs=null}if(t=e,1===Ts||1!==t.childExpirationTime){for(a=0,o=t.child;null!==o;)(i=o.expirationTime)>a&&(a=i),(l=o.childExpirationTime)>a&&(a=l),o=o.sibling;t.childExpirationTime=a}if(null!==Cs)return Cs;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=ys(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Rs(e){var t=is(e.alternate,e,Ts);return e.memoizedProps=e.pendingProps,null===t&&(t=Is(e)),ks.current=null,t}function Ds(e,t){Ss&&Q("243"),Ss=!0,ks.currentDispatcher=ws;var n=e.nextExpirationTimeToWorkOn;n===Ts&&e===_s&&null!==Cs||(Os(),Ts=n,Cs=Ri((_s=e).current,null),e.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(t)for(;null!==Cs&&!va();)Cs=Rs(Cs);else for(;null!==Cs;)Cs=Rs(Cs)}catch(y){if(ao=so=oo=null,null===Cs)r=!0,xa(y);else{null===Cs&&Q("271");var i=Cs,o=i.return;if(null!==o){e:{var s=e,a=o,l=i,c=y;if(o=Ts,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c;c=a;var h=-1,d=-1;do{if(13===c.tag){var p=c.alternate;if(null!==p&&null!==(p=p.memoizedState)){d=10*(1073741822-p.timedOutAt);break}"number"==typeof(p=c.pendingProps.maxDuration)&&(0>=p?h=0:(-1===h||p<h)&&(h=p))}c=c.return}while(null!==c);c=a;do{if((p=13===c.tag)&&(p=void 0!==c.memoizedProps.fallback&&null===c.memoizedState),p){if(a=Hs.bind(null,s,c,l,0==(1&c.mode)?1073741823:o),u.then(a,a),0==(1&c.mode)){c.effectTag|=64,l.effectTag&=-1957,1===l.tag&&null===l.alternate&&(l.tag=17),l.expirationTime=o;break e}-1===h?s=1073741823:(-1===d&&(d=10*(1073741822-Bi(s,o))-5e3),s=d+h),0<=s&&Ns<s&&(Ns=s),c.effectTag|=2048,c.expirationTime=o;break e}c=c.return}while(null!==c);c=Error((Jt(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Zt(l))}Ps=!0,c=ro(c,l),s=a;do{switch(s.tag){case 3:l=c,s.effectTag|=2048,s.expirationTime=o,Qi(s,o=vs(s,l,o));break e;case 1:if(l=c,a=s.type,u=s.stateNode,0==(64&s.effectTag)&&("function"==typeof a.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===Ms||!Ms.has(u)))){s.effectTag|=2048,s.expirationTime=o,Qi(s,o=bs(s,l,o));break e}}s=s.return}while(null!==s)}Cs=Is(i);continue}r=!0,xa(y)}}break}if(Ss=!1,ao=so=oo=ks.currentDispatcher=null,r)_s=null,e.finishedWork=null;else if(null!==Cs)e.finishedWork=null;else{if(null===(r=e.current.alternate)&&Q("281"),_s=null,Ps){if(i=e.latestPendingTime,o=e.latestSuspendedTime,s=e.latestPingedTime,0!==i&&i<n||0!==o&&o<n||0!==s&&s<n)return Wi(e,n),void ha(e,r,n,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,n=e.nextExpirationTimeToWorkOn=n,t=e.expirationTime=1073741823,void ha(e,r,n,t,-1)}t&&-1!==Ns?(Wi(e,n),(t=10*(1073741822-Bi(e,n)))<Ns&&(Ns=t),t=10*(1073741822-da()),t=Ns-t,ha(e,r,n,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=n,e.finishedWork=r)}}function Fs(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ms||!Ms.has(r)))return Xi(n,e=bs(n,e=ro(t,e),1073741823)),void Us(n,1073741823);break;case 3:return Xi(n,e=vs(n,e=ro(t,e),1073741823)),void Us(n,1073741823)}n=n.return}3===e.tag&&(Xi(e,n=vs(e,n=ro(t,e),1073741823)),Us(e,1073741823))}function js(e,t){return 0!==xs?e=xs:Ss?e=Ls?1073741823:Ts:1&t.mode?(e=ta?1073741822-10*(1+((1073741822-e+15)/10|0)):1073741822-25*(1+((1073741822-e+500)/25|0)),null!==_s&&e===Ts&&--e):e=1073741823,ta&&(0===Xs||e<Xs)&&(Xs=e),e}function Hs(e,t,n,r){var i=e.earliestSuspendedTime,o=e.latestSuspendedTime;if(0!==i&&r<=i&&r>=o){o=i=r,e.didError=!1;var s=e.latestPingedTime;(0===s||s>o)&&(e.latestPingedTime=o),Vi(o,e)}else Ui(e,i=js(i=da(),t));0!=(1&t.mode)&&e===_s&&Ts===r&&(_s=null),$s(t,i),0==(1&t.mode)&&($s(n,i),1===n.tag&&null!==n.stateNode&&((t=Ki(i)).tag=2,Xi(n,t))),0!==(n=e.expirationTime)&&pa(e,n)}function $s(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Us(e,t){null!==(e=$s(e,t))&&(!Ss&&0!==Ts&&t>Ts&&Os(),Ui(e,t),Ss&&!Ls&&_s===e||pa(e,e.expirationTime),aa>sa&&(aa=0,Q("185")))}function Ws(e,t,n,r,i){var o=xs;xs=1073741823;try{return e(t,n,r,i)}finally{xs=o}}var Bs=null,Vs=null,zs=0,qs=void 0,Gs=!1,Ks=null,Ys=0,Xs=0,Qs=!1,Js=null,Zs=!1,ea=!1,ta=!1,na=null,ra=X.unstable_now(),ia=1073741822-(ra/10|0),oa=ia,sa=50,aa=0,la=null;function ca(){ia=1073741822-((X.unstable_now()-ra)/10|0)}function ua(e,t){if(0!==zs){if(t<zs)return;null!==qs&&X.unstable_cancelCallback(qs)}zs=t,e=X.unstable_now()-ra,qs=X.unstable_scheduleCallback(ba,{timeout:10*(1073741822-t)-e})}function ha(e,t,n,r,i){e.expirationTime=r,0!==i||va()?0<i&&(e.timeoutHandle=ci(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,ca(),oa=ia,wa(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function da(){return Gs?oa:(fa(),0!==Ys&&1!==Ys||(ca(),oa=ia),oa)}function pa(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===Vs?(Bs=Vs=e,e.nextScheduledRoot=e):(Vs=Vs.nextScheduledRoot=e).nextScheduledRoot=Bs):t>e.expirationTime&&(e.expirationTime=t),Gs||(Zs?ea&&(Ks=e,Ys=1073741823,ka(e,1073741823,!1)):1073741823===t?ya(1073741823,!1):ua(e,t))}function fa(){var e=0,t=null;if(null!==Vs)for(var n=Vs,r=Bs;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===Vs)&&Q("244"),r===r.nextScheduledRoot){Bs=Vs=r.nextScheduledRoot=null;break}if(r===Bs)Bs=i=r.nextScheduledRoot,Vs.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===Vs){(Vs=n).nextScheduledRoot=Bs,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===Vs)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}Ks=t,Ys=e}var ma=!1;function va(){return!!ma||!!X.unstable_shouldYield()&&(ma=!0)}function ba(){try{if(!va()&&null!==Bs){ca();var e=Bs;do{var t=e.expirationTime;0!==t&&ia<=t&&(e.nextExpirationTimeToWorkOn=ia),e=e.nextScheduledRoot}while(e!==Bs)}ya(0,!0)}finally{ma=!1}}function ya(e,t){if(fa(),t)for(ca(),oa=ia;null!==Ks&&0!==Ys&&e<=Ys&&!(ma&&ia>Ys);)ka(Ks,Ys,ia>Ys),fa(),ca(),oa=ia;else for(;null!==Ks&&0!==Ys&&e<=Ys;)ka(Ks,Ys,!1),fa();if(t&&(zs=0,qs=null),0!==Ys&&ua(Ks,Ys),aa=0,la=null,null!==na)for(e=na,na=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){Qs||(Qs=!0,Js=r)}}if(Qs)throw e=Js,Js=null,Qs=!1,e}function wa(e,t){Gs&&Q("253"),Ks=e,Ys=t,ka(e,t,!1),ya(1073741823,!1)}function ka(e,t,n){if(Gs&&Q("245"),Gs=!0,n){var r=e.finishedWork;null!==r?Ea(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,ui(r)),Ds(e,n),null!==(r=e.finishedWork)&&(va()?e.finishedWork=r:Ea(e,r,t)))}else null!==(r=e.finishedWork)?Ea(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,ui(r)),Ds(e,n),null!==(r=e.finishedWork)&&Ea(e,r,t));Gs=!1}function Ea(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===na?na=[r]:na.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===la?aa++:(la=e,aa=0),Ls=Ss=!0,e.current===t&&Q("177"),0===(n=e.pendingCommitExpirationTime)&&Q("261"),e.pendingCommitExpirationTime=0,r=t.expirationTime;var i=t.childExpirationTime;if(r=i>r?i:r,e.didError=!1,0===r?(e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0):(0!==(i=e.latestPendingTime)&&(i>r?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>r&&(e.earliestPendingTime=e.latestPendingTime)),0===(i=e.earliestSuspendedTime)?Ui(e,r):r<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Ui(e,r)):r>i&&Ui(e,r)),Vi(0,e),ks.current=null,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,oi=mr,Nr(i=Tr())){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{var s=(o=(o=i.ownerDocument)&&o.defaultView||window).getSelection&&o.getSelection();if(s&&0!==s.rangeCount){o=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{o.nodeType,l.nodeType}catch(R){o=null;break e}var c=0,u=-1,h=-1,d=0,p=0,f=i,m=null;t:for(;;){for(var g;f!==o||0!==a&&3!==f.nodeType||(u=c+a),f!==l||0!==s&&3!==f.nodeType||(h=c+s),3===f.nodeType&&(c+=f.nodeValue.length),null!==(g=f.firstChild);)m=f,f=g;for(;;){if(f===i)break t;if(m===o&&++d===a&&(u=c),m===l&&++p===s&&(h=c),null!==(g=f.nextSibling))break;m=(f=m).parentNode}f=g}o=-1===u||-1===h?null:{start:u,end:h}}else o=null}o=o||{start:0,end:0}}else o=null;for(si={focusedElem:i,selectionRange:o},mr=!1,As=r;null!==As;){i=!1,o=void 0;try{for(;null!==As;){if(256&As.effectTag)e:{var v=As.alternate;switch((a=As).tag){case 0:case 11:case 15:break e;case 1:if(256&a.effectTag&&null!==v){var b=v.memoizedProps,y=v.memoizedState,w=a.stateNode,k=w.getSnapshotBeforeUpdate(a.elementType===a.type?b:Eo(a.type,b),y);w.__reactInternalSnapshotBeforeUpdate=k}break e;case 3:case 5:case 6:case 4:case 17:break e;default:Q("163")}}As=As.nextEffect}}catch(R){i=!0,o=R}i&&(null===As&&Q("178"),Fs(As,o),null!==As&&(As=As.nextEffect))}for(As=r;null!==As;){v=!1,b=void 0;try{for(;null!==As;){var E=As.effectTag;if(16&E&&Yr(As.stateNode,""),128&E){var x=As.alternate;if(null!==x){var S=x.ref;null!==S&&("function"==typeof S?S(null):S.current=null)}}switch(14&E){case 2:fs(As),As.effectTag&=-3;break;case 6:fs(As),As.effectTag&=-3,gs(As.alternate,As);break;case 4:gs(As.alternate,As);break;case 8:ms(y=As),y.return=null,y.child=null,y.alternate&&(y.alternate.child=null,y.alternate.return=null)}As=As.nextEffect}}catch(R){v=!0,b=R}v&&(null===As&&Q("178"),Fs(As,b),null!==As&&(As=As.nextEffect))}if(S=si,x=Tr(),E=S.focusedElem,b=S.selectionRange,x!==E&&E&&E.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(E.ownerDocument.documentElement,E)){null!==b&&Nr(E)&&(x=b.start,void 0===(S=b.end)&&(S=x),"selectionStart"in E?(E.selectionStart=x,E.selectionEnd=Math.min(S,E.value.length)):(S=(x=E.ownerDocument||document)&&x.defaultView||window).getSelection&&(S=S.getSelection(),y=E.textContent.length,v=Math.min(b.start,y),b=void 0===b.end?v:Math.min(b.end,y),!S.extend&&v>b&&(y=b,b=v,v=y),y=_r(E,v),w=_r(E,b),y&&w&&(1!==S.rangeCount||S.anchorNode!==y.node||S.anchorOffset!==y.offset||S.focusNode!==w.node||S.focusOffset!==w.offset)&&((x=x.createRange()).setStart(y.node,y.offset),S.removeAllRanges(),v>b?(S.addRange(x),S.extend(w.node,w.offset)):(x.setEnd(w.node,w.offset),S.addRange(x))))),x=[];for(S=E;S=S.parentNode;)1===S.nodeType&&x.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"==typeof E.focus&&E.focus(),E=0;E<x.length;E++)(S=x[E]).element.scrollLeft=S.left,S.element.scrollTop=S.top}for(si=null,mr=!!oi,oi=null,e.current=t,As=r;null!==As;){r=!1,E=void 0;try{for(x=n;null!==As;){var C=As.effectTag;if(36&C){var _=As.alternate;switch(v=x,(S=As).tag){case 0:case 11:case 15:break;case 1:var T=S.stateNode;if(4&S.effectTag)if(null===_)T.componentDidMount();else{var N=S.elementType===S.type?_.memoizedProps:Eo(S.type,_.memoizedProps);T.componentDidUpdate(N,_.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var P=S.updateQueue;null!==P&&to(0,P,T);break;case 3:var A=S.updateQueue;if(null!==A){if(b=null,null!==S.child)switch(S.child.tag){case 5:b=S.child.stateNode;break;case 1:b=S.child.stateNode}to(0,A,b)}break;case 5:var L=S.stateNode;null===_&&4&S.effectTag&&ai(S.type,S.memoizedProps)&&L.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:Q("163")}}if(128&C){var M=As.ref;if(null!==M){var O=As.stateNode;switch(As.tag){case 5:var I=O;break;default:I=O}"function"==typeof M?M(I):M.current=I}}As=As.nextEffect}}catch(R){r=!0,E=R}r&&(null===As&&Q("178"),Fs(As,E),null!==As&&(As=As.nextEffect))}Ss=Ls=!1,"function"==typeof Pi&&Pi(t.stateNode),C=t.expirationTime,0===(t=(t=t.childExpirationTime)>C?t:C)&&(Ms=null),e.expirationTime=t,e.finishedWork=null}function xa(e){null===Ks&&Q("246"),Ks.expirationTime=0,Qs||(Qs=!0,Js=e)}function Sa(e,t){var n=Zs;Zs=!0;try{return e(t)}finally{(Zs=n)||Gs||ya(1073741823,!1)}}function Ca(e,t){if(Zs&&!ea){ea=!0;try{return e(t)}finally{ea=!1}}return e(t)}function _a(e,t,n){if(ta)return e(t,n);Zs||Gs||0===Xs||(ya(Xs,!1),Xs=0);var r=ta,i=Zs;Zs=ta=!0;try{return e(t,n)}finally{ta=r,(Zs=i)||Gs||ya(1073741823,!1)}}function Ta(e,t,n,r,i){var o=t.current;e:if(n){t:{2===Gn(n=n._reactInternalFiber)&&1===n.tag||Q("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Ei(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);Q("171"),s=void 0}if(1===n.tag){var a=n.type;if(Ei(a)){n=_i(n,a,s);break e}}n=s}else n=vi;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=Ki(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Xi(o,i),Us(o,r),r}function Na(e,t,n,r){var i=t.current;return Ta(e,t,n,i=js(da(),i),r)}function Pa(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Aa(e){var t=1073741822-25*(1+((1073741822-da()+500)/25|0));t>=Es&&(t=Es-1),this._expirationTime=Es=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function La(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Ma(e,t,n){e={current:t=Oi(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Oa(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ia(e,t,n,r,i){Oa(n)||Q("200");var o=n._reactRootContainer;if(o){if("function"==typeof i){var s=i;i=function(){var e=Pa(o._internalRoot);s.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Ma(e,!1,t)}(n,r),"function"==typeof i){var a=i;i=function(){var e=Pa(o._internalRoot);a.call(e)}}Ca(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Pa(o._internalRoot)}function Ra(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Oa(t)||Q("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ht,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}vt=function(e,t,n){switch(t){case"input":if(fn(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Pe(r);i||Q("90"),It(r),fn(r,i)}}}break;case"textarea":Ur(e,n);break;case"select":null!=(t=n.value)&&jr(e,!!n.multiple,t,!1)}},Aa.prototype.render=function(e){this._defer||Q("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new La;return Ta(e,t,null,n,r._onCommit),r},Aa.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Aa.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||Q("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&Q("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,wa(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Aa.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},La.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},La.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&Q("191",n),n()}}},Ma.prototype.render=function(e,t){var n=this._internalRoot,r=new La;return null!==(t=void 0===t?null:t)&&r.then(t),Na(e,n,null,r._onCommit),r},Ma.prototype.unmount=function(e){var t=this._internalRoot,n=new La;return null!==(e=void 0===e?null:e)&&n.then(e),Na(null,t,null,n._onCommit),n},Ma.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new La;return null!==(n=void 0===n?null:n)&&i.then(n),Na(t,r,e,i._onCommit),i},Ma.prototype.createBatch=function(){var e=new Aa(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},xt=Sa,St=_a,Ct=function(){Gs||0===Xs||(ya(Xs,!1),Xs=0)};var Da={createPortal:Ra,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?Q("188"):Q("268",Object.keys(e))),e=null===(e=Yn(t))?null:e.stateNode},hydrate:function(e,t,n){return Ia(null,e,t,!0,n)},render:function(e,t,n){return Ia(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&Q("38"),Ia(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Oa(e)||Q("40"),!!e._reactRootContainer&&(Ca(function(){Ia(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ra.apply(void 0,arguments)},unstable_batchedUpdates:Sa,unstable_interactiveUpdates:_a,flushSync:function(e,t){Gs&&Q("187");var n=Zs;Zs=!0;try{return Ws(e,t)}finally{Zs=n,ya(1073741823,!1)}},unstable_flushControlled:function(e){var t=Zs;Zs=!0;try{Ws(e)}finally{(Zs=t)||Gs||ya(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Te,Ne,Pe,we.injectEventPluginsByName,ce,Re,function(e){ve(e,Ie)},kt,Et,yr,Ee]},unstable_createRoot:function(e,t){return Oa(e)||Q("299","unstable_createRoot"),new Ma(e,!0,null!=t&&!0===t.hydrate)}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Pi=Li(function(e){return t.onCommitFiberRoot(n,e)}),Ai=Li(function(e){return t.onCommitFiberUnmount(n,e)})}catch(r){}})(s({},e,{findHostInstanceByFiber:function(e){return null===(e=Yn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:_e,bundleType:0,version:"16.6.3",rendererPackageName:"react-dom"});var Fa={default:Da},ja=Fa&&Da||Fa,Ha=ja.default||ja,$a=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=0;t.__interactionsRef=null,t.__subscriberRef=null,t.unstable_clear=function(e){return e()},t.unstable_getCurrent=function(){return null},t.unstable_getThreadID=function(){return++n},t.unstable_trace=function(e,t,n){return n()},t.unstable_wrap=function(e){return e},t.unstable_subscribe=function(){},t.unstable_unsubscribe=function(){}});t($a);$a.__interactionsRef,$a.__subscriberRef,$a.unstable_clear,$a.unstable_getCurrent,$a.unstable_getThreadID,$a.unstable_trace,$a.unstable_wrap,$a.unstable_subscribe,$a.unstable_unsubscribe;var Ua=n(function(e,t){});t(Ua);Ua.__interactionsRef,Ua.__subscriberRef,Ua.unstable_clear,Ua.unstable_getCurrent,Ua.unstable_getThreadID,Ua.unstable_trace,Ua.unstable_wrap,Ua.unstable_subscribe,Ua.unstable_unsubscribe,n(function(e){e.exports=$a}),n(function(e){});var Wa=n(function(e){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=Ha});function Ba(){}var Va=n(function(e){e.exports=function(){function e(e,t,n,r,i,o){if(o!==q){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=Ba,n.PropTypes=n,n}()}),za=n(function(e){var t,n;t=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen},e.exports?e.exports=n:window.ExecutionEnvironment=n});function qa(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var Ga=qa(G),Ka=qa(za),Ya=qa(function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0});var Xa=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var i=[],o=void 0;function s(){o=e(i.map(function(e){return e.props})),a.canUseDOM?t(o):n&&(o=n(o))}var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.peek=function(){return o},t.rewind=function(){if(t.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=o;return o=void 0,i=[],e},t.prototype.shouldComponentUpdate=function(e){return!Ya(e,this.props)},t.prototype.componentWillMount=function(){i.push(this),s()},t.prototype.componentDidUpdate=function(){s()},t.prototype.componentWillUnmount=function(){var e=i.indexOf(this);i.splice(e,1),s()},t.prototype.render=function(){return Ga.createElement(r,this.props)},t}(G.Component);return a.displayName="SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")",a.canUseDOM=Ka.canUseDOM,a}},Qa=n(function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),Ja=(Qa.shim,n(function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i})),Za=(Ja.supported,Ja.unsupported,n(function(e){var t=Array.prototype.slice,n=e.exports=function(e,o,s){return s||(s={}),e===o||(e instanceof Date&&o instanceof Date?e.getTime()===o.getTime():!e||!o||"object"!=typeof e&&"object"!=typeof o?s.strict?e===o:e==o:function(e,o,s){var a,l;if(r(e)||r(o))return!1;if(e.prototype!==o.prototype)return!1;if(Ja(e))return!!Ja(o)&&(e=t.call(e),o=t.call(o),n(e,o,s));if(i(e)){if(!i(o))return!1;if(e.length!==o.length)return!1;for(a=0;a<e.length;a++)if(e[a]!==o[a])return!1;return!0}try{var c=Qa(e),u=Qa(o)}catch(h){return!1}if(c.length!=u.length)return!1;for(c.sort(),u.sort(),a=c.length-1;a>=0;a--)if(c[a]!=u[a])return!1;for(a=c.length-1;a>=0;a--)if(l=c[a],!n(e[l],o[l],s))return!1;return typeof e==typeof o}(e,o,s))};function r(e){return null==e}function i(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}})),el=n(function(e,t){t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var n=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},r=(t.VALID_TAG_NAMES=Object.keys(n).map(function(e){return n[e]}),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(r).reduce(function(e,t){return e[r[t]]=t,e},{}),t.SELF_CLOSING_TAGS=[n.NOSCRIPT,n.SCRIPT,n.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"});t(el);el.ATTRIBUTE_NAMES,el.TAG_NAMES,el.VALID_TAG_NAMES,el.TAG_PROPERTIES,el.REACT_TAG_MAP,el.HELMET_PROPS,el.HTML_TAG_MAP,el.SELF_CLOSING_TAGS,el.HELMET_ATTRIBUTE;var tl=n(function(t,n){n.__esModule=!0,n.warn=n.requestAnimationFrame=n.reducePropsToState=n.mapStateOnServer=n.handleClientStateChange=n.convertReactPropstoHtmlAttributes=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(G),a=l(s);function l(e){return e&&e.__esModule?e:{default:e}}var c,u=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},h=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return i({},e,t)},{})},d=function(e,t,n){var i={};return n.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&b("Helmet: "+e+' should be of type "Array". Instead found type "'+r(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,n){var r={};n.filter(function(e){for(var n=void 0,o=Object.keys(e),s=0;s<o.length;s++){var a=o[s],l=a.toLowerCase();-1===t.indexOf(l)||n===el.TAG_PROPERTIES.REL&&"canonical"===e[n].toLowerCase()||l===el.TAG_PROPERTIES.REL&&"stylesheet"===e[l].toLowerCase()||(n=l),-1===t.indexOf(a)||a!==el.TAG_PROPERTIES.INNER_HTML&&a!==el.TAG_PROPERTIES.CSS_TEXT&&a!==el.TAG_PROPERTIES.ITEM_PROP||(n=a)}if(!n||!e[n])return!1;var c=e[n].toLowerCase();return i[n]||(i[n]={}),r[n]||(r[n]={}),!i[n][c]&&(r[n][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var o=Object.keys(r),s=0;s<o.length;s++){var l=o[s],c=(0,a.default)({},i[l],r[l]);i[l]=c}return e},[]).reverse()},p=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},f=(c=Date.now(),function(e){var t=Date.now();t-c>16?(c=t,e(t)):setTimeout(function(){f(e)},0)}),m=function(e){return clearTimeout(e)},g="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||f:e.requestAnimationFrame||f,v="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||m:e.cancelAnimationFrame||m,b=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},y=null,w=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,o=e.linkTags,s=e.metaTags,a=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,h=e.title,d=e.titleAttributes;x(el.TAG_NAMES.BODY,r),x(el.TAG_NAMES.HTML,i),E(h,d);var p={baseTag:S(el.TAG_NAMES.BASE,n),linkTags:S(el.TAG_NAMES.LINK,o),metaTags:S(el.TAG_NAMES.META,s),noscriptTags:S(el.TAG_NAMES.NOSCRIPT,a),scriptTags:S(el.TAG_NAMES.SCRIPT,c),styleTags:S(el.TAG_NAMES.STYLE,u)},f={},m={};Object.keys(p).forEach(function(e){var t=p[e],n=t.newTags,r=t.oldTags;n.length&&(f[e]=n),r.length&&(m[e]=p[e].oldTags)}),t&&t(),l(e,f,m)},k=function(e){return Array.isArray(e)?e.join(""):e},E=function(e,t){void 0!==e&&document.title!==e&&(document.title=k(e)),x(el.TAG_NAMES.TITLE,t)},x=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(el.HELMET_ATTRIBUTE),i=r?r.split(","):[],o=[].concat(i),s=Object.keys(t),a=0;a<s.length;a++){var l=s[a],c=t[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=o.indexOf(l);-1!==u&&o.splice(u,1)}for(var h=o.length-1;h>=0;h--)n.removeAttribute(o[h]);i.length===o.length?n.removeAttribute(el.HELMET_ATTRIBUTE):n.getAttribute(el.HELMET_ATTRIBUTE)!==s.join(",")&&n.setAttribute(el.HELMET_ATTRIBUTE,s.join(","))}},S=function(e,t){var n=document.head||document.querySelector(el.TAG_NAMES.HEAD),r=n.querySelectorAll(e+"["+el.HELMET_ATTRIBUTE+"]"),i=Array.prototype.slice.call(r),o=[],s=void 0;return t&&t.length&&t.forEach(function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===el.TAG_PROPERTIES.INNER_HTML)n.innerHTML=t.innerHTML;else if(r===el.TAG_PROPERTIES.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var a=void 0===t[r]?"":t[r];n.setAttribute(r,a)}n.setAttribute(el.HELMET_ATTRIBUTE,"true"),i.some(function(e,t){return s=t,n.isEqualNode(e)})?i.splice(s,1):o.push(n)}),i.forEach(function(e){return e.parentNode.removeChild(e)}),o.forEach(function(e){return n.appendChild(e)}),{oldTags:i,newTags:o}},C=function(e){return Object.keys(e).reduce(function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r},"")},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[el.REACT_TAG_MAP[n]||n]=e[n],t},t)},T=function(e,t,n){switch(e){case el.TAG_NAMES.TITLE:return{toComponent:function(){return e=t.title,n=t.titleAttributes,(r={key:e})[el.HELMET_ATTRIBUTE]=!0,i=_(n,r),[o.default.createElement(el.TAG_NAMES.TITLE,i,e)];var e,n,r,i},toString:function(){return function(e,t,n,r){var i=C(n),o=k(t);return i?"<"+e+" "+el.HELMET_ATTRIBUTE+'="true" '+i+">"+u(o,r)+"</"+e+">":"<"+e+" "+el.HELMET_ATTRIBUTE+'="true">'+u(o,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case el.ATTRIBUTE_NAMES.BODY:case el.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return _(t)},toString:function(){return C(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,n){var r,i=((r={key:n})[el.HELMET_ATTRIBUTE]=!0,r);return Object.keys(t).forEach(function(e){var n=el.REACT_TAG_MAP[e]||e;if(n===el.TAG_PROPERTIES.INNER_HTML||n===el.TAG_PROPERTIES.CSS_TEXT){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=t[e]}),o.default.createElement(e,i)})}(e,t)},toString:function(){return function(e,t,n){return t.reduce(function(t,r){var i=Object.keys(r).filter(function(e){return!(e===el.TAG_PROPERTIES.INNER_HTML||e===el.TAG_PROPERTIES.CSS_TEXT)}).reduce(function(e,t){var i=void 0===r[t]?t:t+'="'+u(r[t],n)+'"';return e?e+" "+i:i},""),o=r.innerHTML||r.cssText||"",s=-1===el.SELF_CLOSING_TAGS.indexOf(e);return t+"<"+e+" "+el.HELMET_ATTRIBUTE+'="true" '+i+(s?"/>":">"+o+"</"+e+">")},"")}(e,t,n)}}}};n.convertReactPropstoHtmlAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[el.HTML_TAG_MAP[n]||n]=e[n],t},t)},n.handleClientStateChange=function(e){y&&v(y),e.defer?y=g(function(){w(e,function(){y=null})}):(w(e),y=null)},n.mapStateOnServer=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,o=e.linkTags,s=e.metaTags,a=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,h=void 0===u?"":u,d=e.titleAttributes;return{base:T(el.TAG_NAMES.BASE,t,r),bodyAttributes:T(el.ATTRIBUTE_NAMES.BODY,n,r),htmlAttributes:T(el.ATTRIBUTE_NAMES.HTML,i,r),link:T(el.TAG_NAMES.LINK,o,r),meta:T(el.TAG_NAMES.META,s,r),noscript:T(el.TAG_NAMES.NOSCRIPT,a,r),script:T(el.TAG_NAMES.SCRIPT,l,r),style:T(el.TAG_NAMES.STYLE,c,r),title:T(el.TAG_NAMES.TITLE,{title:h,titleAttributes:d},r)}},n.reducePropsToState=function(e){return{baseTag:function(e,t){return t.filter(function(e){return void 0!==e[el.TAG_NAMES.BASE]}).map(function(e){return e[el.TAG_NAMES.BASE]}).reverse().reduce(function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}return t},[])}([el.TAG_PROPERTIES.HREF],e),bodyAttributes:h(el.ATTRIBUTE_NAMES.BODY,e),defer:p(e,el.HELMET_PROPS.DEFER),encode:p(e,el.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:h(el.ATTRIBUTE_NAMES.HTML,e),linkTags:d(el.TAG_NAMES.LINK,[el.TAG_PROPERTIES.REL,el.TAG_PROPERTIES.HREF],e),metaTags:d(el.TAG_NAMES.META,[el.TAG_PROPERTIES.NAME,el.TAG_PROPERTIES.CHARSET,el.TAG_PROPERTIES.HTTPEQUIV,el.TAG_PROPERTIES.PROPERTY,el.TAG_PROPERTIES.ITEM_PROP],e),noscriptTags:d(el.TAG_NAMES.NOSCRIPT,[el.TAG_PROPERTIES.INNER_HTML],e),onChangeClientState:function(e){return p(e,el.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}}(e),scriptTags:d(el.TAG_NAMES.SCRIPT,[el.TAG_PROPERTIES.SRC,el.TAG_PROPERTIES.INNER_HTML],e),styleTags:d(el.TAG_NAMES.STYLE,[el.TAG_PROPERTIES.CSS_TEXT],e),title:function(e){var t=p(e,el.TAG_NAMES.TITLE),n=p(e,el.HELMET_PROPS.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,function(){return t});var r=p(e,el.HELMET_PROPS.DEFAULT_TITLE);return t||r||void 0}(e),titleAttributes:h(el.ATTRIBUTE_NAMES.TITLE,e)}},n.requestAnimationFrame=g,n.warn=b});t(tl);tl.warn,tl.requestAnimationFrame,tl.reducePropsToState,tl.mapStateOnServer,tl.handleClientStateChange,tl.convertReactPropstoHtmlAttributes;var nl=n(function(e,t){t.__esModule=!0,t.Helmet=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(G),o=l(Va),s=l(Xa),a=l(Za);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var u,h,d,p=(0,s.default)(tl.reducePropsToState,tl.handleClientStateChange,tl.mapStateOnServer)(function(){return null}),f=(u=p,d=h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!(0,a.default)(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case el.TAG_NAMES.SCRIPT:case el.TAG_NAMES.NOSCRIPT:return{innerHTML:t};case el.TAG_NAMES.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,r=e.child,i=e.arrayTypeChildren,o=e.newChildProps,s=e.nestedChildren;return n({},i,((t={})[r.type]=[].concat(i[r.type]||[],[n({},o,this.mapNestedChildrenToProps(r,s))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,r,i=e.child,o=e.newProps,s=e.newChildProps,a=e.nestedChildren;switch(i.type){case el.TAG_NAMES.TITLE:return n({},o,((t={})[i.type]=a,t.titleAttributes=n({},s),t));case el.TAG_NAMES.BODY:return n({},o,{bodyAttributes:n({},s)});case el.TAG_NAMES.HTML:return n({},o,{htmlAttributes:n({},s)})}return n({},o,((r={})[i.type]=n({},s),r))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var r=n({},t);return Object.keys(e).forEach(function(t){var i;r=n({},r,((i={})[t]=e[t],i))}),r},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return i.default.Children.forEach(e,function(e){if(e&&e.props){var i=e.props,o=i.children,s=c(i,["children"]),a=(0,tl.convertReactPropstoHtmlAttributes)(s);switch(n.warnOnInvalidChildren(e,o),e.type){case el.TAG_NAMES.LINK:case el.TAG_NAMES.META:case el.TAG_NAMES.NOSCRIPT:case el.TAG_NAMES.SCRIPT:case el.TAG_NAMES.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:a,nestedChildren:o});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:a,nestedChildren:o})}}}),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,r=c(e,["children"]),o=n({},r);return t&&(o=this.mapChildrenToProps(t,o)),i.default.createElement(u,o)},r(t,null,[{key:"canUseDOM",set:function(e){u.canUseDOM=e}}]),t}(i.default.Component),h.propTypes={base:o.default.object,bodyAttributes:o.default.object,children:o.default.oneOfType([o.default.arrayOf(o.default.node),o.default.node]),defaultTitle:o.default.string,defer:o.default.bool,encodeSpecialCharacters:o.default.bool,htmlAttributes:o.default.object,link:o.default.arrayOf(o.default.object),meta:o.default.arrayOf(o.default.object),noscript:o.default.arrayOf(o.default.object),onChangeClientState:o.default.func,script:o.default.arrayOf(o.default.object),style:o.default.arrayOf(o.default.object),title:o.default.string,titleAttributes:o.default.object,titleTemplate:o.default.string},h.defaultProps={defer:!0,encodeSpecialCharacters:!0},h.peek=u.peek,h.rewind=function(){var e=u.rewind();return e||(e=(0,tl.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},d);f.renderStatic=f.rewind,t.Helmet=f,t.default=f});t(nl);var rl=nl.Helmet,il=function(){},ol=function(){},sl=function(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}};function al(e){return"/"===e.charAt(0)}function ll(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var ul=function(e){return"/"===e.charAt(0)?e:"/"+e},hl=function(e){return"/"===e.charAt(0)?e.substr(1):e},dl=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},pl=function(e,t){return dl(e,t)?e.substr(t.length):e},fl=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},ml=function(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i},gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vl=function(e,t,n,r){var i=void 0;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=gl({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],i=e&&al(e),o=t&&al(t),s=i||o;if(e&&al(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var a=void 0;if(r.length){var l=r[r.length-1];a="."===l||".."===l||""===l}else a=!1;for(var c=0,u=r.length;u>=0;u--){var h=r[u];"."===h?ll(r,u):".."===h?(ll(r,u),c++):c&&(ll(r,u),c--)}if(!s)for(;c--;c)r.unshift("..");!s||""===r[0]||r[0]&&al(r[0])||r.unshift("");var d=r.join("/");return a&&"/"!==d.substr(-1)&&(d+="/"),d}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i},bl=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});var r=void 0===t?"undefined":cl(t);if(r!==(void 0===n?"undefined":cl(n)))return!1;if("object"===r){var i=t.valueOf(),o=n.valueOf();if(i!==t||o!==n)return e(i,o);var s=Object.keys(t),a=Object.keys(n);return s.length===a.length&&s.every(function(r){return e(t[r],n[r])})}return!1}(e.state,t.state)},yl=function(){var e=null,t=[];return{setPrompt:function(t){return ol(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):(ol(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}},wl=!("undefined"==typeof window||!window.document||!window.document.createElement),kl=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},El=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},xl=function(e,t){return t(window.confirm(e))},Sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_l=function(){try{return window.history.state||{}}catch(e){return{}}},Tl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};sl(wl,"Browser history needs a DOM");var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e.forceRefresh,s=void 0!==o&&o,a=e.getUserConfirmation,l=void 0===a?xl:a,c=e.keyLength,u=void 0===c?6:c,h=e.basename?fl(ul(e.basename)):"",d=function(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return ol(!h||dl(o,h),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+o+'" to begin with "'+h+'".'),h&&(o=pl(o,h)),vl(o,r,n)},p=function(){return Math.random().toString(36).substr(2,u)},f=yl(),m=function(e){Cl(N,e),N.length=n.length,f.notifyListeners(N.location,N.action)},g=function(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||y(d(e.state))},v=function(){y(d(_l()))},b=!1,y=function(e){if(b)b=!1,m();else{f.confirmTransitionTo(e,"POP",l,function(t){t?m({action:"POP",location:e}):w(e)})}},w=function(e){var t=N.location,n=E.indexOf(t.key);-1===n&&(n=0);var r=E.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(b=!0,S(i))},k=d(_l()),E=[k.key],x=function(e){return h+ml(e)},S=function(e){n.go(e)},C=0,_=function(e){1===(C+=e)?(kl(window,"popstate",g),i&&kl(window,"hashchange",v)):0===C&&(El(window,"popstate",g),i&&El(window,"hashchange",v))},T=!1,N={length:n.length,action:"POP",location:k,createHref:x,push:function(e,t){ol(!("object"===(void 0===e?"undefined":Sl(e))&&void 0!==e.state&&void 0!==t),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=vl(e,t,p(),N.location);f.confirmTransitionTo(i,"PUSH",l,function(e){if(e){var t=x(i),o=i.key,a=i.state;if(r)if(n.pushState({key:o,state:a},null,t),s)window.location.href=t;else{var l=E.indexOf(N.location.key),c=E.slice(0,-1===l?0:l+1);c.push(i.key),E=c,m({action:"PUSH",location:i})}else ol(void 0===a,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=t}})},replace:function(e,t){ol(!("object"===(void 0===e?"undefined":Sl(e))&&void 0!==e.state&&void 0!==t),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=vl(e,t,p(),N.location);f.confirmTransitionTo(i,"REPLACE",l,function(e){if(e){var t=x(i),o=i.key,a=i.state;if(r)if(n.replaceState({key:o,state:a},null,t),s)window.location.replace(t);else{var l=E.indexOf(N.location.key);-1!==l&&(E[l]=i.key),m({action:"REPLACE",location:i})}else ol(void 0===a,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(t)}})},go:S,goBack:function(){return S(-1)},goForward:function(){return S(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=f.setPrompt(e);return T||(_(1),T=!0),function(){return T&&(T=!1,_(-1)),t()}},listen:function(e){var t=f.appendListener(e);return _(1),function(){_(-1),t()}}};return N},Nl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pl={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+hl(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:hl,decodePath:ul},slash:{encodePath:ul,decodePath:ul}},Al=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},Ll=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},Ml=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};sl(wl,"Hash history needs a DOM");var t=window.history,n=-1===window.navigator.userAgent.indexOf("Firefox"),r=e.getUserConfirmation,i=void 0===r?xl:r,o=e.hashType,s=void 0===o?"slash":o,a=e.basename?fl(ul(e.basename)):"",l=Pl[s],c=l.encodePath,u=l.decodePath,h=function(){var e=u(Al());return ol(!a||dl(e,a),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+a+'".'),a&&(e=pl(e,a)),vl(e)},d=yl(),p=function(e){Nl(T,e),T.length=t.length,d.notifyListeners(T.location,T.action)},f=!1,m=null,g=function(){var e=Al(),t=c(e);if(e!==t)Ll(t);else{var n=h(),r=T.location;if(!f&&bl(r,n))return;if(m===ml(n))return;m=null,v(n)}},v=function(e){if(f)f=!1,p();else{d.confirmTransitionTo(e,"POP",i,function(t){t?p({action:"POP",location:e}):b(e)})}},b=function(e){var t=T.location,n=E.lastIndexOf(ml(t));-1===n&&(n=0);var r=E.lastIndexOf(ml(e));-1===r&&(r=0);var i=n-r;i&&(f=!0,x(i))},y=Al(),w=c(y);y!==w&&Ll(w);var k=h(),E=[ml(k)],x=function(e){ol(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},S=0,C=function(e){1===(S+=e)?kl(window,"hashchange",g):0===S&&El(window,"hashchange",g)},_=!1,T={length:t.length,action:"POP",location:k,createHref:function(e){return"#"+c(a+ml(e))},push:function(e,t){ol(void 0===t,"Hash history cannot push state; it is ignored");var n=vl(e,void 0,void 0,T.location);d.confirmTransitionTo(n,"PUSH",i,function(e){if(e){var t=ml(n),r=c(a+t);if(Al()!==r){m=t,function(e){window.location.hash=e}(r);var i=E.lastIndexOf(ml(T.location)),o=E.slice(0,-1===i?0:i+1);o.push(t),E=o,p({action:"PUSH",location:n})}else ol(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),p()}})},replace:function(e,t){ol(void 0===t,"Hash history cannot replace state; it is ignored");var n=vl(e,void 0,void 0,T.location);d.confirmTransitionTo(n,"REPLACE",i,function(e){if(e){var t=ml(n),r=c(a+t);Al()!==r&&(m=t,Ll(r));var i=E.indexOf(ml(T.location));-1!==i&&(E[i]=t),p({action:"REPLACE",location:n})}})},go:x,goBack:function(){return x(-1)},goForward:function(){return x(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=d.setPrompt(e);return _||(C(1),_=!0),function(){return _&&(_=!1,C(-1)),t()}},listen:function(e){var t=d.appendListener(e);return C(1),function(){C(-1),t()}}};return T},Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Il=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rl=function(e,t,n){return Math.min(Math.max(e,t),n)},Dl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,r=void 0===n?["/"]:n,i=e.initialIndex,o=void 0===i?0:i,s=e.keyLength,a=void 0===s?6:s,l=yl(),c=function(e){Il(m,e),m.length=m.entries.length,l.notifyListeners(m.location,m.action)},u=function(){return Math.random().toString(36).substr(2,a)},h=Rl(o,0,r.length-1),d=r.map(function(e){return vl(e,void 0,"string"==typeof e?u():e.key||u())}),p=ml,f=function(e){var n=Rl(m.index+e,0,m.entries.length-1),r=m.entries[n];l.confirmTransitionTo(r,"POP",t,function(e){e?c({action:"POP",location:r,index:n}):c()})},m={length:d.length,action:"POP",location:d[h],index:h,entries:d,createHref:p,push:function(e,n){ol(!("object"===(void 0===e?"undefined":Ol(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=vl(e,n,u(),m.location);l.confirmTransitionTo(r,"PUSH",t,function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),c({action:"PUSH",location:r,index:t,entries:n})}})},replace:function(e,n){ol(!("object"===(void 0===e?"undefined":Ol(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=vl(e,n,u(),m.location);l.confirmTransitionTo(r,"REPLACE",t,function(e){e&&(m.entries[m.index]=r,c({action:"REPLACE",location:r}))})},go:f,goBack:function(){return f(-1)},goForward:function(){return f(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return m},Fl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function jl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Hl=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=jl(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},jl(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:Fl({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;sl(null==n||1===G.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){il(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?G.Children.only(e):null},t}(G.Component);function $l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Hl.propTypes={history:Va.object.isRequired,children:Va.node},Hl.contextTypes={router:Va.object},Hl.childContextTypes={router:Va.object.isRequired},(function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=$l(this,e.call.apply(e,[this].concat(o))),r.history=Dl(r.props),$l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){il(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return G.createElement(Hl,{history:this.history,children:this.props.children})},t}(G.Component)).propTypes={initialEntries:Va.array,initialIndex:Va.number,getUserConfirmation:Va.func,keyLength:Va.number,children:Va.node};var Ul=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){sl(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(G.Component);Ul.propTypes={when:Va.bool,message:Va.oneOfType([Va.func,Va.string]).isRequired},Ul.defaultProps={when:!0},Ul.contextTypes={router:Va.shape({history:Va.shape({block:Va.func.isRequired}).isRequired}).isRequired};var Wl=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Bl=rc,Vl=Yl,zl=function(e,t){return Ql(Yl(e,t))},ql=Ql,Gl=nc,Kl=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Yl(e,t){for(var n,r=[],i=0,o=0,s="",a=t&&t.delimiter||"/";null!=(n=Kl.exec(e));){var l=n[0],c=n[1],u=n.index;if(s+=e.slice(o,u),o=u+l.length,c)s+=c[1];else{var h=e[o],d=n[2],p=n[3],f=n[4],m=n[5],g=n[6],v=n[7];s&&(r.push(s),s="");var b=null!=d&&null!=h&&h!==d,y="+"===g||"*"===g,w="?"===g||"*"===g,k=n[2]||a,E=f||m;r.push({name:p||i++,prefix:d||"",delimiter:k,optional:w,repeat:y,partial:b,asterisk:!!v,pattern:E?Zl(E):v?".*":"[^"+Jl(k)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function Xl(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Ql(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",o=n||{},s=(r||{}).pretty?Xl:encodeURIComponent,a=0;a<e.length;a++){var l=e[a];if("string"!=typeof l){var c,u=o[l.name];if(null==u){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Wl(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<u.length;h++){if(c=s(u[h]),!t[a].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");i+=(0===h?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(u).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):s(u),!t[a].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');i+=l.prefix+c}}else i+=l}return i}}function Jl(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Zl(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function ec(e,t){return e.keys=t,e}function tc(e){return e.sensitive?"":"i"}function nc(e,t,n){Wl(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,o="",s=0;s<e.length;s++){var a=e[s];if("string"==typeof a)o+=Jl(a);else{var l=Jl(a.prefix),c="(?:"+a.pattern+")";t.push(a),a.repeat&&(c+="(?:"+l+c+")*"),o+=c=a.optional?a.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var u=Jl(n.delimiter||"/"),h=o.slice(-u.length)===u;return r||(o=(h?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=i?"$":r&&h?"":"(?="+u+"|$)",ec(new RegExp("^"+o,tc(n)),t)}function rc(e,t,n){return Wl(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ec(e,t)}(e,t):Wl(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(rc(e[i],t,n).source);return ec(new RegExp("(?:"+r.join("|")+")",tc(n)),t)}(e,t,n):function(e,t,n){return nc(Yl(e,n),t,n)}(e,t,n)}Bl.parse=Vl,Bl.compile=zl,Bl.tokensToFunction=ql,Bl.tokensToRegExp=Gl;var ic={},oc=0,sc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===e?e:function(e){var t=e,n=ic[t]||(ic[t]={});if(n[e])return n[e];var r=Bl.compile(e);return oc<1e4&&(n[e]=r,oc++),r}(e)(t,{pretty:!0})},ac=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var lc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){sl(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=vl(e.to),n=vl(this.props.to);bl(t,n)?il(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"==typeof n?sc(n,t.params):ac({},n,{pathname:sc(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(G.Component);lc.propTypes={computedMatch:Va.object,push:Va.bool,from:Va.string,to:Va.oneOfType([Va.string,Va.object]).isRequired},lc.defaultProps={push:!1},lc.contextTypes={router:Va.shape({history:Va.shape({push:Va.func.isRequired,replace:Va.func.isRequired}).isRequired,staticContext:Va.object}).isRequired};var cc={},uc=0,hc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,i=r.path,o=r.exact,s=void 0!==o&&o,a=r.strict,l=void 0!==a&&a,c=r.sensitive;if(null==i)return n;var u=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=cc[n]||(cc[n]={});if(r[e])return r[e];var i=[],o={re:Bl(e,i,t),keys:i};return uc<1e4&&(r[e]=o,uc++),o}(i,{end:s,strict:l,sensitive:void 0!==c&&c}),h=u.re,d=u.keys,p=h.exec(e);if(!p)return null;var f=p[0],m=p.slice(1),g=e===f;return s&&!g?null:{path:i,url:"/"===i&&""===f?"/":f,isExact:g,params:d.reduce(function(e,t,n){return e[t.name]=m[n],e},{})}},dc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function pc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var fc=function(e){return 0===G.Children.count(e)},mc=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=pc(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},pc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:dc({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,o=e.strict,s=e.exact,a=e.sensitive;if(n)return n;sl(t,"You should not use <Route> or withRouter() outside a <Router>");var l=t.route,c=(r||l.location).pathname;return hc(c,{path:i,strict:o,exact:s,sensitive:a},l.match)},t.prototype.componentWillMount=function(){il(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),il(!(this.props.component&&this.props.children&&!fc(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),il(!(this.props.render&&this.props.children&&!fc(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){il(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),il(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,o=this.context.router,s=o.history,a=o.route,l=o.staticContext,c={match:e,location:this.props.location||a.location,history:s,staticContext:l};return r?e?G.createElement(r,c):null:i?e?i(c):null:"function"==typeof n?n(c):n&&!fc(n)?G.Children.only(n):null},t}(G.Component);mc.propTypes={computedMatch:Va.object,path:Va.string,exact:Va.bool,strict:Va.bool,sensitive:Va.bool,component:Va.func,render:Va.func,children:Va.oneOfType([Va.func,Va.node]),location:Va.object},mc.contextTypes={router:Va.shape({history:Va.object.isRequired,route:Va.object.isRequired,staticContext:Va.object})},mc.childContextTypes={router:Va.object.isRequired};var gc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function vc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var bc=function(e){return"/"===e.charAt(0)?e:"/"+e},yc=function(e,t){return e?gc({},t,{pathname:bc(e)+t.pathname}):t},wc=function(e){return"string"==typeof e?e:ml(e)},kc=function(e){return function(){sl(!1,"You cannot %s with <StaticRouter>",e)}},Ec=function(){},xc=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=vc(this,e.call.apply(e,[this].concat(o))),r.createHref=function(e){return bc(r.props.basename+wc(e))},r.handlePush=function(e){var t=r.props,n=t.basename,i=t.context;i.action="PUSH",i.location=yc(n,vl(e)),i.url=wc(i.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,i=t.context;i.action="REPLACE",i.location=yc(n,vl(e)),i.url=wc(i.location)},r.handleListen=function(){return Ec},r.handleBlock=function(){return Ec},vc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){il(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["basename","context","location"]),i={createHref:this.createHref,action:"POP",location:function(e,t){if(!e)return t;var n=bc(e);return 0!==t.pathname.indexOf(n)?t:gc({},t,{pathname:t.pathname.substr(n.length)})}(t,vl(n)),push:this.handlePush,replace:this.handleReplace,go:kc("go"),goBack:kc("goBack"),goForward:kc("goForward"),listen:this.handleListen,block:this.handleBlock};return G.createElement(Hl,gc({},r,{history:i}))},t}(G.Component);xc.propTypes={basename:Va.string,context:Va.object.isRequired,location:Va.oneOfType([Va.string,Va.object])},xc.defaultProps={basename:"",location:"/"},xc.childContextTypes={router:Va.object.isRequired};var Sc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){sl(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){il(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),il(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return G.Children.forEach(t,function(t){if(null==r&&G.isValidElement(t)){var o=t.props,s=o.path,a=o.exact,l=o.strict,c=o.sensitive,u=o.from,h=s||u;i=t,r=hc(n.pathname,{path:h,exact:a,strict:l,sensitive:c},e.match)}}),r?G.cloneElement(i,{location:n,computedMatch:r}):null},t}(G.Component);Sc.contextTypes={router:Va.shape({route:Va.object.isRequired}).isRequired},Sc.propTypes={children:Va.node,location:Va.object};var Cc={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},_c={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Tc=Object.defineProperty,Nc=Object.getOwnPropertyNames,Pc=Object.getOwnPropertySymbols,Ac=Object.getOwnPropertyDescriptor,Lc=Object.getPrototypeOf,Mc=Lc&&Lc(Object);var Oc=function e(t,n,r){if("string"!=typeof n){if(Mc){var i=Lc(n);i&&i!==Mc&&e(t,i,r)}var o=Nc(n);Pc&&(o=o.concat(Pc(n)));for(var s=0;s<o.length;++s){var a=o[s];if(!(Cc[a]||_c[a]||r&&r[a])){var l=Ac(n,a);try{Tc(t,a,l)}catch(c){}}}return t}return t},Ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var Rc=function(e){var t=function(t){var n=t.wrappedComponentRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return G.createElement(mc,{children:function(t){return G.createElement(e,Ic({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:Va.func},Oc(t,e)};function Dc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Fc=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=Dc(this,e.call.apply(e,[this].concat(o))),r.history=Tl(r.props),Dc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){il(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return G.createElement(Hl,{history:this.history,children:this.props.children})},t}(G.Component);function jc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Fc.propTypes={basename:Va.string,forceRefresh:Va.bool,getUserConfirmation:Va.func,keyLength:Va.number,children:Va.node},(function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=jc(this,e.call.apply(e,[this].concat(o))),r.history=Ml(r.props),jc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){il(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return G.createElement(Hl,{history:this.history,children:this.props.children})},t}(G.Component)).propTypes={basename:Va.string,getUserConfirmation:Va.func,hashType:Va.oneOf(["hashbang","noslash","slash"]),children:Va.node};var Hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function $c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Uc=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},Wc=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=$c(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!Uc(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}},$c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);sl(this.context.router,"You should not use <Link> outside a <Router>"),sl(void 0!==t,'You must specify the "to" property');var i=this.context.router.history,o="string"==typeof t?vl(t,null,null,i.location):t,s=i.createHref(o);return G.createElement("a",Hc({},r,{onClick:this.handleClick,href:s,ref:n}))},t}(G.Component);Wc.propTypes={onClick:Va.func,target:Va.string,replace:Va.bool,to:Va.oneOfType([Va.string,Va.object]).isRequired,innerRef:Va.oneOfType([Va.string,Va.func])},Wc.defaultProps={replace:!1},Wc.contextTypes={router:Va.shape({history:Va.shape({push:Va.func.isRequired,replace:Va.func.isRequired,createHref:Va.func.isRequired}).isRequired}).isRequired};var Bc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var zc=function(e){var t=e.to,n=e.exact,r=e.strict,i=e.location,o=e.activeClassName,s=e.className,a=e.activeStyle,l=e.style,c=e.isActive,u=e["aria-current"],h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),d="object"===(void 0===t?"undefined":Vc(t))?t.pathname:t,p=d&&d.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return G.createElement(mc,{path:p,exact:n,strict:r,location:i,children:function(e){var n=e.location,r=e.match,i=!!(c?c(r,n):r);return G.createElement(Wc,Bc({to:t,className:i?[s,o].filter(function(e){return e}).join(" "):s,style:i?Bc({},l,a):l,"aria-current":i&&u||null},h))}})};function qc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){qc(e,t,n[t])})}return e}function Kc(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}zc.propTypes={to:Wc.propTypes.to,exact:Va.bool,strict:Va.bool,location:Va.object,activeClassName:Va.string,className:Va.string,activeStyle:Va.object,style:Va.object,isActive:Va.func,"aria-current":Va.oneOf(["page","step","location","date","time","true"])},zc.defaultProps={activeClassName:"active","aria-current":"page"};class Yc extends Error{}class Xc extends Error{}class Qc extends Error{}class Jc extends Error{constructor(e){super(),e&&Object.assign(this,e)}}class Zc extends Error{constructor(e){super(),e&&Object.assign(this,e)}}var eu=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),tu=new RegExp("%[a-f0-9]{2}","gi"),nu=new RegExp("(%[a-f0-9]{2})+","gi");function ru(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],ru(n),ru(r))}function iu(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(tu),n=1;n<t.length;n++)t=(e=ru(t,n).join("")).match(tu);return e}}var ou=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"��","%FF%FE":"��"},r=nu.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var i=iu(r[0]);i!==r[0]&&(n[r[0]]=i)}r=nu.exec(e)}n["%C2"]="�";for(var o=Object.keys(n),s=0;s<o.length;s++){var a=o[s];e=e.replace(new RegExp(a,"g"),n[a])}return e}(e)}};function su(e,t){return t.encode?t.strict?eu(e):encodeURIComponent(e):e}function au(e,t){return t.decode?ou(e):e}var lu=function(e,t){const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=Object.assign({decode:!0,arrayFormat:"none"},t)),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const i of e.split("&")){let[e,o]=i.replace(/\+/g," ").split("=");o=void 0===o?null:au(o,t),n(au(e,t),o,r)}return Object.keys(r).sort().reduce((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))},cu=(e,t)=>{if(!e)return"";const n=function(e){switch(e.arrayFormat){case"index":return(t,n,r)=>null===n?[su(t,e),"[",r,"]"].join(""):[su(t,e),"[",su(r,e),"]=",su(n,e)].join("");case"bracket":return(t,n)=>null===n?[su(t,e),"[]"].join(""):[su(t,e),"[]=",su(n,e)].join("");default:return(t,n)=>null===n?su(t,e):[su(t,e),"=",su(n,e)].join("")}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),r=Object.keys(e);return!1!==t.sort&&r.sort(t.sort),r.map(r=>{const i=e[r];if(void 0===i)return"";if(null===i)return su(r,t);if(Array.isArray(i)){const e=[];for(const t of i.slice())void 0!==t&&e.push(n(r,t,e.length));return e.join("&")}return su(r,t)+"="+su(i,t)}).filter(e=>e.length>0).join("&")};function uu(e){let t=cu(e);return t?`?${t}`:""}const hu={viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",width:16,height:16};function du(e){let t=Object.assign({},e);return G.createElement("svg",Object.assign({width:"16",height:"16",fill:"currentColor"},t),G.createElement("path",{d:"M15 3.429c-.517.24-1.07.402-1.651.477a3.028 3.028 0 0 0 1.264-1.675 5.761 5.761 0 0 1-1.827.728 2.8 2.8 0 0 0-2.1-.959C9.1 2 7.812 3.355 7.812 5.025c0 .24.027.47.074.691-2.39-.119-4.509-1.327-5.926-3.153-.25.444-.39.96-.39 1.522 0 1.052.509 1.977 1.279 2.52a2.758 2.758 0 0 1-1.302-.379c.66 1.819 1.428 2.821 2.306 3.007a2.783 2.783 0 0 1-1.293.052c.37 1.202 1.43 2.078 2.691 2.102A5.588 5.588 0 0 1 1 12.641 7.886 7.886 0 0 0 5.417 14c5.291 0 8.181-4.611 8.181-8.604 0-.128 0-.258-.008-.387.374-.283.844-.81 1.41-1.58z"}))}function pu(e){let t=Object.assign({},e);return G.createElement("svg",Object.assign({width:"16",height:"16"},t),G.createElement("g",{fill:"none"},G.createElement("path",{d:"M2.629 10.659A5.893 5.893 0 0 1 2 8c0-.956.226-1.858.629-2.659l2.065 1.544a3.487 3.487 0 0 0 0 2.23L2.629 10.66z",fill:"#FBBC05"}),G.createElement("path",{d:"M2.629 5.341C3.627 3.357 5.713 2 8.139 2c1.563 0 2.959.573 4.047 1.5L10.4 5.245a3.6 3.6 0 0 0-2.26-.79c-1.61 0-2.97 1.015-3.446 2.43L2.629 5.34z",fill:"#EA4335"}),G.createElement("path",{d:"M2.628 10.657L4.692 9.11c.475 1.417 1.835 2.435 3.448 2.435 1.702 0 2.986-.845 3.293-2.318H8.14V6.91h5.72c.084.355.14.736.14 1.091 0 3.818-2.79 6-5.86 6-2.427 0-4.514-1.358-5.512-3.343z",fill:"#34A853"}),G.createElement("path",{d:"M12.141 12.506l-1.96-1.483a2.704 2.704 0 0 0 1.252-1.796H8.14V6.91h5.72c.084.355.14.736.14 1.091 0 1.956-.732 3.482-1.859 4.506z",fill:"#4285F4"})))}const fu=e=>t=>G.createElement("svg",Object.assign({},hu,t),"string"==typeof e?G.createElement("path",{d:e}):e),mu=fu("M9 3h4v4M7 13H3V9M13 3L9 7M3 13l4-4"),gu=fu("M12 12L7 8l5-4zM4 12V4"),vu=fu("M8 4v8.624M4 8h8.41"),bu=fu("M3.5 8H12.5"),yu=fu("M8 3v7M4.5 6.5h7M4.5 12.5h7"),wu=fu("M13 8H3M7 12L3 8l4-4"),ku=fu("M11 2l3 3-8 8H3v-3l8-8z"),Eu=fu("M13 3L3 13M3 3l10 10"),xu=fu("M14 4v9H2V4M1 1h14v3H1zM6.5 6.5h3"),Su=fu("M6 13l4-4-4-4"),Cu=(fu(G.createElement("g",null,G.createElement("path",{d:"M11.5 8H10l-1 2H7L6 8H4.5"}),G.createElement("path",{d:"M4.07 3.694L2 8v3.75c0 .69.537 1.25 1.2 1.25h9.6c.663 0 1.2-.56 1.2-1.25V8l-2.07-4.306A1.196 1.196 0 0 0 10.856 3H5.144c-.455 0-.871.269-1.074.694z"}))),fu(G.createElement("g",null,G.createElement("path",{d:"M10 11c0-2 2-2.5 2-4.5a4 4 0 1 0-8 0C4 8.5 6 9 6 11h4z"}),G.createElement("path",{d:"M6 13.5h4"})))),_u=fu("M14 10c0 .736-.597 1.333-1.333 1.333h-8L2 14V3.333C2 2.597 2.597 2 3.333 2h9.334C13.403 2 14 2.597 14 3.333V10z"),Tu=fu("M2 3.554V6.89h3.273M14 12.446V9.11h-3.273 M12.63 6.333a5.007 5.007 0 0 0-1.366-2.07 4.877 4.877 0 0 0-2.178-1.14 4.822 4.822 0 0 0-2.447.074 4.891 4.891 0 0 0-2.108 1.269L2 6.889M14 9.11l-2.53 2.423a4.892 4.892 0 0 1-2.109 1.27 4.823 4.823 0 0 1-2.447.073 4.878 4.878 0 0 1-2.178-1.14 5.008 5.008 0 0 1-1.367-2.07"),Nu=fu(G.createElement("g",null,G.createElement("path",{d:"M5 10.5l3 3 3-3"}),G.createElement("path",{d:"M4.5 3C4.5 5 8 5.922 8 9.5v4M11.5 3C11.5 5 8 5.922 8 9.5v4"}))),Pu=fu(G.createElement("g",null,G.createElement("circle",{cx:"8",cy:"8",r:"7"}),G.createElement("path",{d:"M1 8h14M8 1a10.816 10.816 0 0 1 2.75 7A10.816 10.816 0 0 1 8 15a10.816 10.816 0 0 1-2.75-7A10.816 10.816 0 0 1 8 1z"}))),Au=fu(G.createElement("g",null,G.createElement("circle",{cx:"8",cy:"8",r:"2"}),G.createElement("path",{d:"M12.71 9.91a1.05 1.05 0 0 0 .21 1.157l.037.038a1.273 1.273 0 1 1-1.8 1.801l-.039-.038a1.05 1.05 0 0 0-1.158-.21 1.05 1.05 0 0 0-.636.961v.108a1.273 1.273 0 1 1-2.546 0v-.057a1.05 1.05 0 0 0-.687-.96 1.05 1.05 0 0 0-1.158.21l-.038.037a1.273 1.273 0 1 1-1.801-1.8l.038-.039c.3-.307.383-.765.21-1.158a1.05 1.05 0 0 0-.961-.636h-.108a1.273 1.273 0 0 1 0-2.546h.057a1.05 1.05 0 0 0 .96-.687 1.05 1.05 0 0 0-.21-1.158l-.037-.038a1.273 1.273 0 1 1 1.8-1.801l.039.038c.307.3.765.383 1.158.21h.05a1.05 1.05 0 0 0 .637-.961v-.108a1.273 1.273 0 0 1 2.546 0v.057c.001.419.251.796.636.96.393.174.851.091 1.158-.21l.038-.037a1.273 1.273 0 1 1 1.801 1.8l-.038.039a1.05 1.05 0 0 0-.21 1.158v.05c.165.386.543.636.961.637h.108a1.273 1.273 0 1 1 0 2.546h-.057a1.05 1.05 0 0 0-.96.636z"}))),Lu=fu(G.createElement("g",null,G.createElement("path",{d:"M10.727 13.09V12a2.182 2.182 0 0 0-2.182-2.182H4.182A2.182 2.182 0 0 0 2 12v1.09"}),G.createElement("circle",{cx:"6.364",cy:"5.455",r:"2.182"}),G.createElement("path",{d:"M14 13.09V12c0-.994-.674-1.862-1.636-2.11M10.182 3.344a2.182 2.182 0 0 1 0 4.227"}))),Mu=fu("M6.983 2.57l-5.021 8.25a1.19 1.19 0 0 0 1.017 1.785h10.013a1.19 1.19 0 0 0 1.017-1.784L9.017 2.57a1.19 1.19 0 0 0-2.034 0zM8 5.45V8M8 10v.1"),Ou=fu("M14.36 10.475a2.408 2.408 0 0 0-.229-2.357A2.646 2.646 0 0 0 11.951 7h-.658c-.438-1.647-1.915-2.85-3.684-3M4 4.5C2.32 5.389 1.5 7 2 9s2 3 4 3h5c.303 0 .554-.051.84-.15M3 3l11 10"),Iu=fu(G.createElement("g",null,G.createElement("path",{d:"M12.5 11c1.457-.296 2.373-1.447 2.223-2.926-.15-1.479-1.433-3.021-2.92-3.02H11C10.472 3.01 8.61 2 6.5 2S2.675 3.428 2.148 5.472C1.62 7.516 2.153 9.978 4 11"}),",",G.createElement("path",{d:"M9 7l-2 3.5h3L8 14"}))),Ru=fu("M3 7.5v4.8c0 .663.56 1.2 1.25 1.2h7.5c.69 0 1.25-.537 1.25-1.2V7.5M10.5 5L8 2 5.5 5M8 3v6"),Du=fu("M3 5h10M12 5v8c0 .621-.369 1-1 1H5c-.631 0-1-.379-1-1V5m1 0V3c0-.552.5-1 1-1h4c.5 0 1 .448 1 1v2"),Fu=fu("M4 4h4v4H4zM8 4h4v4H8zM8 8h4v4H8zM4 8h4v4H4z"),ju=fu(G.createElement("path",{d:"M13.075 3.925A3.157 3.157 0 0 0 10.842 3c-.838 0-1.641.478-2.233 1.07L8 4.68l-.609-.61c-1.233-1.233-3.233-1.378-4.466-.145a3.158 3.158 0 0 0 0 4.467L3.534 9 8 13.788 12.466 9l.609-.608a3.157 3.157 0 0 0 0-4.467z"})),Hu=fu(G.createElement("g",null,G.createElement("circle",{cx:"8",cy:"8",r:"6"}),G.createElement("circle",{cx:"8",cy:"8",r:"2"}),G.createElement("path",{d:"M3.824 3.824L6.5 6.5m3 3l2.295 2.295M9.5 6.5l2.55-2.55m-8.226 7.845l2.5-2.5"}))),$u=fu(G.createElement("g",null,G.createElement("circle",{cx:"7",cy:"7",r:"4"}),G.createElement("path",{d:"M13 13l-3-3"}))),Uu=fu(G.createElement("g",null,G.createElement("path",{d:"M8.688 1H3.875C3.115 1 2.5 1.627 2.5 2.4v11.2c0 .773.616 1.4 1.375 1.4h8.25c.76 0 1.375-.627 1.375-1.4V5.9L8.687 1z"}),G.createElement("path",{d:"M8.5 1v5h5"}))),Wu=fu(G.createElement("g",null,G.createElement("circle",{cx:"5",cy:"12.5",r:"1.5"}),G.createElement("circle",{cx:"5",cy:"3.5",r:"1.5"}),G.createElement("circle",{cx:"11",cy:"3.5",r:"1.5"}),G.createElement("path",{d:"M5 10.5V5"}),G.createElement("path",{d:"M5 8h3.995C10.332 8 11 7 11 5"}))),Bu=fu(G.createElement("g",null,G.createElement("path",{d:"M13 8.922v2.967c0 .614-.497 1.111-1.111 1.111H4.11A1.111 1.111 0 0 1 3 11.889V4.11C3 3.497 3.497 3 4.111 3h2.967"}),G.createElement("path",{d:"M12 2l2 2-5 5H7V7z"}))),Vu=fu(G.createElement("g",null,G.createElement("path",{d:"M11.889 13H4.11A1.111 1.111 0 0 1 3 11.889V4.11C3 3.497 3.497 3 4.111 3h6.111L13 5.778v6.11c0 .615-.497 1.112-1.111 1.112z"}),G.createElement("path",{d:"M10 13v-3H6v3M6 3v3h3"}))),zu=fu(G.createElement("g",null,G.createElement("path",{d:"M7 8.76A2.927 2.927 0 0 0 9.15 10c.848.064 1.668-.272 2.27-.906l1.757-1.855c1.11-1.213 1.095-3.141-.035-4.334a2.823 2.823 0 0 0-4.108-.037L8 4"}),G.createElement("path",{d:"M9 7.24C8.49 6.52 7.71 6.064 6.863 6a2.853 2.853 0 0 0-2.282.906L2.823 8.76c-1.11 1.213-1.095 3.141.035 4.334C3.988 14.287 5.85 14.172 7 13l1-1.003"}))),qu=({strong:e})=>G.createElement("svg",{width:"16",height:"16",className:e?"db bump":"db",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round",fill:e?"currentColor":"none"},G.createElement("path",{d:"M4 3L12 8L4 13Z"})),Gu=e=>G.createElement("svg",Object.assign({},hu,{viewBox:"0 0 12 8"},e),G.createElement("path",{d:"M10 6L6 2 2 6"})),Ku=e=>G.createElement("svg",Object.assign({width:"4",height:"21"},e),G.createElement("rect",{width:"4",height:"21",fill:"currentColor",stroke:"none"})),Yu=(fu(G.createElement("g",null,G.createElement("circle",{cx:"8",cy:"8",r:"7"}),G.createElement("path",{d:"M6.06 6a2 2 0 0 1 3.887.667c0 1.333-2 2-2 2"}),G.createElement("line",{x1:"8",y1:"11",x2:"8",y2:"11"}))),e=>G.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},e),G.createElement("path",{d:"M8 1h3v1l-1 1v4l2 .875V9H9v5.125L8 15l-1-.875V9H4V7.875L6 7V3L5 2V1z"}))),Xu=e=>G.createElement("svg",Object.assign({viewBox:"0 0 24 24"},e),G.createElement("path",{fill:"currentColor",d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205\n11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422\n18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084\n1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93\n0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267\n1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12\n3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0\n1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24\n12.297c0-6.627-5.373-12-12-12"})),Qu=e=>G.createElement("svg",Object.assign({role:"img",viewBox:"0 0 24 24","aria-label":"Observable",fill:"currentColor"},e),G.createElement("path",{d:"M12 21c-1.108 0-2.068-.261-2.88-.783a5.137 5.137 0 0 1-1.867-2.126 11.821 11.821 0 0 1-.952-2.847A16.523 16.523 0 0 1 6 12c0-.862.052-1.686.157-2.474.104-.787.297-1.587.578-2.399.281-.812.643-1.516 1.084-2.113a4.987 4.987 0 0 1 1.735-1.455C10.27 3.186 11.084 3 12 3c1.108 0 2.068.261 2.88.783a5.137 5.137 0 0 1 1.867 2.126c.434.895.751 1.844.952 2.847.2 1.002.301 2.084.301 3.244 0 .862-.052 1.686-.157 2.474a11.76 11.76 0 0 1-.59 2.399c-.29.812-.65 1.516-1.084 2.113-.434.597-1.008 1.082-1.723 1.455-.715.373-1.53.559-2.446.559zm2.118-6.882A2.888 2.888 0 0 0 15 12c0-.824-.287-1.53-.86-2.118C13.566 9.294 12.853 9 12 9c-.853 0-1.566.294-2.14.882A2.925 2.925 0 0 0 9 12c0 .824.287 1.53.86 2.118.574.588 1.287.882 2.14.882.853 0 1.559-.294 2.118-.882zM12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12z"})),Ju=e=>G.createElement("svg",Object.assign({},hu,{fill:"currentColor",stroke:"none"},e),G.createElement("circle",{r:"2",cy:"8",cx:"2"}),G.createElement("circle",{r:"2",cy:"8",cx:"8"}),G.createElement("circle",{r:"2",cy:"8",cx:"14"})),Zu=e=>G.createElement("svg",Object.assign({},hu,{fill:"currentColor",stroke:"none"},e,{viewBox:"0 0 8 14",width:"8",height:"14"}),G.createElement("circle",{r:"1.5",cx:"4",cy:"2"}),G.createElement("circle",{r:"1.5",cx:"4",cy:"7"}),G.createElement("circle",{r:"1.5",cx:"4",cy:"12"})),eh={playground:"Please sign in to save your playground.",like:"Please sign in to like this notebook.",fork:"Please sign in to save your fork.",suggest:"Please sign in to suggest this notebook."};function th({loginReason:e,onDismiss:t,loginAction:n,location:{pathname:r},token:i}){const o="flex w-100 justify-center pv2 pl2 pr3 mt3 f6 fw6 black-70 hover-black ba b--black-10 br2 pointer shadow-2-hover z-2 bg-near-white";return G.createElement("div",{className:"relative bg-white"},e in eh&&G.createElement("div",{className:"absolute w-100 tc",style:{bottom:"calc(100% + 1rem)"}},G.createElement("div",{className:"dib ph2 pv1 f7 fw4 black-50 bg-near-white bb b--black-10 br2 br--top"},eh[e])),t&&G.createElement("div",{onClick:t,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(Eu,{className:"w1 h1"})),G.createElement("div",{className:"pa3 tc"},G.createElement("div",{className:"center"},G.createElement(Qu,{className:"dib v-mid black",style:{height:24,width:24}}),G.createElement("span",{className:"dib v-mid ml2 f3 fw7 black"},"Observable")),G.createElement("div",{className:"mt2 mb4 f6 fw4 black-50"},"A better way to code."),G.createElement("div",{className:"mh3 mt5"},G.createElement("button",{onClick:()=>{n&&n(),window.location.assign(function(e,t){return`https://github.com/login/oauth/authorize?scope=user:email&client_id=1a8619df27715d9d2c97&state=${e}&redirect_uri=${`https://api.observablehq.com/github/oauth?path=/loggedin${t}`}`}(i,r))},className:o},G.createElement(Xu,{className:"w1 h1 ml1 mr2"}),"signup"===e?"Sign up":"Sign in"," with GitHub"),G.createElement("button",{onClick:()=>{n&&n(),window.location.assign(function(e){return`https://api.observablehq.com/twitter/oauth?path=${e}`}(r))},className:o},G.createElement(du,{className:"w1 h1 ml1 mr2",style:{color:"#1DA1F2"}}),"signup"===e?"Sign up":"Sign in"," with Twitter"),G.createElement("button",{onClick:()=>{n&&n(),window.location.assign(function(e){return`https://accounts.google.com/o/oauth2/auth?${cu({client_id:"382981975638-bp9amiuaao54a4jt83almlmihnng4p49.apps.googleusercontent.com",redirect_uri:"https://api.observablehq.com/google/oauth",response_type:"code",state:`/loggedin${e}`,scope:"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email"})}`}(r))},className:o},G.createElement(pu,{className:"w1 h1 ml1 mr2"}),"signup"===e?"Sign up":"Sign in"," with Google"),G.createElement("div",{className:"mt5 f7 fw4 lh-copy black-50"},"By continuing you agree to our"," ",G.createElement("a",{className:"blue hover-dark-blue link",href:"/terms-of-service",rel:"noopener noreferrer",target:"_blank"},"Terms of Service"),"."))))}class nh extends G.Component{constructor(e){super(e),qc(this,"onDismissMouseDown",e=>{if(e.target!==this.backdropRef.current)return;const{onDismiss:t}=this.props;this.stopEvent(e),t&&t(e)}),qc(this,"stopEvent",e=>{e.stopPropagation()}),this.backdropRef=G.createRef()}render(){const{wrapperClass:e}=this.props;return Wa.createPortal(G.createElement("div",null,G.createElement("div",{className:"absolute top-0 right-0 bottom-0 left-0 bg-navy z-1 o-30 min-vh-100"}),G.createElement("div",{className:"flex fixed top-0 right-0 bottom-0 left-0 items-center justify-center mt5 z-1",ref:this.backdropRef,onMouseDown:this.onDismissMouseDown},G.createElement("div",{className:`bg-white mw6 pa3 br2 shadow-1 ${e||""}`,onClick:this.stopEvent,style:{maxHeight:"100%"}},this.props.children))),document.getElementsByClassName("modal")[0])}}const rh=G.createContext(),ih=G.createContext();async function oh(e){sh.token=e;const t=await fetch("https://api.observablehq.com/user",{credentials:"include",cache:"no-store"});if(!t.ok)throw new Yc;const n=await t.json();sh.user=n,sh.api=function(e,t=window.fetch){return function n(r){function i(t,n={}){return o(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Gc({token:e},n))})}async function o(e,n={}){const{method:i}=n,o=await t("https://api.observablehq.com"+e,Gc({credentials:"include"},n,r));if(204===o.status)return!0;let s;if((o.status>=400||!o.ok)&&(400===o.status?s=new Jc(await o.json()):401===o.status?s=new Qc:404===o.status?s=new Zc(await o.json()):o.ok||(s=new Yc)),s)throw"POST"===i||"undefined"==typeof window||window.hasOwnProperty("onunhandledrejection")||dispatchEvent(new CustomEvent("unhandledrejection",{detail:s})),s;return o.json()}return{init:e=>n(e),documentNew(e,t){e||(e={nodes:[{id:0,value:"md`# Untitled`"}]});const{version:n,title:r,nodes:o}=e;return i("/document/new",{version:n,title:r,nodes:o,team:t})},documentSuggest:(e,{to_id:t,from_title:n,version:r,description:o})=>i(`/document/${e}/suggest`,{to_id:t,from_title:n,version:r,description:o}),documentTrash:e=>i(`/document/${e}/trash`,{trashed:!0}),documentTransfer:(e,t)=>i(`/document/${e}/transfer`,{user:t}),documentPutBack:e=>i(`/document/${e}/trash`,{trashed:!1}),documentsLoadPublic:e=>o(`/documents/public${uu({before:e})}`),documentsLoadPopular:()=>o("/documents/public/popular"),documentsLoadUser:({before:e,types:t}={})=>o(`/user/documents${uu({before:e,types:t})}`),documentsLoadTeam:(e,{before:t,types:n}={})=>o(`/team/${e}/documents${uu({before:t,types:n})}`),documentsLoadUserLikes:e=>o(`/user/likes${uu({before:e})}`),documentsEmptyTrash:e=>i("/user/trash/empty",e?{team:e}:{}),documentPublish:(e,t,n,r=!1)=>i(`/document/${e}/publish`,{version:t,title:n,unlisted:r}),documentFork:(e,t,{events:n,team:r,comments:o})=>i(`/document/${e}/fork`,{version:t,team:r,comments:o,events:n}),documentMerge:(e,t,{events:n,target:r})=>i(`/document/${e}/merge`,{version:t,events:n,target:r}),documentUnpublish:e=>i(`/document/${e}/unpublish`),documentLike:(e,t)=>i(`/document/${e}/like`,{like:t}),documentLoad:(e,t)=>o(`/document/${e}${void 0===t?"":`@${t}`}`),documentLoadSecrets:e=>o(`/document/${e}/secrets`),documentAllowSecrets:(e,t)=>i(`/document/${e}/secrets`,{allow:t}),documentLoadHead:e=>o(`/document/${e}/head`),documentLoadMeta:e=>o(`/document/${e}/meta`),documentLoadLiked:e=>o(`/document/${e}/like`),documentLoadForks:(e,t,n)=>o(`/document/${e}/forks${uu({before:t,type:n})}`),documentLoadPublished:(e,t,n)=>o(`/document/@${e}/${t}${void 0===n?"":`@${n}`}`),documentLoadByUser:(e,t)=>o(`/documents/@${e}${uu({before:t})}`),documentVersion:e=>o(`/document/${e}/version`),documentSearch:(e,t,n)=>o(`/documents/search${uu({query:e.trim().toLowerCase(),offset:t,limit:n})}`),documentsLoadCommonAncestry:(e,t,n,r)=>o(`/documents/${e}@${t}/${n}@${r}/ancestry`),collectionsLoadUser:(e,{before:t}={})=>o(`/collections/@${e}${uu({before:t})}`),collectionsLoadUserPinned:e=>o(`/collections/@${e}/pinned`),collectionLoad:(e,t,{before:n}={})=>o(`/collection/@${e}/${t}${uu({before:n})}`),userLoad:e=>o(`/user/@${e}`),userLoadStats:e=>o(`/user/@${e}/stats`),userSecrets:()=>o("/user/secrets"),userSetSecret:({name:e,value:t})=>i("/user/secret",{name:e,value:t}),userSuggestions:({before:e,type:t}={})=>o(`/user/suggestions${uu({before:e,type:t})}`),usersExist:e=>o(`/users-exist?${e.map(e=>`login=${e}`).join("&")}`),suggestionClose:e=>i(`/suggestion/${e}/close`),teamAcceptInvitation:(e,t)=>i(`/team/${e}/accept`,{id:t}),teamRescindInvitation:(e,t)=>i(`/team/${e}/rescind`,{id:t}),teamMembers:e=>o(`/team/${e}/members`),teamInvitations:e=>o(`/team/${e}/invitations`),teamSecrets:e=>o(`/team/${e}/secrets`),teamSetSecret:(e,{name:t,value:n})=>i(`/team/${e}/secret`,{name:t,value:n}),teamSuggestions:(e,{before:t,type:n}={})=>o(`/team/${e}/suggestions${uu({before:t,type:n})}`),teamInvite:(e,t)=>i(`/team/${e}/invite`,{email:t}),teamMemberRemove:(e,t)=>i(`/team/${e}/remove`,{user:t}),teamMemberRole:(e,t,n)=>i(`/team/${e}/role`,{user:t,role:n}),teamBillingUpdate:(e,t)=>i(`/team/${e}/billing`,{stripe_token:t}),teamBilling:e=>o(`/team/${e}/billing`),teamBillingDelete:e=>i(`/team/${e}/billing/delete`),teamEdit:(e,t)=>i(`/team/${e}/edit`,t),teamEditEmail:(e,t)=>i(`/team/${e}/email`,{email:t}),teamEditAvatar:(e,t)=>i(`/team/${e}/avatar`,{avatar:t}),teamCreate:({login:e,name:t,email:n,stripe_token:r})=>i("/team/new",{login:e,name:t,email:n,stripe_token:r}),userEdit:e=>i("/user",e),userEditEmail:e=>i("/user/email",{email:e}),userEditAvatar:e=>i("/user/avatar",{avatar:e}),userEmailConfirm:e=>i("/user/email/confirm",{id:e}),userSetLogin:e=>i("/user/login",{login:e}),collectionNew:({title:e,description:t,owner:n})=>i("/collection/new",{title:e,description:t,owner:n}),collectionEdit:({id:e,title:t,description:n,feature_rank:r,pinned:o})=>i(`/collection/${e}/edit`,{title:t,description:n,feature_rank:r,pinned:o}),collectionDelete:e=>i(`/collection/${e}/delete`),collectionAddDocument:({id:e,document_id:t})=>i(`/collection/${e}/add`,{id:t}),collectionRemoveDocument:({id:e,document_id:t})=>i(`/collection/${e}/remove`,{id:t})}}()}(e),n&&ga("set","userId",n.id)}const sh=new class{constructor(){this.user=null,this.token=null,this.api=null}};class ah extends G.Component{constructor(...e){super(...e),qc(this,"state",{loginVisible:!1,loginAction:void 0,loginReason:void 0}),qc(this,"showLogin",({loginReason:e,loginAction:t})=>{this.setState({loginVisible:!0,loginReason:e,loginAction:t})}),qc(this,"hideLogin",()=>{this.setState({loginVisible:!1})}),qc(this,"refreshUser",async()=>{await oh(sh.token),this.setState({})})}render(){const e=this.props,{permissions:t,userRedirect:n,component:r}=e,i=Kc(e,["permissions","userRedirect","component"]),{loginVisible:o,loginReason:s,loginAction:a}=this.state;return G.createElement(mc,Object.assign({},sh,i,{render:e=>{if(n&&sh.user)return G.createElement(lc,{to:n});if("private"===t&&!sh.user)throw new Qc;if("anon-only"===t&&sh.user)return G.createElement(lc,{to:"/"});if(sh.user&&!sh.user.login)throw new Xc;const i="undefined"!=typeof window&&window.preloadData;return i&&delete window.preloadData,G.createElement(ih.Provider,{value:sh.api},G.createElement(rh.Provider,{value:sh.user},G.createElement(r,Object.assign({showLogin:this.showLogin,refreshUser:this.refreshUser,key:1,preloadData:i},sh,e)),o&&G.createElement(nh,{key:2,onDismiss:this.hideLogin,wrapperClass:"mb-25vh bg-white"},G.createElement(th,{token:sh.token,loginReason:s,loginAction:a,location:this.props.location,onDismiss:this.hideLogin}))))}}))}}const lh="w-100 mw8 ph3 center",ch="w-100 mw8 center";var uh=e=>{let{user:t,s:n}=e,r=Kc(e,["user","s"]);const{style:i}=r,o=Kc(r,["style"]);return G.createElement("img",Object.assign({alt:t?`@${t.login}`:null,src:t&&t.avatar_url?`${t.avatar_url}${t.avatar_url.includes("?")?"&":"?"}s=${2*n}`:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAAAAAA6fptVAAAACklEQVR4nGOaCQAAnwCc1NtUdAAAAABJRU5ErkJggg==",style:Gc({width:n,height:n,maxWidth:"none",flexShrink:0},i)},o))};const hh=G.createElement("div",{className:"flex-auto black br2"},G.createElement("div",{className:"bg-white br2",style:{height:"11rem",backgroundImage:"var(--checkerboard)"}}),G.createElement("div",{className:"pt2"},G.createElement("div",{className:"f4 fw7 truncate"},G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~")),G.createElement("div",{className:"pv1 f6 black-60 hover-blue"},G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~")),G.createElement("div",{className:"f6 fw4 lh-copy"},G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~"))));function dh({collection:e}){if(!e)return hh;const t=`/collection/@${e.owner.login}/${e.slug}`,{title:n,description:r,document_count:i,thumbnail:o}=e;return G.createElement(Wc,{to:t,className:"flex-auto no-underline black hover-blue br2 hover-shadow-4-trigger hide-child"},G.createElement("div",{className:"bg-white bg-center br2 cover hover-shadow-4",style:{height:"11rem",backgroundImage:`url(https://static.observableusercontent.com/thumbnail/${o}.jpg)`}}),G.createElement("div",{className:"pt2"},G.createElement("div",{className:"f4 fw7 truncate"},n,G.createElement(Su,{className:"w1 h1 ml1 child",style:{strokeWidth:2}})),G.createElement("div",{className:"pv1 f6 black-60 hover-blue"},i," notebook",1===i?"":"s"),G.createElement("div",{className:"f6 fw4 lh-copy"},r)))}const ph=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fh=e=>`${ph[e.getMonth()]} ${e.getDate()}`,mh=e=>{const t=Math.floor((Date.now()-e)/1e3/60);return(t<=1?"seconds":t<45?`${t} minutes`:t<90?"1 hour":t<1440?`${Math.round(t/60)} hours`:t<2880?"1 day":t<43200?`${Math.round(t/1440)} days`:t<86400?"1 month":t<525960?`${Math.round(t/43200)} months`:t<1051199?"1 year":`${Math.round(t/525960)} years`)+" ago"};class gh extends G.Component{constructor(e){super(e),qc(this,"onKeyDown",e=>{const{onClickOutside:t}=this.props;"Escape"===e.key&&t(e)}),qc(this,"onClick",e=>{const{onClickOutside:t}=this.props;this.container.contains(e.target)||t(e)}),this.getContainer=this.getContainer.bind(this)}componentDidMount(){document.addEventListener("click",this.onClick,!0),document.addEventListener("keydown",this.onKeyDown,!0)}componentWillUnmount(){document.removeEventListener("click",this.onClick,!0),document.removeEventListener("keydown",this.onKeyDown,!0)}getContainer(e){this.container=e}render(){const e=this.props,{children:t,onClickOutside:n}=e,r=Kc(e,["children","onClickOutside"]);return G.createElement("div",Object.assign({},r,{ref:this.getContainer}),t)}}function vh({open:e,children:t,onClickOutside:n,extraStyle:r,top:i,left:o,leftPos:s,rightPos:a}){return G.createElement(gh,{onClickOutside:n},G.createElement("nav",{className:"db absolute lh-solid tl z-5",style:Gc({},o?{left:null!=s?s:-8}:{right:null!=a?a:-8},{width:"10rem"},i?{bottom:"1.6rem"}:{},r),"aria-label":"submenu","aria-hidden":""+!e},G.createElement("div",{className:"bg-white br2 shadow-4 overflow-hidden",style:{marginTop:"10px"}},t),G.createElement("div",{className:`absolute ${o?"left-1":"right-1"}`,style:Gc({clip:"rect(0 18px 14px -4px)"},i?{right:6,bottom:-14,transform:"rotate(180deg)"}:{top:-4})},G.createElement("div",{className:"w1 h1 bg-white",style:{boxShadow:"0 2px 3px 0 rgba(0,0,0,.2)",transform:"rotate(45deg) translate(6px, 6px)"}}))))}function bh(e){return(e|=0)>=1e3?(e/1e3).toFixed(Math.max(0,4-Math.floor(Math.log10(e)))).replace(/\.?0*$/,"")+"K":e+""}function yh(e){return e<1e4?e.toLocaleString():(e/1e3).toFixed(1)+"k"}function wh(e,t,n=(e=>G.createElement("span",{className:"black bg-light-yellow"},e))){let r,i=0,o=0,s=[];const a=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");if(!e)return null;for(;null!==(r=a.exec(e));)r.index!==i&&s.push(e.substring(i,r.index)),s.push(G.cloneElement(n(r[0]),{key:++o})),i=r.index+r[0].length;return i!==e.length&&s.push(e.substring(i)),s}const kh=Symbol("ACTION_PUBLISH"),Eh=Symbol("ACTION_PUBLISH_DISABLED"),xh=Symbol("ACTION_PUBLISH_PROMOTED"),Sh=Symbol("ACTION_FORK"),Ch=Symbol("ACTION_FORK_PROMOTED"),_h=Symbol("ACTION_MERGE"),Th=Symbol("ACTION_MERGE_PROMOTED"),Nh=Symbol("ACTION_SUGGEST"),Ph=Symbol("ACTION_SUGGEST_PROMOTED");function Ah(e,t){if(null==t)return!1;const{owner:n}=t;return function(e,t){return null!=e&&null!=t&&("team"===t.type?e.teams.some(e=>e.id===t.id):e.id===t.id)}(e,n)}function Lh(e,t){return e.id===t.id&&e.save_version<=t.save_version}function Mh(e,t){return e&&(Ah(e,t)||Yh(t))}function Oh(e,t){return!!Ah(e,t)&&(!Hh(t)||qh(t))}function Ih(e,t){return Ah(e,t)&&function(e){const{slug:t,publish_time:n}=e;return null!=t&&Date.now()-n<864e5}(t)}function Rh(e,t){return Ah(e,t)&&Wh(t)&&Vh(t)&&!Yh(t)&&(function(e){const{save_version:t,fork_of:{version:n}}=e;return t>n}(t)||Gh(t))}function Dh(e,t){return Ah(e,t)&&Vh(t)}function Fh(e){if(!e)return!1;const{slug:t}=e;return null!=t}function jh(e){if(!e)return!1;const{publish_time:t,slug:n}=e;return null!=t&&null==n}function Hh(e){if(!e)return!1;const{publish_time:t}=e;return null!=t}function $h(e){if(!e)return!1;const{trashed:t}=e;return!!t}function Uh(e){if(!e)return!1;const{owner:t}=e;return"team"===t.type}function Wh(e){if(!e)return!1;const{fork_of:t}=e;return null!=t&&0!=t}function Bh(e,t){const{fork_of:n}=e,{id:r}=t;return!!n&&n.id===r}function Vh(e){const{save_version:t,latest_version:n}=e;return t===n}function zh(e){const{model:t,save_version:n}=e;return t&&t.version>n}function qh(e){const{model:t,edit_unpublished:n,publish_version:r,save_version:i}=e;return!!n||t&&null!=r&&function(e,t,n){for(let r=n;r>t;--r){const t=e[r];if(!t)return!1;switch(t.type){case"revert":r=t.node_id+1;continue;case"noop":continue}return!0}return!1}(t.events,r,i)}function Gh(e){const{comments:t=[]}=e;return t.length>0}function Kh(e){const{base_changes:t,target_changes:n,mapping:r}=e;if(0===t.length)return[];const i=new Set(n),o=new Map(r),s=[];for(const a of t)i.has(o.get(a))||s.push(a);return s}function Yh(e){const{suggestion_from:t}=e;return t&&null==t.close_time}function Xh(e){const{owner:t,slug:n}=e;return null==n&&"team"===t.type}function Qh(e,t){if(!e)return"#";const{slug:n,owner:r,id:i}=e;return Fh(e)?`/@${r.login}/${n}`:`/d/${i}${null!=t?`@${t}`:""}`}function Jh(e){return e.title||"Untitled"}function Zh(e,t){const{slug:n,owner:r,id:i}=e;return`https://api.observablehq.com${Fh(e)?`/@${r.login}/${n}`:`/d/${i}`}.${t}`}function ed(e){return`/compare/${e.to_id}...${e.from_id}`}function td(e,t,n,r){return null==n||n.id===e.id&&(null==r||r===n.latest_version)?`/compare/${e.id}@${t}`:`/compare/${e.id}${null!=t?`@${t}`:""}...${n.id}${null!=r?`@${r}`:""}`}function nd(e){return`/@${e.login}`}function rd(e){return e.name||`@${e.login}`}const id=G.createElement("div",{className:"flex-auto relative"},G.createElement("div",{className:"bg-white br2"},G.createElement("div",{className:"br2 br--top",style:{paddingTop:"62.5%",backgroundImage:"var(--checkerboard)"}}),G.createElement("div",{className:"truncate bt b--black-10"},G.createElement("span",{className:"db flex pl2 pr4 f6 fw4 lh-solid black"},G.createElement("div",{className:"pt2 pb1 mr2 truncate"},G.createElement("span",{className:"near-white bg-near-white"},"~~~~~~~~~~"))),G.createElement("div",{className:"flex ph2 pb2 f7 fw4"},G.createElement("span",{className:"near-white bg-near-white"},"~~~~~~~~~~")))));let od=({user:e,notebook:t,toggleMenu:n,open:r})=>Ah(e,t)?G.createElement("svg",{"aria-haspopup":!0,className:`pointer absolute right-0 bottom-0 ${r?"black-70":"black-30 hover-blue"}`,title:"Notebook actions…",onClick:n,width:"24",height:"48"},r&&G.createElement("circle",{r:"10",cx:"12",cy:"24",className:"near-white",fill:"currentColor"}),G.createElement("circle",{r:"1.5",cx:"12",cy:19,fill:"currentColor"}),G.createElement("circle",{r:"1.5",cx:"12",cy:24,fill:"currentColor"}),G.createElement("circle",{r:"1.5",cx:"12",cy:29,fill:"currentColor"})):null;const sd=({notebook:e,closeMenu:t,onPutBack:n,onTrash:r,onRemoveFromCollection:i,url:o})=>G.createElement(vh,{onClickOutside:t,extraStyle:{right:-12,marginTop:-5,width:"auto"}},$h(e)?G.createElement("a",{onClick:n,className:"flex items-center pa2 f6 black-70 hover-black hover-bg-near-white pointer"},G.createElement(wu,{className:"w1 h1 mr1"}),"Put back"):G.createElement("a",{onClick:r,className:"flex items-center pa2 f6 black-70 hover-red hover-bg-near-white pointer"},G.createElement(Du,{className:"w1 h1 mr1"}),"Move to trash"),G.createElement(Wc,{to:`${o}/safe`,className:"flex items-center pa2 f6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(Hu,{className:"w1 h1 mr1"}),"Safe mode"),i&&G.createElement("a",{onClick:()=>i(e),className:"flex items-center pa2 f6 black-70 hover-red hover-bg-near-white pointer"},G.createElement(Eu,{className:"w1 h1 mr1"}),"Remove from collection")),ad=({notebook:e})=>{const{owner:t,update_time:n}=e,r=new Date(n);return G.createElement("div",{className:"flex ph2 pb2 f7 fw4 black-30"},G.createElement("div",{className:"inline-flex items-center"},G.createElement(Wc,{className:"inline-flex items-center no-underline black-50 hover-blue",to:`/@${t.login}`},G.createElement(uh,{user:t,s:16,className:"mr1 br-100"}),G.createElement("span",null,t.name||t.login)),G.createElement("span",{title:r.toLocaleString(),className:"ml1 nowrap"},e.slug?`on ${fh(r)}`:mh(r))),e.likes?G.createElement("div",{className:"inline-flex items-center ml2"},G.createElement(ju,{style:{width:14,strokeWidth:1,height:14,marginRight:2}}),G.createElement("span",null,bh(e.likes))):null)};class ld extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{open:!1,hidden:!1}),qc(this,"toggleMenu",e=>{this.setState({open:!this.state.open}),e.stopPropagation()}),qc(this,"closeMenu",e=>{this.setState({open:!1}),e.stopPropagation()})}render(){const{notebook:e,suggestion:t,reload:n,onRemoveFromCollection:r,query:i}=this.props,{open:o,hidden:s}=this.state;if(s)return null;if(!e)return id;const a=Qh(e);return G.createElement("div",{className:"flex-auto relative"},G.createElement("div",{className:"bg-white br2 hover-shadow-4"},G.createElement(Wc,{"aria-label":e?e.title:"",to:a},G.createElement("div",{className:`br2 br--top${e&&e.thumbnail?" cover bg-center":""}`,style:Gc({paddingTop:"62.5%"},{backgroundImage:e.thumbnail?`url(https://static.observableusercontent.com/thumbnail/${e.thumbnail}.jpg)`:"var(--checkerboard)"})})),G.createElement("div",{className:"truncate bt b--black-10"},G.createElement(Wc,{to:a,className:"db flex pl2 pr4 f6 fw4 lh-solid no-underline black hover-blue"},G.createElement("div",{title:e?e.title:"",className:"pt2 pb1 mr2 truncate"},(i?wh(e.title,i):e.title)||"Untitled"),!Fh(e)&&G.createElement("div",{style:{paddingTop:"0.625rem"},className:"ml2 f7 fw4 ttu black-30"},Hh(e)?"SHARED":"PRIVATE"),Wh(e)&&G.createElement(Wu,{title:"This notebook is a fork",style:{paddingTop:"0.55rem",width:".8rem",height:".8rem",flexShrink:"0",strokeWidth:1},className:"dib w1 h1 v-base ml1 black-30"}),t?G.createElement(Cu,{title:"This notebook is a suggestion",style:{paddingTop:"0.55rem",width:".8rem",height:".8rem",flexShrink:"0",strokeWidth:1},className:"dib w1 h1 v-base ml1 black-30"}):null),G.createElement(ad,{notebook:e})),G.createElement(rh.Consumer,null,t=>G.createElement(od,{notebook:e,open:o,user:t,toggleMenu:this.toggleMenu}))),o&&G.createElement(ih.Consumer,null,t=>{return G.createElement(sd,{notebook:e,closeMenu:this.closeMenu,onPutBack:async()=>{this.setState({hidden:!0}),await t.documentPutBack(this.props.notebook.id),n()},onRemoveFromCollection:r,onTrash:async()=>{this.setState({hidden:!0}),await t.documentTrash(this.props.notebook.id),n()},url:a})}))}}function cd({showSignUp:e}){return G.createElement("div",{className:"flex flex-column items-center justify-center mt5"},G.createElement("div",{className:"mw5 mb3 f5 fw4 lh-copy tc black-70"},"Sign up for free to create your own notebooks."),G.createElement("a",{onClick:e,className:"flex inline-flex-ns justify-center ph3-ns pa2 fw6 no-underline white bg-green hover-bg-dark-green br2 shadow-2-hover hover-rise z-1 pointer"},"Sign up"))}function ud(e){return function(){return e}}var hd=function(){};hd.thatReturns=ud,hd.thatReturnsFalse=ud(!1),hd.thatReturnsTrue=ud(!0),hd.thatReturnsNull=ud(null),hd.thatReturnsThis=function(){return this},hd.thatReturnsArgument=function(e){return e};var dd=hd,pd=function(e){};var fd=function(e,t,n,r,i,o,s,a){if(pd(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},md=Object.getOwnPropertySymbols,gd=Object.prototype.hasOwnProperty,vd=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}})()&&Object.assign;var bd,yd="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wd=(function(e){e.exports=function(){function e(e,t,n,r,i,o){o!==yd&&fd(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=dd,n.PropTypes=n,n}()}(bd={exports:{}},bd.exports),bd.exports),kd=function(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},Ed=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()},xd=function(e){var t="",n=Object.keys(e);return n.forEach(function(r,i){var o=e[r];(function(e){return/[height|width]$/.test(e)})(r=Ed(r))&&"number"==typeof o&&(o+="px"),t+=!0===o?r:!1===o?"not "+r:"("+r+": "+o+")",i<n.length-1&&(t+=" and ")}),t},Sd=function(e){var t="";return"string"==typeof e?e:e instanceof Array?(e.forEach(function(n,r){t+=xd(n),r<e.length-1&&(t+=", ")}),t):xd(e)},Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Td=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Nd=function(e){function t(){var n,r;_d(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=Td(this,e.call.apply(e,[this].concat(o))),r.state={matches:r.props.defaultMatches},r.updateMatches=function(){return r.setState({matches:r.mediaQueryList.matches})},Td(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){if("object"===("undefined"==typeof window?"undefined":Cd(window))){var e=this.props.targetWindow||window;kd("function"==typeof e.matchMedia,"<Media targetWindow> does not support `matchMedia`.");var t=this.props.query;"string"!=typeof t&&(t=Sd(t)),this.mediaQueryList=e.matchMedia(t),this.mediaQueryList.addListener(this.updateMatches),this.updateMatches()}},t.prototype.componentWillUnmount=function(){this.mediaQueryList.removeListener(this.updateMatches)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.render,r=this.state.matches;return n?r?n():null:t?"function"==typeof t?t(r):(!Array.isArray(t)||t.length)&&r?G.Children.only(t):null:null},t}(G.Component);Nd.propTypes={defaultMatches:wd.bool,query:wd.oneOfType([wd.string,wd.object,wd.arrayOf(wd.object.isRequired)]).isRequired,render:wd.func,children:wd.oneOfType([wd.node,wd.func]),targetWindow:wd.object},Nd.defaultProps={defaultMatches:!0};class Pd extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{open:!1}),qc(this,"close",e=>{e.stopPropagation(),this.setState({open:!1})}),qc(this,"toggle",e=>{e.stopPropagation(),this.setState(({open:e})=>({open:!e}))})}render(){const{user:e,mobile:t}=this.props,{open:n}=this.state;if(!e)return G.createElement("span",null);let r=G.createElement("div",{className:t?"":"pv2 nowrap"},e.login&&G.createElement(G.Fragment,null,G.createElement(Wc,{to:`/@${e.login}`,onClick:this.close,className:"flex items-center ph3 pv2 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(uh,{user:e,s:16,className:"mr1 br-100",style:{marginTop:-1,marginBottom:-1}}),e.name||e.login),e.teams.map(e=>G.createElement(Wc,{key:e.login,to:`/@${e.login}`,onClick:this.close,className:"flex items-center ph3 pv2 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(uh,{user:e,s:16,className:"mr1 br-100",style:{marginTop:-1,marginBottom:-1}}),e.name||e.login)),G.createElement(Wc,{to:"/settings",onClick:this.close,className:"flex items-center ph3 pv2 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},"Settings")),G.createElement("form",{method:"POST",action:"/logout"},G.createElement("input",{type:"hidden",name:"token",value:sh.token}),G.createElement("button",{className:"flex w-100 items-center ph3 pv2 f6 fw6 tl black-70 hover-black bg-transparent hover-bg-near-white input-reset bn pointer"},"Sign out")));return t?G.createElement("div",{className:"nl2 nr2"},r):G.createElement("section",{style:{lineHeight:0},className:"dib relative","aria-haspopup":!0},G.createElement(uh,{user:e,title:"Account and settings…",onClick:this.toggle,className:"dib ba b--white br-100 pointer",s:32}),n&&G.createElement(vh,{onClickOutside:this.close,extraStyle:{width:"auto"}},r))}}var Ad=function(e,t){if(e===t)return!0;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0},Ld=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Md=function(e){var t=e.data,n=e.multiSection;function r(e){var r=Ld(e,2),i=r[0],o=r[1];return n?null===o||o===t[i]-1?null===(i=function(e){for(null===e?e=0:e++;e<t.length&&0===t[e];)e++;return e===t.length?null:e}(i))?[null,null]:[i,0]:[i,o+1]:0===t||o===t-1?[null,null]:null===o?[null,0]:[null,o+1]}return{next:r,prev:function(e){var r=Ld(e,2),i=r[0],o=r[1];return n?null===o||0===o?null===(i=function(e){for(null===e?e=t.length-1:e--;e>=0&&0===t[e];)e--;return-1===e?null:e}(i))?[null,null]:[i,t[i]-1]:[i,o-1]:0===t||0===o?[null,null]:null===o?[null,t-1]:[null,o-1]},isLast:function(e){return null===r(e)[1]}}},Od=Object.prototype.propertyIsEnumerable;function Id(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(t){return Od.call(e,t)})}var Rd=Object.assign||function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){n=arguments[o],r=Id(Object(n));for(var s=0;s<r.length;s++)i[r[s]]=n[r[s]]}return i},Dd=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i,o=(i=Rd)&&i.__esModule?i:{default:i},s=function(e){return e};t.default=function(e){var t=Array.isArray(e)&&2===e.length?e:[e,null],i=n(t,2),a=i[0],l=i[1];return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var c=n.map(function(e){return a[e]}).filter(s);return"string"==typeof c[0]||"function"==typeof l?{key:e,className:l?l.apply(void 0,r(c)):c.join(" ")}:{key:e,style:o.default.apply(void 0,[{}].concat(r(c)))}}},e.exports=t.default});t(Dd);var Fd=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e===t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!0;var s={},a=void 0,l=void 0;for(a=0,l=r.length;a<l;a++)s[r[a]]=!0;for(a=0,l=i.length;a<l;a++){var c=i[a],u=e[c],h=t[c];if(u!==h){if(!s[c]||null===u||null===h||"object"!==(void 0===u?"undefined":n(u))||"object"!==(void 0===h?"undefined":n(h)))return!0;var d=Object.keys(u),p=Object.keys(h);if(d.length!==p.length)return!0;for(var f=0,m=d.length;f<m;f++){var g=d[f];if(u[g]!==h[g])return!0}}}return!1}});t(Fd);var jd=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=s(G),i=s(Va),o=s(Fd);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G.Component),n(t,[{key:"shouldComponentUpdate",value:function(e){return(0,o.default)(e,this.props)}},{key:"render",value:function(){var e=this.props,t=e.section,n=e.renderSectionTitle,i=e.theme,o=e.sectionKeyPrefix,s=n(t);return s?r.default.createElement("div",i(o+"title","sectionTitle"),s):null}}]),t}();a.propTypes={section:i.default.any.isRequired,renderSectionTitle:i.default.func.isRequired,theme:i.default.func.isRequired,sectionKeyPrefix:i.default.string.isRequired},t.default=a});t(jd);var Hd=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(G),o=a(Va),s=a(Fd);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.storeItemReference=function(e){null!==e&&(r.item=e)},r.onMouseEnter=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onMouseEnter(e,{sectionIndex:n,itemIndex:i})},r.onMouseLeave=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onMouseLeave(e,{sectionIndex:n,itemIndex:i})},r.onMouseDown=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onMouseDown(e,{sectionIndex:n,itemIndex:i})},r.onClick=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onClick(e,{sectionIndex:n,itemIndex:i})},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return(0,s.default)(e,this.props,["renderItemData"])}},{key:"render",value:function(){var e=this.props,t=e.isHighlighted,r=e.item,o=e.renderItem,s=e.renderItemData,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["isHighlighted","item","renderItem","renderItemData"]);return delete a.sectionIndex,delete a.itemIndex,"function"==typeof a.onMouseEnter&&(a.onMouseEnter=this.onMouseEnter),"function"==typeof a.onMouseLeave&&(a.onMouseLeave=this.onMouseLeave),"function"==typeof a.onMouseDown&&(a.onMouseDown=this.onMouseDown),"function"==typeof a.onClick&&(a.onClick=this.onClick),i.default.createElement("li",n({role:"option"},a,{ref:this.storeItemReference}),o(r,n({isHighlighted:t},s)))}}]),t}();c.propTypes={sectionIndex:o.default.number,isHighlighted:o.default.bool.isRequired,itemIndex:o.default.number.isRequired,item:o.default.any.isRequired,renderItem:o.default.func.isRequired,renderItemData:o.default.object.isRequired,onMouseEnter:o.default.func,onMouseLeave:o.default.func,onMouseDown:o.default.func,onClick:o.default.func},t.default=c});t(Hd);var $d=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(G),o=l(Va),s=l(Hd),a=l(Fd);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.storeHighlightedItemReference=function(e){r.props.onHighlightedItemChange(null===e?null:e.item)},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return(0,a.default)(e,this.props,["itemProps"])}},{key:"render",value:function(){var e=this,t=this.props,r=t.items,o=t.itemProps,a=t.renderItem,l=t.renderItemData,c=t.sectionIndex,u=t.highlightedItemIndex,h=t.getItemId,d=t.theme,p=t.keyPrefix,f=null===c?p:p+"section-"+c+"-",m="function"==typeof o;return i.default.createElement("ul",n({role:"listbox"},d(f+"items-list","itemsList")),r.map(function(t,r){var p=0===r,g=r===u,v=f+"item-"+r,b=m?o({sectionIndex:c,itemIndex:r}):o,y=n({id:h(c,r),"aria-selected":g},d(v,"item",p&&"itemFirst",g&&"itemHighlighted"),b);return g&&(y.ref=e.storeHighlightedItemReference),i.default.createElement(s.default,n({},y,{sectionIndex:c,isHighlighted:g,itemIndex:r,item:t,renderItem:a,renderItemData:l}))}))}}]),t}();u.propTypes={items:o.default.array.isRequired,itemProps:o.default.oneOfType([o.default.object,o.default.func]),renderItem:o.default.func.isRequired,renderItemData:o.default.object.isRequired,sectionIndex:o.default.number,highlightedItemIndex:o.default.number,onHighlightedItemChange:o.default.func.isRequired,getItemId:o.default.func.isRequired,theme:o.default.func.isRequired,keyPrefix:o.default.string.isRequired},u.defaultProps={sectionIndex:null},t.default=u});t($d);var Ud=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=h(G),s=h(Va),a=h(Md),l=h(Dd),c=h(jd),u=h($d);function h(e){return e&&e.__esModule?e:{default:e}}var d={},p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.storeInputReference=function(e){null!==e&&(n.input=e)},n.storeItemsContainerReference=function(e){null!==e&&(n.itemsContainer=e)},n.onHighlightedItemChange=function(e){n.highlightedItem=e},n.getItemId=function(e,t){return null===t?null:"react-autowhatever-"+n.props.id+"-"+(null===e?"":"section-"+e)+"-item-"+t},n.onFocus=function(e){var t=n.props.inputProps;n.setState({isInputFocused:!0}),t.onFocus&&t.onFocus(e)},n.onBlur=function(e){var t=n.props.inputProps;n.setState({isInputFocused:!1}),t.onBlur&&t.onBlur(e)},n.onKeyDown=function(e){var t=n.props,i=t.inputProps,o=t.highlightedSectionIndex,s=t.highlightedItemIndex;switch(e.key){case"ArrowDown":case"ArrowUp":var a="ArrowDown"===e.key?"next":"prev",l=n.sectionIterator[a]([o,s]),c=r(l,2),u=c[0],h=c[1];i.onKeyDown(e,{newHighlightedSectionIndex:u,newHighlightedItemIndex:h});break;default:i.onKeyDown(e,{highlightedSectionIndex:o,highlightedItemIndex:s})}},n.highlightedItem=null,n.state={isInputFocused:!1},n.setSectionsItems(e),n.setSectionIterator(e),n.setTheme(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G.Component),i(t,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"componentWillReceiveProps",value:function(e){e.items!==this.props.items&&this.setSectionsItems(e),e.items===this.props.items&&e.multiSection===this.props.multiSection||this.setSectionIterator(e),e.theme!==this.props.theme&&this.setTheme(e)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(e){e.multiSection&&(this.sectionsItems=e.items.map(function(t){return e.getSectionItems(t)}),this.sectionsLengths=this.sectionsItems.map(function(e){return e.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(e){return 0===e}))}},{key:"setSectionIterator",value:function(e){this.sectionIterator=(0,a.default)({multiSection:e.multiSection,data:e.multiSection?this.sectionsLengths:e.items.length})}},{key:"setTheme",value:function(e){this.theme=(0,l.default)(e.theme)}},{key:"renderSections",value:function(){var e=this;if(this.allSectionsAreEmpty)return null;var t=this.theme,n=this.props,r=n.id,i=n.items,s=n.renderItem,a=n.renderItemData,l=n.renderSectionTitle,h=n.highlightedSectionIndex,d=n.highlightedItemIndex,p=n.itemProps;return i.map(function(n,i){var f="react-autowhatever-"+r+"-",m=f+"section-"+i+"-",g=0===i;return o.default.createElement("div",t(m+"container","sectionContainer",g&&"sectionContainerFirst"),o.default.createElement(c.default,{section:n,renderSectionTitle:l,theme:t,sectionKeyPrefix:m}),o.default.createElement(u.default,{items:e.sectionsItems[i],itemProps:p,renderItem:s,renderItemData:a,sectionIndex:i,highlightedItemIndex:h===i?d:null,onHighlightedItemChange:e.onHighlightedItemChange,getItemId:e.getItemId,theme:t,keyPrefix:f,ref:e.storeItemsListReference}))})}},{key:"renderItems",value:function(){var e=this.props.items;if(0===e.length)return null;var t=this.theme,n=this.props,r=n.id,i=n.renderItem,s=n.renderItemData,a=n.highlightedSectionIndex,l=n.highlightedItemIndex,c=n.itemProps;return o.default.createElement(u.default,{items:e,itemProps:c,renderItem:i,renderItemData:s,highlightedItemIndex:null===a?l:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:t,keyPrefix:"react-autowhatever-"+r+"-"})}},{key:"ensureHighlightedItemIsVisible",value:function(){var e=this.highlightedItem;if(e){var t=this.itemsContainer,n=e.offsetParent===t?e.offsetTop:e.offsetTop-t.offsetTop,r=t.scrollTop;n<r?r=n:n+e.offsetHeight>r+t.offsetHeight&&(r=n+e.offsetHeight-t.offsetHeight),r!==t.scrollTop&&(t.scrollTop=r)}}},{key:"render",value:function(){var e=this.theme,t=this.props,r=t.id,i=t.multiSection,s=t.renderInputComponent,a=t.renderItemsContainer,l=t.highlightedSectionIndex,c=t.highlightedItemIndex,u=this.state.isInputFocused,h=i?this.renderSections():this.renderItems(),d=null!==h,p=this.getItemId(l,c),f="react-autowhatever-"+r,m=n({role:"combobox","aria-haspopup":"listbox","aria-owns":f,"aria-expanded":d},e("react-autowhatever-"+r+"-container","container",d&&"containerOpen"),this.props.containerProps),g=s(n({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":f,"aria-activedescendant":p},e("react-autowhatever-"+r+"-input","input",d&&"inputOpen",u&&"inputFocused"),this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),v=a({containerProps:n({id:f,role:"listbox"},e("react-autowhatever-"+r+"-items-container","itemsContainer",d&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:h});return o.default.createElement("div",m,g,v)}}]),t}();p.propTypes={id:s.default.string,multiSection:s.default.bool,renderInputComponent:s.default.func,renderItemsContainer:s.default.func,items:s.default.array.isRequired,renderItem:s.default.func,renderItemData:s.default.object,renderSectionTitle:s.default.func,getSectionItems:s.default.func,containerProps:s.default.object,inputProps:s.default.object,itemProps:s.default.oneOfType([s.default.object,s.default.func]),highlightedSectionIndex:s.default.number,highlightedItemIndex:s.default.number,theme:s.default.oneOfType([s.default.object,s.default.array])},p.defaultProps={id:"1",multiSection:!1,renderInputComponent:function(e){return o.default.createElement("input",e)},renderItemsContainer:function(e){var t=e.containerProps,n=e.children;return o.default.createElement("div",t,n)},renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:d,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:d,inputProps:d,itemProps:d,highlightedSectionIndex:null,highlightedItemIndex:null,theme:{container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"}},t.default=p});t(Ud);var Wd=Ud.default,Bd=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.defaultTheme={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"},t.mapToAutowhateverTheme=function(e){var t={};for(var n in e)switch(n){case"suggestionsContainer":t.itemsContainer=e[n];break;case"suggestionsContainerOpen":t.itemsContainerOpen=e[n];break;case"suggestion":t.item=e[n];break;case"suggestionFirst":t.itemFirst=e[n];break;case"suggestionHighlighted":t.itemHighlighted=e[n];break;case"suggestionsList":t.itemsList=e[n];break;default:t[n]=e[n]}return t}});t(Bd);Bd.defaultTheme,Bd.mapToAutowhateverTheme;var Vd=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(G),o=l(Va),s=l(Ad),a=l(Wd);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){return!0},u=function(e){function t(e){var n=e.alwaysRenderSuggestions;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return h.call(r),r.state={isFocused:!1,isCollapsed:!n,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},r.justPressedUpDown=!1,r.justMouseEntered=!1,r.pressedSuggestion=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G.Component),r(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"componentWillReceiveProps",value:function(e){(0,s.default)(e.suggestions,this.props.suggestions)?e.highlightFirstSuggestion&&e.suggestions.length>0&&!1===this.justPressedUpDown&&!1===this.justMouseEntered&&this.highlightFirstSuggestion():this.willRenderSuggestions(e)?this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions():this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.suggestions,i=n.onSuggestionHighlighted,o=n.highlightFirstSuggestion;if(!(0,s.default)(r,e.suggestions)&&r.length>0&&o)this.highlightFirstSuggestion();else if(i){var a=this.getHighlightedSuggestion();a!=t.highlightedSuggestion&&i({suggestion:a})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(e,t,n){var r=this;this.setState(function(i){var o=i.valueBeforeUpDown;return null===t?o=null:null===o&&void 0!==n&&(o=n),{highlightedSectionIndex:e,highlightedSuggestionIndex:t,highlightedSuggestion:null===t?null:r.getSuggestion(e,t),valueBeforeUpDown:o}})}},{key:"resetHighlightedSuggestion",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(t){var n=t.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:e?null:n}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(e,t){var n=this.props,r=n.suggestions,i=n.multiSection,o=n.getSectionSuggestions;return i?o(r[e])[t]:r[t]}},{key:"getHighlightedSuggestion",value:function(){var e=this.state,t=e.highlightedSectionIndex,n=e.highlightedSuggestionIndex;return null===n?null:this.getSuggestion(t,n)}},{key:"getSuggestionValueByIndex",value:function(e,t){return(0,this.props.getSuggestionValue)(this.getSuggestion(e,t))}},{key:"getSuggestionIndices",value:function(e){var t=e.getAttribute("data-section-index"),n=e.getAttribute("data-suggestion-index");return{sectionIndex:"string"==typeof t?parseInt(t,10):null,suggestionIndex:parseInt(n,10)}}},{key:"findSuggestionElement",value:function(e){var t=e;do{if(null!==t.getAttribute("data-suggestion-index"))return t;t=t.parentNode}while(null!==t);throw console.error("Clicked element:",e),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(e,t,n){var r=this.props.inputProps,i=r.value,o=r.onChange;t!==i&&o(e,{newValue:t,method:n})}},{key:"willRenderSuggestions",value:function(e){var t=e.suggestions,n=e.inputProps,r=e.shouldRenderSuggestions,i=n.value;return t.length>0&&r(i)}},{key:"getQuery",value:function(){var e=this.props.inputProps.value,t=this.state.valueBeforeUpDown;return(null===t?e:t).trim()}},{key:"render",value:function(){var e=this,t=this.props,r=t.suggestions,o=t.renderInputComponent,s=t.onSuggestionsFetchRequested,l=t.renderSuggestion,u=t.inputProps,h=t.multiSection,d=t.renderSectionTitle,p=t.id,f=t.getSectionSuggestions,m=t.theme,g=t.getSuggestionValue,v=t.alwaysRenderSuggestions,b=t.highlightFirstSuggestion,y=this.state,w=y.isFocused,k=y.isCollapsed,E=y.highlightedSectionIndex,x=y.highlightedSuggestionIndex,S=y.valueBeforeUpDown,C=v?c:this.props.shouldRenderSuggestions,_=u.value,T=u.onFocus,N=u.onKeyDown,P=this.willRenderSuggestions(this.props),A=v||w&&!k&&P,L=A?r:[],M=n({},u,{onFocus:function(t){if(!e.justSelectedSuggestion&&!e.justClickedOnSuggestionsContainer){var n=C(_);e.setState({isFocused:!0,isCollapsed:!n}),T&&T(t),n&&s({value:_,reason:"input-focused"})}},onBlur:function(t){e.justClickedOnSuggestionsContainer?e.input.focus():(e.blurEvent=t,e.justSelectedSuggestion||(e.onBlur(),e.onSuggestionsClearRequested()))},onChange:function(t){var r=t.target.value,i=C(r);e.maybeCallOnChange(t,r,"type"),e.setState(n({},b?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!i})),i?s({value:r,reason:"input-changed"}):e.onSuggestionsClearRequested()},onKeyDown:function(t,n){var i=t.keyCode;switch(i){case 40:case 38:if(k)C(_)&&(s({value:_,reason:"suggestions-revealed"}),e.revealSuggestions());else if(r.length>0){var o=n.newHighlightedSectionIndex,a=n.newHighlightedItemIndex,l=void 0;l=null===a?null===S?_:S:e.getSuggestionValueByIndex(o,a),e.updateHighlightedSuggestion(o,a,_),e.maybeCallOnChange(t,l,40===i?"down":"up")}t.preventDefault(),e.justPressedUpDown=!0,setTimeout(function(){e.justPressedUpDown=!1});break;case 13:if(229===t.keyCode)break;var c=e.getHighlightedSuggestion();if(A&&!v&&e.closeSuggestions(),null!=c){var u=g(c);e.maybeCallOnChange(t,u,"enter"),e.onSuggestionSelected(t,{suggestion:c,suggestionValue:u,suggestionIndex:x,sectionIndex:E,method:"enter"}),e.justSelectedSuggestion=!0,setTimeout(function(){e.justSelectedSuggestion=!1})}break;case 27:A&&t.preventDefault();var h=A&&!v;if(null===S){if(!h){e.maybeCallOnChange(t,"","escape"),C("")?s({value:"",reason:"escape-pressed"}):e.onSuggestionsClearRequested()}}else e.maybeCallOnChange(t,S,"escape");h?(e.onSuggestionsClearRequested(),e.closeSuggestions()):e.resetHighlightedSuggestion()}N&&N(t)}}),O={query:this.getQuery()};return i.default.createElement(a.default,{multiSection:h,items:L,renderInputComponent:o,renderItemsContainer:this.renderSuggestionsContainer,renderItem:l,renderItemData:O,renderSectionTitle:d,getSectionItems:f,highlightedSectionIndex:E,highlightedItemIndex:x,inputProps:M,itemProps:this.itemProps,theme:(0,Bd.mapToAutowhateverTheme)(m),id:p,ref:this.storeAutowhateverRef})}}]),t}();u.propTypes={suggestions:o.default.array.isRequired,onSuggestionsFetchRequested:function(e,t){var n=e[t];if("function"!=typeof n)throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(e,t){var n=e[t];if(!1===e.alwaysRenderSuggestions&&"function"!=typeof n)throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},onSuggestionSelected:o.default.func,onSuggestionHighlighted:o.default.func,renderInputComponent:o.default.func,renderSuggestionsContainer:o.default.func,getSuggestionValue:o.default.func.isRequired,renderSuggestion:o.default.func.isRequired,inputProps:function(e,t){var n=e[t];if(!n.hasOwnProperty("value"))throw new Error("'inputProps' must have 'value'.");if(!n.hasOwnProperty("onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:o.default.func,alwaysRenderSuggestions:o.default.bool,multiSection:o.default.bool,renderSectionTitle:function(e,t){var n=e[t];if(!0===e.multiSection&&"function"!=typeof n)throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(e,t){var n=e[t];if(!0===e.multiSection&&"function"!=typeof n)throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:o.default.bool,highlightFirstSuggestion:o.default.bool,theme:o.default.object,id:o.default.string},u.defaultProps={renderSuggestionsContainer:function(e){var t=e.containerProps,n=e.children;return i.default.createElement("div",t,n)},shouldRenderSuggestions:function(e){return e.trim().length>0},alwaysRenderSuggestions:!1,multiSection:!1,focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:Bd.defaultTheme,id:"1"};var h=function(){var e=this;this.onDocumentMouseDown=function(t){e.justClickedOnSuggestionsContainer=!1;for(var n=t.detail&&t.detail.target||t.target;null!==n&&n!==document;){if(null!==n.getAttribute("data-suggestion-index"))return;if(n===e.suggestionsContainer)return void(e.justClickedOnSuggestionsContainer=!0);n=n.parentNode}},this.storeAutowhateverRef=function(t){null!==t&&(e.autowhatever=t)},this.onSuggestionMouseEnter=function(t,n){var r=n.sectionIndex,i=n.itemIndex;e.updateHighlightedSuggestion(r,i),t.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!0),e.justMouseEntered=!0,setTimeout(function(){e.justMouseEntered=!1})},this.highlightFirstSuggestion=function(){e.updateHighlightedSuggestion(e.props.multiSection?0:null,0)},this.onDocumentMouseUp=function(){e.pressedSuggestion&&!e.justSelectedSuggestion&&e.input.focus(),e.pressedSuggestion=null},this.onSuggestionMouseDown=function(t){e.justSelectedSuggestion||(e.justSelectedSuggestion=!0,e.pressedSuggestion=t.target)},this.onSuggestionsClearRequested=function(){var t=e.props.onSuggestionsClearRequested;t&&t()},this.onSuggestionSelected=function(t,n){var r=e.props,i=r.alwaysRenderSuggestions,o=r.onSuggestionSelected,s=r.onSuggestionsFetchRequested;o&&o(t,n),i?s({value:n.suggestionValue,reason:"suggestion-selected"}):e.onSuggestionsClearRequested(),e.resetHighlightedSuggestion()},this.onSuggestionClick=function(t){var n=e.props,r=n.alwaysRenderSuggestions,i=n.focusInputOnSuggestionClick,o=e.getSuggestionIndices(e.findSuggestionElement(t.target)),s=o.sectionIndex,a=o.suggestionIndex,l=e.getSuggestion(s,a),c=e.props.getSuggestionValue(l);e.maybeCallOnChange(t,c,"click"),e.onSuggestionSelected(t,{suggestion:l,suggestionValue:c,suggestionIndex:a,sectionIndex:s,method:"click"}),r||e.closeSuggestions(),!0===i?e.input.focus():e.onBlur(),setTimeout(function(){e.justSelectedSuggestion=!1})},this.onBlur=function(){var t=e.props,n=t.inputProps,r=t.shouldRenderSuggestions,i=n.value,o=n.onBlur,s=e.getHighlightedSuggestion(),a=r(i);e.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!a}),o&&o(e.blurEvent,{highlightedSuggestion:s})},this.onSuggestionMouseLeave=function(t){e.resetHighlightedSuggestion(!1),e.justSelectedSuggestion&&t.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!1)},this.onSuggestionTouchStart=function(){e.justSelectedSuggestion=!0},this.onSuggestionTouchMove=function(){e.justSelectedSuggestion=!1,e.pressedSuggestion=null,e.input.focus()},this.itemProps=function(t){return{"data-section-index":t.sectionIndex,"data-suggestion-index":t.itemIndex,onMouseEnter:e.onSuggestionMouseEnter,onMouseLeave:e.onSuggestionMouseLeave,onMouseDown:e.onSuggestionMouseDown,onTouchStart:e.onSuggestionTouchStart,onTouchMove:e.onSuggestionTouchMove,onClick:e.onSuggestionClick}},this.renderSuggestionsContainer=function(t){var n=t.containerProps,r=t.children;return(0,e.props.renderSuggestionsContainer)({containerProps:n,children:r,query:e.getQuery()})}};t.default=u});t(Vd);var zd=Vd.default;function qd(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Gd="object"==typeof global&&global&&global.Object===Object&&global,Kd="object"==typeof self&&self&&self.Object===Object&&self,Yd=Gd||Kd||Function("return this")(),Xd=function(){return Yd.Date.now()},Qd=Yd.Symbol,Jd=Object.prototype,Zd=Jd.hasOwnProperty,ep=Jd.toString,tp=Qd?Qd.toStringTag:void 0;var np=Object.prototype.toString;var rp="[object Null]",ip="[object Undefined]",op=Qd?Qd.toStringTag:void 0;function sp(e){return null==e?void 0===e?ip:rp:op&&op in Object(e)?function(e){var t=Zd.call(e,tp),n=e[tp];try{e[tp]=void 0}catch(i){}var r=ep.call(e);return t?e[tp]=n:delete e[tp],r}(e):function(e){return np.call(e)}(e)}var ap="[object Symbol]";var lp=NaN,cp=/^\s+|\s+$/g,up=/^[-+]0x[0-9a-f]+$/i,hp=/^0b[01]+$/i,dp=/^0o[0-7]+$/i,pp=parseInt;function fp(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&sp(e)==ap}(e))return lp;if(qd(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qd(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(cp,"");var n=hp.test(e);return n||dp.test(e)?pp(e.slice(2),n?2:8):up.test(e)?lp:+e}var mp="Expected a function",gp=Math.max,vp=Math.min;function bp(e,t,n){var r,i,o,s,a,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError(mp);function p(t){var n=r,o=i;return r=i=void 0,c=t,s=e.apply(o,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function m(){var e=Xd();if(f(e))return g(e);a=setTimeout(m,function(e){var n=t-(e-l);return h?vp(n,o-(e-c)):n}(e))}function g(e){return a=void 0,d&&r?p(e):(r=i=void 0,s)}function v(){var e=Xd(),n=f(e);if(r=arguments,i=this,l=e,n){if(void 0===a)return function(e){return c=e,a=setTimeout(m,t),u?p(e):s}(l);if(h)return a=setTimeout(m,t),p(l)}return void 0===a&&(a=setTimeout(m,t)),s}return t=fp(t)||0,qd(n)&&(u=!!n.leading,o=(h="maxWait"in n)?gp(fp(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},v.flush=function(){return void 0===a?s:g(Xd())},v}function yp({notebook:{owner:e,update_time:t}}){const n=new Date(t);return G.createElement("div",{className:"inline-flex items-center"},G.createElement("span",{className:"inline-flex items-center black-50"},G.createElement(uh,{user:e,s:16,className:"mr1 br-100"}),G.createElement("span",null,e.name||e.login)),G.createElement("span",{title:n.toLocaleString(),className:"ml1 nowrap"},"on ",fh(n)))}const wp={},kp=({containerProps:e,children:t})=>G.createElement("div",e,G.createElement("div",{style:{marginTop:10},className:"db absolute left-0 w5 bg-white br1 shadow-4 overflow-hidden"},t),G.createElement("div",{className:"absolute left-1",style:{top:-4,clip:"rect(0 18px 14px -4px)"}},G.createElement("div",{className:"w1 h1 bg-white shadow-4",style:{transform:"rotate(45deg) translate(6px, 6px)"}}))),Ep=e=>{const{mobile:t}=e,n=Kc(e,["mobile"]);return G.createElement("div",{className:"relative"},G.createElement("input",Object.assign({},n,{style:t?{}:{paddingTop:7,paddingBottom:7},className:`w5 f6 ba b--black-10 input-reset bg-white outline-0 ${t?"w-100 pa2 br2 pl4":"search mr1 mr2-m mr3-l pl4 pr3 br2 fw6"}`,key:1})),G.createElement($u,{className:"absolute left-0 w1 h1 pa2 ml1 black-30 pen",style:{strokeWidth:1}}))},xp=Rc(class extends G.PureComponent{constructor(e){if(super(e),qc(this,"controller",null),qc(this,"renderSuggestion",(e,{query:t,isHighlighted:n})=>e===wp?G.createElement(Wc,{to:`/search?query=${encodeURIComponent(this.state.value)}`,className:`db pa2 f6 hover-bg-near-white pointer black-50 hover-blue no-underline ${n?"bg-near-white blue":""}`},"Search for ‘",t,"’"):G.createElement("div",null,G.createElement("div",{className:"mh2 bb b--black-10"}),G.createElement(Wc,{to:Qh(e),className:`db no-underline pv1 ph2 hover-bg-near-white pointer black hover-blue ${n?"bg-near-white blue":""}`},G.createElement("div",{className:"flex items-center pv1 f6 fw4 truncate"},G.createElement("span",null,wh(e.title||"Untitled",t)),e.fork_of&&G.createElement(Wu,{style:{marginBottom:"-0.05rem",width:".8rem",height:".8rem",strokeWidth:1},className:"ml1 black-30"})),G.createElement("div",{className:"pb1 f7 fw4 black-30"},G.createElement(yp,{notebook:e}))))),qc(this,"onSuggestionsClearRequested",()=>{this.abort(),this.setState({suggestions:[wp]})}),qc(this,"onChange",(e,{newValue:t})=>{this.setState({value:t})}),qc(this,"getSuggestionValue",()=>this.state.value),qc(this,"onSuggestionSelected",(e,{suggestion:t,method:n})=>{"click"!==n&&(this.onSuggestionsClearRequested(),this.props.history.push(t===wp?`/search?query=${encodeURIComponent(this.state.value)}`:`/@${t.owner.login}/${t.slug}`))}),qc(this,"onSuggestionsFetchRequested",bp(({value:e})=>{const{api:t}=this.props;this.abort(),this.controller=new AbortController,t.init({signal:this.controller.signal}).documentSearch(e,0,10).then(e=>{this.controller=null,this.setState({suggestions:[wp].concat(e)})},()=>{})},250)),this.state={suggestions:[wp],value:""},"/search"===e.match.path){const{query:t}=lu(e.location.search);this.state.value=t||""}}componentWillUnmount(){this.abort()}abort(){this.onSuggestionsFetchRequested.cancel(),this.controller&&(this.controller.abort(),this.controller=null)}render(){const{mobile:e}=this.props;let{suggestions:t,value:n}=this.state;const r={required:!0,title:"Search",placeholder:"Search",mobile:e,maxLength:256,autoFocus:e,value:n,onChange:this.onChange};return G.createElement(zd,{suggestions:t,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,renderSuggestionsContainer:kp,renderInputComponent:Ep,inputProps:r,highlightFirstSuggestion:!0,theme:{container:e?"relative flex-auto":"dib relative",suggestionsContainer:"dn absolute z-max",suggestionsContainerOpen:"db",suggestionsList:"list ma0 pa0"}})}}),Sp="db flex items-center justify-between ph2 pb1 f6 lh-copy no-underline black-70 hover-blue pointer",Cp=({user:e})=>G.createElement(G.Fragment,null,e.name||e.login,G.createElement(uh,{user:e,s:16,className:"mr1 br-100"}));class _p extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{open:!1}),qc(this,"toggle",e=>{e.stopPropagation(),this.setState(({open:e})=>({open:!e}))}),qc(this,"close",e=>{e.stopPropagation(),this.setState({open:!1})}),qc(this,"popoverProps",{onClickOutside:this.close,extraStyle:{right:16,top:30}})}get soloButtonClasses(){const{highlight:e,inList:t}=this.props;return t?"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer":`no-underline pointer inline-flex fw6 mr3-ns mr2 ${e?"white bg-blue hover-bg-dark-blue":"black-70 hover-black bg-light-gray hover-bg-moon-gray"} br2 pa2 bn f6`}}class Tp extends _p{constructor(...e){super(...e),qc(this,"renderTeam",e=>G.createElement("a",{key:e.id,onClick:()=>this.props.fork({team:e.id}),className:Sp},G.createElement(Cp,{user:e})))}render(){const{open:e}=this.state,{fork:t,inList:n}=this.props;return G.createElement(rh.Consumer,null,r=>{const i=r&&G.createElement(G.Fragment,null,G.createElement("div",{className:"ph2 pt2 f7 black-50"},"Fork notebook for"),G.createElement("div",{className:"pv2"},G.createElement("a",{onClick:t,className:Sp},G.createElement(Cp,{user:r})),r.teams.map(this.renderTeam)));return r&&r.teams&&r.teams.length?G.createElement("div",{className:"relative"},n?G.createElement("a",{onClick:this.toggle,className:this.soloButtonClasses},G.createElement(Wu,{className:"w1 h1 mr1"}),"Fork…"):G.createElement("div",{className:"inline-flex items-center"},G.createElement("div",{className:`${this.soloButtonClasses} mr3-ns mr2 br2 bn`,onClick:this.toggle},G.createElement(Wu,{className:"w1 h1 mr1-ns"}),G.createElement("span",{className:"dn db-ns"},"Fork…")," "),e&&!n&&G.createElement(vh,this.popoverProps,i)),e&&n&&G.createElement("div",{className:"ph2 mv1 bg-near-white"},i)):G.createElement("a",{onClick:t,className:this.soloButtonClasses},G.createElement(Wu,{className:`w1 h1 mr1${n?"":"-ns"}`}),G.createElement("span",{className:n?"db":"dn db-ns"},"Fork"))})}}class Np extends _p{render(){const{open:e}=this.state,{transfer:t,owner:n}=this.props;return G.createElement(rh.Consumer,null,r=>r&&r.teams&&r.teams.length?G.createElement("div",{className:"relative"},G.createElement("a",{onClick:this.toggle,className:this.soloButtonClasses},G.createElement(Lu,{className:"w1 h1 mr1"}),"Transfer…"),e&&G.createElement("div",{className:"ph2 mv1 bg-near-white"},G.createElement("div",{className:"ph2 pt2 f7 black-50"},"Transfer notebook to"),G.createElement("div",{className:"pv2"},r.id!==n.id&&G.createElement("a",{onClick:()=>t(r.id),className:Sp},G.createElement(Cp,{user:r})),r.teams.filter(e=>e.id!==n.id).map(e=>G.createElement("a",{key:e.id,title:`Transfer to ${e.name||e.login}`,onClick:()=>t(e.id),className:Sp},G.createElement(Cp,{user:e})))))):null)}}class Pp extends _p{constructor(...e){super(...e),qc(this,"renderTeam",e=>G.createElement("a",{key:e.id,onClick:()=>this.onClick({team:e.id}),className:Sp},G.createElement(Cp,{user:e}))),qc(this,"onClick",(...e)=>{this.setState({open:!1}),this.props.onClick.apply(this,e)})}render(){const{open:e}=this.state,{inList:t,notebook:n}=this.props;return G.createElement(rh.Consumer,null,r=>{const i=r&&G.createElement(G.Fragment,null,G.createElement("div",{className:"ph2 pt2 f7 black-50"},"Send suggestion from"),G.createElement("div",{className:"pv2"},G.createElement("a",{onClick:this.onClick,className:Sp},G.createElement(Cp,{user:r})),r.teams.map(this.renderTeam)));return!Ah(r,n)&&r&&r.teams&&r.teams.length?G.createElement("div",{className:"relative"},t?G.createElement("a",{onClick:this.toggle,className:this.soloButtonClasses},G.createElement(Cu,{className:"w1 h1 mr1"}),"Suggest…"):G.createElement("div",{className:"inline-flex items-center"},G.createElement("div",{className:`${this.soloButtonClasses} mr3-ns mr2 br2 bn`,onClick:this.toggle},G.createElement(Cu,{className:"w1 h1 mr1-ns"}),G.createElement("span",{className:"dn db-ns"},"Suggest…")," "),e&&!t&&G.createElement(vh,this.popoverProps,i)),e&&t&&G.createElement("div",{className:"ph2 mv1 bg-near-white"},i)):G.createElement("a",{onClick:this.onClick,className:this.soloButtonClasses},G.createElement(Cu,{className:`w1 h1 mr1${t?"":"-ns"}`}),G.createElement("span",{className:t?"db":"dn db-ns"},"Suggest…"))})}}class Ap extends _p{constructor(...e){super(...e),qc(this,"renderTeam",e=>G.createElement(Wc,{key:e.id,to:`/team/@${e.login}/new`,className:Sp,onClick:this.close},G.createElement(Cp,{user:e})))}render(){const{open:e}=this.state;return G.createElement(rh.Consumer,null,t=>t&&t.teams&&t.teams.length?G.createElement("div",{className:"relative"},G.createElement("div",{className:"inline-flex items-center"},G.createElement("div",{className:`${this.soloButtonClasses} mr3-ns mr2  br2 bn`,onClick:this.toggle},G.createElement(vu,{className:"w1 h1 mr1-ns"}),G.createElement("span",{className:"dn db-ns"},"New…")),e&&G.createElement(vh,this.popoverProps,t&&G.createElement(G.Fragment,null,G.createElement("div",{className:"ph2 pt2 f7 black-50"},"New notebook for"),G.createElement("div",{className:"pv2"},G.createElement(Wc,{to:"/new",className:Sp,onClick:this.close},G.createElement(Cp,{user:t})),t.teams.map(this.renderTeam)))))):G.createElement(Wc,{to:"/new",className:this.soloButtonClasses},G.createElement(vu,{className:"w1 h1 mr1-ns"}),G.createElement("span",{className:"dn db-ns"},"New")))}}const Lp=Rc(class extends G.Component{constructor(...e){super(...e),qc(this,"state",{mobileSearch:!1}),qc(this,"toggleSearch",()=>{this.setState(({mobileSearch:e})=>({mobileSearch:!e}))}),qc(this,"toggle",()=>{this.setState(({open:e})=>({open:!e}))}),qc(this,"dismissOnboarding",()=>{const{history:e,location:{path:t},onDismissHint:n}=this.props;n?n():e.replace(t,{})})}componentWillReceiveProps(e){e.location.pathname!==this.props.location.pathname&&this.setState({mobileSearch:!1})}render(){const{contextUI:e,gray:t,seamless:n,location:{pathname:r,state:i},forceMobile:o,user:s,showLogin:a,stickyHeader:l,hintVisible:c}=this.props,u=Kc(this.props,["contextUI","children","footerContent"]);return this.state.mobileSearch?G.createElement("div",{className:`z-3 bg-white ${n?"bb b--white":t?"shadow-1":"bb b--black-05"} ${l?"sticky":"relative"}`},G.createElement("div",{className:`${lh} flex justify-between pv2 items-center`},G.createElement(xp,Object.assign({},u,{mobile:!0})),G.createElement("button",{onClick:this.toggleSearch,className:"inline-flex pa1 mr3-ns mr2 fw6 black-50 bg-transparent bn"},G.createElement(Eu,{className:"w1 h1 v-top ml2"})))):G.createElement(Nd,{query:{maxWidth:640},defaultMatches:!1},h=>{const d=h||o;return G.createElement("div",{className:`z-3 bg-white top-0 ${n?"bb b--white":t?"shadow-1":"bb b--black-05"} ${l?"sticky":"relative"}`},G.createElement("div",{className:`${lh} flex justify-between pv2 items-center`},G.createElement("div",{className:"inline-flex items-center"},G.createElement(Wc,{to:"/",style:{lineHeight:0},className:"flex items-center ph2-ns pv2 mr3 mr2-ns no-underline"},G.createElement(Qu,{className:"black",style:{height:d?18:24,width:d?18:24}}),G.createElement(Nd,{query:{maxWidth:420},defaultMatches:!1},e=>!e&&G.createElement("span",{className:"ml2 f3-ns f4 fw7 black"},"Observable"))),d?G.createElement("button",{onClick:this.toggleSearch,style:{borderWidth:1},className:"inline-flex pa2 mr3-ns mr2 fw6 black-50 bg-transparent b--black-10 br2"},G.createElement($u,{className:"w1 h1 v-top mr1-ns"})):G.createElement(xp,u)),G.createElement("div",{className:"flex items-center"},e&&G.cloneElement(e,{showLogin:a}),s?G.createElement(Ap,null):"/playground"!==r&&!d&&G.createElement(zc,{to:"/playground",activeClassName:"bg-white",activeStyle:{color:"black"},exact:!0,className:"pa2 mr3 f6 fw6 tc no-underline blue hover-dark-blue"},G.createElement(Bu,{className:"dib w1 h1 v-top mr1-ns"}),G.createElement("span",{className:"dn di-ns"},"Playground")),s?G.createElement(Pd,u):null===s?G.createElement("a",{onClick:a,href:a?null:"/login",className:"ph3-ns ph2 pv2 f6 fw6 no-underline white bg-green hover-bg-dark-green br2 bn pointer"},"Sign in"):G.createElement("div",{className:"w3"}))),(i&&i.signup||c&&!d)&&G.createElement("div",{className:`mt2 ${t?"":"bt b--black-05"} ${n?"":"bg-washed-yellow"}`},G.createElement("div",{className:`${lh} ${n?"bg-washed-yellow br2":""} pv2 items-center`},G.createElement("div",{className:"flex justify-between ph2-ns pv1"},G.createElement("span",null,c?G.createElement(G.Fragment,null,"👋 Welcome. This is live code! Click the left margin to view or edit."):G.createElement(G.Fragment,null,"🙏 Thanks for signing up!"," ",G.createElement(Wc,{className:"no-underline blue hover-dark-blue",to:"/@observablehq/tutorial-1-lunch-calculator"},"Start writing with our tutorials."))),G.createElement("button",{onClick:this.dismissOnboarding,className:"inline-flex pa0 black-50 hover-black bg-transparent bn pointer"},G.createElement(Eu,{className:"w1 h1"}))))))})}});class Mp extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{helpPopover:!1}),qc(this,"toggleHelpPopover",e=>{e.stopPropagation(),this.setState(({helpPopover:e})=>({helpPopover:!e}))}),qc(this,"closeHelpPopover",e=>{e&&e.stopPropagation(),this.setState({helpPopover:!1})})}render(){const{keyboardShortcuts:e,showKeyboardShortcuts:t}=this.props,{helpPopover:n}=this.state;return G.createElement("div",{className:"fixed right-1 z-2",style:{bottom:"1rem"}},G.createElement("div",{title:"Help…",onClick:this.toggleHelpPopover,className:`inline-flex items-center justify-center bg-white ba b--black-20 ${n?"":"pointer hover-b--black-50"}`,style:{width:36,height:36,borderRadius:18}},"?"),n&&G.createElement(vh,{extraStyle:{bottom:"3rem",width:"auto",right:5},top:!0,onClickOutside:this.closeHelpPopover},G.createElement(Op,{onClose:this.closeHelpPopover,keyboardShortcuts:e,showKeyboardShortcuts:t})))}}function Op({onClose:e,showKeyboardShortcuts:t,keyboardShortcuts:n}){return G.createElement("div",{className:"pv2 f6 nowrap"},G.createElement(Wc,{to:"/@mbostock/five-minute-introduction",className:"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Introduction"),G.createElement(Wc,{to:"/collection/@observablehq/tutorial",className:"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Tutorials"),n&&G.createElement("div",{onClick:()=>{e(),t()},className:"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Keyboard shortcuts"),G.createElement("a",{href:"https://talk.observablehq.com/",className:"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Forum"),G.createElement(rh.Consumer,null,e=>e&&G.createElement("a",{href:`https://docs.google.com/forms/d/e/1FAIpQLScqO-VmXjQoIvqmULTCPN5spzjCR3tcefBv9o4rWZ3sikXiFA/viewform?entry.148008288=${e.login}`,rel:"noopener noreferrer",target:"_blank",className:"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Feedback & bugs")))}class Ip extends G.Component{constructor(...e){super(...e),qc(this,"state",{helpPopover:!1}),qc(this,"toggleHelpPopover",()=>{this.setState(({helpPopover:e})=>({helpPopover:!e}))}),qc(this,"closeHelpPopover",()=>{this.setState({helpPopover:!1})})}render(){const{helpPopover:e}=this.state,{grayFooter:t,footerContent:n,isNotebook:r}=this.props;return G.createElement("div",{key:4,className:t?"bg-near-white bt b--black-10":""},G.createElement("div",{className:`${lh} pt4 pb4`},n,G.createElement("div",{className:"flex flex-row flex-wrap justify-between pt4 f6 fw4 lh-copy black-50"},G.createElement("div",null,"© 2019"," ",G.createElement("span",{className:"mr2-ns nowrap"},"Observable, Inc.")," ",G.createElement("div",{className:"dib-ns nowrap"},G.createElement("a",{href:"/terms-of-service",className:"mh2-ns mr1 blue hover-dark-blue link"},"Terms")," ",G.createElement(Wc,{to:"/open-source",className:"mh2-ns mr1 blue hover-dark-blue link"},"Open Source"))),!r&&G.createElement("div",{className:"flex items-center pt3 pt0-ns"},G.createElement("a",{href:"https://twitter.com/observablehq",className:"inline-flex pr2 mr2 black-50 hover-blue",title:"Follow us on Twitter"},G.createElement(du,null)),G.createElement("div",{onClick:this.toggleHelpPopover,className:"relative mh2-ns mr1 fw5 blue hover-dark-blue pointer"},"Help",e&&G.createElement(vh,{top:!0,onClickOutside:this.closeHelpPopover},G.createElement(Op,null)))))))}}function Rp(e){const{children:t,gray:n,user:r,nofooter:i,footerContent:o,grayFooter:s,isNotebook:a}=e;return G.createElement("div",{className:"flex flex-column min-vh-100"},G.createElement(Lp,e),G.createElement(rl,null,G.createElement("body",{className:`relative sans-serif ${n?"bg-near-white":""}`})),G.createElement("div",{className:`${a?ch:lh} mt4`,style:{flex:1}},t),i||G.createElement(Ip,{user:r,grayFooter:s,footerContent:o,isNotebook:a}))}let Dp=({title:e,to:t,user:n,showMore:r,wrapperClass:i="mt5"})=>G.createElement("div",{className:`flex justify-between mb3 ${i}`},G.createElement(Wc,{to:t,className:"inline-flex items-center f5 fw4 no-underline black-70 hover-blue hide-child"},n&&G.createElement(uh,{user:n,s:28,className:"mr2 br-100"}),e,G.createElement(Su,{className:"w1 h1 ml1 child",style:{strokeWidth:1}})),r&&G.createElement(Wc,{to:t,className:"db ph2 pv1 no-underline blue hover-dark-blue hover-bg-white br2"},"Show more…"));class Fp extends G.Component{constructor(e){super(e),qc(this,"state",{publishes:new Array(3).fill(void 0),notebooks:new Array(9).fill(void 0),collections:new Array(6).fill(void 0),teamNotebookGroups:[]}),qc(this,"reload",()=>{const{api:e}=this.props;this.load(Gc({},this.props,{api:e.init({cache:"no-cache"})}))}),qc(this,"showSignUp",()=>{this.props.showLogin({loginReason:"signup"})}),e.preloadData&&(this.state=Gc({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.load(this.props)}load({api:e,user:t}){t&&(e.documentsLoadUser().then(e=>this.setState({notebooks:e.map(e=>Gc({owner:t},e))})),t.teams&&t.teams.forEach(t=>{e.documentsLoadTeam(t.id).then(e=>{e.length&&this.setState({teamNotebookGroups:this.state.teamNotebookGroups.concat({team:t,notebooks:e.map(e=>Gc({owner:t},e))})})})})),e.documentsLoadPopular().then(e=>this.setState({publishes:e})),Promise.all([e.userLoad("observablehq"),e.collectionsLoadUserPinned("observablehq")]).then(([e,t])=>this.setState({collections:t.map(t=>Gc({},t,{owner:e}))}))}render(){const{publishes:e,notebooks:t,collections:n,teamNotebookGroups:r}=this.state,{api:i,user:o}=this.props;return G.createElement(Rp,Object.assign({},this.props,{gray:!0,seamless:!o}),G.createElement(rl,null,G.createElement("meta",{name:"description",content:"Discover insights faster and communicate more effectively with interactive notebooks for data analysis, visualization, and exploration."})),!o&&G.createElement("div",{className:"pv5 nt4 black bg-white bb b--black-10 w--full"},G.createElement("div",{className:lh},G.createElement("div",{className:"mb3 f1-ns f2 fw6 lh-title"},"Observable is a",G.createElement("div",null,G.createElement("span",{className:"green"},"better")," way to code.")),G.createElement("div",{className:"measure f4-ns f5 fw4 lh-copy"},"Discover insights faster and communicate more effectively with interactive notebooks for data analysis, visualization, and exploration."),G.createElement("div",{className:"flex-ns mt4"},G.createElement("a",{onClick:this.showSignUp,className:"flex inline-flex-ns justify-center ph3-ns pa2 fw6 no-underline white bg-green hover-bg-dark-green br2 shadow-2-hover hover-rise z-1 pointer"},"Sign up for free"),G.createElement(Wc,{to:"/playground",className:"flex inline-flex-ns items-center justify-center ph3-ns pa2 mt3 mt0-ns ml3-ns fw6 no-underline white bg-blue hover-bg-dark-blue br2 shadow-2-hover hover-rise z-1"},G.createElement(Bu,{className:"w1 h1 mr1"}),"Try the playground")),G.createElement("div",{className:"mt5 f5 fw4 lh-copy dg-ns grid-gap1 grid-template-columns-1 grid-template-columns-3-ns"},G.createElement("div",{className:"mb3 mb0-ns"},G.createElement("div",{className:"mb1 fw7"},"Reactive programming"),G.createElement("div",{className:"black-70"},"JavaScript, simplified. Asynchronous state changes are handled at the language level.")),G.createElement("div",{className:"mb3 mb0-ns"},G.createElement("div",{className:"mb1 fw7"},"Community"),G.createElement("div",{className:"black-70"},"Fork, import, share, and learn with a community of artists, scientists, and software engineers.")),G.createElement("div",null,G.createElement("div",{className:"mb1 fw7"},"Web platform"),G.createElement("div",{className:"black-70"},"The power of the web’s graphics and computation capabilities, and the largest developer community."))))),G.createElement(Dp,{title:"Featured collections",to:"/@observablehq?tab=collections",wrapperClass:o?"mt4":"mt5"}),G.createElement("div",{className:"dg grid-gap1 grid-template-columns-1 grid-template-columns-3-ns"},n.slice(0,6).map((e,t)=>G.createElement(dh,{key:e?e.id:t,api:i,collection:e}))),n.length>6&&G.createElement("div",{className:"mt4 tc"},G.createElement(Wc,{to:"/collections/featured",className:"ph3 pv2 blue hover-dark-blue bg-white br2 link"},"Show more…")),G.createElement(Dp,{title:"Popular this week",to:"/recent",showMore:!0}),G.createElement("div",{className:"listing-grid"},e.slice(0,9).map((e,t)=>G.createElement(ld,{key:e?e.id:t,api:i,reload:this.reload,notebook:e}))),o&&G.createElement(Dp,{title:"Your notebooks",to:`/@${o.login}`,user:o,showMore:t.length>6}),o&&0===t.length&&G.createElement("div",{className:"flex justify-center pv4"},G.createElement("div",null,G.createElement("div",{className:"mb2 f4 lh-copy tc black-50"},"You don’t have any notebooks."),G.createElement(Wc,{to:"/new",className:"flex dib items-center justify-center ph3 pa2 blue hover-dark-blue bg-white br2 link shadow-hover"},G.createElement(vu,{className:"dib w1 h1 mr2 v-bottom",style:{strokeWidth:1}}),G.createElement("div",null,"Create your first notebook")))),o&&t.length>0&&G.createElement("div",null,G.createElement("div",{className:"listing-grid"},t.slice(0,6).map((e,t)=>G.createElement(ld,{key:e?e.id:t,reload:this.reload,api:i,notebook:e})))),r.length>0&&r.map(({team:e,notebooks:t})=>G.createElement("div",{key:e.id},G.createElement(Dp,{to:`/@${e.login}`,user:e,title:`${e.name||e.login} notebooks`,showMore:t.length>6}),G.createElement("div",{className:"listing-grid"},t.slice(0,6).map((e,t)=>G.createElement(ld,{key:e?e.id:t,reload:this.reload,notebook:e}))))),!o&&G.createElement(cd,{showSignUp:this.showSignUp}))}}function jp(e){return G.createElement(Rp,Object.assign({},e,{gray:!0}),G.createElement("div",{className:"mw6 center mt5"},G.createElement(rl,null,G.createElement("title",null,"Not found")),G.createElement("a",{href:"/",className:"dib pa2 black-50 hover-blue hover-bg-white br4 link"},G.createElement(wu,{className:"w1 h1 v-top mr1"}),"Home"),G.createElement("p",{className:"f4 fw7 black-70"},"Sorry, we couldn’t find that page.")))}qc(Fp,"preload",({api:e})=>Promise.all([e.documentsLoadPopular(),e.userLoad("observablehq"),e.collectionsLoadUserPinned("observablehq")]).then(([e,t,n])=>({publishes:e,notebooks:[],collections:n.map(e=>Gc({},e,{owner:t})),teamNotebookGroups:[]})));class Hp extends G.Component{constructor(...e){super(...e),qc(this,"state",{online:!0})}componentDidMount(){this.setState({online:void 0===navigator.onLine||navigator.onLine})}render(){const{online:e}=this.state;return G.createElement(Rp,Object.assign({},this.props,{gray:!0}),G.createElement(rl,null,G.createElement("title",null,"Error")),G.createElement("div",{className:"mw6 center mt5"},G.createElement("a",{href:"/",className:"dib pa2 black-50 hover-blue hover-bg-white br4 link"},G.createElement(wu,{className:"w1 h1 v-top mr1"}),"Home"),G.createElement("p",{className:"f4 fw7 lh-copy black-70"},e?"Oops, an unexpected error occurred.":"It looks like you’re currently offline. Please connect to the internet to continue using Observable.")))}}const $p=Rc(function({location:{pathname:e},token:t}){return/^\/error(\?|$)/.test(e)&&(e="/"),G.createElement("div",{className:"mt6 sans-serif tc"},G.createElement(rl,null,G.createElement("title",null,"Login"),G.createElement("body",{className:"bg-light-silver"})),G.createElement("div",{className:"flex fixed top-0 right-0 bottom-0 left-0 items-center justify-center"},G.createElement("div",{className:"pa3 bg-white ba b--black-10 br2 z-1"},G.createElement(th,{location:location,token:t}))))}),Up=/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/,Wp={EMPTY:0,CONFLICT:1,INVALID:2,VALID:3};class Bp extends G.Component{constructor(...e){super(...e),qc(this,"state",{typedLogin:"",login:"",loginAvailable:Wp.EMPTY}),qc(this,"onLoginChange",e=>{const{target:{value:t}}=e,n=t.toLowerCase();this.setState({login:n,typedLogin:t}),this.props.onLoginChange(n),this.checkLoginAvailability()}),qc(this,"checkLoginAvailability",()=>{clearTimeout(this.loginRequestDebounce),this.loginRequestDebounce=setTimeout(this.fetchLoginAvailability,200)}),qc(this,"fetchLoginAvailability",()=>{const{login:e}=this.state,{api:t}=this.props;e?e.match(Up)?t.usersExist([e]).then(t=>{const n=new Map(t);this.loginAvailability(e,n.get(e)?Wp.CONFLICT:Wp.VALID)}):this.setState({loginAvailable:Wp.INVALID}):this.setState({loginAvailable:Wp.EMPTY})}),qc(this,"loginAvailability",(e,t)=>{const{login:n}=this.state;n===e&&(this.setState({loginAvailable:t}),this.props.onLoginValid(t===Wp.VALID))})}componentWillUnmount(){clearTimeout(this.loginRequestDebounce)}render(){const{typedLogin:e,loginAvailable:t}=this.state,{title:n,name:r,serverError:i}=this.props;return G.createElement("div",null,G.createElement("div",{className:"flex flex-column items-stretch mt4"},G.createElement("label",{className:"pb1 f6 fw5 black-50",htmlFor:"login"},n),G.createElement("div",{className:`flex items-stretch br2 ba ${i||t===Wp.INVALID||t===Wp.CONFLICT?"b--dark-pink":"b--black-10 hover-b--black-30"}`},G.createElement("label",{className:"pa2 pr0 black-50 br--left br2",htmlFor:"login"},"observablehq.com/@"),G.createElement("input",{id:"login",name:"login",autoComplete:"off",maxLength:"255",autoFocus:!0,className:"flex-auto pa2 pl0 black br2 br--right bn",onChange:this.onLoginChange,value:e})),G.createElement("div",{className:"h2"},"LOGIN_CONFLICT"===i||t===Wp.CONFLICT?G.createElement("div",{className:"mt1 f7 fw5 dark-pink"},"That ",r," is already taken."):"LOGIN_INVALID"===i||t===Wp.INVALID?G.createElement("div",{className:"mt1 f7 fw5 dark-pink"},"A ",r," can only include alphanumberic characters or single hyphens, can’t start or end with a hyphen, and should be less than 40 characters long."):null)))}}class Vp extends G.Component{constructor(...e){super(...e),qc(this,"state",{loginValid:!1,login:void 0,serverError:void 0}),qc(this,"onLoginValid",e=>{this.setState({loginValid:e})}),qc(this,"onLoginChange",e=>{this.setState({serverError:void 0,login:e})}),qc(this,"setLogin",async e=>{e.preventDefault();const{loginValid:t,login:n}=this.state,{api:r}=this.props;if(t)try{await r.userSetLogin(n),location.reload(!0)}catch(i){if(!i.errors)throw i;const e=i.errors[0].code;switch(e){case"LOGIN_CONFLICT":case"LOGIN_INVALID":this.setState({loginValid:!1,serverError:e})}}})}render(){let{loginValid:e,serverError:t}=this.state;return G.createElement(Nd,{query:{maxWidth:640}},n=>G.createElement(Rp,Object.assign({},this.props,{gray:!n}),G.createElement(rl,null,G.createElement("title",null,"Choose your login")),G.createElement("div",{className:"mw6-ns center-ns ph0-ns ph2 pt4 pb5 mt5-ns bg-white b--black-10 br2 ba-ns"},G.createElement("form",{className:"ph4-ns",onSubmit:this.setLogin},G.createElement("div",{className:"flex-ns justify-between items-center mt0 mb2"},G.createElement("h3",{className:"ma0 f4 fw7 black"},"Choose a login")),G.createElement(Bp,Object.assign({},this.props,{title:"Your Observable URL",name:"login",serverError:t,onLoginValid:this.onLoginValid,onLoginChange:this.onLoginChange})),G.createElement("button",{className:`ph3 pv2 mt3 mw4 f6 fw6 white bg-blue hover-bg-dark-blue br2 pointer bn ${e?"":"o-50 pen"}`,onClick:this.setLogin},"Set login")))))}}const zp=Rc(class extends G.Component{constructor(...e){super(...e),qc(this,"state",{error:this.props.error}),qc(this,"onUnhandledRejection",e=>{this.setState({error:e.reason||e.detail})})}componentDidMount(){addEventListener("unhandledrejection",this.onUnhandledRejection)}componentWillReceiveProps({location:{pathname:e}}){!document.activeElement||this.props.location.pathname.endsWith("/new")&&e.startsWith("/d/")||document.activeElement.blur(),this.setState({error:null})}componentDidUpdate(e){this.props.location.pathname===e.location.pathname&&this.props.location.search===e.location.search||(scrollTo(0,0),ga("set","page",this.props.location.pathname),ga("send","pageview"))}componentDidCatch(e){this.setState({error:e})}componentWillUnmount(){removeEventListener("unhandledrejection",this.onUnhandledRejection)}render(){const{error:e}=this.state;return e instanceof Zc?G.createElement(jp,sh):e instanceof Qc?G.createElement($p,null):e instanceof Xc?G.createElement(Vp,sh):e?G.createElement(Hp,sh):G.Children.map(this.props.children,e=>G.cloneElement(e,this.props))}});function qp(e){return e.update_time=new Date(e.update_time),e.publish_time=new Date(e.update_time),e.publish_version=e.version,e}class Gp extends G.Component{constructor(e){super(e),qc(this,"state",{notebooks:new Array(27).fill(void 0)}),qc(this,"load",({api:e,location:{search:t}}=this.props)=>{this.setState({notebooks:new Array(27).fill(void 0)});const{before:n}=lu(t);e.documentsLoadPublic(n).then(e=>this.setState({notebooks:e.map(qp)}))}),e.preloadData&&(this.state=Gc({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.load(this.props)}componentWillReceiveProps(e){this.load(e)}render(){const{notebooks:e}=this.state;return G.createElement(Rp,Object.assign({},this.props,{gray:!0}),G.createElement(rl,null,G.createElement("title",null,"Recently published"),G.createElement("meta",{name:"description",content:"Recently published notebooks on Observable"})),G.createElement("div",null,G.createElement("div",{className:"mv4 f4 fw4 lh-copy black-70"},"Recently published"),G.createElement("div",{className:"listing-grid"},e.slice(0,27).map((e,t)=>G.createElement(ld,Object.assign({},this.props,{key:e?e.id:t,reload:this.load,notebook:e})))),e.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Wc,{to:`?before=${e[26].update_time}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))))}}qc(Gp,"preload",({api:e,location:{search:t}})=>{const{before:n}=lu(t);return e.documentsLoadPublic(n).then(e=>({notebooks:e.map(qp)}))});class Kp extends G.Component{constructor(...e){super(...e),qc(this,"state",{error:null})}async componentWillMount(){const{match:{params:{teamId:e,id:t}},api:n,history:r}=this.props;try{const{team:o}=await n.teamAcceptInvitation(e,t);r.replace(`/@${o}`)}catch(i){this.setState({error:"Sorry, this invitation could not be accepted."})}}render(){const{error:e}=this.state;return G.createElement(Nd,{query:{maxWidth:640}},t=>G.createElement(Rp,Object.assign({},this.props,{gray:!t}),G.createElement(rl,null,"Accept Team Invitation"),G.createElement("div",{className:"mw6 center mt5"},e&&G.createElement("a",{href:"/",className:"dib pa2 black-50 hover-blue hover-bg-white br4 link"},G.createElement(wu,{className:"w1 h1 v-top mr1"}),"Home"),G.createElement("p",{className:"f4 fw7 lh-copy black-70"},e||"Accepting team invitation…"))))}}function Yp(e){let{highlight:t,secondary:n,children:r}=e,i=Kc(e,["highlight","secondary","children"]);if(t&&n)throw new Error("Buttons cannot be both secondary and highlighted");return G.createElement("button",Object.assign({className:`inline-flex justify-center ph3 pv2 f6 fw6 ${t?"white bg-blue hover-bg-dark-blue pointer":n?"black-70 bg-light-gray hover-bg-moon-gray pointer":"black-40 bg-light-gray"} br2 bn`},i),r)}function Xp({children:e}){return G.createElement("div",{className:"flex justify-center pv5"},G.createElement("div",{className:"mb2 f4 lh-copy black-50"},e))}const Qp=/\B@([\w-]{1,39})/g;class Jp extends G.Component{constructor(...e){super(...e),qc(this,"state",{links:null})}componentDidMount(){const{api:e,text:t}=this.props,n=t.match(Qp);n&&e.usersExist(n.map(e=>e.substr(1).toLowerCase())).then(e=>this.setState({links:new Map(e)}),()=>{})}render(){const{text:e}=this.props,{links:t}=this.state;if(!t)return e;const n=[];let r,i=0;for(;null!==(r=Qp.exec(e));){const o=r[1],s=t.get(o.toLowerCase()),a=e.substring(i,r.index);a&&n.push(a),s&&"unavailable"!==s?n.push(G.createElement("a",{className:"no-underline black-70 hover-blue",href:`/@${o.toLowerCase()}`,key:i},"@",o)):n.push(`@${o}`),i=r.index+r[0].length}return i!==e.length&&n.push(e.substring(i,e.length)),n}}let Zp=({user:e,size:t=60})=>G.createElement(Wc,{to:e?`/@${e.login}`:"#",className:"inline-flex"},G.createElement(uh,{user:e,className:"br-100 mw-none",s:t}));function ef({user:e}){return G.createElement(Wc,{className:"inline-flex items-center no-underline black hover-blue",to:e?`/@${e.login}`:"#"},e?e.name||e.login:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~ ~~~~~~"),e&&"team"===e.type&&G.createElement(Lu,{className:"w1 h1 ml1",alt:"Team"}))}function tf({user:e,socialLinks:t}){return e&&e.github_id&&t?G.createElement("div",{onClick:async t=>{t.preventDefault();const n=window.open("about:blank","_blank"),{github_id:r}=e,{login:i}=await(await fetch(`https://api.github.com/user/${r}`)).json();n.location=`https://github.com/${i}`},title:"GitHub",className:"dib ml2 black-30 hover-blue pointer",style:{lineHeight:0}},G.createElement(Xu,{style:{width:16,height:16}})):null}function nf({socialLinks:e,user:t}){if(!t||!t.home_url||!e)return null;const{home_url:n}=t;return G.createElement("a",{title:n,href:n,rel:"noopener noreferrer",target:"_blank",className:"inline-flex items-center ml2 no-underline black-30 hover-blue",style:{lineHeight:0}},G.createElement(Pu,{className:"mr1"}),G.createElement("span",{className:"mw4 lh-copy truncate"},n.replace(/https?:\/\//,"").replace(/\/$/,"")))}let rf=({user:e})=>e?e.bio?G.createElement(ih.Consumer,null,t=>G.createElement(Jp,{api:t,text:e.bio})):null:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~ ~~~~~~~~~~~ ~~~~~~~~ ~~~~~~~~ ~~~~~~~~~~~"),of=({currentUser:e,team:t})=>{if(!t||!e||!e.teams.length)return null;if(!(t=e.teams.find(e=>e.id===t.id))||!t.delinquent)return null;const n="owner"===t.role,r=G.createElement("div",{className:"dib ph2 pv1 mt1 lh-copy bg-washed-yellow br2"},G.createElement(Mu,{className:`w1 h1 v-mid mr1 dark-red ${n?"hover-blue":""}`,alt:"Warning"}),"Update billing information to avoid deactivation.");return n?G.createElement(Wc,{className:"no-underline black hover-blue",to:`/team/@${t.login}/settings/billing`},r):r};const sf=G.memo(function({user:e,creator:t,socialLinks:n,status:r,time:i,updateTime:o}){return G.createElement(rh.Consumer,null,s=>G.createElement("div",{className:"flex measure-wide-ns items-center-ns items-top pl2-ns mw-100"},G.createElement(Zp,{user:e}),G.createElement("div",{className:"w-100 pl2 pl3-ns f6"},G.createElement("div",{className:"flex items-center"},G.createElement(ef,{user:e}),"individual"===e.type&&G.createElement(tf,{user:e,socialLinks:n}),G.createElement(nf,{user:e,socialLinks:n}),i&&G.createElement("span",{className:"black-50"},G.createElement("span",{className:"ml1 nowrap",title:`${i.toLocaleString()}${o?`\n${o.toLocaleString()} (updated)`:""}`},"· ",(e=>`${fh(e)}, ${e.getFullYear()}`)(i)),"published"!==r?G.createElement("span",{className:"ml2 f7 nowrap ttu black-30"},r):null)),"team"===e.type&&G.createElement(of,{currentUser:s,team:e}),G.createElement("div",{className:"mt1 lh-copy black-50"},G.createElement(rf,{user:e})),"team"===e.type&&t&&G.createElement("div",{className:"flex items-center mt1 f6 black-50"},"By"," ",G.createElement("div",{className:"inline-flex items-center mh1"},G.createElement(Zp,{user:t,size:14})," "),G.createElement(ef,{user:t})))))});class af extends G.Component{constructor(...e){super(...e),qc(this,"state",{isNew:void 0,collection:{}}),qc(this,"create",async e=>{e.preventDefault();const{api:t,history:n,owner:{login:r,id:i}}=this.props,{collection:{title:o,description:s,pinned:a}}=this.state,{slug:l}=await t.collectionNew({title:o,description:s,pinned:a,owner:i});n.push(`/collection/@${r}/${l}`)}),qc(this,"edit",async e=>{e.preventDefault();const{api:t,onDismiss:n,collection:{id:r}}=this.props,{collection:{title:i,description:o,pinned:s}}=this.state;await t.collectionEdit({id:r,title:i,description:o,pinned:s}),n()}),qc(this,"discardChanges",()=>{const{onDismiss:e}=this.props;e()}),qc(this,"deleteCollection",async()=>{const{api:e,history:t,collection:{id:n},owner:{login:r}}=this.props;confirm("Are you sure you want to delete this collection?\nThis operation cannot be undone.")?(await e.collectionDelete(n),t.push(`/@${r}?tab=collections`)):document.activeElement.blur()}),qc(this,"onChange",e=>{const{target:{name:t,value:n,type:r,checked:i}}=e;this.setState(({collection:e})=>({collection:Gc({},e,{[t]:"checkbox"===r?i:n})}))})}componentWillMount(){this.reload()}componentWillReceiveProps(e){this.reload(e)}reload(e=this.props){if(e.collection){const{collection:{title:t,description:n,pinned:r}}=e;this.setState({collection:{title:t,description:n,pinned:r},isNew:!1})}else this.setState({collection:{title:"",description:"",pinned:!1},isNew:!0})}render(){const{onDismiss:e}=this.props,{collection:t,isNew:n}=this.state;return G.createElement("div",{className:"relative w5 pa2"},G.createElement("div",{onClick:e,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(Eu,{className:"w1 h1"})),G.createElement("h3",{className:"ma0 mb2 f4 fw4 black-70"},n?"Create collection":"Edit collection"),G.createElement("form",{onSubmit:n?this.create:this.edit,className:"flex flex-column flex-auto items-stretch"},G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"name"},"Title"),G.createElement("input",{minLength:"1",maxLength:"255",name:"title",className:"pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",placeholder:"",required:!0,value:t.title,onChange:this.onChange,autoFocus:!0}),G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"name"},"Description"),G.createElement("textarea",{className:"h4 pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",name:"description",maxLength:"255",style:{resize:"none"},value:t.description,onChange:this.onChange}),G.createElement("div",{className:"pt3"},G.createElement(Yp,{highlight:!0},n?"Create collection":"Save changes"),n?null:G.createElement("button",{type:"button",className:"ph3 pa2 ml2 f6 no-underline dark-red hover-dark-red bg-transparent hover-bg-washed-red br2 pointer bn",onClick:this.deleteCollection},G.createElement(Du,{className:"w1 h1 v-mid mr2"}),"Delete"))))}}function lf({user:e}){return G.createElement("div",{className:"flex items-center f6 black-50"},G.createElement("span",{className:"mr1"},"By"),G.createElement(uh,{user:e,s:16,className:"mr1 br-100"}),G.createElement(ef,{user:e}))}class cf extends G.Component{constructor(e){super(e),qc(this,"state",{collectionModal:!1,pinnedFlash:!1,collection:void 0,notebooks:new Array(27).fill(void 0)}),qc(this,"changePin",async e=>{const t=!!e.target.checked,{api:n}=this.props,{collection:{id:r,title:i,description:o}}=this.state;await n.collectionEdit({id:r,title:i,description:o,pinned:t}),this.setState(({collection:e})=>({collection:Gc({},e,{pinned:t}),pinnedFlash:setTimeout(()=>this.setState({pinnedFlash:void 0}),1e3)}))}),qc(this,"reload",()=>{const{api:e,match:{params:{userLogin:t,collectionSlug:n}},location:{search:r}}=this.props;let{before:i}=lu(r);e.init({cache:"no-cache"}).collectionLoad(t,n,{before:i}).then(e=>this.setState({collection:e,notebooks:e.documents.map(e=>Gc({published:!0},e))}))}),qc(this,"onRemoveFromCollection",async e=>{const{api:t}=this.props,{collection:n}=this.state;await t.collectionRemoveDocument({id:n.id,document_id:e.id}),this.reload()}),qc(this,"showCollectionModal",()=>{this.setState({collectionModal:!0})}),qc(this,"hideCollectionModal",()=>{this.setState({collectionModal:!1}),this.reload()}),e.preloadData&&(this.state=Gc({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.load(this.props)}componentWillReceiveProps(e){this.load(e)}load({api:e,match:{params:{collectionSlug:t,userLogin:n}},location:{search:r}}){let{before:i}=lu(r);this.setState({collection:void 0,notebooks:new Array(27).fill(void 0)}),e.collectionLoad(n,t,{before:i}).then(e=>this.setState({collection:e,notebooks:e.documents.map(e=>Gc({published:!0},e))}))}render(){const{user:e}=this.props,{collection:t,notebooks:n,collectionModal:r,pinnedFlash:i}=this.state,o=t&&`${t.description} / An Observable collection by ${t.owner.name||t.owner.login}`;return G.createElement(Rp,Object.assign({},this.props,{gray:!0}),G.createElement(rl,null,t&&G.createElement("title",null,t.title),t&&G.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),t&&G.createElement("meta",{property:"og:title",content:t.title||"Untitled"}),t&&G.createElement("meta",{property:"og:description",content:o}),t&&G.createElement("meta",{name:"description",content:o}),t&&t.thumbnail&&G.createElement("meta",{property:"og:image",content:`https://static.observableusercontent.com/thumbnail/${t.thumbnail}.jpg`})),G.createElement("div",null,G.createElement("div",{className:"mv4 lh-copy"},G.createElement("div",{className:"flex justify-between items-start"},G.createElement("div",null,G.createElement("div",{className:"f3 fw7 lh-title black-70"},t?t.title:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~")),G.createElement("div",{className:"measure-wide mb3 black-70"},t?t.description:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~")),G.createElement(lf,{user:t&&t.owner})),Ah(e,t)&&G.createElement("div",{className:"flex items-center"},G.createElement("div",{className:"flex items-center"},G.createElement("span",{className:`ml2 f7 ttu ${i?"o-100":"o-0"} black-30 mr2`},"Saved"),G.createElement("input",{type:"checkbox",id:"pinned-checkbox",title:"Pinned collections appear on your profile page",checked:t.pinned,onChange:this.changePin}),G.createElement("label",{className:"pl1 pr3",htmlFor:"pinned-checkbox"},"Pin")),G.createElement(Yp,{type:"button",onClick:this.showCollectionModal,highlight:!0},"Edit collection")))),n.length?G.createElement(G.Fragment,null,G.createElement("div",{className:"listing-grid"},n.slice(0,27).map((n,r)=>G.createElement(ld,Object.assign({},this.props,{key:n?n.id:r,notebook:n,reload:this.reload,onRemoveFromCollection:Ah(e,t)&&this.onRemoveFromCollection})))),n.length>27&&n[0]&&G.createElement("div",{className:"mt4 tc"},G.createElement(Wc,{to:`?${cu({before:n[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))):function(e,t){return Ah(e,t)}(e,t)?G.createElement(Xp,null,"📦 Add notebooks to this collection by clicking"," ",G.createElement(Ju,{className:"w1 h1 v-mid mh1"})," and"," ",G.createElement("span",{className:"fw5"},"Add to collection…")," on a notebook page."):G.createElement(Xp,null,"📦 This collection is empty, so far!")),r&&G.createElement(nh,{onDismiss:this.hideCollectionModal},G.createElement(af,Object.assign({onDismiss:this.hideCollectionModal,collection:t,owner:t&&t.owner},this.props))))}}qc(cf,"preload",({api:e,match:{params:{collectionSlug:t,userLogin:n}},location:{search:r}})=>{const{before:i}=lu(r);return e.collectionLoad(n,t,{before:i}).then(e=>({collection:e,collectionModal:!1,pinnedFlash:!1,notebooks:e.documents.map(e=>Gc({published:!0},e))}))});class uf extends G.Component{constructor(...e){super(...e),qc(this,"state",{title:"…",suggestions_to:[],notebooks:new Array(27).fill(void 0)}),qc(this,"reload",()=>{this.load(this.props)})}componentDidMount(){this.load(this.props)}componentWillReceiveProps(e){this.setState({title:"…",notebooks:new Array(27).fill(void 0)}),this.load(e)}load({match:{params:{userLogin:e,documentSlug:t,id:n}},location:{search:r},api:i,user:o}){const{before:s}=lu(r);(t?i.documentLoadHead(`@${e}/${t}`,s):i.documentLoad(n)).then(({title:e,id:t})=>{this.setState({title:e}),o&&i.documentLoadMeta(t).then(({suggestions_to:e})=>this.setState({suggestions_to:e}))});const a=o?"all":"public";i.documentLoadForks(t?`@${e}/${t}`:n,s,a).then(e=>this.setState({notebooks:e}))}render(){const{match:{params:{userLogin:e,documentSlug:t,id:n}}}=this.props,{notebooks:r,suggestions_to:i,title:o}=this.state,s=new Set(i.map(({from_id:e})=>e));return G.createElement(Rp,Object.assign({},this.props,{gray:!0}),G.createElement(rl,null,G.createElement("title",null,`Forks of ‘${Jh({title:o})}’`)),G.createElement("div",{className:"mv4 f4 fw4 lh-copy black-50"},"Forks of ‘",G.createElement(Wc,{to:t?`/@${e}/${t}`:`/d/${n}`,className:"no-underline black-70 hover-blue"},Jh({title:o})),"’"),r.length>0?G.createElement("div",null,G.createElement("div",{className:"listing-grid"},r.slice(0,27).map((e,t)=>G.createElement(ld,{key:e?e.id:t,notebook:e,suggestion:e&&s.has(e.id),reload:this.reload}))),r.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Wc,{to:`?before=${r[26].update_time}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))):G.createElement(Xp,null,"This notebook has no forks."))}}const hf={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},df=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],pf=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],ff=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],mf="undefined"!=typeof window&&void 0!==window.document?window.document:{},gf="fullscreenEnabled"in mf&&Object.keys(hf)||df[0]in mf&&df||pf[0]in mf&&pf||ff[0]in mf&&ff||[];var vf={requestFullscreen:e=>e[gf[hf.requestFullscreen]](),requestFullscreenFunction:e=>e[gf[hf.requestFullscreen]],get exitFullscreen(){return mf[gf[hf.exitFullscreen]].bind(mf)},addEventListener:(e,t,n)=>mf.addEventListener(gf[hf[e]],t,n),removeEventListener:(e,t,n)=>mf.removeEventListener(gf[hf[e]],t,n),get fullscreenEnabled(){return Boolean(mf[gf[hf.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return mf[gf[hf.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return mf[`on${gf[hf.fullscreenchange]}`.toLowerCase()]},set onfullscreenchange(e){return mf[`on${gf[hf.fullscreenchange]}`.toLowerCase()]=e},get onfullscreenerror(){return mf[`on${gf[hf.fullscreenerror]}`.toLowerCase()]},set onfullscreenerror(e){return mf[`on${gf[hf.fullscreenerror]}`.toLowerCase()]=e}};function bf({id:e,value:t="",pinned:n=!1}={}){if((e=+e)!==(0|e)||e<0)throw new Error("invalid node id");return new yf(e,t+"",!!n)}function yf(e,t,n){Object.defineProperties(this,{id:{value:e,enumerable:!0},value:{value:t,enumerable:!0},pinned:{value:n,enumerable:!0}})}Object.defineProperties(yf,{of:{value:bf,writable:!0,configurable:!0}});const wf="create",kf="insert_node",Ef="modify_node",xf="modify_title",Sf="move_node",Cf="remove_node",_f="pin_node",Tf="unpin_node",Nf="revert",Pf="noop";const Af=e=>[e[1],e[0]];function Lf(e){Object.defineProperties(this,{_node:{value:e,writable:!0}})}function Mf({version:e=0,title:t="",nodes:n=[]}={}){if((e=+e)!==(0|e)||e<0)throw new Error("invalid version");n=Array.from(n,bf);const r=new Array(e+1);for(let i=0;i<n.length;++i){const{id:t}=n[i];if(t>e)throw new Error("invalid node_id");if(t in r)throw new Error("duplicate node_id");r[t]=i}return new Rf(e,t+"",n,new Array(e+1))}function Of({version:e,type:t,node_id:n,new_node_value:r,new_node_pinned:i,new_next_node_id:o}){switch(t){case xf:return{version:e,type:t,new_node_value:r};case kf:return{version:e,type:t,node_id:n,new_node_value:r,new_next_node_id:o,new_node_pinned:i};case Cf:return{version:e,type:t,node_id:n};case Sf:return{version:e,type:t,node_id:n,new_next_node_id:o};case Ef:return{version:e,type:t,node_id:n,new_node_value:r};case _f:case Tf:return{version:e,type:t,node_id:n};case Pf:return{version:e,type:t};case wf:throw new Error("cannot redo create");case Nf:throw new Error("cannot redo revert");default:throw new Error("unknown type")}}function If({old_version:e,type:t,node_id:n,old_node_value:r,old_node_pinned:i,old_next_node_id:o}){switch(t){case xf:return{version:e,type:t,new_node_value:r};case kf:return{version:e,type:Cf,node_id:n};case Cf:return{version:e,type:kf,node_id:n,new_node_value:r,new_node_pinned:i,new_next_node_id:o};case Sf:return{version:e,type:t,node_id:n,new_next_node_id:o};case Ef:return{version:e,type:t,node_id:n,new_node_value:r};case _f:return{version:e,type:Tf,node_id:n};case Tf:return{version:e,type:_f,node_id:n};case Pf:return{version:e,type:t};case wf:throw new Error("cannot undo create");case Nf:throw new Error("cannot undo revert");default:throw new Error("unknown type")}}function Rf(e,t,n,r){Object.defineProperties(this,{version:{value:e,enumerable:!0},title:{value:t,enumerable:!0},nodes:{value:n,enumerable:!0},events:{value:r,enumerable:!0}})}function Df(e){return{version:e.version,type:e.type,node_id:e.node_id,new_next_node_id:e.new_next_node_id,new_node_value:e.new_node_value,new_node_pinned:e.new_node_pinned,target_document_id:e.target_document_id,target_node_id:e.target_node_id}}function Ff(e){try{const n=window[e];return n.getItem("test"),n}catch(t){return null}}Object.defineProperties(Lf.prototype,{[Symbol.iterator]:{value:function(){return this},writable:!0,configurable:!0},next:{value:function(){if(null==this._node)return{done:!0};const e=this._node;return this._node=this._node.next,{done:!1,value:e}},writable:!0,configurable:!0}}),Object.defineProperties(Rf,{create:{value:function({version:e,title:t="",nodes:n=[]}={}){n=Array.from(n,bf);const r=new Set,i=[];if(void 0!==e&&((e=+e)!=(0|e)||e<0))throw new Error("invalid version");let o=-1,s=-1;(t+="")&&(i[++o]={version:o,type:xf,old_node_value:"",new_node_value:t});for(const{id:a,value:l,pinned:c}of n){if(r.has(a))throw new Error("duplicate node_id");r.add(a),i[++o]={version:o,type:kf,node_id:a,new_next_node_id:null,new_node_value:l,new_node_pinned:c},a>s&&(s=a)}if(void 0===e)e=Math.max(o,s)+1;else if(o>=e||e<s)throw new Error("invalid version");return i[e]={version:e,type:wf},new Rf(e,t,n,i)},writable:!0,configurable:!0},from:{value:function(e){let t="",n=-1,r=-1,i=!1;const o=new Map;let s=null,a=null;function l(e,t){const n=t?t.previous:s;t?(e.next=t,t.previous=e):s=e,n?(e.previous=n,n.next=e):a=e}function c(e){const t=e.next,n=e.previous;t?(t.previous=n,e.next=null):s=n,n?(n.next=t,e.previous=null):a=t}for(const u of e){let e=+u.version;if(e!==(0|e)||!(e>=n))throw new Error("invalid version");switch(n=e,u.type){case wf:if(i)throw new Error("duplicate create");if(r>n)throw new Error("invalid node_id");i=!0;break;case xf:t=u.new_node_value;break;case kf:{let e=n;if(void 0!==u.node_id){if((e=+u.node_id)!=(0|e)||e<0||i&&e>n)throw new Error("invalid node_id");if(o.has(e))throw new Error("duplicate node_id")}let t=null;if(null!=u.new_next_node_id&&void 0===(t=o.get(+u.new_next_node_id)))throw new Error("invalid new_next_node_id");r=Math.max(e,r);const s={id:e,value:u.new_node_value,pinned:u.new_node_pinned,next:null,previous:null};l(s,t),o.set(e,s);break}case Ef:{const e=o.get(+u.node_id);if(void 0===e)throw new Error("invalid node_id");e.value=u.new_node_value;break}case Sf:{const e=o.get(+u.node_id);if(void 0===e)throw new Error("invalid node_id");let t=null;if(null!=u.new_next_node_id&&void 0===(t=o.get(+u.new_next_node_id)))throw new Error("invalid new_next_node_id");e.next!==t&&e!==t&&(c(e),l(e,t));break}case Cf:{const e=+u.node_id,t=o.get(e);if(void 0===t)throw new Error("invalid node_id");c(t),o.delete(e);break}case _f:case Tf:{const e=o.get(+u.node_id);if(void 0===e)throw new Error("invalid node_id");e.pinned=u.type===_f;break}case Pf:break;default:throw new Error("unknown type")}}if(!i)throw new Error("expected create");return Mf({version:n,title:t,nodes:new Lf(a)})},writable:!0,configurable:!0},of:{value:Mf,writable:!0,configurable:!0},Node:{value:yf,writable:!0,configurable:!0}}),Object.defineProperties(Rf.prototype,{apply:{value:function(e,t=function(){}){let n=this.version,r=this.title,i=this.nodes,o=this.events;for(const s of e){const e=n;switch(n=o.length,o===this.events&&(o=o.slice()),s.type){case xf:{const i=void 0===s.new_node_value?"":s.new_node_value+"";if(r===i)break;t(o[o.length]={version:n,old_version:e,type:xf,old_node_value:r,new_node_value:i}),r=i;continue}case kf:{let r=n;if(void 0!==s.node_id){if((r=+s.node_id)!=(0|r)||r<0||r>n)throw new Error("invalid node_id");if(i.findIndex(e=>e.id===r)>=0)throw new Error("duplicate node_id")}let a=i.length,l=null;if(null!=s.new_next_node_id&&(l=+s.new_next_node_id,(a=i.findIndex(e=>e.id===l))<0))throw new Error("invalid new_next_node_id");const c=void 0===s.new_node_value?"":s.new_node_value+"",u=!!s.new_node_pinned;i===this.nodes&&(i=i.slice()),i.splice(a,0,new yf(r,c,u)),t(o[o.length]={version:n,old_version:e,type:kf,node_id:r,new_next_node_id:l,new_node_value:c,new_node_pinned:u});continue}case Ef:{const r=+s.node_id,a=i.findIndex(e=>e.id===r);if(a<0)throw new Error("invalid node_id");const l=void 0===s.new_node_value?"":s.new_node_value+"",c=i[a].value;if(c===l)break;i===this.nodes&&(i=i.slice()),i[a]=new yf(r,l,i[a].pinned),t(o[o.length]={version:n,old_version:e,type:Ef,node_id:r,old_node_value:c,new_node_value:l});continue}case Sf:{const r=+s.node_id,a=i.findIndex(e=>e.id===r);if(a<0)throw new Error("invalid node_id");const l=i[a];let c=i.length,u=null;if(null!=s.new_next_node_id&&(u=+s.new_next_node_id,(c=i.findIndex(e=>e.id===u))<0))throw new Error("invalid new_next_node_id");const h=a<i.length-1?i[a+1].id:null;if(a===c&&(u=h),h===u)break;i===this.nodes&&(i=i.slice()),i.splice(a,1),i.splice(c-(a<c),0,l),t(o[o.length]={version:n,old_version:e,type:Sf,node_id:r,old_next_node_id:h,new_next_node_id:u});continue}case Cf:{const r=+s.node_id,a=i.findIndex(e=>e.id===r);if(a<0)throw new Error("invalid node_id");const l=a<i.length-1?i[a+1].id:null,c=i[a];i===this.nodes&&(i=i.slice()),i.splice(a,1),t(o[o.length]={version:n,old_version:e,type:Cf,node_id:r,old_next_node_id:l,old_node_value:c.value,old_node_pinned:c.pinned});continue}case _f:case Tf:{const r=+s.node_id,a=i.findIndex(e=>e.id===r);if(a<0)throw new Error("invalid node_id");const l=s.type===_f;if(i[a].pinned===l)break;i===this.nodes&&(i=i.slice()),i[a]=new yf(r,i[a].value,l),t(o[o.length]={version:n,old_version:e,type:s.type,node_id:r});continue}case Nf:{if((n=+s.node_id)>e)throw new Error("cannot undo revert");const a=new Rf(e,r,i,o);({version:n,title:r,nodes:i}=a.reset(n,t)),o[o.length]={version:o.length,old_version:e,type:Nf,node_id:n};continue}case Pf:break;case wf:throw new Error("cannot apply create");default:throw new Error("unknown type")}t(o[o.length]={version:n,old_version:e,type:Pf})}return o===this.events?this:new Rf(n,r,i,o)},writable:!0,configurable:!0},diff:{value:function(e,t=[]){const n=new Map(this.nodes.map(e=>[e.id,e])),r=new Map(e.nodes.map(e=>[e.id,e])),i=new Map(t),o=new Map(t.map(Af)),s=e.nodes.map(e=>{const t=o.get(e.id),r=n.get(t);return r?{type:r.value===e.value?Pf:Ef,base:r,target:e}:{type:null==t?kf:Cf,target:e}});e:for(let a=0,l=this.nodes.length;a<l;++a){const e=this.nodes[a],t=i.get(e.id);if(r.has(t))continue;const n={type:null==t?kf:Cf,base:e};for(let o=a+1;o<l;++o){const e=r.get(i.get(this.nodes[o].id));if(e){s.splice(s.findIndex(t=>t.target===e),0,n);continue e}}s.push(n)}return s},writable:!0,configurable:!0},merge:{value:function(e,t){let n,r;if(Array.isArray(e)||(e=Array.from(e)),t&&(t=function(e){return function(t){e(Of(t))}}(t)),0===e.length)return this;const i=+e[0].version,o=e.length,s=this.version-i+1,a=Math.min(o,s),l=this.reset(i-1,t).apply(e,t);for(e=l.events.slice(i),n=0;n<a;++n){const t=e[n],r=this.events[t.version];if(t.type===kf&&t.node_id===t.version||t.type!==r.type||t.node_id!==r.node_id||t.new_node_value!==r.new_node_value||t.new_node_pinned!==r.new_node_pinned||t.new_next_node_id!==r.new_next_node_id)break}if(n===o)return this;if(n===s)return l;const c=new Set,u=new Map;for(r=0;r<o-n;++r){const t=e[r];switch(t.type){case kf:t.node_id<i&&c.add(t.node_id),u.delete(t.node_id);break;case Cf:c.delete(t.node_id),u.set(t.node_id,t.old_next_node_id)}}const h=new Map,d=[];for(r=i+n;r<=this.version;++r){const e=this.events[r];switch(e.type){case xf:d.push({type:xf,new_node_value:e.new_node_value});break;case kf:{let t=e.node_id;h.has(t)?t=h.get(t):(t>=i||c.has(t))&&h.set(t,t=l.version+d.length+1);let n=e.new_next_node_id;if(h.has(n))n=h.get(n);else for(;u.has(n);)n=u.get(n);u.delete(t),d.push({type:kf,node_id:t,new_node_value:e.new_node_value,new_node_pinned:e.new_node_pinned,new_next_node_id:n});break}case Ef:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;d.push({type:Ef,node_id:t,new_node_value:e.new_node_value});break}case Sf:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;let n=e.new_next_node_id;if(h.has(n))n=h.get(n);else for(;u.has(n);)n=u.get(n);d.push({type:Sf,node_id:t,new_next_node_id:n});break}case Cf:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;c.delete(t),d.push({type:Cf,node_id:t});break}case _f:case Tf:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;d.push({type:e.type,node_id:t});break}case Pf:break;default:throw new Error("unknown type")}}return l.apply(d,t)},writable:!0,configurable:!0},patch:{value:function(e,t=[]){const n=new Map(this.nodes.map(e=>[e.id,e])),r=new Map(this.nodes.slice(0,-1).map((e,t)=>[e.id,this.nodes[t+1].id])),i=new Map(this.nodes.slice(1).map((e,t)=>[e.id,this.nodes[t].id])),o=new Map(t),s=new Map(t.map(Af));let a=this.nodes[this.nodes.length-1].id;const l=new Set(e.nodes.map(e=>e.id)),c=[],u=[];let h=this.events.length-1;this.title!==e.title&&(++h,c.push({type:xf,new_node_value:e.title}));for(const{id:d}of this.nodes)if(!l.has(o.get(d))){++h,c.push({type:Cf,node_id:d});const e=i.get(d),t=r.get(d);void 0!==t?(r.set(d,r.get(t)),i.set(t,e)):a=e,void 0!==e&&(i.set(d,i.get(e)),r.set(e,t))}for(let d=e.nodes.length-1;d>=0;--d){const t=e.nodes[d],l=e.nodes[d+1]&&s.get(e.nodes[d+1].id),{id:p}=t;let f=s.get(p);const m=n.get(f);if(m){m.value!==t.value&&(++h,c.push({type:Ef,node_id:f,new_node_value:t.value})),m.pinned!==t.pinned&&(++h,c.push({type:t.pinned?_f:Tf,node_id:f}));const e=r.get(f);if(e!==l){++h,c.push({type:Sf,node_id:f,new_next_node_id:void 0===l?null:l});const t=i.get(f),n=void 0!==l?i.get(l):a;void 0!==t&&r.set(t,e),void 0!==e&&i.set(e,t),r.set(f,l),i.set(f,n),void 0!==n&&r.set(n,f),void 0!==l?i.set(l,f):a=f}}else{const e=++h;null==f&&(f=e,s.set(p,f),o.set(f,p),u.push([f,p])),c.push({type:kf,node_id:f,new_node_value:t.value,new_node_pinned:t.pinned,new_next_node_id:void 0===l?null:l});const n=null!=l?i.get(l):a;null!=n&&r.set(n,f),null!=l?i.set(l,f):a=f,r.set(f,l),i.set(f,n)}}return{events:c,mapping:u}},writable:!0,configurable:!0},reset:{value:function(e,t){if((e=+e)<0||e>=this.events.length||e!==(0|e))throw new Error("invalid version");if(e===this.events.length-1)return this;const n=Array.from(function*(e,t,n){for(;n<t;){const r=If(e[t--]);if(yield r,r.version===n)return}for(;t<n;){const r=Of(e[++t]);if(yield r,r.version===n)return}}(this.events,this.version,e));if(!n.length)return this;t&&n.forEach(t);const{title:r,nodes:i}=this.apply(n);return new Rf(e=n[n.length-1].version,r,i,this.events.slice(0,e+1))},writable:!0,configurable:!0}});const jf=Ff("localStorage"),Hf=Ff("sessionStorage"),$f=Symbol("closed"),Uf=Symbol("opening"),Wf=Symbol("greeting"),Bf=Symbol("idle"),Vf=Symbol("flushing"),zf=Symbol("saving"),qf=Symbol("reopening"),Gf=3e4,Kf=250,Yf=50,Xf=1e3;class Qf extends G.Component{constructor(...e){super(...e),qc(this,"flushDelay",Yf),qc(this,"flushTimer",null),qc(this,"stashTimer",null),qc(this,"pingInterval",null),qc(this,"reopenDelay",Kf),qc(this,"saveVersion",null),qc(this,"stashVersion",null),qc(this,"socket",null),qc(this,"clientState",$f),qc(this,"close",()=>{this.clientState!==$f&&(this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.stashTimer&&(clearTimeout(this.stashTimer),this.stashTimer=null),this.reopenTimer&&(clearTimeout(this.reopenTimer),this.reopenTimer=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.close(),this.socket=null,this.clientState=$f)}),qc(this,"abort",e=>{const{onError:t}=this.props;this.close(),t(e)}),qc(this,"reopen",()=>{if(this.clientState!==qf)throw new Error("unexpected state");const{editable:e,notebook:{id:t}}=this.props;this.reopenTimer&&(clearTimeout(this.reopenTimer),this.reopenTimer=null),this.socket=new WebSocket(`wss://ws.observablehq.com/document/${t}${e?"/edit":"/comments"}`),this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.clientState=Uf}),qc(this,"onOpen",()=>{if(this.clientState!==Uf)throw new Error("unexpected state");const{token:e}=this.props;this.clientState=Wf,this.send({type:"hello",token:e,version:this.saveVersion}),this.pingInterval=setInterval(this.ping,Gf)}),qc(this,"onClose",()=>{isFinite(this.reopenDelay)&&(this.reopenDelay=Math.min(6e4,this.reopenDelay*(1+Math.random()))),this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.reopenTimer&&(clearTimeout(this.reopenTimer),this.reopenTimer=null),this.reopenTimer=setTimeout(this.reopen,this.reopenDelay),this.clientState=qf}),qc(this,"onMessage",e=>{const{notebook:{id:t},onSave:n,onSaveConfirm:r,onPresence:i,onComments:o,onCommentConfirm:s}=this.props;switch((e=JSON.parse(e.data)).type){case"hello":if(this.clientState!==Wf)return this.abort(new Error("unexpected hello"));this.reopenDelay=Math.max(Kf,this.reopenDelay/10),this.clientState=Bf,this.maybeFlush();break;case"goodbye":this.reopenDelay=1/0;break;case"error":if(this.clientState!==zf)return this.abort(new Error("unexpected error"));this.clientState=Bf,this.maybeFlush();break;case"saveconfirm":if(this.clientState!==zf)return this.abort(new Error("unexpected saveconfirm"));this.clientState=Bf,this.saveVersion=this.stashVersion=e.version,jf&&jf.removeItem(`notebook-${t}`),this.maybeFlush(),r(e.version);break;case"save":const a=e.events,l=a[a.length-1].version;if(!(l>this.saveVersion))return this.abort(new Error("version skew"));this.saveVersion=this.stashVersion=l,this.maybeFlush(),n(a,l);break;case"presence":i(e.participants);break;case"comments":o(e.comments);break;case"commentconfirm":s(e.id,e.nonce)}}),qc(this,"flush",()=>{const{editable:e,notebook:{model:{events:t}}}=this.props;if(this.clientState!==Vf)throw new Error("unexpected state");!e||this.saveVersion>=t.length-1?this.clientState=Bf:(this.flushTimer=null,this.clientState=zf,this.send({type:"save",events:t.slice(this.saveVersion+1).map(Df)}))}),qc(this,"stash",()=>{const{notebook:{id:e,model:{events:t}}}=this.props;null!=this.stashVersion&&this.stashVersion<t.length-1&&(jf&&jf.setItem(`notebook-${e}`,JSON.stringify(t.slice(this.saveVersion+1).map(Df))),this.stashVersion=t.length-1),this.stashTimer=null}),qc(this,"ping",()=>{this.send({type:"ping"})})}componentDidMount(){if(this.clientState!==$f)throw new Error("unexpected state");const{notebook:{save_version:e}}=this.props;this.saveVersion=this.stashVersion=e,this.clientState=qf,this.reopen()}componentDidUpdate(){this.maybeFlush()}componentWillUnmount(){this.saveVersion=null,this.stashVersion=null,this.close()}maybeFlush(){const{editable:e,notebook:{model:{events:t}}}=this.props;e&&(this.stashTimer||(this.stashTimer=setTimeout(this.stash,Xf)),this.clientState===Bf&&(this.saveVersion<t.length-1?(this.flushDelay*=Math.random()+1,this.flushTimer=setTimeout(this.flush,this.flushDelay),this.clientState=Vf):this.flushDelay=Math.max(Yf,this.flushDelay/2)))}send(e){this.socket.send(JSON.stringify(e))}render(){return null}}qc(Qf,"defaultProps",{notebook:void 0,editable:void 0,onSave:void 0,onSaveConfirm:void 0,onPresence:void 0,onComments:void 0,onCommentConfirm:void 0,onError:void 0,token:void 0});const Jf=/Mac|iPhone/.test(navigator.platform),Zf={Alt:"⌥",Tab:"⇥",Up:"↑",Down:"↓",Cmd:"⌘",Ctrl:"⌃",Shift:"⇧",Enter:"↩︎",Backspace:"⌫",Escape:"⎋"},em={Alt:"Option",Backspace:"Delete",Cmd:"Command",Ctrl:"Control",Enter:"Return",Escape:"Esc","/":"Slash","?":"Question mark"},tm={Ctrl:-4,Alt:-3,Shift:-2,Cmd:-1};function nm(e,t,n){const r=e.split("-");return r.slice().sort((e,t)=>(tm[e]||r.indexOf(e))-(tm[t]||r.indexOf(t))).map(e=>t[e]||e).join(n)}function rm(e){return nm(e,Jf?em:{},"-")}function im(e){return Jf?nm(e,Zf,""):null}function om(e){return Jf?im(e):`(${rm(e)})`}var sm=n(function(e,t){e.exports=function(){var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=r||i||o,a=s&&(r?document.documentMode||6:+(o||i)[1]),l=!o&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),h=/Opera\//.test(e),d=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),m=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),g=/Android/.test(e),v=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=m||/Mac/.test(t),y=/\bCrOS\b/.test(e),w=/win/i.test(t),k=h&&e.match(/Version\/(\d*\.\d*)/);k&&(k=Number(k[1])),k&&k>=15&&(h=!1,l=!0);var E=b&&(c||h&&(null==k||k<12.11)),x=n||s&&a>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var C,_=function(e,t){var n=e.className,r=S(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function T(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function N(e,t){return T(e).appendChild(t)}function P(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function A(e,t,n,r){var i=P(e,t,n,r);return i.setAttribute("role","presentation"),i}function L(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function M(){var e;try{e=document.activeElement}catch(wt){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function O(e,t){var n=e.className;S(t).test(n)||(e.className+=(n?" ":"")+t)}function I(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!S(n[r]).test(t)&&(t+=" "+n[r]);return t}C=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(wt){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var R=function(e){e.select()};function D(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function F(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function j(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,s=i||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}}m?R=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(R=function(e){try{e.select()}catch(t){}});var H=function(){this.id=null};function $(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}H.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var U=30,W={toString:function(){return"CodeMirror.Pass"}},B={scroll:!1},V={origin:"*mouse"},z={origin:"+move"};function q(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var s=o-r;if(o==e.length||i+s>=t)return r+Math.min(s,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}}var G=[""];function K(e){for(;G.length<=e;)G.push(Y(G)+" ");return G[e]}function Y(e){return e[e.length-1]}function X(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Q(){}function J(e,t){var n;return Object.create?n=Object.create(e):(Q.prototype=e,n=new Q),t&&F(t,n),n}var Z=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Z.test(e))}function te(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&re.test(e)}function oe(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function se(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}function ae(e,t,r){var i=this;this.input=r,i.scrollbarFiller=P("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=P("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=A("div",null,"CodeMirror-code"),i.selectionDiv=P("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=P("div",null,"CodeMirror-cursors"),i.measure=P("div",null,"CodeMirror-measure"),i.lineMeasure=P("div",null,"CodeMirror-measure"),i.lineSpace=A("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=A("div",[i.lineSpace],"CodeMirror-lines");i.mover=P("div",[o],null,"position: relative"),i.sizer=P("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=P("div",null,null,"position: absolute; height: "+U+"px; width: 1px;"),i.gutters=P("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=P("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=P("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),s&&a<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),l||n&&v||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}function le(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function ce(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function ue(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function he(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function de(e){if(null==e.parent)return null;for(var t=e.parent,n=$(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function pe(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s],l=a.height;if(t<l)break;t-=l}return n+s}function fe(e,t){return t>=e.first&&t<e.first+e.size}function me(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ge(e,t,n){if(void 0===n&&(n=null),!(this instanceof ge))return new ge(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ve(e,t){return e.line-t.line||e.ch-t.ch}function be(e,t){return e.sticky==t.sticky&&0==ve(e,t)}function ye(e){return ge(e.line,e.ch)}function we(e,t){return ve(e,t)<0?t:e}function ke(e,t){return ve(e,t)<0?e:t}function Ee(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function xe(e,t){if(t.line<e.first)return ge(e.first,0);var n=e.first+e.size-1;return t.line>n?ge(n,le(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?ge(e.line,t):n<0?ge(e.line,0):e}(t,le(e,t.line).text.length)}function Se(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=xe(e,t[r]);return n}var Ce=!1,_e=!1;function Te(e,t,n){this.marker=e,this.from=t,this.to=n}function Ne(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Pe(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Ae(e,t){if(t.full)return null;var n=fe(e,t.from.line)&&le(e,t.from.line).markedSpans,r=fe(e,t.to.line)&&le(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,s=0==ve(t.from,t.to),a=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker,a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);if(a||o.from==t&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Te(s,o.from,l?null:o.to))}}return r}(n,i,s),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);if(a||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Te(s,l?null:o.from-t,null==o.to?null:o.to-t))}}return r}(r,o,s),c=1==t.text.length,u=Y(t.text).length+(c?i:0);if(a)for(var h=0;h<a.length;++h){var d=a[h];if(null==d.to){var p=Ne(l,d.marker);p?c&&(d.to=null==p.to?null:p.to+u):d.to=i}}if(l)for(var f=0;f<l.length;++f){var m=l[f];if(null!=m.to&&(m.to+=u),null==m.from){var g=Ne(a,m.marker);g||(m.from=u,c&&(a||(a=[])).push(m))}else m.from+=u,c&&(a||(a=[])).push(m)}a&&(a=Le(a)),l&&l!=a&&(l=Le(l));var v=[a];if(!c){var b,y=t.text.length-2;if(y>0&&a)for(var w=0;w<a.length;++w)null==a[w].to&&(b||(b=[])).push(new Te(a[w].marker,null,null));for(var k=0;k<y;++k)v.push(b);v.push(l)}return v}function Le(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Me(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Oe(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Ie(e){return e.inclusiveLeft?-1:0}function Re(e){return e.inclusiveRight?1:0}function De(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=ve(r.from,i.from)||Ie(e)-Ie(t);if(o)return-o;var s=ve(r.to,i.to)||Re(e)-Re(t);return s||t.id-e.id}function Fe(e,t){var n,r=_e&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||De(n,i.marker)<0)&&(n=i.marker);return n}function je(e){return Fe(e,!0)}function He(e){return Fe(e,!1)}function $e(e,t){var n,r=_e&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||De(n,o.marker)<0)&&(n=o.marker)}return n}function Ue(e,t,n,r,i){var o=le(e,t),s=_e&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=ve(c.from,n)||Ie(l.marker)-Ie(i),h=ve(c.to,r)||Re(l.marker)-Re(i);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ve(c.to,n)>=0:ve(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ve(c.from,r)<=0:ve(c.from,r)<0)))return!0}}}function We(e){for(var t;t=je(e);)e=t.find(-1,!0).line;return e}function Be(e,t){var n=le(e,t),r=We(n);return n==r?t:de(r)}function Ve(e,t){if(t>e.lastLine())return t;var n,r=le(e,t);if(!ze(e,r))return t;for(;n=He(r);)r=n.find(1,!0).line;return de(r)+1}function ze(e,t){var n=_e&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&qe(e,t,r))return!0}}function qe(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return qe(e,r.line,Ne(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&qe(e,t,i))return!0}function Ge(e){e=We(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;t+=a.height}return t}function Ke(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=je(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=He(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,r=o.to.line,n+=r.text.length-o.to.ch}return n}function Ye(e){var t=e.display,n=e.doc;t.maxLine=le(n,n.first),t.maxLineLength=Ke(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=Ke(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var Xe=null;function Qe(e,t,n){var r;Xe=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:Xe=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:Xe=i)}return null!=r?r:Xe}var Je=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,s=/[1n]/;function a(e,t,n){this.level=e,this.from=t,this.to=n}return function(l,c){var u,h="ltr"==c?"L":"R";if(0==l.length||"ltr"==c&&!n.test(l))return!1;for(var d=l.length,p=[],f=0;f<d;++f)p.push((u=l.charCodeAt(f))<=247?e.charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?t.charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");for(var m=0,g=h;m<d;++m){var v=p[m];"m"==v?p[m]=g:g=v}for(var b=0,y=h;b<d;++b){var w=p[b];"1"==w&&"r"==y?p[b]="n":i.test(w)&&(y=w,"r"==w&&(p[b]="R"))}for(var k=1,E=p[0];k<d-1;++k){var x=p[k];"+"==x&&"1"==E&&"1"==p[k+1]?p[k]="1":","!=x||E!=p[k+1]||"1"!=E&&"n"!=E||(p[k]=E),E=x}for(var S=0;S<d;++S){var C=p[S];if(","==C)p[S]="N";else if("%"==C){var _=void 0;for(_=S+1;_<d&&"%"==p[_];++_);for(var T=S&&"!"==p[S-1]||_<d&&"1"==p[_]?"1":"N",N=S;N<_;++N)p[N]=T;S=_-1}}for(var P=0,A=h;P<d;++P){var L=p[P];"L"==A&&"1"==L?p[P]="L":i.test(L)&&(A=L)}for(var M=0;M<d;++M)if(r.test(p[M])){var O=void 0;for(O=M+1;O<d&&r.test(p[O]);++O);for(var I="L"==(M?p[M-1]:h),R="L"==(O<d?p[O]:h),D=I==R?I?"L":"R":h,F=M;F<O;++F)p[F]=D;M=O-1}for(var j,H=[],$=0;$<d;)if(o.test(p[$])){var U=$;for(++$;$<d&&o.test(p[$]);++$);H.push(new a(0,U,$))}else{var W=$,B=H.length;for(++$;$<d&&"L"!=p[$];++$);for(var V=W;V<$;)if(s.test(p[V])){W<V&&H.splice(B,0,new a(1,W,V));var z=V;for(++V;V<$&&s.test(p[V]);++V);H.splice(B,0,new a(2,z,V)),W=V}else++V;W<$&&H.splice(B,0,new a(1,W,$))}return"ltr"==c&&(1==H[0].level&&(j=l.match(/^\s+/))&&(H[0].from=j[0].length,H.unshift(new a(0,0,j[0].length))),1==Y(H).level&&(j=l.match(/\s+$/))&&(Y(H).to-=j[0].length,H.push(new a(0,d-j[0].length,d)))),"rtl"==c?H.reverse():H}}();function Ze(e,t){var n=e.order;return null==n&&(n=e.order=Je(e.text,t)),n}var et=[],tt=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||et).concat(n)}};function nt(e,t){return e._handlers&&e._handlers[t]||et}function rt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=$(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function it(e,t){var n=nt(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ot(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),it(e,n||t.type,e,t),ht(t)||t.codemirrorIgnore}function st(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==$(n,t[r])&&n.push(t[r])}function at(e,t){return nt(e,t).length>0}function lt(e){e.prototype.on=function(e,t){tt(this,e,t)},e.prototype.off=function(e,t){rt(this,e,t)}}function ct(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ut(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ht(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function dt(e){ct(e),ut(e)}function pt(e){return e.target||e.srcElement}function ft(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var mt,gt,vt=function(){if(s&&a<9)return!1;var e=P("div");return"draggable"in e||"dragDrop"in e}();function bt(e){if(null==mt){var t=P("span","​");N(e,P("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(mt=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var n=mt?P("span","​"):P("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function yt(e){if(null!=gt)return gt;var t=N(e,document.createTextNode("AخA")),n=C(t,0,1).getBoundingClientRect(),r=C(t,1,2).getBoundingClientRect();return T(e),!(!n||n.left==n.right)&&(gt=r.right-n.right<3)}var wt,kt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Et=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(wt){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(wt){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},xt="oncopy"in(wt=P("div"))||(wt.setAttribute("oncopy","return;"),"function"==typeof wt.oncopy),St=null,Ct={},_t={};function Tt(e){if("string"==typeof e&&_t.hasOwnProperty(e))e=_t[e];else if(e&&"string"==typeof e.name&&_t.hasOwnProperty(e.name)){var t=_t[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Tt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Tt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Nt(e,t){t=Tt(t);var n=Ct[t.name];if(!n)return Nt(e,"text/plain");var r=n(e,t);if(Pt.hasOwnProperty(t.name)){var i=Pt[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)r[s]=t.modeProps[s];return r}var Pt={};function At(e,t){var n=Pt.hasOwnProperty(e)?Pt[e]:Pt[e]={};F(t,n)}function Lt(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Mt(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ot(e,t,n){return!e.startState||e.startState(t,n)}var It=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};It.prototype.eol=function(){return this.pos>=this.string.length},It.prototype.sol=function(){return this.pos==this.lineStart},It.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},It.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},It.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},It.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},It.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},It.prototype.skipToEnd=function(){this.pos=this.string.length},It.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},It.prototype.backUp=function(e){this.pos-=e},It.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=j(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},It.prototype.indentation=function(){return j(this.string,null,this.tabSize)-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},It.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);if(i(o)==i(e))return!1!==t&&(this.pos+=e.length),!0},It.prototype.current=function(){return this.string.slice(this.start,this.pos)},It.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},It.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},It.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Rt=function(e,t){this.state=e,this.lookAhead=t},Dt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Ft(e,t,n,r){var i=[e.state.modeGen],o={};qt(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},o,r);for(var s=n.state,a=function(r){n.baseTokens=i;var a=e.state.overlays[r],l=1,c=0;n.state=!0,qt(e,t.text,a.mode,n,function(e,t){for(var n=l;c<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(a.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+t}},o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)a(l);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function jt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Ht(e,de(t)),i=t.text.length>e.options.maxHighlightLength&&Lt(e.doc.mode,r.state),o=Ft(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Ht(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Dt(r,!0,t);var o=function(e,t,n){for(var r,i,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var l=le(o,a-1),c=l.stateAfter;if(c&&(!n||a+(c instanceof Rt?c.lookAhead:0)<=o.modeFrontier))return a;var u=j(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=a-1,r=u)}return i}(e,t,n),s=o>r.first&&le(r,o-1).stateAfter,a=s?Dt.fromSaved(r,s,o):new Dt(r,Ot(r.mode),o);return r.iter(o,t,function(n){$t(e,n.text,a);var r=a.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?a.save():null,a.nextLine()}),n&&(r.modeFrontier=a.line),a}function $t(e,t,n,r){var i=e.doc.mode,o=new It(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&Ut(i,n.state);!o.eol();)Wt(i,o,n.state),o.start=o.pos}function Ut(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Mt(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Wt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Mt(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}Dt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Dt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Dt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Dt.fromSaved=function(e,t,n){return t instanceof Rt?new Dt(e,Lt(e.mode,t.state),n,t.lookAhead):new Dt(e,Lt(e.mode,t),n)},Dt.prototype.save=function(e){var t=!1!==e?Lt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Rt(t,this.maxLookAhead):t};var Bt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Vt(e,t,n,r){var i,o=e.doc,s=o.mode;t=xe(o,t);var a,l=le(o,t.line),c=Ht(e,t.line,n),u=new It(l.text,e.options.tabSize,c);for(r&&(a=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=Wt(s,u,c.state),r&&a.push(new Bt(u,i,Lt(o.mode,c.state)));return r?a:new Bt(u,i,c.state)}function zt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function qt(e,t,n,r,i,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,h=new It(t,e.options.tabSize,r),d=e.options.addModeClass&&[null];for(""==t&&zt(Ut(n,r.state),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(a=!1,s&&$t(e,t,r,h.pos),h.pos=t.length,l=null):l=zt(Wt(n,h,r.state,d),o),d){var p=d[0].name;p&&(l="m-"+(l?p+" "+l:p))}if(!a||u!=l){for(;c<h.start;)c=Math.min(h.start,c+5e3),i(c,u);u=l}h.start=h.pos}for(;c<h.pos;){var f=Math.min(h.pos,c+5e3);i(f,u),c=f}}var Gt=function(e,t,n){this.text=e,Oe(this,t),this.height=n?n(this):1};function Kt(e){e.parent=null,Me(e)}Gt.prototype.lineNo=function(){return de(this)},lt(Gt);var Yt={},Xt={};function Qt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Xt:Yt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Jt(e,t){var n=A("span",null,null,l?"padding-right: .1px":null),r={pre:A("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,s=void 0;r.pos=0,r.addToken=en,yt(e.display.measure)&&(s=Ze(o,e.doc.direction))&&(r.addToken=tn(r.addToken,s)),r.map=[];var a=t!=e.display.externalMeasured&&de(o);rn(o,r,jt(e,o,a)),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=I(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=I(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(bt(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var c=r.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return it(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=I(r.pre.className,r.textClass||"")),r}function Zt(e){var t=P("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function en(e,t,n,r,i,o,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,h=e.cm.state.specialChars,d=!1;if(h.test(t)){c=document.createDocumentFragment();for(var p=0;;){h.lastIndex=p;var f=h.exec(t),m=f?f.index-p:t.length-p;if(m){var g=document.createTextNode(u.slice(p,p+m));s&&a<9?c.appendChild(P("span",[g])):c.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;p+=m+1;var v=void 0;if("\t"==f[0]){var b=e.cm.options.tabSize,y=b-e.col%b;(v=c.appendChild(P("span",K(y),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=y}else"\r"==f[0]||"\n"==f[0]?((v=c.appendChild(P("span","\r"==f[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),s&&a<9?c.appendChild(P("span",[v])):c.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),s&&a<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||r||i||d||l){var w=n||"";r&&(w+=r),i&&(w+=i);var k=P("span",[c],w,l);return o&&(k.title=o),e.content.appendChild(k)}e.content.appendChild(c)}}function tn(e,t){return function(n,r,i,o,s,a,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var h=void 0,d=0;d<t.length&&!((h=t[d]).to>c&&h.from<=c);d++);if(h.to>=u)return e(n,r,i,o,s,a,l);e(n,r.slice(0,h.to-c),i,o,null,a,l),o=null,r=r.slice(h.to-c),c=h.to}}}function nn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function rn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var s,a,l,c,u,h,d,p=i.length,f=0,m=1,g="",v=0;;){if(v==f){l=c=u=h=a="",d=null,v=1/0;for(var b=[],y=void 0,w=0;w<r.length;++w){var k=r[w],E=k.marker;"bookmark"==E.type&&k.from==f&&E.widgetNode?b.push(E):k.from<=f&&(null==k.to||k.to>f||E.collapsed&&k.to==f&&k.from==f)?(null!=k.to&&k.to!=f&&v>k.to&&(v=k.to,c=""),E.className&&(l+=" "+E.className),E.css&&(a=(a?a+";":"")+E.css),E.startStyle&&k.from==f&&(u+=" "+E.startStyle),E.endStyle&&k.to==v&&(y||(y=[])).push(E.endStyle,k.to),E.title&&!h&&(h=E.title),E.collapsed&&(!d||De(d.marker,E)<0)&&(d=k)):k.from>f&&v>k.from&&(v=k.from)}if(y)for(var x=0;x<y.length;x+=2)y[x+1]==v&&(c+=" "+y[x]);if(!d||d.from==f)for(var S=0;S<b.length;++S)nn(t,0,b[S]);if(d&&(d.from||0)==f){if(nn(t,(null==d.to?p+1:d.to)-f,d.marker,null==d.from),null==d.to)return;d.to==f&&(d=!1)}}if(f>=p)break;for(var C=Math.min(p,v);;){if(g){var _=f+g.length;if(!d){var T=_>C?g.slice(0,C-f):g;t.addToken(t,T,s?s+l:l,u,f+T.length==v?c:"",h,a)}if(_>=C){g=g.slice(C-f),f=C;break}f=_,u=""}g=i.slice(o,o=n[m++]),s=Qt(n[m++],t.cm.options)}}else for(var N=1;N<n.length;N+=2)t.addToken(t,i.slice(o,o=n[N]),Qt(n[N+1],t.cm.options))}function on(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=He(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?de(Y(this.rest))-n+1:1,this.node=this.text=null,this.hidden=ze(e,t)}function sn(e,t,n){for(var r,i=[],o=t;o<n;o=r){var s=new on(e.doc,le(e.doc,o),o);r=o+s.size,i.push(s)}return i}var an=null,ln=null;function cn(e,t){var n=nt(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);an?r=an.delayedCallbacks:ln?r=ln:(r=ln=[],setTimeout(un,0));for(var o=function(e){r.push(function(){return n[e].apply(null,i)})},s=0;s<n.length;++s)o(s)}}function un(){var e=ln;ln=null;for(var t=0;t<e.length;++t)e[t]()}function hn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?fn(e,t):"gutter"==o?gn(e,t,n,r):"class"==o?mn(e,t):"widget"==o&&vn(e,t,r)}t.changes=null}function dn(e){return e.node==e.text&&(e.node=P("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function pn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Jt(e,t)}function fn(e,t){var n=t.text.className,r=pn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,mn(e,t)):n&&(t.text.className=n)}function mn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=dn(t);t.background=r.insertBefore(P("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?dn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function gn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=dn(t);t.gutterBackground=P("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=dn(t),a=t.gutter=P("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(P("div",me(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.options.gutters.length;++l){var c=e.options.gutters[l],u=o.hasOwnProperty(c)&&o[c];u&&a.appendChild(P("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function vn(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);yn(e,t,n)}function bn(e,t,n,r){var i=pn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),mn(e,t),gn(e,t,n,r),yn(e,t,r),t.node}function yn(e,t,n){if(wn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)wn(e,t.rest[r],t,n,!1)}function wn(e,t,n,r,i){if(t.widgets)for(var o=dn(n),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=P("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),kn(l,c,n,r),e.display.input.setUneditable(c),i&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),cn(l,"redraw")}}function kn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function En(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!L(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),N(t.display.measure,P("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function xn(e,t){for(var n=pt(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Sn(e){return e.lineSpace.offsetTop}function Cn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function _n(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=N(e.measure,P("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Tn(e){return U-e.display.nativeBarWidth}function Nn(e){return e.display.scroller.clientWidth-Tn(e)-e.display.barWidth}function Pn(e){return e.display.scroller.clientHeight-Tn(e)-e.display.barHeight}function An(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(de(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Ln(e,t,n,r){return In(e,On(e,t),n,r)}function Mn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[cr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function On(e,t){var n=de(t),r=Mn(e,n);r&&!r.text?r=null:r&&r.changes&&(hn(e,r,n,ir(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=de(t=We(t)),r=e.display.externalMeasured=new on(e.doc,t,n);r.lineN=n;var i=r.built=Jt(e,r);return r.text=i.pre,N(e.display.lineMeasure,i.pre),r}(e,t));var i=An(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function In(e,t,n,r,i){t.before&&(n=-1);var o,l=n+(r||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&Nn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Fn(t.map,n,r),l=o.node,c=o.start,u=o.end,h=o.collapse;if(3==l.nodeType){for(var d=0;d<4;d++){for(;c&&ie(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+u<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+u));)++u;if((i=s&&a<9&&0==c&&u==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():jn(C(l,c,u).getClientRects(),r)).left||i.right||0==c)break;u=c,c-=1,h="right"}s&&a<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=St)return St;var t=N(e,P("span","x")),n=t.getBoundingClientRect(),r=C(t,0,1).getBoundingClientRect();return St=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var p;c>0&&(h=r="right"),i=e.options.lineWrapping&&(p=l.getClientRects()).length>1?p["right"==r?p.length-1:0]:l.getBoundingClientRect()}if(s&&a<9&&!c&&(!i||!i.left&&!i.right)){var f=l.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+rr(e.display),top:f.top,bottom:f.bottom}:Dn}for(var m=i.top-t.rect.top,g=i.bottom-t.rect.top,v=(m+g)/2,b=t.view.measure.heights,y=0;y<b.length-1&&!(v<b[y]);y++);var w=y?b[y-1]:0,k=b[y],E={left:("right"==h?i.right:i.left)-t.rect.left,right:("left"==h?i.left:i.right)-t.rect.left,top:w,bottom:k};return i.left||i.right||(E.bogus=!0),e.options.singleCursorHeightPerLine||(E.rtop=m,E.rbottom=g),E}(e,t,n,r)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Rn,Dn={left:0,right:0,top:0,bottom:0};function Fn(e,t,n){for(var r,i,o,s,a,l,c=0;c<e.length;c+=3)if(a=e[c],l=e[c+1],t<a?(i=0,o=1,s="left"):t<l?o=1+(i=t-a):(c==e.length-3||t==l&&e[c+3]>t)&&(i=(o=l-a)-1,t>=l&&(s="right")),null!=i){if(r=e[c+2],a==l&&n==(r.insertLeft?"left":"right")&&(s=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],s="left";if("right"==n&&i==l-a)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],s="right";break}return{node:r,start:i,end:o,collapse:s,coverStart:a,coverEnd:l}}function jn(e,t){var n=Dn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function Hn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function $n(e){e.display.externalMeasure=null,T(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Hn(e.display.view[t])}function Un(e){$n(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Wn(){return u&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Bn(){return u&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Vn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=En(e.widgets[n]));return t}function zn(e,t,n,r,i){if(!i){var o=Vn(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var s=Ge(t);if("local"==r?s+=Sn(e.display):s-=e.display.viewOffset,"page"==r||"window"==r){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==r?0:Bn());var l=a.left+("window"==r?0:Wn());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function qn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Wn(),i-=Bn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:r-s.left,top:i-s.top}}function Gn(e,t,n,r,i){return r||(r=le(e.doc,t.line)),zn(e,r,Ln(e,r,t.ch,i),n)}function Kn(e,t,n,r,i,o){function s(t,s){var a=In(e,i,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,zn(e,r,a,n)}r=r||le(e.doc,t.line),i||(i=On(e,r));var a=Ze(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!a)return s("before"==c?l-1:l,"before"==c);function u(e,t,n){var r=a[t],i=1==r.level;return s(n?e-1:e,i!=n)}var h=Qe(a,l,c),d=Xe,p=u(l,h,"before"==c);return null!=d&&(p.other=u(l,d,"before"!=c)),p}function Yn(e,t){var n=0;t=xe(e.doc,t),e.options.lineWrapping||(n=rr(e.display)*t.ch);var r=le(e.doc,t.line),i=Ge(r)+Sn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Xn(e,t,n,r,i){var o=ge(e,t,n);return o.xRel=i,r&&(o.outside=!0),o}function Qn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Xn(r.first,0,null,!0,-1);var i=pe(r,n),o=r.first+r.size-1;if(i>o)return Xn(r.first+r.size-1,le(r,o).text.length,null,!0,1);t<0&&(t=0);for(var s=le(r,i);;){var a=tr(e,s,i,t,n),l=$e(s,a.ch+(a.xRel>0?1:0));if(!l)return a;var c=l.find(1);if(c.line==i)return c;s=le(r,i=c.line)}}function Jn(e,t,n,r){r-=Vn(t);var i=t.text.length,o=se(function(t){return In(e,n,t-1).bottom<=r},i,0);return i=se(function(t){return In(e,n,t).top>r},o,i),{begin:o,end:i}}function Zn(e,t,n,r){n||(n=On(e,t));var i=zn(e,t,In(e,n,r),"line").top;return Jn(e,t,n,i)}function er(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function tr(e,t,n,r,i){i-=Ge(t);var o=On(e,t),s=Vn(t),a=0,l=t.text.length,c=!0,u=Ze(t,e.doc.direction);if(u){var h=(e.options.lineWrapping?function(e,t,n,r,i,o,s){var a=Jn(e,t,r,s),l=a.begin,c=a.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,h=null,d=0;d<i.length;d++){var p=i[d];if(!(p.from>=c||p.to<=l)){var f=1!=p.level,m=In(e,r,f?Math.min(c,p.to)-1:Math.max(l,p.from)).right,g=m<o?o-m+1e9:m-o;(!u||h>g)&&(u=p,h=g)}}return u||(u=i[i.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}:function(e,t,n,r,i,o,s){var a=se(function(a){var l=i[a],c=1!=l.level;return er(Kn(e,ge(n,c?l.to:l.from,c?"before":"after"),"line",t,r),o,s,!0)},0,i.length-1),l=i[a];if(a>0){var c=1!=l.level,u=Kn(e,ge(n,c?l.from:l.to,c?"after":"before"),"line",t,r);er(u,o,s,!0)&&u.top>s&&(l=i[a-1])}return l})(e,t,n,o,u,r,i);c=1!=h.level,a=c?h.from:h.to-1,l=c?h.to:h.from-1}var d,p,f=null,m=null,g=se(function(t){var n=In(e,o,t);return n.top+=s,n.bottom+=s,!!er(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(f=t,m=n),!0)},a,l),v=!1;if(m){var b=r-m.left<m.right-r,y=b==c;g=f+(y?0:1),p=y?"after":"before",d=b?m.left:m.right}else{c||g!=l&&g!=a||g++,p=0==g?"after":g==t.text.length?"before":In(e,o,g-(c?1:0)).bottom+s<=i==c?"after":"before";var w=Kn(e,ge(n,g,p),"line",t,o);d=w.left,v=i<w.top||i>=w.bottom}return g=oe(t.text,g,1),Xn(n,g,p,v,r-d)}function nr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Rn){Rn=P("pre");for(var t=0;t<49;++t)Rn.appendChild(document.createTextNode("x")),Rn.appendChild(P("br"));Rn.appendChild(document.createTextNode("x"))}N(e.measure,Rn);var n=Rn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),T(e.measure),n||1}function rr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=P("span","xxxxxxxxxx"),n=P("pre",[t]);N(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function ir(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s)n[e.options.gutters[s]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[s]]=o.clientWidth;return{fixedPos:or(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function or(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function sr(e){var t=nr(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/rr(e.display)-3);return function(i){if(ze(e.doc,i))return 0;var o=0;if(i.widgets)for(var s=0;s<i.widgets.length;s++)i.widgets[s].height&&(o+=i.widgets[s].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function ar(e){var t=e.doc,n=sr(e);t.iter(function(e){var t=n(e);t!=e.height&&he(e,t)})}function lr(e,t,n,r){var i=e.display;if(!n&&"true"==pt(t).getAttribute("cm-not-content"))return null;var o,s,a=i.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var l,c=Qn(e,o,s);if(r&&1==c.xRel&&(l=le(e.doc,c.line).text).length==c.ch){var u=j(l,l.length,e.options.tabSize)-l.length;c=ge(c.line,Math.max(0,Math.round((o-_n(e.display).left)/rr(e.display))-u))}return c}function cr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function ur(e){e.display.input.showSelection(e.display.input.prepareSelection())}function hr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&dr(e,a.head,i),l||fr(e,a,o)}}return r}function dr(e,t,n){var r=Kn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(P("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(P("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function pr(e,t){return e.top-t.top||e.left-t.left}function fr(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),s=_n(e.display),a=s.left,l=Math.max(r.sizerWidth,Nn(e)-r.sizer.offsetLeft)-s.right,c="ltr"==i.direction;function u(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),o.appendChild(P("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function h(t,n,r){var o,s,h=le(i,t),d=h.text.length;function p(n,r){return Gn(e,ge(t,n),"div",h,r)}function f(t,n,r){var i=Zn(e,h,null,t),o="ltr"==n==("after"==r)?"left":"right",s="after"==r?i.begin:i.end-(/\s/.test(h.text.charAt(i.end-1))?2:1);return p(s,o)[o]}var m=Ze(h,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(r(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(m,n||0,null==r?d:r,function(e,t,i,h){var g="ltr"==i,v=p(e,g?"left":"right"),b=p(t-1,g?"right":"left"),y=null==n&&0==e,w=null==r&&t==d,k=0==h,E=!m||h==m.length-1;if(b.top-v.top<=3){var x=(c?y:w)&&k,S=(c?w:y)&&E,C=x?a:(g?v:b).left,_=S?l:(g?b:v).right;u(C,v.top,_-C,v.bottom)}else{var T,N,P,A;g?(T=c&&y&&k?a:v.left,N=c?l:f(e,i,"before"),P=c?a:f(t,i,"after"),A=c&&w&&E?l:b.right):(T=c?f(e,i,"before"):a,N=!c&&y&&k?l:v.right,P=!c&&w&&E?a:b.left,A=c?f(t,i,"after"):l),u(T,v.top,N-T,v.bottom),v.bottom<b.top&&u(a,v.bottom,null,b.top),u(P,b.top,A-P,b.bottom)}(!o||pr(v,o)<0)&&(o=v),pr(b,o)<0&&(o=b),(!s||pr(v,s)<0)&&(s=v),pr(b,s)<0&&(s=b)}),{start:o,end:s}}var d=t.from(),p=t.to();if(d.line==p.line)h(d.line,d.ch,p.ch);else{var f=le(i,d.line),m=le(i,p.line),g=We(f)==We(m),v=h(d.line,d.ch,g?f.text.length+1:null).end,b=h(p.line,g?0:null,p.ch).start;g&&(v.top<b.top-2?(u(v.right,v.top,null,v.bottom),u(a,b.top,b.left,b.bottom)):u(v.right,v.top,b.left-v.right,v.bottom)),v.bottom<b.top&&u(a,v.bottom,null,b.top)}n.appendChild(o)}function mr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function gr(e){e.state.focused||(e.display.input.focus(),br(e))}function vr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,yr(e))},100)}function br(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(it(e,"focus",e,t),e.state.focused=!0,O(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),mr(e))}function yr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(it(e,"blur",e,t),e.state.focused=!1,_(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function wr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=void 0;if(!i.hidden){if(s&&a<8){var l=i.node.offsetTop+i.node.offsetHeight;o=l-n,n=l}else{var c=i.node.getBoundingClientRect();o=c.bottom-c.top}var u=i.line.height-o;if(o<2&&(o=nr(t)),(u>.005||u<-.005)&&(he(i.line,o),kr(i.line),i.rest))for(var h=0;h<i.rest.length;h++)kr(i.rest[h])}}}function kr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Er(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Sn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=pe(t,r),s=pe(t,i);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<o?(o=a,s=pe(t,Ge(le(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(o=pe(t,Ge(le(t,l))-e.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function xr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=or(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Sr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=me(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(P("div",[P("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,s=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-s)+1,r.lineNumWidth=r.lineNumInnerWidth+s,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ci(e),!0}return!1}function Cr(e,t){var n=e.display,r=nr(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Pn(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+Cn(n),l=t.top<r,c=t.bottom>a-r;if(t.top<i)s.scrollTop=l?0:t.top;else if(t.bottom>i+o){var u=Math.min(t.top,(c?a:t.bottom)-o);u!=i&&(s.scrollTop=u)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,d=Nn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),p=t.right-t.left>d;return p&&(t.right=t.left+d),t.left<10?s.scrollLeft=0:t.left<h?s.scrollLeft=Math.max(0,t.left-(p?0:10)):t.right>d+h-3&&(s.scrollLeft=t.right+(p?0:10)-d),s}function _r(e,t){null!=t&&(Pr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Tr(e){Pr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Nr(e,t,n){null==t&&null==n||Pr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Pr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=Yn(e,t.from),r=Yn(e,t.to);Ar(e,n,r,t.margin)}}function Ar(e,t,n,r){var i=Cr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Nr(e,i.scrollLeft,i.scrollTop)}function Lr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||li(e,{top:t}),Mr(e,t,!0),n&&li(e),ri(e,100))}function Mr(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Or(e,t,n,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,xr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Ir(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Cn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Tn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Rr=function(e,t,n){this.cm=n;var r=this.vert=P("div",[P("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=P("div",[P("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),tt(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),tt(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Rr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Rr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Rr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Rr.prototype.zeroWidthHack=function(){var e=b&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new H,this.disableVert=new H},Rr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect(),o="vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);o!=e?e.style.pointerEvents="none":t.set(1e3,r)})},Rr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Dr=function(){};function Fr(e,t){t||(t=Ir(e));var n=e.display.barWidth,r=e.display.barHeight;jr(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&wr(e),jr(e,Ir(e)),n=e.display.barWidth,r=e.display.barHeight}function jr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Dr.prototype.update=function(){return{bottom:0,right:0}},Dr.prototype.setScrollLeft=function(){},Dr.prototype.setScrollTop=function(){},Dr.prototype.clear=function(){};var Hr={native:Rr,null:Dr};function $r(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&_(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Hr[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),tt(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Or(e,t):Lr(e,t)},e),e.display.scrollbars.addClass&&O(e.display.wrapper,e.display.scrollbars.addClass)}var Ur=0;function Wr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ur},t=e.curOp,an?an.ops.push(t):t.ownsGroup=an={ops:[t],delayedCallbacks:[]}}function Br(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{an=null,t(n)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Vr(t[n]);for(var r=0;r<t.length;r++)(i=t[r]).updatedDisplay=i.mustUpdate&&si(i.cm,i.update);for(var i,o=0;o<t.length;o++)zr(t[o]);for(var s=0;s<t.length;s++)qr(t[s]);for(var a=0;a<t.length;a++)Gr(t[a])}(e)})}function Vr(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Tn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Tn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Ye(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new oi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function zr(e){var t=e.cm,n=t.display;e.updatedDisplay&&wr(t),e.barMeasure=Ir(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ln(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Tn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Nn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function qr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Or(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==M();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Fr(t,e.barMeasure),e.updatedDisplay&&ui(t,e.barMeasure),e.selectionChanged&&mr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&gr(e.cm)}function Gr(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&ai(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Mr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Or(t,e.scrollLeft,!0,!0),e.scrollToPos){var i=function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(t=t.ch?ge(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t,n="before"==t.sticky?ge(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var s=!1,a=Kn(e,t),l=n&&n!=t?Kn(e,n):a;i={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-r,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+r};var c=Cr(e,i),u=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=c.scrollTop&&(Lr(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(s=!0)),null!=c.scrollLeft&&(Or(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-h)>1&&(s=!0)),!s)break}return i}(t,xe(r,e.scrollToPos.from),xe(r,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!ot(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!f){var o=P("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Sn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Tn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,i)}var o=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(o)for(var a=0;a<o.length;++a)o[a].lines.length||it(o[a],"hide");if(s)for(var l=0;l<s.length;++l)s[l].lines.length&&it(s[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&it(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Kr(e,t){if(e.curOp)return t();Wr(e);try{return t()}finally{Br(e)}}function Yr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Wr(e);try{return t.apply(e,arguments)}finally{Br(e)}}}function Xr(e){return function(){if(this.curOp)return e.apply(this,arguments);Wr(this);try{return e.apply(this,arguments)}finally{Br(this)}}}function Qr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Wr(t);try{return e.apply(this,arguments)}finally{Br(t)}}}function Jr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)_e&&Be(e.doc,t)<i.viewTo&&ei(e);else if(n<=i.viewFrom)_e&&Ve(e.doc,n+r)>i.viewFrom?ei(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)ei(e);else if(t<=i.viewFrom){var o=ti(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):ei(e)}else if(n>=i.viewTo){var s=ti(e,t,t,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):ei(e)}else{var a=ti(e,t,t,-1),l=ti(e,n,n+r,1);a&&l?(i.view=i.view.slice(0,a.index).concat(sn(e,a.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):ei(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function Zr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[cr(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==$(s,n)&&s.push(n)}}}function ei(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ti(e,t,n,r){var i,o=cr(e,t),s=e.display.view;if(!_e||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=e.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=t){if(r>0){if(o==s.length-1)return null;i=a+s[o].size-t,o++}else i=a-t;t+=i,n+=i}for(;Be(e.doc,n)!=n;){if(o==(r<0?0:s.length-1))return null;n+=r*s[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function ni(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ri(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,D(ii,e))}function ii(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=Ht(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(r.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?Lt(t.mode,r.state):null,l=Ft(e,o,r,!0);a&&(r.state=a),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var h=!s||s.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),d=0;!h&&d<s.length;++d)h=s[d]!=o.styles[d];h&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&$t(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Kr(e,function(){for(var t=0;t<i.length;t++)Zr(e,i[t],"text")})}}var oi=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Er(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Nn(e),this.force=n,this.dims=ir(e),this.events=[]};function si(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return ei(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ni(e))return!1;Sr(e)&&(ei(e),t.dims=ir(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),s=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(i,n.viewTo)),_e&&(o=Be(e.doc,o),s=Ve(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=sn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=sn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(cr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(sn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,cr(e,n)))),r.viewTo=n}(e,o,s),n.viewOffset=Ge(le(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=ni(e);if(!a&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=M();if(!t||!L(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&L(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,s=o.firstChild;function a(t){var n=t.nextSibling;return l&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,u=r.viewFrom,h=0;h<c.length;h++){var d=c[h];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;s!=d.node;)s=a(s);var p=i&&null!=t&&t<=u&&d.lineNumber;d.changes&&($(d.changes,"gutter")>-1&&(p=!1),hn(e,d,u,n)),p&&(T(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(me(e.options,u)))),s=d.node.nextSibling}else{var f=bn(e,d,u,n);o.insertBefore(f,s)}u+=d.size}for(;s;)s=a(s)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=M()&&(e.activeElt.focus(),e.anchorNode&&L(document.body,e.anchorNode)&&L(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),T(n.cursorDiv),T(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ri(e,400)),n.updateLineNumbers=null,!0}function ai(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Nn(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Cn(e.display)-Pn(e),n.top)}),t.visible=Er(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&si(e,t);r=!1){wr(e);var i=Ir(e);ur(e),Fr(e,i),ui(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function li(e,t){var n=new oi(e,t);if(si(e,n)){wr(e),ai(e,n);var r=Ir(e);ur(e),Fr(e,r),ui(e,r),n.finish()}}function ci(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function ui(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Tn(e)+"px"}function hi(e){var t=e.display.gutters,n=e.options.gutters;T(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(P("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",ci(e)}function di(e){var t=$(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}oi.prototype.signal=function(e,t){at(e,t)&&this.events.push(arguments)},oi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)it.apply(null,this.events[e])};var pi=0,fi=null;function mi(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function gi(e){var t=mi(e);return t.x*=fi,t.y*=fi,t}function vi(e,t){var r=mi(t),i=r.x,o=r.y,s=e.display,a=s.scroller,c=a.scrollWidth>a.clientWidth,u=a.scrollHeight>a.clientHeight;if(i&&c||o&&u){if(o&&b&&l)e:for(var d=t.target,p=s.view;d!=a;d=d.parentNode)for(var f=0;f<p.length;f++)if(p[f].node==d){e.display.currentWheelTarget=d;break e}if(i&&!n&&!h&&null!=fi)return o&&u&&Lr(e,Math.max(0,a.scrollTop+o*fi)),Or(e,Math.max(0,a.scrollLeft+i*fi)),(!o||o&&u)&&ct(t),void(s.wheelStartX=null);if(o&&null!=fi){var m=o*fi,g=e.doc.scrollTop,v=g+s.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),li(e,{top:g,bottom:v})}pi<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout(function(){if(null!=s.wheelStartX){var e=a.scrollLeft-s.wheelStartX,t=a.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(fi=(fi*pi+n)/(pi+1),++pi)}},200)):(s.wheelDX+=i,s.wheelDY+=o))}}s?fi=-.53:n?fi=15:u?fi=-.7:d&&(fi=-1/3);var bi=function(e,t){this.ranges=e,this.primIndex=t};bi.prototype.primary=function(){return this.ranges[this.primIndex]},bi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!be(n.anchor,r.anchor)||!be(n.head,r.head))return!1}return!0},bi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new yi(ye(this.ranges[t].anchor),ye(this.ranges[t].head));return new bi(e,this.primIndex)},bi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},bi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ve(t,r.from())>=0&&ve(e,r.to())<=0)return n}return-1};var yi=function(e,t){this.anchor=e,this.head=t};function wi(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(e,t){return ve(e.from(),t.from())}),n=$(t,i);for(var o=1;o<t.length;o++){var s=t[o],a=t[o-1],l=ve(a.to(),s.from());if(r&&!s.empty()?l>0:l>=0){var c=ke(a.from(),s.from()),u=we(a.to(),s.to()),h=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,t.splice(--o,2,new yi(h?u:c,h?c:u))}}return new bi(t,n)}function ki(e,t){return new bi([new yi(e,t||e)],0)}function Ei(e){return e.text?ge(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function xi(e,t){if(ve(e,t.from)<0)return e;if(ve(e,t.to)<=0)return Ei(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Ei(t).ch-t.to.ch),ge(n,r)}function Si(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new yi(xi(i.anchor,t),xi(i.head,t)))}return wi(e.cm,n,e.sel.primIndex)}function Ci(e,t,n){return e.line==t.line?ge(n.line,e.ch-t.ch+n.ch):ge(n.line+(e.line-t.line),e.ch)}function _i(e){e.doc.mode=Nt(e.options,e.doc.modeOption),Ti(e)}function Ti(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ri(e,100),e.state.modeGen++,e.curOp&&Jr(e)}function Ni(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Pi(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Me(e),Oe(e,n);var i=r?r(e):1;i!=e.height&&he(e,i)}(e,n,i,r),cn(e,"change",e,t)}function s(e,t){for(var n=[],o=e;o<t;++o)n.push(new Gt(c[o],i(o),r));return n}var a=t.from,l=t.to,c=t.text,u=le(e,a.line),h=le(e,l.line),d=Y(c),p=i(c.length-1),f=l.line-a.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(Ni(e,t)){var m=s(0,c.length-1);o(h,h.text,p),f&&e.remove(a.line,f),m.length&&e.insert(a.line,m)}else if(u==h)if(1==c.length)o(u,u.text.slice(0,a.ch)+d+u.text.slice(l.ch),p);else{var g=s(1,c.length-1);g.push(new Gt(d+u.text.slice(l.ch),p,r)),o(u,u.text.slice(0,a.ch)+c[0],i(0)),e.insert(a.line+1,g)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),i(0)),e.remove(a.line+1,f);else{o(u,u.text.slice(0,a.ch)+c[0],i(0)),o(h,d+h.text.slice(l.ch),p);var v=s(1,c.length-1);f>1&&e.remove(a.line+1,f-1),e.insert(a.line+1,v)}cn(e,"change",e,t)}function Ai(e,t,n){!function e(r,i,o){if(r.linked)for(var s=0;s<r.linked.length;++s){var a=r.linked[s];if(a.doc!=i){var l=o&&a.sharedHist;n&&!l||(t(a.doc,l),e(a.doc,r,l))}}}(e,null,!0)}function Li(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ar(e),_i(e),Mi(e),e.options.lineWrapping||Ye(e),e.options.mode=t.modeOption,Jr(e)}function Mi(e){("rtl"==e.doc.direction?O:_)(e.display.lineDiv,"CodeMirror-rtl")}function Oi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Ii(e,t){var n={from:ye(t.from),to:Ei(t),text:ce(e,t.from,t.to)};return Hi(e,n,t.from.line,t.to.line+1),Ai(e,function(e){return Hi(e,n,t.from.line,t.to.line+1)},!0),n}function Ri(e){for(;e.length;){var t=Y(e);if(!t.ranges)break;e.pop()}}function Di(e,t,n,r){var i=e.history;i.undone.length=0;var o,s,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Ri(e.done),Y(e.done)):e.done.length&&!Y(e.done).ranges?Y(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Y(e.done)):void 0}(i,i.lastOp==r)))s=Y(o.changes),0==ve(t.from,t.to)&&0==ve(t.from,s.to)?s.to=Ei(t):o.changes.push(Ii(e,t));else{var l=Y(i.done);for(l&&l.ranges||ji(e.sel,i.done),o={changes:[Ii(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||it(e,"historyAdded")}function Fi(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,Y(i.done),t))?i.done[i.done.length-1]=t:ji(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Ri(i.undone)}function ji(e,t){var n=Y(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Hi(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function $i(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Ui(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push($i(n[i]));return r}(e,t),r=Ae(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],s=r[i];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(n[i]=s)}return n}function Wi(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?bi.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var l=0;l<s.length;++l){var c=s[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&$(t,Number(u[1]))>-1&&(Y(a)[h]=c[h],delete c[h])}}}return r}function Bi(e,t,n,r){if(r){var i=e.anchor;if(n){var o=ve(t,i)<0;o!=ve(n,i)<0?(i=t,t=n):o!=ve(t,n)<0&&(t=n)}return new yi(i,t)}return new yi(n||t,t)}function Vi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Yi(e,new bi([Bi(e.sel.primary(),t,n,i)],0),r)}function zi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=Bi(e.sel.ranges[o],t[o],null,i);var s=wi(e.cm,r,e.sel.primIndex);Yi(e,s,n)}function qi(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Yi(e,wi(e.cm,i,e.sel.primIndex),r)}function Gi(e,t,n,r){Yi(e,ki(t,n),r)}function Ki(e,t,n){var r=e.history.done,i=Y(r);i&&i.ranges?(r[r.length-1]=t,Xi(e,t,n)):Yi(e,t,n)}function Yi(e,t,n){Xi(e,t,n),Fi(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Xi(e,t,n){(at(e,"beforeSelectionChange")||e.cm&&at(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new yi(xe(e,t[n].anchor),xe(e,t[n].head))},origin:n&&n.origin};return it(e,"beforeSelectionChange",e,r),e.cm&&it(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?wi(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(ve(t.primary().head,e.sel.primary().head)<0?-1:1);Qi(e,Zi(e,t,r,!0)),n&&!1===n.scroll||!e.cm||Tr(e.cm)}function Qi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,st(e.cm)),cn(e,"cursorActivity",e))}function Ji(e){Qi(e,Zi(e,e.sel,null,!1))}function Zi(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=to(e,s.anchor,a&&a.anchor,n,r),c=to(e,s.head,a&&a.head,n,r);(i||l!=s.anchor||c!=s.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new yi(l,c))}return i?wi(e.cm,i,t.primIndex):t}function eo(e,t,n,r,i){var o=le(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(l.inclusiveRight?a.to>=t.ch:a.to>t.ch))){if(i&&(it(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var c=l.find(r<0?1:-1),u=void 0;if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(c=no(e,c,-r,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=ve(c,n))&&(r<0?u<0:u>0))return eo(e,c,t,r,i)}var h=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(h=no(e,h,r,h.line==t.line?o:null)),h?eo(e,h,t,r,i):null}}return t}function to(e,t,n,r,i){var o=r||1,s=eo(e,t,n,o,i)||!i&&eo(e,t,n,o,!0)||eo(e,t,n,-o,i)||!i&&eo(e,t,n,-o,!0);return s||(e.cantEdit=!0,ge(e.first,0))}function no(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?xe(e,ge(t.line-1)):null:n>0&&t.ch==(r||le(e,t.line)).text.length?t.line<e.first+e.size-1?ge(t.line+1,0):null:new ge(t.line,t.ch+n)}function ro(e){e.setSelection(ge(e.firstLine(),0),ge(e.lastLine()),B)}function io(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=xe(e,t)),n&&(r.to=xe(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),it(e,"beforeChange",e,r),e.cm&&it(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function oo(e,t,n){if(e.cm){if(!e.cm.curOp)return Yr(e.cm,oo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(at(e,"beforeChange")||e.cm&&at(e.cm,"beforeChange"))||(t=io(e,t,!0))){var r=Ce&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=$(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var s=r[o],a=s.find(0),l=0;l<i.length;++l){var c=i[l];if(!(ve(c.to,a.from)<0||ve(c.from,a.to)>0)){var u=[l,1],h=ve(c.from,a.from),d=ve(c.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&u.push({from:c.from,to:a.from}),(d>0||!s.inclusiveRight&&!d)&&u.push({from:a.to,to:c.to}),i.splice.apply(i,u),l+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)so(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else so(e,t)}}function so(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ve(t.from,t.to)){var n=Si(e,t);Di(e,t,n,e.cm?e.cm.curOp.id:NaN),co(e,t,n,Ae(e,t));var r=[];Ai(e,function(e,n){n||-1!=$(r,e.history)||(fo(e.history,t),r.push(e.history)),co(e,t,null,Ae(e,t))})}}function ao(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,c=0;c<a.length&&(i=a[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(r)return void a.push(i);break}if(ji(i,l),n&&!i.equals(e.sel))return void Yi(e,i,{clearRedo:!1});s=i}var u=[];ji(s,l),l.push({changes:u,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var h=at(e,"beforeChange")||e.cm&&at(e.cm,"beforeChange"),d=function(n){var r=i.changes[n];if(r.origin=t,h&&!io(e,r,!1))return a.length=0,{};u.push(Ii(e,r));var o=n?Si(e,r):Y(a);co(e,r,o,Ui(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:Ei(r)});var s=[];Ai(e,function(e,t){t||-1!=$(s,e.history)||(fo(e.history,r),s.push(e.history)),co(e,r,null,Ui(e,r))})},p=i.changes.length-1;p>=0;--p){var f=d(p);if(f)return f.v}}}}function lo(e,t){if(0!=t&&(e.first+=t,e.sel=new bi(X(e.sel.ranges,function(e){return new yi(ge(e.anchor.line+t,e.anchor.ch),ge(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Jr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Zr(e.cm,r,"gutter")}}function co(e,t,n,r){if(e.cm&&!e.cm.curOp)return Yr(e.cm,co)(e,t,n,r);if(t.to.line<e.first)lo(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);lo(e,i),t={from:ge(e.first,0),to:ge(t.to.line+i,t.to.ch),text:[Y(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ge(o,le(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ce(e,t.from,t.to),n||(n=Si(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=de(We(le(r,o.line))),r.iter(l,s.line+1,function(e){if(e==i.maxLine)return a=!0,!0})),r.sel.contains(t.from,t.to)>-1&&st(e),Pi(r,t,n,sr(e)),e.options.lineWrapping||(r.iter(l,o.line+t.text.length,function(e){var t=Ke(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=le(e,r).stateAfter;if(i&&(!(i instanceof Rt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,o.line),ri(e,400);var c=t.text.length-(s.line-o.line)-1;t.full?Jr(e):o.line!=s.line||1!=t.text.length||Ni(e.doc,t)?Jr(e,o.line,s.line+1,c):Zr(e,o.line,"text");var u=at(e,"changes"),h=at(e,"change");if(h||u){var d={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};h&&cn(e,"change",e,d),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(d)}e.display.selForContextMenu=null}(e.cm,t,r):Pi(e,t,r),Xi(e,n,B)}}function uo(e,t,n,r,i){var o;r||(r=n),ve(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof t&&(t=e.splitLines(t)),oo(e,{from:n,to:r,text:t,origin:i})}function ho(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function po(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],s=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)ho(o.ranges[a].anchor,t,n,r),ho(o.ranges[a].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=ge(c.from.line+r,c.from.ch),c.to=ge(c.to.line+r,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,i+1),i=0)}}}function fo(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;po(e.done,n,r,i),po(e.undone,n,r,i)}function mo(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=le(e,Ee(e,t)):i=de(t),null==i?null:(r(o,i)&&e.cm&&Zr(e.cm,i,n),o)}function go(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function vo(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}yi.prototype.from=function(){return ke(this.anchor,this.head)},yi.prototype.to=function(){return we(this.anchor,this.head)},yi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},go.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Kt(i),cn(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},vo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),s=r.height;if(r.removeInner(e,o),this.height-=s-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof go))){var a=[];this.collapse(a),this.children=[new go(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var s=i.lines.length%25+25,a=s;a<i.lines.length;){var l=new go(i.lines.slice(a,a+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new vo(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=$(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new vo(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var s=Math.min(t,o-e);if(i.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var bo=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function yo(e,t,n){Ge(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&_r(e,n)}bo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=de(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=En(this);he(n,Math.max(0,n.height-o)),e&&(Kr(e,function(){yo(e,n,-o),Zr(e,r,"widget")}),cn(e,"lineWidgetCleared",e,this,r))}},bo.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=En(this)-t;i&&(ze(this.doc,r)||he(r,r.height+i),n&&Kr(n,function(){n.curOp.forceUpdate=!0,yo(n,r,i),cn(n,"lineWidgetChanged",n,e,de(r))}))},lt(bo);var wo=0,ko=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++wo};function Eo(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=F(r)).shared=!1;var o=[Eo(e,t,n,r,i)],s=o[0],a=r.widgetNode;return Ai(e,function(e){a&&(r.widgetNode=a.cloneNode(!0)),o.push(Eo(e,xe(e,t),xe(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=Y(o)}),new xo(o,s)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Yr(e.cm,Eo)(e,t,n,r,i);var o=new ko(e,i),s=ve(t,n);if(r&&F(r,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Ue(e,t.line,t,n,o)||t.line!=n.line&&Ue(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");_e=!0}o.addToHistory&&Di(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&We(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&he(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Te(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){ze(e,t)&&he(t,0)}),o.clearOnEnter&&tt(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(Ce=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++wo,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)Jr(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=n.line;u++)Zr(c,u,"text");o.atomic&&Ji(c.doc),cn(c,"markerAdded",c,o)}return o}ko.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Wr(e),at(this,"clear")){var n=this.find();n&&cn(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Ne(s.markedSpans,this);e&&!this.collapsed?Zr(e,de(s),"text"):e&&(null!=a.to&&(i=de(s)),null!=a.from&&(r=de(s))),s.markedSpans=Pe(s.markedSpans,a),null==a.from&&this.collapsed&&!ze(this.doc,s)&&e&&he(s,nr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=We(this.lines[l]),u=Ke(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Jr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ji(e.doc)),e&&cn(e,"markerCleared",e,this,r,i),t&&Br(e),this.parent&&this.parent.clear()}},ko.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],s=Ne(o.markedSpans,this);if(null!=s.from&&(n=ge(t?o:de(o),s.from),-1==e))return n;if(null!=s.to&&(r=ge(t?o:de(o),s.to),1==e))return r}return n&&{from:n,to:r}},ko.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Kr(r,function(){var i=t.line,o=de(t.line),s=Mn(r,o);if(s&&(Hn(s),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!ze(n.doc,i)&&null!=n.height){var a=n.height;n.height=null;var l=En(n)-a;l&&he(i,i.height+l)}cn(r,"markerChanged",r,e)})},ko.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=$(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ko.prototype.detachLine=function(e){if(this.lines.splice($(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},lt(ko);var xo=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function So(e){return e.findMarks(ge(e.first,0),e.clipPos(ge(e.lastLine())),function(e){return e.parent})}function Co(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Ai(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==$(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}xo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();cn(this,"clear")}},xo.prototype.find=function(e,t){return this.primary.find(e,t)},lt(xo);var _o=0,To=function(e,t,n,r,i){if(!(this instanceof To))return new To(e,t,n,r,i);null==n&&(n=0),vo.call(this,[new go([new Gt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=ge(n,0);this.sel=ki(o),this.history=new Oi(null),this.id=++_o,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Pi(this,{from:o,to:o,text:e}),Yi(this,ki(o),B)};To.prototype=J(vo.prototype,{constructor:To,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ue(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Qr(function(e){var t=ge(this.first,0),n=this.first+this.size-1;oo(this,{from:t,to:ge(n,le(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Nr(this.cm,0,0),Yi(this,ki(t),B)}),replaceRange:function(e,t,n,r){t=xe(this,t),n=n?xe(this,n):t,uo(this,e,t,n,r)},getRange:function(e,t,n){var r=ce(this,xe(this,e),xe(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(fe(this,e))return le(this,e)},getLineNumber:function(e){return de(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=le(this,e)),We(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return xe(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Qr(function(e,t,n){Gi(this,xe(this,"number"==typeof e?ge(e,t||0):e),null,n)}),setSelection:Qr(function(e,t,n){Gi(this,xe(this,e),xe(this,t||e),n)}),extendSelection:Qr(function(e,t,n){Vi(this,xe(this,e),t&&xe(this,t),n)}),extendSelections:Qr(function(e,t){zi(this,Se(this,e),t)}),extendSelectionsBy:Qr(function(e,t){var n=X(this.sel.ranges,e);zi(this,Se(this,n),t)}),setSelections:Qr(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new yi(xe(this,e[i].anchor),xe(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Yi(this,wi(this.cm,r,t),n)}}),addSelection:Qr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new yi(xe(this,e),xe(this,t||e))),Yi(this,wi(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Qr(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var s=i.ranges[o];r[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&function(e,t,n){for(var r=[],i=ge(e.first,0),o=i,s=0;s<t.length;s++){var a=t[s],l=Ci(a.from,i,o),c=Ci(Ei(a),i,o);if(i=a.to,o=c,"around"==n){var u=e.sel.ranges[s],h=ve(u.head,u.anchor)<0;r[s]=new yi(h?c:l,h?l:c)}else r[s]=new yi(l,l)}return new bi(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)oo(this,r[l]);a?Ki(this,a):this.cm&&Tr(this.cm)}),undo:Qr(function(){ao(this,"undo")}),redo:Qr(function(){ao(this,"redo")}),undoSelection:Qr(function(){ao(this,"undo",!0)}),redoSelection:Qr(function(){ao(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Oi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Wi(this.history.done),undone:Wi(this.history.undone)}},setHistory:function(e){var t=this.history=new Oi(this.history.maxGeneration);t.done=Wi(e.done.slice(0),null,!0),t.undone=Wi(e.undone.slice(0),null,!0)},setGutterMarker:Qr(function(e,t,n){return mo(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&ne(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Qr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&mo(t,n,"gutter",function(){return n.gutterMarkers[e]=null,ne(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!fe(this,e))return null;if(t=e,!(e=le(this,e)))return null}else if(null==(t=de(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Qr(function(e,t,n){return mo(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(S(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:Qr(function(e,t,n){return mo(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(S(n));if(!o)return!1;var s=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&s!=i.length?" ":"")+i.slice(s)||null}return!0})}),addLineWidget:Qr(function(e,t,n){return function(e,t,n,r){var i=new bo(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),mo(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!ze(e,t)){var r=Ge(t)<e.scrollTop;he(t,t.height+En(i)),r&&_r(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&cn(o,"lineWidgetAdded",o,i,"number"==typeof t?t:de(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Eo(this,xe(this,e),xe(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Eo(this,e=xe(this,e),e,n,"bookmark")},findMarksAt:function(e){e=xe(this,e);var t=[],n=le(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=xe(this,e),t=xe(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n}),xe(this,ge(n,t))},indexFromPos:function(e){var t=(e=xe(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new To(ue(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new To(ue(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),s=e.clipPos(i.to);if(ve(o,s)){var a=Eo(e,o,s,r.primary,r.primary.type);r.markers.push(a),a.parent=r}}}(r,So(this)),r},unlinkDoc:function(e){if(e instanceof Ss&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Co(So(this));break}}if(e.history==this.history){var r=[e.id];Ai(e,function(e){return r.push(e.id)},!0),e.history=new Oi(null),e.history.done=Wi(this.history.done,r),e.history.undone=Wi(this.history.undone,r)}},iterLinkedDocs:function(e){Ai(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):kt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Qr(function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Kr(t=this.cm,function(){Mi(t),Jr(t)}))})}),To.prototype.eachLine=To.prototype.iter;var No=0;function Po(e){var t=this;if(Ao(t),!ot(t,e)&&!xn(t.display,e)){ct(e),s&&(No=+new Date);var n=lr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,l=function(e,r){if(!t.options.allowDropFileTypes||-1!=$(t.options.allowDropFileTypes,e.type)){var s=new FileReader;s.onload=Yr(t,function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[r]=e,++a==i){var l={from:n=xe(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};oo(t.doc,l),Ki(t.doc,ki(n,Ei(l)))}}),s.readAsText(e)}},c=0;c<i;++c)l(r[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var u=e.dataTransfer.getData("Text");if(u){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Xi(t.doc,ki(n,n)),h)for(var d=0;d<h.length;++d)uo(t.doc,"",h[d].anchor,h[d].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Ao(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Lo(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}var Mo=!1;function Oo(){var e;Mo||(tt(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Lo(Io)},100))}),tt(window,"blur",function(){return Lo(yr)}),Mo=!0)}function Io(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ro={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Do=0;Do<10;Do++)Ro[Do+48]=Ro[Do+96]=String(Do);for(var Fo=65;Fo<=90;Fo++)Ro[Fo]=String.fromCharCode(Fo);for(var jo=1;jo<=12;jo++)Ro[jo+111]=Ro[jo+63235]="F"+jo;var Ho={};function $o(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Uo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=X(n.split(" "),$o),o=0;o<i.length;o++){var s=void 0,a=void 0;o==i.length-1?(a=i.join(" "),s=r):(a=i.slice(0,o+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var c in t)e[c]=t[c];return e}function Wo(e,t,n,r){var i=(t=qo(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Wo(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var s=Wo(e,t.fallthrough[o],n,r);if(s)return s}}}function Bo(e){var t="string"==typeof e?e:Ro[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Vo(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(E?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(E?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function zo(e,t){if(h&&34==e.keyCode&&e.char)return!1;var n=Ro[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Vo(n,e,t))}function qo(e){return"string"==typeof e?Ho[e]:e}function Go(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&ve(o.from,Y(r).to)<=0;){var s=r.pop();if(ve(s.from,o.from)<0){o.from=s.from;break}}r.push(o)}Kr(e,function(){for(var t=r.length-1;t>=0;t--)uo(e.doc,"",r[t].from,r[t].to,"+delete");Tr(e)})}function Ko(e,t,n){var r=oe(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Yo(e,t,n){var r=Ko(e,t.ch,n);return null==r?null:new ge(t.line,r,n<0?"after":"before")}function Xo(e,t,n,r,i){if(e){var o=Ze(n,t.doc.direction);if(o){var s,a=i<0?Y(o):o[0],l=i<0==(1==a.level),c=l?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var u=On(t,n);s=i<0?n.text.length-1:0;var h=In(t,u,s).top;s=se(function(e){return In(t,u,e).top==h},i<0==(1==a.level)?a.from:a.to-1,s),"before"==c&&(s=Ko(n,s,1))}else s=i<0?a.to:a.from;return new ge(r,s,c)}}return new ge(r,i<0?n.text.length:0,i<0?"before":"after")}Ho.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ho.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ho.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ho.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ho.default=b?Ho.macDefault:Ho.pcDefault;var Qo={selectAll:ro,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),B)},killLine:function(e){return Go(e,function(t){if(t.empty()){var n=le(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ge(t.head.line+1,0)}:{from:t.head,to:ge(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Go(e,function(t){return{from:ge(t.from().line,0),to:xe(e.doc,ge(t.to().line+1,0))}})},delLineLeft:function(e){return Go(e,function(e){return{from:ge(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Go(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return Go(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ge(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ge(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Jo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Zo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=le(e.doc,t),r=function(e){for(var t;t=He(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=de(r)),Xo(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},z)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},z)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Zo(e,t.head):r},z)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),s=j(e.getLine(o.line),o.ch,r);t.push(K(r-s%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Kr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=le(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new ge(i.line,i.ch-1)),i.ch>0)i=new ge(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ge(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var s=le(e.doc,i.line-1).text;s&&(i=new ge(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),ge(i.line-1,s.length-1),i,"+transpose"))}n.push(new yi(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Kr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Tr(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Jo(e,t){var n=le(e.doc,t),r=We(n);return r!=n&&(t=de(r)),Xo(!0,e,r,t,1)}function Zo(e,t){var n=Jo(e,t.line),r=le(e.doc,n.line),i=Ze(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),s=t.line==n.line&&t.ch<=o&&t.ch;return ge(n.line,s?0:o,n.sticky)}return n}function es(e,t,n){if("string"==typeof t&&!(t=Qo[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=W}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var ts=new H;function ns(e,t,n,r){var i=e.state.keySeq;if(i){if(Bo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ts.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),rs(e,i+" "+t,n,r))return!0}return rs(e,t,n,r)}function rs(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Wo(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Wo(t,e.options.extraKeys,n,e)||Wo(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&cn(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(ct(n),mr(e)),!!i}function is(e,t){var n=zo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ns(e,"Shift-"+n,t,function(t){return es(e,t,!0)})||ns(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return es(e,t)}):ns(e,n,t,function(t){return es(e,t)}))}var os=null;function ss(e){var t=this;if(t.curOp.focus=M(),!ot(t,e)){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=is(t,e);h&&(os=r?n:null,!r&&88==n&&!xt&&(b?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(_(t,"CodeMirror-crosshair"),rt(document,"keyup",n),rt(document,"mouseover",n))}O(t,"CodeMirror-crosshair"),tt(document,"keyup",n),tt(document,"mouseover",n)}(t)}}function as(e){16==e.keyCode&&(this.doc.sel.shift=!1),ot(this,e)}function ls(e){var t=this;if(!(xn(t.display,e)||ot(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(h&&n==os)return os=null,void ct(e);if(!h||e.which&&!(e.which<10)||!is(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return ns(e,"'"+n+"'",t,function(t){return es(e,t,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var cs,us,hs=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ds(e){var t=this,n=t.display;if(!(ot(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,xn(n,e))l||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!ms(t,e)){var r=lr(t,e),i=ft(e),o=r?function(e,t){var n=+new Date;return us&&us.compare(n,e,t)?(cs=us=null,"triple"):cs&&cs.compare(n,e,t)?(us=new hs(n,e,t),cs=null,"double"):(cs=new hs(n,e,t),us=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),ns(e,Vo(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,function(t){if("string"==typeof t&&(t=Qo[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=W}finally{e.state.suppressEdits=!1}return r})}(t,i,r,o,e)||(1==i?r?function(e,t,n,r){s?setTimeout(D(gr,e),0):e.curOp.focus=M();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var o=y?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=b?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(b?n.altKey:n.ctrlKey)),i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&vt&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(ve((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(ve(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,o=!1,c=Yr(e,function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,rt(i.wrapper.ownerDocument,"mouseup",c),rt(i.wrapper.ownerDocument,"mousemove",u),rt(i.scroller,"dragstart",h),rt(i.scroller,"drop",c),o||(ct(t),r.addNew||Vi(e.doc,n,null,null,r.extend),l||s&&9==a?setTimeout(function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()},20):i.input.focus())}),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},h=function(){return o=!0};l&&(i.scroller.draggable=!0),e.state.draggingText=c,c.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),tt(i.wrapper.ownerDocument,"mouseup",c),tt(i.wrapper.ownerDocument,"mousemove",u),tt(i.scroller,"dragstart",h),tt(i.scroller,"drop",c),vr(e),setTimeout(function(){return i.input.focus()},20)}(e,r,t,o):function(e,t,n,r){var i=e.display,o=e.doc;ct(t);var s,a,l=o.sel,c=l.ranges;if(r.addNew&&!r.extend?(a=o.sel.contains(n),s=a>-1?c[a]:new yi(n,n)):(s=o.sel.primary(),a=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(s=new yi(n,n)),n=lr(e,t,!0,!0),a=-1;else{var u=ps(e,n,r.unit);s=r.extend?Bi(s,u.anchor,u.head,r.extend):u}r.addNew?-1==a?(a=c.length,Yi(o,wi(e,c.concat([s]),a),{scroll:!1,origin:"*mouse"})):c.length>1&&c[a].empty()&&"char"==r.unit&&!r.extend?(Yi(o,wi(e,c.slice(0,a).concat(c.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):qi(o,a,s,V):(a=0,Yi(o,new bi([s],0),V),l=o.sel);var h=n;function d(t){if(0!=ve(h,t))if(h=t,"rectangle"==r.unit){for(var i=[],c=e.options.tabSize,u=j(le(o,n.line).text,n.ch,c),d=j(le(o,t.line).text,t.ch,c),p=Math.min(u,d),f=Math.max(u,d),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=le(o,m).text,b=q(v,p,c);p==f?i.push(new yi(ge(m,b),ge(m,b))):v.length>b&&i.push(new yi(ge(m,b),ge(m,q(v,f,c))))}i.length||i.push(new yi(n,n)),Yi(o,wi(e,l.ranges.slice(0,a).concat(i),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y,w=s,k=ps(e,t,r.unit),E=w.anchor;ve(k.anchor,E)>0?(y=k.head,E=ke(w.from(),k.anchor)):(y=k.anchor,E=we(w.to(),k.head));var x=l.ranges.slice(0);x[a]=function(e,t){var n=t.anchor,r=t.head,i=le(e.doc,n.line);if(0==ve(n,r)&&n.sticky==r.sticky)return t;var o=Ze(i);if(!o)return t;var s=Qe(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return t;var l,c=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=Qe(o,r.ch,r.sticky),h=u-s||(r.ch-n.ch)*(1==a.level?-1:1);l=u==c-1||u==c?h<0:h>0}var d=o[c+(l?-1:0)],p=l==(1==d.level),f=p?d.from:d.to,m=p?"after":"before";return n.ch==f&&n.sticky==m?t:new yi(new ge(n.line,f,m),r)}(e,new yi(xe(o,E),y)),Yi(o,wi(e,x,a),V)}}var p=i.wrapper.getBoundingClientRect(),f=0;function m(t){e.state.selectingText=!1,f=1/0,ct(t),i.input.focus(),rt(i.wrapper.ownerDocument,"mousemove",g),rt(i.wrapper.ownerDocument,"mouseup",v),o.history.lastSelOrigin=null}var g=Yr(e,function(t){0!==t.buttons&&ft(t)?function t(n){var s=++f,a=lr(e,n,!0,"rectangle"==r.unit);if(a)if(0!=ve(a,h)){e.curOp.focus=M(),d(a);var l=Er(i,o);(a.line>=l.to||a.line<l.from)&&setTimeout(Yr(e,function(){f==s&&t(n)}),150)}else{var c=n.clientY<p.top?-20:n.clientY>p.bottom?20:0;c&&setTimeout(Yr(e,function(){f==s&&(i.scroller.scrollTop+=c,t(n))}),50)}}(t):m(t)}),v=Yr(e,m);e.state.selectingText=v,tt(i.wrapper.ownerDocument,"mousemove",g),tt(i.wrapper.ownerDocument,"mouseup",v)}(e,r,t,o)}(t,r,o,e):pt(e)==n.scroller&&ct(e):2==i?(r&&Vi(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(x?t.display.input.onContextMenu(e):vr(t)))}}function ps(e,t,n){if("char"==n)return new yi(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new yi(ge(t.line,0),xe(e.doc,ge(t.line+1,0)));var r=n(e,t);return new yi(r.from,r.to)}function fs(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ct(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!at(e,n))return ht(t);o-=a.top-s.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i){var u=pe(e.doc,o),h=e.options.gutters[l];return it(e,n,e,u,h,t),ht(t)}}}function ms(e,t){return fs(e,t,"gutterClick",!0)}function gs(e,t){xn(e.display,t)||function(e,t){return!!at(e,"gutterContextMenu")&&fs(e,t,"gutterContextMenu",!1)}(e,t)||ot(e,t,"contextmenu")||x||e.display.input.onContextMenu(t)}function vs(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Un(e)}hs.prototype.compare=function(e,t,n){return this.time+400>e&&0==ve(t,this.pos)&&n==this.button};var bs={toString:function(){return"CodeMirror.Init"}},ys={},ws={};function ks(e){hi(e),Jr(e),xr(e)}function Es(e,t,n){var r=n&&n!=bs;if(!t!=!r){var i=e.display.dragFunctions,o=t?tt:rt;o(e.display.scroller,"dragstart",i.start),o(e.display.scroller,"dragenter",i.enter),o(e.display.scroller,"dragover",i.over),o(e.display.scroller,"dragleave",i.leave),o(e.display.scroller,"drop",i.drop)}}function xs(e){e.options.lineWrapping?(O(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(_(e.display.wrapper,"CodeMirror-wrap"),Ye(e)),ar(e),Jr(e),Un(e),setTimeout(function(){return Fr(e)},100)}function Ss(e,t){var n=this;if(!(this instanceof Ss))return new Ss(e,t);this.options=t=t?F(t):{},F(ys,t,!1),di(t);var r=t.value;"string"==typeof r?r=new To(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new Ss.inputStyles[t.inputStyle](this),o=this.display=new ae(e,r,i);for(var c in o.wrapper.CodeMirror=this,hi(this),vs(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$r(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new H,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),s&&a<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(e){var t=e.display;tt(t.scroller,"mousedown",Yr(e,ds)),tt(t.scroller,"dblclick",s&&a<11?Yr(e,function(t){if(!ot(e,t)){var n=lr(e,t);if(n&&!ms(e,t)&&!xn(e.display,t)){ct(t);var r=e.findWordAt(n);Vi(e.doc,r.anchor,r.head)}}}):function(t){return ot(e,t)||ct(t)}),tt(t.scroller,"contextmenu",function(t){return gs(e,t)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}tt(t.scroller,"touchstart",function(i){if(!ot(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!ms(e,i)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),tt(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),tt(t.scroller,"touchend",function(n){var r=t.activeTouch;if(r&&!xn(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var s,a=e.coordsChar(t.activeTouch,"page");s=!r.prev||o(r,r.prev)?new yi(a,a):!r.prev.prev||o(r,r.prev.prev)?e.findWordAt(a):new yi(ge(a.line,0),xe(e.doc,ge(a.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),ct(n)}i()}),tt(t.scroller,"touchcancel",i),tt(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Lr(e,t.scroller.scrollTop),Or(e,t.scroller.scrollLeft,!0),it(e,"scroll",e))}),tt(t.scroller,"mousewheel",function(t){return vi(e,t)}),tt(t.scroller,"DOMMouseScroll",function(t){return vi(e,t)}),tt(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){ot(e,t)||dt(t)},over:function(t){ot(e,t)||(function(e,t){var n=lr(e,t);if(n){var r=document.createDocumentFragment();dr(e,n,r),e.display.dragCursor||(e.display.dragCursor=P("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),N(e.display.dragCursor,r)}}(e,t),dt(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-No<100))dt(t);else if(!ot(e,t)&&!xn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!d)){var n=P("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}(e,t)},drop:Yr(e,Po),leave:function(t){ot(e,t)||Ao(e)}};var l=t.input.getField();tt(l,"keyup",function(t){return as.call(e,t)}),tt(l,"keydown",Yr(e,ss)),tt(l,"keypress",Yr(e,ls)),tt(l,"focus",function(t){return br(e,t)}),tt(l,"blur",function(t){return yr(e,t)})}(this),Oo(),Wr(this),this.curOp.forceUpdate=!0,Li(this,r),t.autofocus&&!v||this.hasFocus()?setTimeout(D(br,this),20):yr(this),ws)ws.hasOwnProperty(c)&&ws[c](n,t[c],bs);Sr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Cs.length;++u)Cs[u](n);Br(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ss.defaults=ys,Ss.optionHandlers=ws;var Cs=[];function _s(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=Ht(e,t).state:n="prev");var s=e.options.tabSize,a=le(o,t),l=j(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(r||/\S/.test(a.text)){if("smart"==n&&((c=o.mode.indent(i,a.text.slice(u.length),a.text))==W||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?j(le(o,t-1).text,null,s):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var h="",d=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/s);p;--p)d+=s,h+="\t";if(d<c&&(h+=K(c-d)),h!=u)return uo(o,h,ge(t,0),ge(t,u.length),"+input"),a.stateAfter=null,!0;for(var f=0;f<o.sel.ranges.length;f++){var m=o.sel.ranges[f];if(m.head.line==t&&m.head.ch<u.length){var g=ge(t,u.length);qi(o,f,new yi(g,g));break}}}Ss.defineInitHook=function(e){return Cs.push(e)};var Ts=null;function Ns(e){Ts=e}function Ps(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var s,a=e.state.pasteIncoming||"paste"==i,l=kt(t),c=null;if(a&&r.ranges.length>1)if(Ts&&Ts.text.join("\n")==t){if(r.ranges.length%Ts.text.length==0){c=[];for(var u=0;u<Ts.text.length;u++)c.push(o.splitLines(Ts.text[u]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=X(l,function(e){return[e]}));for(var h=r.ranges.length-1;h>=0;h--){var d=r.ranges[h],p=d.from(),f=d.to();d.empty()&&(n&&n>0?p=ge(p.line,p.ch-n):e.state.overwrite&&!a?f=ge(f.line,Math.min(le(o,f.line).text.length,f.ch+Y(l).length)):a&&Ts&&Ts.lineWise&&Ts.text.join("\n")==t&&(p=f=ge(p.line,0))),s=e.curOp.updateInput;var m={from:p,to:f,text:c?c[h%c.length]:l,origin:i||(a?"paste":e.state.cutIncoming?"cut":"+input")};oo(e.doc,m),cn(e,"inputRead",e,m)}t&&!a&&Ls(e,t),Tr(e),e.curOp.updateInput=s,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function As(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Kr(t,function(){return Ps(t,n,0,null,"paste")}),!0}function Ls(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=_s(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(le(e.doc,i.head.line).text.slice(0,i.head.ch))&&(s=_s(e,i.head.line,"smart"));s&&cn(e,"electricInput",e,i.head.line)}}}function Ms(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:ge(i,0),head:ge(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Os(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Is(){var e=P("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=P("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Os(e),t}function Rs(e,t,n,r,i){var o=t,s=n,a=le(e,t.line);function l(r){var o,s;if(null==(o=i?function(e,t,n,r){var i=Ze(t,e.doc.direction);if(!i)return Yo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=Qe(i,n.ch,n.sticky),s=i[o];if("ltr"==e.doc.direction&&s.level%2==0&&(r>0?s.to>n.ch:s.from<n.ch))return Yo(t,n,r);var a,l=function(e,n){return Ko(t,e instanceof ge?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(a=a||On(e,t),Zn(e,t,a,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var h=1==s.level==r<0,d=l(n,h?1:-1);if(null!=d&&(h?d<=s.to&&d<=u.end:d>=s.from&&d>=u.begin)){var p=h?"before":"after";return new ge(n.line,d,p)}}var f=function(e,t,r){for(var o=function(e,t){return t?new ge(n.line,l(e,1),"before"):new ge(n.line,e,"after")};e>=0&&e<i.length;e+=t){var s=i[e],a=t>0==(1!=s.level),c=a?r.begin:l(r.end,-1);if(s.from<=c&&c<s.to)return o(c,a);if(c=a?s.from:l(s.to,-1),r.begin<=c&&c<r.end)return o(c,a)}},m=f(o+r,r,u);if(m)return m;var g=r>0?u.end:l(u.begin,-1);return null==g||r>0&&g==t.text.length||!(m=f(r>0?0:i.length-1,r,c(g)))?null:m}(e.cm,a,t,n):Yo(a,t,n))){if(r||((s=t.line+n)<e.first||s>=e.first+e.size||(t=new ge(s,t.ch,t.sticky),!(a=le(e,s)))))return!1;t=Xo(i,e.cm,a,t.line,n)}else t=o;return!0}if("char"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var c=null,u="group"==r,h=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(n<0)||l(!d);d=!1){var p=a.text.charAt(t.ch)||"\n",f=te(p,h)?"w":u&&"\n"==p?"n":!u||/\s/.test(p)?null:"p";if(!u||d||f||(f="s"),c&&c!=f){n<0&&(n=1,l(),t.sticky="after");break}if(f&&(c=f),n>0&&!l(!d))break}var m=to(e,t,o,s,!0);return be(o,m)&&(m.hitSide=!0),m}function Ds(e,t,n,r){var i,o,s=e.doc,a=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*nr(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(o=Qn(e,a,i)).outside;){if(n<0?i<=0:i>=s.height){o.hitSide=!0;break}i+=5*n}return o}var Fs=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new H,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function js(e,t){var n=Mn(e,t.line);if(!n||n.hidden)return null;var r=le(e.doc,t.line),i=An(n,r,t.line),o=Ze(r,e.doc.direction),s="left";if(o){var a=Qe(o,t.ch);s=a%2?"right":"left"}var l=Fn(i.map,t.ch,s);return l.offset="right"==l.collapse?l.end:l.start,l}function Hs(e,t){return t&&(e.bad=!0),e}function $s(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Hs(e.clipPos(ge(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return Us(o,t,n)}}function Us(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!L(r,t))return Hs(ge(de(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?Y(e.rest):e.line;return Hs(ge(de(o),o.text.length),i)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=r;)a=a.parentNode;var l=e.measure,c=l.maps;function u(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?l.map:c[i],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var u=de(i<0?e.line:e.rest[i]),h=o[s]+r;return(r<0||a!=t)&&(h=o[s+(r?1:0)]),ge(u,h)}}}var h=u(s,a,n);if(h)return Hs(h,i);for(var d=a.nextSibling,p=s?s.nodeValue.length-n:0;d;d=d.nextSibling){if(h=u(d,d.firstChild,0))return Hs(ge(h.line,h.ch-p),i);p+=d.textContent.length}for(var f=a.previousSibling,m=n;f;f=f.previousSibling){if(h=u(f,f.firstChild,-1))return Hs(ge(h.line,h.ch+m),i);m+=f.textContent.length}}Fs.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function o(e){if(!ot(r,e)){if(r.somethingSelected())Ns({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Ms(r);Ns({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,B),r.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var o=Ts.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var s=Is(),a=s.firstChild;r.display.lineSpace.insertBefore(s,r.display.lineSpace.firstChild),a.value=Ts.text.join("\n");var l=document.activeElement;R(a),setTimeout(function(){r.display.lineSpace.removeChild(s),l.focus(),l==i&&n.showPrimarySelection()},50)}}Os(i,r.options.spellcheck),tt(i,"paste",function(e){ot(r,e)||As(e,r)||a<=11&&setTimeout(Yr(r,function(){return t.updateFromDOM()}),20)}),tt(i,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),tt(i,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),tt(i,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),tt(i,"touchstart",function(){return n.forceCompositionEnd()}),tt(i,"input",function(){t.composing||t.readFromDOMSoon()}),tt(i,"copy",o),tt(i,"cut",o)},Fs.prototype.prepareSelection=function(){var e=hr(this.cm,!1);return e.focus=this.cm.state.focused,e},Fs.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Fs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Fs.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=$s(t,e.anchorNode,e.anchorOffset),a=$s(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=ve(ke(s,a),i)||0!=ve(we(s,a),o)){var l=t.display.view,c=i.line>=t.display.viewFrom&&js(t,i)||{node:l[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&js(t,o);if(!u){var h=l[l.length-1].measure,d=h.maps?h.maps[h.maps.length-1]:h.map;u={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(c&&u){var p,f=e.rangeCount&&e.getRangeAt(0);try{p=C(c.node,c.offset,u.offset,u.node)}catch(wt){}p&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),p.collapsed||(e.removeAllRanges(),e.addRange(p))):(e.removeAllRanges(),e.addRange(p)),f&&null==e.anchorNode?e.addRange(f):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Fs.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Fs.prototype.showMultipleSelections=function(e){N(this.cm.display.cursorDiv,e.cursors),N(this.cm.display.selectionDiv,e.selection)},Fs.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Fs.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return L(this.div,t)},Fs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Fs.prototype.blur=function(){this.div.blur()},Fs.prototype.getField=function(){return this.div},Fs.prototype.supportsTouch=function(){return!0},Fs.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Kr(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Fs.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Fs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&u&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=$s(t,e.anchorNode,e.anchorOffset),r=$s(t,e.focusNode,e.focusOffset);n&&r&&Kr(t,function(){Yi(t.doc,ki(n,r),B),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Fs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>r.firstLine()&&(s=ge(s.line-1,le(r.doc,s.line-1).length)),a.ch==le(r.doc,a.line).text.length&&a.line<r.lastLine()&&(a=ge(a.line+1,0)),s.line<i.viewFrom||a.line>i.viewTo-1)return!1;s.line==i.viewFrom||0==(e=cr(r,s.line))?(t=de(i.view[0].line),n=i.view[0].node):(t=de(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,c,u=cr(r,a.line);if(u==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=de(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var h=r.doc.splitLines(function(e,t,n,r,i){var o="",s=!1,a=e.doc.lineSeparator(),l=!1;function c(){s&&(o+=a,l&&(o+=a),s=l=!1)}function u(e){e&&(c(),o+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var o,d=t.getAttribute("cm-marker");if(d){var p=e.findMarks(ge(r,0),ge(i+1,0),(g=+d,function(e){return e.id==g}));return void(p.length&&(o=p[0].find(0))&&u(ce(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&c();for(var m=0;m<t.childNodes.length;m++)h(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),f&&(s=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;h(t),t!=n;)t=t.nextSibling,l=!1;return o}(r,n,c,t,l)),d=ce(r.doc,ge(t,0),ge(l,le(r.doc,l).text.length));h.length>1&&d.length>1;)if(Y(h)==Y(d))h.pop(),d.pop(),l--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),t++}for(var p=0,f=0,m=h[0],g=d[0],v=Math.min(m.length,g.length);p<v&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var b=Y(h),y=Y(d),w=Math.min(b.length-(1==h.length?p:0),y.length-(1==d.length?p:0));f<w&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)++f;if(1==h.length&&1==d.length&&t==s.line)for(;p&&p>s.ch&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)p--,f++;h[h.length-1]=b.slice(0,b.length-f).replace(/^\u200b+/,""),h[0]=h[0].slice(p).replace(/\u200b+$/,"");var k=ge(t,p),E=ge(l,d.length?Y(d).length-f:0);return h.length>1||h[0]||ve(k,E)?(uo(r.doc,h,k,E,"+input"),!0):void 0},Fs.prototype.ensurePolled=function(){this.forceCompositionEnd()},Fs.prototype.reset=function(){this.forceCompositionEnd()},Fs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Fs.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Fs.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Kr(this.cm,function(){return Jr(e.cm)})},Fs.prototype.setUneditable=function(e){e.contentEditable="false"},Fs.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Yr(this.cm,Ps)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Fs.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Fs.prototype.onContextMenu=function(){},Fs.prototype.resetPosition=function(){},Fs.prototype.needsContentAttribute=!0;var Ws=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new H,this.hasSelection=!1,this.composing=null};Ws.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!ot(r,e)){if(r.somethingSelected())Ns({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Ms(r);Ns({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,B):(n.prevInput="",i.value=t.text.join("\n"),R(i))}"cut"==e.type&&(r.state.cutIncoming=!0)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(i.style.width="0px"),tt(i,"input",function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),tt(i,"paste",function(e){ot(r,e)||As(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())}),tt(i,"cut",o),tt(i,"copy",o),tt(e.scroller,"paste",function(t){xn(e,t)||ot(r,t)||(r.state.pasteIncoming=!0,n.focus())}),tt(e.lineSpace,"selectstart",function(t){xn(e,t)||ct(t)}),tt(i,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),tt(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Ws.prototype.createField=function(e){this.wrapper=Is(),this.textarea=this.wrapper.firstChild},Ws.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=hr(e);if(e.options.moveInputWithCursor){var i=Kn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+s.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+s.left-o.left))}return r},Ws.prototype.showSelection=function(e){var t=this.cm,n=t.display;N(n.cursorDiv,e.cursors),N(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ws.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&R(this.textarea),s&&a>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},Ws.prototype.getField=function(){return this.textarea},Ws.prototype.supportsTouch=function(){return!1},Ws.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||M()!=this.textarea))try{this.textarea.focus()}catch(wt){}},Ws.prototype.blur=function(){this.textarea.blur()},Ws.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ws.prototype.receivedFocus=function(){this.slowPoll()},Ws.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ws.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){var r=t.poll();r||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Ws.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Et(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===i||b&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Kr(t,function(){Ps(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ws.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ws.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Ws.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea,o=lr(n,e),c=r.scroller.scrollTop;if(o&&!h){var u=n.options.resetSelectionOnContextMenu;u&&-1==n.doc.sel.contains(o)&&Yr(n,Yi)(n.doc,ki(o),B);var d=i.style.cssText,p=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var f,m=t.wrapper.getBoundingClientRect();if(i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-m.top-5)+"px; left: "+(e.clientX-m.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(f=window.scrollY),r.input.focus(),l&&window.scrollTo(null,f),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=!0,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),s&&a>=9&&v(),x){dt(e);var g=function(){rt(window,"mouseup",g),setTimeout(b,20)};tt(window,"mouseup",g)}else setTimeout(b,50)}function v(){if(null!=i.selectionStart){var e=n.somethingSelected(),o="​"+(e?i.value:"");i.value="⇚",i.value=o,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function b(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=p,i.style.cssText=d,s&&a<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart){(!s||s&&a<9)&&v();var e=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?Yr(n,ro)(n):e++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},Ws.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Ws.prototype.setUneditable=function(){},Ws.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,o){e.defaults[n]=r,i&&(t[n]=o?function(e,t,n){n!=bs&&i(e,t,n)}:i)}e.defineOption=n,e.Init=bs,n("value","",function(e,t){return e.setValue(t)},!0),n("mode",null,function(e,t){e.doc.modeOption=t,_i(e)},!0),n("indentUnit",2,_i,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(e){Ti(e),Un(e),Jr(e)},!0),n("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(ge(r,o))}r++});for(var i=n.length-1;i>=0;i--)uo(e.doc,t,n[i],ge(n[i].line,n[i].ch+t.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=bs&&e.refresh()}),n("specialCharPlaceholder",Zt,function(e){return e.refresh()},!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",function(e){vs(e),ks(e)},!0),n("keyMap","default",function(e,t,n){var r=qo(t),i=n!=bs&&qo(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,xs,!0),n("gutters",[],function(e){di(e.options),ks(e)},!0),n("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?or(e.display)+"px":"0",e.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(e){return Fr(e)},!0),n("scrollbarStyle","native",function(e){$r(e),Fr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),n("lineNumbers",!1,function(e){di(e.options),ks(e)},!0),n("firstLineNumber",1,ks,!0),n("lineNumberFormatter",function(e){return e},ks,!0),n("showCursorWhenSelecting",!1,ur,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(e,t){"nocursor"==t&&(yr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),n("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),n("dragDrop",!0,Es),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,ur,!0),n("singleCursorHeightPerLine",!0,ur,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ti,!0),n("addModeClass",!1,Ti,!0),n("pollInterval",100),n("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),n("historyEventDelay",1250),n("viewportMargin",10,function(e){return e.refresh()},!0),n("maxHighlightLength",1e4,Ti,!0),n("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),n("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),n("autofocus",null),n("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),n("phrases",null)}(Ss),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&Yr(this,t[e])(this,n,i),it(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](qo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Xr(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,Jr(this)}),removeOverlay:Xr(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Jr(this)}}),indentLine:Xr(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),fe(this.doc,e)&&_s(this,e,t,n)}),indentSelection:Xr(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(_s(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Tr(this));else{var o=i.from(),s=i.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)_s(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&qi(this.doc,r,new yi(o,c[r].to()),B)}}}),getTokenAt:function(e,t){return Vt(this,e,t)},getLineTokens:function(e,t){return Vt(this,ge(e),t,!0)},getTokenTypeAt:function(e){e=xe(this.doc,e);var t,n=jt(this,le(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=r+i>>1;if((s?n[2*s-1]:0)>=o)i=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}r=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&r.push(i[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=i[o[t][s]];a&&r.push(a)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(o,this)&&-1==$(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return Ht(this,(e=Ee(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Kn(this,null==e?n.head:"object"==typeof e?xe(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Gn(this,xe(this.doc,e),t||"page")},coordsChar:function(e,t){return Qn(this,(e=qn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=qn(this,{top:e,left:0},t||"page").top,pe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=le(this.doc,e)}else r=e;return zn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ge(r):0)},defaultTextHeight:function(){return nr(this.display)},defaultCharWidth:function(){return rr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,s,a,l=this.display,c=(e=Kn(this,xe(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var h=Math.max(l.wrapper.clientHeight,this.doc.height),d=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>h)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=h&&(c=e.bottom),u+t.offsetWidth>d&&(u=d-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==i?(u=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(o=this,s={left:u,top:c,right:u+t.offsetWidth,bottom:c+t.offsetHeight},null!=(a=Cr(o,s)).scrollTop&&Lr(o,a.scrollTop),null!=a.scrollLeft&&Or(o,a.scrollLeft))},triggerOnKeyDown:Xr(ss),triggerOnKeyPress:Xr(ls),triggerOnKeyUp:as,triggerOnMouseDown:Xr(ds),execCommand:function(e){if(Qo.hasOwnProperty(e))return Qo[e].call(null,this)},triggerElectric:Xr(function(e){Ls(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=xe(this.doc,e),s=0;s<t&&!(o=Rs(this.doc,o,i,n,r)).hitSide;++s);return o},moveH:Xr(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Rs(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},z)}),deleteH:Xr(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Go(this,function(n){var i=Rs(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var s=xe(this.doc,e),a=0;a<t;++a){var l=Kn(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Ds(this,l,i,n)).hitSide)break}return s},moveV:Xr(function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(s){if(o)return e<0?s.from():s.to();var a=Kn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),i.push(a.left);var l=Ds(n,a,e,t);return"page"==t&&s==r.sel.primary()&&_r(n,Gn(n,l,"div").top-a.top),l},z),i.length)for(var s=0;s<r.sel.ranges.length;s++)r.sel.ranges[s].goalColumn=i[s]}),findWordAt:function(e){var t=this.doc,n=le(t,e.line).text,r=e.ch,i=e.ch;if(n){var o=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=n.length||!r?++i:--r;for(var s=n.charAt(r),a=te(s,o)?function(e){return te(e,o)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};r>0&&a(n.charAt(r-1));)--r;for(;i<n.length&&a(n.charAt(i));)++i}return new yi(ge(e.line,r),ge(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?O(this.display.cursorDiv,"CodeMirror-overwrite"):_(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==M()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Xr(function(e,t){Nr(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Tn(this)-this.display.barHeight,width:e.scrollWidth-Tn(this)-this.display.barWidth,clientHeight:Pn(this),clientWidth:Nn(this)}},scrollIntoView:Xr(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ge(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Pr(e),e.curOp.scrollToPos=t}(this,e):Ar(this,e.from,e.to,e.margin)}),setSize:Xr(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&$n(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Zr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,it(this,"refresh",this)}),operation:function(e){return Kr(this,e)},startOperation:function(){return Wr(this)},endOperation:function(){return Br(this)},refresh:Xr(function(){var e=this.display.cachedTextHeight;Jr(this),this.curOp.forceUpdate=!0,Un(this),Nr(this,this.doc.scrollLeft,this.doc.scrollTop),ci(this),(null==e||Math.abs(e-nr(this.display))>.5)&&ar(this),it(this,"refresh",this)}),swapDoc:Xr(function(e){var t=this.doc;return t.cm=null,Li(this,e),Un(this),this.display.input.reset(),Nr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,cn(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},lt(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}(Ss);var Bs="iter insert remove copy getEditor constructor".split(" ");for(var Vs in To.prototype)To.prototype.hasOwnProperty(Vs)&&$(Bs,Vs)<0&&(Ss.prototype[Vs]=function(e){return function(){return e.apply(this.doc,arguments)}}(To.prototype[Vs]));return lt(To),Ss.inputStyles={textarea:Ws,contenteditable:Fs},Ss.defineMode=function(e){Ss.defaults.mode||"null"==e||(Ss.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ct[e]=t}.apply(this,arguments)},Ss.defineMIME=function(e,t){_t[e]=t},Ss.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ss.defineMIME("text/plain","null"),Ss.defineExtension=function(e,t){Ss.prototype[e]=t},Ss.defineDocExtension=function(e,t){To.prototype[e]=t},Ss.fromTextArea=function(e,t){if((t=t?F(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=M();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=a.getValue()}var i;if(e.form&&(tt(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(wt){}}t.finishInit=function(t){t.save=r,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,r(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(rt(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var a=Ss(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return a},function(e){e.off=rt,e.on=tt,e.wheelEventPixels=gi,e.Doc=To,e.splitLines=kt,e.countColumn=j,e.findColumn=q,e.isWordChar=ee,e.Pass=W,e.signal=it,e.Line=Gt,e.changeEnd=Ei,e.scrollbarModel=Hr,e.Pos=ge,e.cmpPos=ve,e.modes=Ct,e.mimeModes=_t,e.resolveMode=Tt,e.getMode=Nt,e.modeExtensions=Pt,e.extendMode=At,e.copyState=Lt,e.startState=Ot,e.innerMode=Mt,e.commands=Qo,e.keyMap=Ho,e.keyName=zo,e.isModifierKey=Bo,e.lookupKey=Wo,e.normalizeKeyMap=Uo,e.StringStream=It,e.SharedTextMarker=xo,e.TextMarker=ko,e.LineWidget=bo,e.e_preventDefault=ct,e.e_stopPropagation=ut,e.e_stop=dt,e.addClass=O,e.contains=L,e.rmClass=_,e.keyNames=Ro}(Ss),Ss.version="5.41.0",Ss}()});const am={indentLess:"Indent less.",indentMore:"Indent more."},lm=sm.keyMap.default==sm.keyMap.macDefault,cm=[["Shift-Enter","Run the current cell."],[lm?"Alt-Tab":"Alt-Shift-Down","Focus the next cell."],[lm?"Alt-Shift-Tab":"Alt-Shift-Up","Focus the previous cell."],[lm?"Cmd-/":"Ctrl-/","Comment or uncomment."],["Alt-Enter","Split the current cell, focusing the cell after."],["Alt-Shift-Enter","Split the current cell, focusing the cell before."],[lm?"Cmd-Alt-Up":"Ctrl-Shift-Up","Move the current cell up."],[lm?"Cmd-Alt-Down":"Ctrl-Shift-Down","Move the current cell down."],["Alt-Backspace","Merge the current cell into the previous cell."],["Ctrl-Alt-D","Merge the current cell into the next cell."],["Ctrl-Shift-P","Pin or unpin the current cell."],["Tab","Indent more, or auto-complete."],["Shift-Tab","Indent automatically."],["Ctrl-Alt-Tab","Insert a Tab character."],["Escape","Blur the current cell."]].concat(Object.entries(sm.keyMap.default).map(([e,t])=>am[t]&&[e,am[t]])).filter(Boolean);function um({onDismiss:e}){return G.createElement("div",{className:"relative"},G.createElement("div",{onClick:e,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(Eu,{className:"w1 h1"})),G.createElement("h4",{className:"mt0 mb3 f3 fw7 black"},"Keyboard Shortcuts"),G.createElement("table",{className:"w-100 f7 fw4 black-70 collapse"},G.createElement("tbody",null,cm.map(([e,t],n)=>G.createElement("tr",{key:n,className:0==n?"":"bt b--black-10"},G.createElement("td",{className:"v-top pv2 pr3 nowrap"},rm(e)),G.createElement("td",{className:"v-top pv2 nowrap"},im(e)),G.createElement("td",{className:"v-top pv2 pl3"},t))))),G.createElement("div",{className:"mt3 f6 lh-copy"},"See the full"," ",G.createElement("a",{className:"no-underline blue hover-dark-blue link",href:"/@observablehq/keyboard-shortcuts",target:"_blank"},"list of keyboard shortcuts"),"."))}function hm(e){if(2===e.length)e.splice(1,0," and ");else if(e.length>2){let t=[];for(let n=0;n<e.length;n++)t.push(e[n]),n<e.length-1&&(n==e.length-2?t.push(", and "):t.push(", "));e=t}return e.map((e,t)=>G.isValidElement(e)?G.cloneElement(e,{key:t}):e)}const dm={asyncGenerator:G.createElement("a",{className:"no-underline black-70 hover-blue",href:"https://github.com/tc39/proposal-async-iteration"},"Async Iterators"),bigInt:G.createElement("a",{className:"no-underline black-70 hover-blue",href:"https://github.com/tc39/proposal-bigint"},"BigInt"),dynamicImport:G.createElement("a",{className:"no-underline black-70 hover-blue",href:"https://github.com/tc39/proposal-dynamic-import"},"Dynamic import")},pm=G.memo(function({cells:e,platformSupport:t}){if(!e)return null;const n=new Set;for(let i of e)for(let e in i.features)n.add(e);let r=t.filter(({name:e,support:t})=>n.has(e)&&!t).map(({name:e})=>dm[e]);return r.length?G.createElement("div",{className:"flex items-start pa3 mt3 f6 fw4 black-70 bg-washed-yellow br2"},G.createElement(Mu,{className:"w1 h1 ma1",style:{strokeWidth:1,flexShrink:"0"}}),G.createElement("div",{className:"mr2 lh-copy"},G.createElement("div",{className:"mb1 b"},"This notebook uses features that aren’t supported by your browser. It may not display correctly."),G.createElement("div",{className:"black-50"},"Feature",1===r.length?"":"s",": ",hm(r)))):null});function fm(e){return 1===e.lineCount()&&""===e.getLine(0)}function mm(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function gm(e){mm(e);const t=e.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible",t.style.direction=e.getOption("direction"),t.className="CodeMirror-placeholder",t.textContent=e.getOption("placeholder"),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function vm(e){fm(e)&&gm(e)}function bm(e){fm(e)?gm(e):mm(e)}sm.defineOption("placeholder","",function(e,t,n){const r=n&&n!=sm.Init;t?(r||(e.on("blur",vm),e.on("change",bm),e.on("swapDoc",bm)),bm(e),e.hasFocus()||vm(e)):r&&(e.off("blur",vm),e.off("change",bm),e.off("swapDoc",bm),mm(e))});const ym=sm.Pos,wm={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function km(e,t,n){let r=e.getLineHandle(t.line),i=t.ch-1,o=n&&n.afterCursor;null==o&&(o=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));let s=!o&&i>=0&&wm[r.text.charAt(i)]||wm[r.text.charAt(++i)];if(!s)return null;let a=">"==s.charAt(1)?1:-1;if(n&&n.strict&&a>0!=(i==t.ch))return null;let l=e.getTokenTypeAt(ym(t.line,i+1)),c=Em(e,ym(t.line,i+(a>0?1:0)),a,l||null,n);return null==c?null:{from:ym(t.line,i),to:c&&c.pos,match:c&&c.ch==s.charAt(0),forward:a>0}}function Em(e,t,n,r,i){let o=i&&i.maxScanLineLength||1e4,s=i&&i.maxScanLines||1e3;const a=[],l=i&&i.bracketRegex?i.bracketRegex:/[(){}[\]]/,c=n>0?Math.min(t.line+s,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-s);let u;for(u=t.line;u!=c;u+=n){let i=e.getLine(u);if(!i)continue;let s=n>0?0:i.length-1,c=n>0?i.length:-1;if(!(i.length>o))for(u==t.line&&(s=t.ch-(n<0?1:0));s!=c;s+=n){const t=i.charAt(s);if(l.test(t)&&(void 0===r||e.getTokenTypeAt(ym(u,s+1))==r)){if(">"==wm[t].charAt(1)==n>0)a.push(t);else{if(!a.length)return{pos:ym(u,s),ch:t};a.pop()}}}}return u-n!=(n>0?e.lastLine():e.firstLine())&&null}function xm(e,t,n){const r=e.state.matchBrackets.maxHighlightLineLength||1e3;let i=[],o=e.listSelections();for(let s=0;s<o.length;s++){let t=o[s].empty()&&km(e,o[s].head,n);if(t&&e.getLine(t.from.line).length<=r){const n=t.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";i.push(e.markText(t.from,ym(t.from.line,t.from.ch+1),{className:n})),t.to&&e.getLine(t.to.line).length<=r&&i.push(e.markText(t.to,ym(t.to.line,t.to.ch+1),{className:n}))}}if(i.length){const n=function(){e.operation(function(){for(let e=0;e<i.length;e++)i[e].clear()})};if(!t)return n;setTimeout(n,800)}}let Sm=null;function Cm(e){e.operation(function(){Sm&&(Sm(),Sm=null),Sm=xm(e,!1,e.state.matchBrackets)})}sm.defineOption("matchBrackets",!1,function(e,t,n){n&&n!=sm.Init&&(e.off("cursorActivity",Cm),Sm&&(Sm(),Sm=null)),t&&(e.state.matchBrackets="object"==typeof t?t:{},e.on("cursorActivity",Cm))}),sm.defineExtension("matchBrackets",function(){xm(this,!0)}),sm.defineExtension("findMatchingBracket",function(e,t){return km(this,e,t)}),sm.defineExtension("scanForBracket",function(e,t,n,r){return Em(this,e,t,n,r)});let _m={pairs:"()[]{}''\"\"``",triples:"",explode:"[]{}"};const Tm=sm.Pos;function Nm(e,t){return"pairs"==t&&"string"==typeof e?e:"object"==typeof e&&null!=e[t]?e[t]:_m[t]}sm.defineOption("autoClosePairs",!1,function(e,t,n){n&&n!=sm.Init&&(e.removeKeyMap(Pm),e.state.closePairs=null),t&&(Am(Nm(t,"pairs")),e.state.closePairs=t,e.addKeyMap(Pm))});const Pm={Backspace:function(e){let t=Mm(e);if(!t||e.getOption("disableInput"))return sm.Pass;let n=Nm(t,"pairs"),r=e.listSelections();for(let i=0;i<r.length;i++){if(!r[i].empty())return sm.Pass;let t=Im(e,r[i].head);if(!t||n.indexOf(t)%2!=0)return sm.Pass}for(let i=r.length-1;i>=0;i--){let t=r[i].head;e.replaceRange("",Tm(t.line,t.ch-1),Tm(t.line,t.ch+1),"+delete")}},Enter:function(e){let t=Mm(e),n=t&&Nm(t,"explode");if(!n||e.getOption("disableInput"))return sm.Pass;let r=e.listSelections();for(let i=0;i<r.length;i++){if(!r[i].empty())return sm.Pass;let t=Im(e,r[i].head);if(!t||n.indexOf(t)%2!=0)return sm.Pass}e.operation(function(){let t=e.lineSeparator()||"\n";e.replaceSelection(t+t,null),e.execCommand("goCharLeft"),r=e.listSelections();for(let n=0;n<r.length;n++){let t=r[n].head.line;e.indentLine(t,null,!0),e.indentLine(t+1,null,!0)}})}};function Am(e){for(let t=0;t<e.length;t++){let n=e.charAt(t),r="'"+n+"'";Pm[r]||(Pm[r]=Lm(n))}}function Lm(e){return function(t){return function(e,t){let n=Mm(e);if(!n||e.getOption("disableInput"))return sm.Pass;let r=Nm(n,"pairs"),i=r.indexOf(t);if(-1==i)return sm.Pass;let o,s=Nm(n,"triples"),a=r.charAt(i+1)==t,l=e.listSelections(),c=i%2==0;for(let d=0;d<l.length;d++){let n,r=l[d],i=r.head,u=e.getRange(i,Tm(i.line,i.ch+1));if(c&&!r.empty())n="surround";else if(!a&&c||u!=t)if(a&&i.ch>1&&s.indexOf(t)>=0&&e.getRange(Tm(i.line,i.ch-2),i)==t+t){if(i.ch>2&&/\bstring/.test(e.getTokenTypeAt(Tm(i.line,i.ch-2))))return sm.Pass;n="addFour"}else if(a){let r=0==i.ch?" ":e.getRange(Tm(i.line,i.ch-1),i);if(sm.isWordChar(u)||r==t||sm.isWordChar(r))return sm.Pass;n="both"}else{if(!c)return sm.Pass;n="both"}else n=a&&Rm(e,i)?"both":s.indexOf(t)>=0&&e.getRange(i,Tm(i.line,i.ch+3))==t+t+t?"skipThree":"skip";if(o){if(o!=n)return sm.Pass}else o=n}let u=i%2?r.charAt(i-1):t,h=i%2?t:r.charAt(i+1);e.operation(function(){if("skip"==o)e.execCommand("goCharRight");else if("skipThree"==o)for(let t=0;t<3;t++)e.execCommand("goCharRight");else if("surround"==o){let t=e.getSelections();for(let e=0;e<t.length;e++)t[e]=u+t[e]+h;e.replaceSelections(t,"around"),t=e.listSelections().slice();for(let e=0;e<t.length;e++)t[e]=Om(t[e]);e.setSelections(t)}else"both"==o?(e.replaceSelection(u+h,null),e.triggerElectric(u+h),e.execCommand("goCharLeft")):"addFour"==o&&(e.replaceSelection(u+u+u+u,"before"),e.execCommand("goCharRight"))})}(t,e)}}function Mm(e){let t=e.state.closePairs;return!t||t.override?t:e.getModeAt(e.getCursor()).closePairs||t}function Om(e){let t=sm.cmpPos(e.anchor,e.head)>0;return{anchor:new Tm(e.anchor.line,e.anchor.ch+(t?-1:1)),head:new Tm(e.head.line,e.head.ch+(t?1:-1))}}function Im(e,t){const n=e.getRange(Tm(t.line,t.ch-1),Tm(t.line,t.ch+1));return 2==n.length?n:null}function Rm(e,t){let n=e.getTokenAt(Tm(t.line,t.ch+1));return/\bstring/.test(n.type)&&n.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}Am(_m.pairs+"`");const Dm=33,Fm=17,jm=17,Hm=new Set(["INPUT","SELECT","TEXTAREA"]),$m=new Set(["DOM.canvas","DOM.context2d","DOM.download","DOM.element","DOM.input","DOM.range","DOM.select","DOM.svg","DOM.text","DOM.uid","DOM","Files.buffer","Files.text","Files.url","Files","Generators.disposable","Generators.filter","Generators.input","Generators.map","Generators.observe","Generators.queue","Generators.range","Generators.valueAt","Generators.worker","Generators","html","md","Mutable","now","Promises.delay","Promises.tick","Promises.when","Promises","require","svg","tex","width","Secret","invalidation","tex.block","require.alias","require.resolve","visibility"]),Um=new Set(["ga","React","ReactDOM","CodeMirror"]),Wm=new Set(Object.getOwnPropertyNames(window).filter(e=>{try{return!/^webkit/i.test(e)&&!Um.has(e)&&null!=window[e]}catch(t){return!1}})),Bm=sm.Pos,Vm="charAt charCodeAt indexOf lastIndexOf substring substr slice\n trim trimLeft trimRight toUpperCase toLowerCase split concat match replace\n search".split(/\s+/),zm="length concat join splice push pop shift unshift slice reverse\n  sort indexOf lastIndexOf every some filter forEach map reduce\n  reduceRight ".split(/\s+/),qm="prototype apply call bind".split(/\s+/),Gm="break case catch class const continue debugger default delete do\n  else extends false finally for function if import in instanceof let new null undefined return super switch\n  this throw true try typeof var void while with yield".split(/\s+/),Km="exec test flags global ignoreCase multiline\n  source sticky unicode".split(/\s+/);let Ym=0;const Xm=new Set(["number","string","property"]),Qm=new Set(["variable-2","regexp"]),Jm=new Set([".","[","]"]);async function Zm(e,t){const n=e.getCursor();let r=e.getTokenAt(n);if(!/\b(?:string|comment)\b/.test(r.type))return r.state=sm.innerMode(e.getMode(),r.state).state,/^[\w$_]*$/.test(r.string)?r.end>n.ch&&(r.end=n.ch,r.string=r.string.slice(0,n.ch-r.start)):r={start:n.ch,end:n.ch,string:"",state:r.state,type:"."==r.string?"property":null},{list:await async function(e,t,n,r){const{cellNames:i,localVars:o}=e.state,s=new Set,a=e.string;function l(e){e.startsWith(a)&&s.add(e)}if(t.length){let o=new Set([]);for(let t=e.state.context;t;t=t.prev)for(let e=t.vars;e;e=e.next)o.add(e.name);let c,u=t.pop();if(u.type&&u.type.startsWith("variable")){if(Wm.has(u.string)&&"window"!==u.string&&(c=window[u.string]),$m.has(u.string)&&!t.length)for(let e of $m)e.startsWith(`${u.string}.${a}`)&&s.add(e.split(".")[1]);if(o.has(u.string))!function(){for(let e=0;e<r.lineCount();e++)for(let t of r.getLineTokens(e))"property"===t.type&&l(t.string)}();else if(i.has(u.string)){const{list:e,nonce:r}=await n({nonce:Ym,name:u.string,path:t.map(e=>"string"===e.type?e.string.substring(1,e.string.length-1):"number"===e.type?+e.string:e.string).reverse(),prefix:a});if(Ym===r)for(let t of e)s.add(t);Ym++}}else"string"==u.type||"string-2"===u.type?c="":"atom"==u.type?c=1:"regexp"==u.type&&(c=/a/);for(;null!=c&&t.length;)c=c[t.pop().string];null!=c&&function(e){"string"==typeof e?Vm.forEach(l):e instanceof RegExp?Km.forEach(l):e instanceof Array?zm.forEach(l):e instanceof Function&&qm.forEach(l);for(let t=e;t;t=Object.getPrototypeOf(t))Object.getOwnPropertyNames(t).forEach(l)}(c)}else if(a){for(let e=o;e;e=e.next)l(e.name);for(let t=e.state.context;t;t=t.prev)for(let e=t.vars;e;e=e.next)l(e.name);for(let e of[i,$m,Wm,Gm])for(let t of e)t.startsWith(a)&&s.add(t)}return s.delete(a),Array.from(s)}(r,function(e,t,n){let r=!1,i=t.getLineTokens(n);const o=[],s=i.findIndex(t=>t.end===e);if(-1===s||"."!==i[s].string)return o;for(let a=s;a>=0;a--){if(/^\s*$/.test(i[a].string));else if(Jm.has(i[a].string)){if("]"===i[a].string&&(r=!0),"["===i[a].string){if(!r)return[];r=!1}}else{if(!Xm.has(i[a].type))return Qm.has(i[a].type)?r?[]:(o.push(i[a]),o):r?[]:o;o.push(i[a])}0==i[a].start&&n&&(a=(i=t.getLineTokens(--n)).length)}return o}(r.start,e,n.line),t,e),from:Bm(n.line,r.start),to:Bm(n.line,r.end)}}const eg="code f7 black-70 pointer nowrap pa1 ma0 hover-bg-light-gray hover-black",tg="bg-blue hover-bg-blue white hover-white";class ng{constructor(e,t){qc(this,"options",{completeSingle:!0,closeCharacters:/[\s()\[\]{};:>,]/}),this.cm=e,this.workerAutocomplete=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=e.getCursor("start"),this.startLen=e.getLine(this.startPos.line).length-e.getSelection().length,e.on("cursorActivity",this.activityFunc=(()=>{this.cursorActivity()}))}close(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&sm.signal(this.data,"close"),this.widget&&this.widget.close(),sm.signal(this.cm,"endCompletion",this.cm))}active(){return this.cm.state.completionActive==this}pick(e,t){const n=e.list[t];n.hint?n.hint(this.cm,e,n):this.cm.replaceRange(rg(n),n.from||e.from,n.to||e.to,"complete"),sm.signal(e,"pick",n),this.close()}cursorActivity(){this.debounce&&(cancelAnimationFrame(this.debounce),this.debounce=0);let e=this.cm.getCursor(),t=this.cm.getLine(e.line);e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(t.charAt(e.ch-1))?this.close():(this.debounce=requestAnimationFrame(()=>{this.update()}),this.widget&&this.widget.disable())}async update(e){if(null==this.tick)return;const t=++this.tick,n=await Zm(this.cm,this.workerAutocomplete);return this.tick==t&&this.finishUpdate(n,e),n}finishUpdate(e,t){this.data&&sm.signal(this.data,"update");const n=this.widget&&this.widget.picked||t&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=e,e&&e.list.length&&(n&&1==e.list.length?this.pick(e,0):(this.widget=new og(this,e),sm.signal(e,"shown")))}}function rg(e){return"string"==typeof e?e:e.text}function ig(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}class og{constructor(e,t){this.completion=e,this.data=t,this.picked=!1;const{cm:n}=e,r=this.hints=document.createElement("ul");r.style.maxHeight="20em",r.className="bg-white br2 pa0 ma0 absolute overflow-y-scroll overflow-x-hidden shadow-2 ba b--black-10 z-999",this.selectedHint=t.selectedHint||0;const{list:i}=t;for(let v=0;v<i.length;++v){let e=r.appendChild(document.createElement("li")),n=i[v],o=eg+(v!=this.selectedHint?"":" "+tg);null!=n.className&&(o=`${n.className} ${o}`),e.className=o,n.render?n.render(e,t,n):e.appendChild(document.createTextNode(n.displayText||rg(n))),e.hintId=v}let o=n.cursorCoords(t.from),s=o.left,a=o.bottom,l=!0;r.style.left=s+"px",r.style.top=a+"px";let c=window.innerWidth,u=window.innerHeight;document.body.appendChild(r);let h=r.getBoundingClientRect(),d=h.bottom-u,p=r.scrollHeight>r.clientHeight+1,f=n.getScrollInfo();if(d>0){let e=h.bottom-h.top;if(o.top-(o.bottom-h.top)-e>0)r.style.top=(a=o.top-e)+"px",l=!1;else if(e>u){r.style.height=u-5+"px",r.style.top=(a=o.bottom-h.top)+"px";const e=n.getCursor();t.from.ch!=e.ch&&(o=n.cursorCoords(e),r.style.left=(s=o.left)+"px",h=r.getBoundingClientRect())}}let m,g=h.right-c;if(g>0&&(h.right-h.left>c&&(r.style.width=c-5+"px",g-=h.right-h.left-c),r.style.left=(s=o.left-g)+"px"),p)for(let v=r.firstChild;v;v=v.nextSibling)v.style.paddingRight=n.display.nativeBarWidth+"px";n.addKeyMap(this.keyMap=function(e,t){const n=()=>t.moveFocus(-1);return{Up:n,"Shift-Tab":n,Down:()=>t.moveFocus(1),Tab:t.pick,PageUp(){t.moveFocus(1-t.menuSize(),!0)},PageDown(){t.moveFocus(t.menuSize()-1,!0)},Home(){t.setFocus(0)},End(){t.setFocus(t.length-1)},Enter:t.pick,Esc:t.close}}(0,{moveFocus:(e,t)=>{this.changeActive(this.selectedHint+e,t)},setFocus:e=>{this.changeActive(e)},menuSize:()=>this.screenAmount(),length:i.length,close:function(){e.close()},pick:()=>{this.pick()},data:t})),n.on("blur",this.onBlur=function(){m=setTimeout(function(){e.close()},100)}),n.on("focus",this.onFocus=function(){clearTimeout(m)}),n.on("scroll",this.onScroll=function(){let t=n.getScrollInfo(),i=n.getWrapperElement().getBoundingClientRect(),o=a+f.top-t.top,c=o-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(l||(c+=r.offsetHeight),c<=i.top||c>=i.bottom)return e.close();r.style.top=o+"px",r.style.left=s+f.left-t.left+"px"}),sm.on(r,"dblclick",e=>{const t=ig(r,e.target||e.srcElement);t&&null!=t.hintId&&(this.changeActive(t.hintId),this.pick())}),sm.on(r,"click",e=>{const t=ig(r,e.target||e.srcElement);t&&null!=t.hintId&&(this.changeActive(t.hintId),this.pick())}),sm.on(r,"mousedown",function(){setTimeout(function(){n.focus()},20)}),sm.signal(t,"select",i[this.selectedHint],r.childNodes[this.selectedHint])}close(){if(this.completion.widget!=this)return;this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);const{cm:e}=this.completion;e.off("blur",this.onBlur),e.off("focus",this.onFocus),e.off("scroll",this.onScroll)}disable(){this.completion.cm.removeKeyMap(this.keyMap),this.keyMap={Enter:()=>{this.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)}pick(){this.completion.pick(this.data,this.selectedHint)}changeActive(e,t){if(e>=this.data.list.length?e=t?this.data.list.length-1:0:e<0&&(e=t?0:this.data.list.length-1),this.selectedHint==e)return;let n=this.hints.childNodes[this.selectedHint];n.className=n.className.replace(" "+tg,""),(n=this.hints.childNodes[this.selectedHint=e]).className+=" "+tg,n.offsetTop<this.hints.scrollTop?this.hints.scrollTop=n.offsetTop-3:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+3),sm.signal(this.data,"select",this.data.list[this.selectedHint],n)}screenAmount(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}}const{Pos:sg}=sm;let ag={cm:null,selections:[]};function lg(e,t){return e.line-t.line||e.ch-t.ch}function cg(e){const t=ag.selections.map(e=>e.text);e.listSelections().length===t.length?e.replaceSelections(t):e.replaceSelection(t.join(e.doc.lineSeparator()))}function ug(e){const t=e.isClean(ag.generation),n={cm:e,generation:null,selections:e.listSelections().map(({anchor:t,head:n})=>{let r=t,i=n;const o=lg(t,n);if(0===o){const t=e.doc.getLine(r.line).length;i=r.ch===t?e.clipPos(sg(r.line+1,0)):sg(r.line,t)}else o>0&&(r=n,i=t);const s=e.getRange(r,i);return e.replaceRange("",r,i,"+delete"),{start:r,text:s}})};ag.cm===e&&t&&ag.selections.length===n.selections.length&&ag.selections.every((e,t)=>0===lg(e.start,n.selections[t].start))?ag.selections.forEach((e,t)=>e.text+=n.selections[t].text):ag=n,ag.generation=e.changeGeneration()}let hg={};const dg=/[^\s\u00a0]/;let pg=sm.Pos;function fg(e){let t=e.search(dg);return-1==t?0:t}function mg(e){e.toggleComment({indent:!0})}function gg(e,t){const n=e.getMode();return!1!==n.useInnerComments&&n.innerMode?e.getModeAt(t):n}function vg({anchor:e,head:t}){return{anchor:this.posFromIndex(e),head:this.posFromIndex(t)}}function bg({anchor:e,head:t}){return{anchor:this.indexFromPos(e),head:this.indexFromPos(t)}}function yg(e){e.preventDefault()}sm.commands.toggleComment=function(e){e.toggleComment()},sm.defineExtension("toggleComment",function(e){e||(e=hg);let t=this,n=1/0,r=this.listSelections(),i=null;for(let o=r.length-1;o>=0;o--){let s=r[o].from(),a=r[o].to();s.line>=n||(a.line>=n&&(a=pg(n,0)),n=s.line,null==i?t.uncomment(s,a,e)?i="un":(t.lineComment(s,a,e),i="line"):"un"==i?t.uncomment(s,a,e):t.lineComment(s,a,e))}}),sm.defineExtension("lineComment",function(e,t,n){n||(n=hg);let r=this,i=gg(r,e),o=r.getLine(e.line);if(null==o||(s=e,a=o,/\bstring\b/.test(r.getTokenTypeAt(pg(s.line,0)))&&!/^[\'\"\`]/.test(a)))return;var s,a;let l=n.lineComment||i.lineComment;if(!l)return void((n.blockCommentStart||i.blockCommentStart)&&(n.fullLines=!0,r.blockComment(e,t,n)));let c=Math.min(0!=t.ch||t.line==e.line?t.line+1:t.line,r.lastLine()+1),u=null==n.padding?" ":n.padding,h=n.commentBlankLines||e.line==t.line;r.operation(function(){let t;if(n.indent){let n=null;for(t=e.line;t<c;++t){let e=r.getLine(t),i=e.slice(0,fg(e));(null==n||n.length>i.length)&&(n=i)}for(t=e.line;t<c;++t){let e=r.getLine(t),i=n.length;(h||dg.test(e))&&(e.slice(0,i)!=n&&(i=fg(e)),r.replaceRange(n+l+u,pg(t,0),pg(t,i)))}}else for(t=e.line;t<c;++t)(h||dg.test(r.getLine(t)))&&r.replaceRange(l+u,pg(t,0))})}),sm.defineExtension("blockComment",function(e,t,n){n||(n=hg);let r=this,i=gg(r,e),o=n.blockCommentStart||i.blockCommentStart,s=n.blockCommentEnd||i.blockCommentEnd;if(!o||!s)return void((n.lineComment||i.lineComment)&&0!=n.fullLines&&r.lineComment(e,t,n));if(/\bcomment\b/.test(r.getTokenTypeAt(pg(e.line,0))))return;let a=Math.min(t.line,r.lastLine());a!=e.line&&0==t.ch&&dg.test(r.getLine(a))&&--a;const l=null==n.padding?" ":n.padding;e.line>a||r.operation(function(){if(0!=n.fullLines){let t=dg.test(r.getLine(a));r.replaceRange(l+s,pg(a)),r.replaceRange(o+l,pg(e.line,0));let c=n.blockCommentLead||i.blockCommentLead;if(null!=c)for(let n=e.line+1;n<=a;++n)(n!=a||t)&&r.replaceRange(c+l,pg(n,0))}else r.replaceRange(s,t),r.replaceRange(o,e)})}),sm.defineExtension("uncomment",function(e,t,n){n||(n=hg);let r=this,i=gg(r,e),o=Math.min(0!=t.ch||t.line==e.line?t.line:t.line-1,r.lastLine()),s=Math.min(e.line,o);const a=n.lineComment||i.lineComment,l=[];let c,u=null==n.padding?" ":n.padding;e:if(a){for(let e=s;e<=o;++e){let t=r.getLine(e),n=t.indexOf(a);if(n>-1&&!/comment/.test(r.getTokenTypeAt(pg(e,n+1)))&&(n=-1),-1==n&&dg.test(t))break e;if(n>-1&&dg.test(t.slice(0,n)))break e;l.push(t)}if(r.operation(function(){for(let e=s;e<=o;++e){let t=l[e-s],n=t.indexOf(a),i=n+a.length;n<0||(t.slice(i,i+u.length)==u&&(i+=u.length),c=!0,r.replaceRange("",pg(e,n),pg(e,i)))}}),c)return!0}let h=n.blockCommentStart||i.blockCommentStart,d=n.blockCommentEnd||i.blockCommentEnd;if(!h||!d)return!1;let p=n.blockCommentLead||i.blockCommentLead,f=r.getLine(s),m=f.indexOf(h);if(-1==m)return!1;let g=o==s?f:r.getLine(o),v=g.indexOf(d,o==s?m+h.length:0);-1==v&&s!=o&&(g=r.getLine(--o),v=g.indexOf(d));let b=pg(s,m+1),y=pg(o,v+1);if(-1==v||!/comment/.test(r.getTokenTypeAt(b))||!/comment/.test(r.getTokenTypeAt(y))||r.getRange(b,y,"\n").indexOf(d)>-1)return!1;let w=f.lastIndexOf(h,e.ch),k=-1==w?-1:f.slice(0,e.ch).indexOf(d,w+h.length);if(-1!=w&&-1!=k&&k+d.length!=e.ch)return!1;k=g.indexOf(d,t.ch);let E=g.slice(t.ch).lastIndexOf(h,k-t.ch);return w=-1==k||-1==E?-1:t.ch+E,(-1==k||-1==w||w==t.ch)&&(r.operation(function(){r.replaceRange("",pg(o,v-(u&&g.slice(v-u.length,v)==u?u.length:0)),pg(o,v+d.length));let e=m+h.length;if(u&&f.slice(e,e+u.length)==u&&(e+=u.length),r.replaceRange("",pg(s,m),pg(s,e)),p)for(let t=s+1;t<=o;++t){let e=r.getLine(t),n=e.indexOf(p);if(-1==n||dg.test(e.slice(0,n)))continue;let i=n+p.length;u&&e.slice(i,i+u.length)==u&&(i+=u.length),r.replaceRange("",pg(t,n),pg(t,i))}}),!0)}),sm.defineDocExtension("getLength",function(){let e=this.lineSeparator().length,t=-e;return this.iter(n=>{t+=n.text.length+e}),t}),sm.defineExtension("getCursorIndex",function(){return this.indexFromPos(this.getCursor())}),sm.defineExtension("setCursorIndex",function(e){return this.setCursor(this.posFromIndex(e))}),sm.defineDocExtension("setSelectionIndexes",function(e,t,n){return this.setSelections(e.map(vg,this),t,n)}),sm.defineDocExtension("listSelectionIndexes",function(){return this.listSelections().map(bg,this)}),sm.defineMode("r-javascript",function(e,t){const n=e.indentUnit,r=t.statementIndent,i=t.wordCharacters||/[\w$\xa1-\uffff]/,o=t.cellNames||new Set;let s;{function a(e){return{type:e,style:"keyword"}}const e=a("keyword a"),t=a("keyword b"),n=a("keyword c"),r=a("operator"),i={type:"atom",style:"atom"};s=new Map([["if",a("if")],["while",e],["with",a("with")],["else",t],["do",t],["try",t],["finally",t],["return",n],["break",n],["continue",n],["new",a("new")],["delete",n],["throw",n],["debugger",n],["var",a("var")],["const",a("var")],["let",a("var")],["function",a("function")],["catch",a("catch")],["for",a("for")],["switch",a("switch")],["case",a("case")],["default",a("default")],["in",r],["typeof",r],["instanceof",r],["true",i],["false",i],["null",i],["undefined",i],["NaN",i],["Infinity",i],["this",a("this")],["class",a("class")],["super",a("atom")],["yield",n],["// export",a("export")],["import",a("import")],["extends",n],["await",n],["viewof",a("viewof")],["mutable",a("mutable")]])}var l,c,u=/[+\-*&%=<>!?|~^@]/;function h(e,t,n){return l=e,c=n,t}function d(e,t){var n,r=e.next();if('"'==r||"'"==r)return t.tokenize=(n=r,function(e,t){for(var r,i=!1;null!=(r=e.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(t.tokenize=d),h("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return h("number","number");if("."==r&&e.match(".."))return h("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return h(r);if("="==r&&e.eat(">"))return h("=>","operator");if("0"==r&&e.match(/^(?:x[\da-f]+|o[0-7]+|b[01]+)n?/i))return h("number","number");if(/\d/.test(r))return e.match(/^\d*(?:n|(?:\.\d*)?(?:[eE][+\-]?\d+)?)?/),h("number","number");if("/"==r)return e.eat("*")?(t.tokenize=p,p(e,t)):e.eat("/")?(e.skipToEnd(),h("comment","comment")):Ae(e,t,1)?(function(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),h("regexp","regexp")):(e.eat("="),h("operator","operator",e.current()));if("`"==r)return t.tokenize=f,f(e,t);if("#"==r)return e.skipToEnd(),h("error","error");if(u.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),h("operator","operator",e.current());if(i.test(r)){e.eatWhile(i);var o=e.current();if("."!=t.lastType){if(s.has(o)){var a=s.get(o);return h(a.type,a.style,o)}if("async"==o&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return h("async","keyword",o)}return"sof"!==t.lastType&&"viewof"!==t.lastType&&"mutable"!==t.lastType||!e.match(/\s*=[^=]/,!1)?h("variable","variable",o):h("namedcell","def",o)}}function p(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=d;break}r="*"==n}return h("comment","comment")}function f(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=d;break}r=!r&&"\\"==n}return h("quasi","string-2",e.current())}var m="([{}])";function g(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){for(var r=0,o=!1,s=n-1;s>=0;--s){var a=e.string.charAt(s),l=m.indexOf(a);if(l>=0&&l<3){if(!r){++s;break}if(0==--r){"("==a&&(o=!0);break}}else if(l>=3&&l<6)++r;else if(i.test(a))o=!0;else{if(/["'\/]/.test(a))return;if(o&&!r){++s;break}}}o&&!r&&(t.fatArrowAt=s)}}var v={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0};function b(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function y(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}var w={state:null,column:null,marked:null,cc:null};function k(){for(var e=arguments.length-1;e>=0;e--)w.cc.push(arguments[e])}function E(){return k.apply(null,arguments),!0}function x(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function S(e){var n=w.state;if(w.marked="def",n.context)if("var"==n.lexical.info&&n.context&&n.context.block){var r=function e(t,n){if(n){if(n.block){var r=e(t,n.prev);return r?r==n.prev?n:new C(r,n.vars,!0):null}return x(t,n.vars)?n:new C(n.prev,new _(t,n.vars),!1)}return null}(e,n.context);if(null!=r)return void(n.context=r)}else if(!x(e,n.localVars))return void(n.localVars=new _(e,n.localVars));t.globalVars&&!x(e,n.globalVars)&&(n.globalVars=new _(e,n.globalVars))}function C(e,t,n){this.prev=e,this.vars=t,this.block=n}function _(e,t){this.name=e,this.next=t}var T=new _("this",new _("arguments",null));function N(){w.state.context=new C(w.state.context,w.state.localVars,!1),w.state.localVars=T}function P(){w.state.context=new C(w.state.context,w.state.localVars,!0),w.state.localVars=null}function A(){w.state.localVars=w.state.context.vars,w.state.context=w.state.context.prev}function L(e,t){var n=function(){var n=w.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new b(r,w.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function M(){var e=w.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function O(e){return function t(n){return n==e?E():";"==e?k():E(t)}}function I(e,t){return"var"==e?E(L("vardef",t),re,O(";"),M):"keyword a"==e?E(L("form"),j,I,M):"keyword b"==e?E(L("form"),I,M):"keyword d"==e?w.stream.match(/^\s*$/,!1)?E():E(L("stat"),$,O(";"),M):"debugger"==e?E(O(";")):"{"==e?E(L("}"),P,ne,M,A):";"==e?E():"if"==e?("else"==w.state.lexical.info&&w.state.cc[w.state.cc.length-1]==M&&w.state.cc.pop()(),E(L("form"),j,I,M,ue)):"function"==e?E(ge):"for"==e?E(L("form"),he,I,M):"class"==e?E(L("form"),ye,M):"variable"==e?E(L("stat"),Y):"switch"==e?E(L("form"),j,O("{"),L("}","switch"),P,ne,M,M,A):"case"==e?E(D,O(":")):"default"==e?E(O(":")):"catch"==e?E(L("form"),N,R,I,M,A):"import"==e?E(L("stat"),Ee,M):"async"==e?E(I):"module"==e?E(L("form"),oe,O("{"),L("}"),ne,M,M):"namedcell"==e?E(L("blockdef",t.length),ie,M):"@"==t?E(D,I):k(L("stat"),D,O(";"),M)}function R(e){if("("==e)return E(ve,O(")"))}function D(e,t){return H(e,t,!1)}function F(e,t){return H(e,t,!0)}function j(e){return"("!=e?k():E(L(")"),D,O(")"),M)}function H(e,t,n){if(w.state.fatArrowAt==w.stream.start){var r=n?q:z;if("("==e)return E(N,L(")"),ee(ve,")"),M,O("=>"),r,A);if("variable"==e)return k(N,oe,O("=>"),r,A)}if("{"===e&&"blockdef"==w.state.lexical.type)return ne(e);var i=n?W:U;return v.hasOwnProperty(e)?E(i):"function"==e?E(ge,i):"class"==e?(w.marked="keyword",E(L("form"),be,M)):"keyword c"==e||"async"==e?E(n?F:D):"("==e?E(L(")"),$,O(")"),M,i):"operator"==e||"spread"==e?E(n?F:D):"["==e?E(L("]"),Pe,M,i):"{"==e?te(Q,"}",null,i):"quasi"==e?k(B,i):"new"==e?E(function(e){return function(t){return"."==t?E(e?K:G):k(e?F:D)}}(n)):"import"==e?E(D):("viewof"==e||"mutable"==e)&&w.cc.length>2?E(D):E()}function $(e){return e.match(/[;\}\)\],]/)?k():k(D)}function U(e,t){return","==e?E(D):W(e,t,!1)}function W(e,t,n){var r=0==n?U:W,i=0==n?D:F;return"=>"==e?E(N,n?q:z,A):"operator"==e?/\+\+|--/.test(t)?E(r):"?"==t?E(D,O(":"),i):E(i):"quasi"==e?k(B,r):";"!=e?"("==e?te(F,")","call",r):"."==e?E(X,r):"["==e?E(L("]"),$,O("]"),M,r):"regexp"==e?(w.state.lastType=w.marked="operator",w.stream.backUp(w.stream.pos-w.stream.start-1),E(i)):void 0:void 0}function B(e,t){return"quasi"!=e?k():"${"!=t.slice(t.length-2)?E(B):E(D,V)}function V(e){if("}"==e)return w.marked="string-2",w.state.tokenize=f,E(B)}function z(e){return g(w.stream,w.state),k("{"==e?I:D)}function q(e){return g(w.stream,w.state),k("{"==e?I:F)}function G(e,t){if("target"==t)return w.marked="keyword",E(U)}function K(e,t){if("target"==t)return w.marked="keyword",E(W)}function Y(e){return":"==e?E(M,I):k(U,O(";"),M)}function X(e){if("variable"==e)return w.marked="property",E()}function Q(e,t){return"async"==e?(w.marked="property",E(Q)):"variable"==e||"keyword"==w.style?(w.marked="property",E("get"==t||"set"==t?J:Z)):"number"==e||"string"==e?(w.marked=w.style+" property",E(Z)):"jsonld-keyword"==e?E(Z):"modifier"==e?E(Q):"["==e?E(D,O("]"),Z):"spread"==e?E(F,Z):":"==e?k(Z):void 0}function J(e){return"variable"!=e?k(Z):(w.marked="property",E(ge))}function Z(e){return":"==e?E(F):"("==e?k(ge):void 0}function ee(e,t,n){function r(i,o){if(n?n.indexOf(i)>-1:","==i){var s=w.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),E(function(n,r){return n==t||r==t?k():k(e)},r)}return i==t||o==t?E():E(O(t))}return function(n,i){return n==t||i==t?E():k(e,r)}}function te(e,t,n){for(var r=3;r<arguments.length;r++)w.cc.push(arguments[r]);return E(L(t,n),ee(e,t),M)}function ne(e){return"}"==e?E():k(I,ne)}function re(){return k(oe,le,ce)}function ie(){return k(function(e,t){if("variable"==e)return S(t),E()},P,function(e,t){if("="==t)return E(D)},A)}function oe(e,t){return"modifier"==e?E(oe):"variable"==e?(S(t),E()):"spread"==e?E(oe):"["==e?te(se,"]"):"{"==e?te(ae,"}"):void 0}function se(){return k(oe,le)}function ae(e,t){return"variable"!=e||w.stream.match(/^\s*:/,!1)?("variable"==e&&(w.marked="property"),"spread"==e?E(oe):"}"==e?k():E(O(":"),oe,le)):(S(t),E(le))}function le(e,t){if("="==t)return E(F)}function ce(e){if(","==e)return E(re)}function ue(e,t){if("keyword b"==e&&"else"==t)return E(L("form","else"),I,M)}function he(e,t){return"await"==t?E(he):"("==e?E(L(")"),de,O(")"),M):void 0}function de(e){return"var"==e?E(re,O(";"),fe):";"==e?E(fe):"variable"==e?E(pe):k(D,O(";"),fe)}function pe(e,t){return"in"==t||"of"==t?(w.marked="keyword",E(D)):E(U,fe)}function fe(e,t){return";"==e?E(me):"in"==t||"of"==t?(w.marked="keyword",E(D)):k(D,O(";"),me)}function me(e){")"!=e&&E(D)}function ge(e,t){return"*"==t?(w.marked="keyword",E(ge)):"variable"==e?(S(t),E(ge)):"("==e?E(N,L(")"),ee(ve,")"),M,I,A):void 0}function ve(e){return"spread"==e||"modifier"==e?E(ve):k(oe,le)}function be(e,t){return"variable"==e?ye(e,t):we(e,t)}function ye(e,t){if("variable"==e)return S(t),E(we)}function we(e,t){return"extends"==t||"implements"==t?E(D,we):"{"==e?E(L("}"),ke,M):void 0}function ke(e,t){return"modifier"==e||"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t)&&w.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(w.marked="keyword",E(ke)):"variable"==e?(w.marked="property",E(ge,ke)):"["==e?E(D,O("]"),ge,ke):"*"==t?(w.marked="keyword",E(ke)):";"==e?E(ke):"}"==e?E():"@"==t?E(D,ke):void 0}function Ee(e){return"string"==e?E():"("==e?k(D):k(xe,_e,Se,Ne)}function xe(e,t){return"{"==e?te(xe,"}"):("variable"==e&&S(t),"*"==t&&(w.marked="keyword"),E("mutable"==t||"viewof"==t?xe:Te))}function Se(e,t){if("with"==e)return w.marked="keyword",E(Ce)}function Ce(e,t){return"{"==e?te(Ce,"}"):("*"==t&&(w.marked="keyword"),E(Te))}function _e(e){if(","==e)return E(xe,_e)}function Te(e,t){if("as"==t)return w.marked="keyword",E(xe)}function Ne(e,t){if("from"==t)return w.marked="keyword",E(D)}function Pe(e){return"]"==e?E():k(ee(F,"]"))}function Ae(e,t,n){return t.tokenize==d&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return A.lex=!0,M.lex=!0,{startState:function(e){var r={tokenize:d,lastType:"sof",cc:[],lexical:new b((e||0)-n,0,"block",!1),context:new C(null,null,!1),indented:e||0};return r.cellNames=t.cellNames,r},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),g(e,t)),t.tokenize!=p&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==l?n:(t.lastType="operator"!=l||"++"!=c&&"--"!=c?l:"incdec",function(e,t,n,r,i){var s=e.cc;for(w.state=e,w.stream=i,w.marked=null,w.cc=s,w.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((s.length?s.pop():I)(n,r)){for(;s.length&&s[s.length-1].lex;)s.pop()();return w.marked?w.marked:"variable"==n&&(y(e,r)||Wm.has(r)||$m.has(r)||o.has(r))?"variable-2":t}}(t,n,l,c,e))},indent:function(e,i){if(e.tokenize==p)return sm.Pass;if(e.tokenize!=d)return 0;var o,s=i&&i.charAt(0),a=e.lexical;if(!/^\s*else\b/.test(i))for(var l=e.cc.length-1;l>=0;--l){var c=e.cc[l];if(c==M)a=a.prev;else if(c!=ue)break}for(;("stat"==a.type||"form"==a.type)&&("}"==s||(o=e.cc[e.cc.length-1])&&(o==U||o==W)&&!/^[,\.=+\-*:?[\(]/.test(i));)a=a.prev;r&&")"==a.type&&"stat"==a.prev.type&&(a=a.prev);var h=a.type,f=s==h;return"vardef"==h||"blockdef"===h?a.indented+("operator"==e.lastType||","==e.lastType?a.info.length+1:0):"form"==h&&"{"==s?a.indented:"form"==h?a.indented+n:"stat"==h?a.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||u.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(e,i)?r||n:0):"switch"!=a.info||f||0==t.doubleIndentSwitch?a.align?a.column+(f?0:1):a.indented+(f?0:n):a.indented+(/^(?:case|default)\b/.test(i)?n:2*n)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:"javascript",expressionAllowed:Ae,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=D&&t!=F||e.cc.pop()}}}),sm.registerHelper("wordChars","javascript",/[\w$]/),sm.defineMIME("application/r-javascript","javascript");const wg=new Map,kg=[],Eg=kg.map,xg=kg.some,Sg=kg.hasOwnProperty,Cg="https://cdn.jsdelivr.net/npm/",_g=/^((?:@[^\/@]+\/)?[^\/@]+)(?:@([^\/]+))?(?:\/(.*))?$/,Tg=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,Ng=/\.[^\/]*$/,Pg=["unpkg","jsdelivr","browser","main"];class Ag extends Error{constructor(e){super(e)}}function Lg(e){const t=_g.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function Mg(e){const t=`${Cg}${e.name}${e.version?`@${e.version}`:""}/package.json`;let n=wg.get(t);return n||wg.set(t,n=fetch(t).then(e=>{if(!e.ok)throw new Ag("unable to load package.json");return e.redirected&&!wg.has(e.url)&&wg.set(e.url,n),e.json()})),n}Ag.prototype.name=Ag.name;const Og=function e(t){const n=new Map;const r=o(null);function i(e){if("string"!=typeof e)return e;let t=n.get(e);return t||n.set(e,t=new Promise((t,n)=>{const r=document.createElement("script");r.onload=(()=>{try{t(kg.pop()(o(e)))}catch(i){n(new Ag("invalid module"))}r.remove()}),r.onerror=(()=>{n(new Ag("unable to load module")),r.remove()}),r.async=!0,r.src=e,window.define=Fg,document.head.appendChild(r)})),t}function o(e){return n=>Promise.resolve(t(n,e)).then(i)}function s(n){return e((e,r)=>e in n&&(e=n[e],r=null,"string"!=typeof e)?e:t(e,r))}function a(e){return arguments.length>1?Promise.all(Eg.call(arguments,r)).then(Ig):r(e)}a.alias=function s(e){return function e(t){const n=new Map;const r=o(null);function i(e){if("string"!=typeof e)return e;let t=n.get(e);return t||n.set(e,t=new Promise((t,n)=>{const r=document.createElement("script");r.onload=(()=>{try{t(kg.pop()(o(e)))}catch(i){n(new Ag("invalid module"))}r.remove()}),r.onerror=(()=>{n(new Ag("unable to load module")),r.remove()}),r.async=!0,r.src=e,window.define=Fg,document.head.appendChild(r)})),t}function o(e){return n=>Promise.resolve(t(n,e)).then(i)}function s(n){return e((e,r)=>e in n&&(e=n[e],r=null,"string"!=typeof e)?e:t(e,r))}function a(e){return arguments.length>1?Promise.all(Eg.call(arguments,r)).then(Ig):r(e)}a.alias=s;a.resolve=t;return a}((n,r)=>n in e&&(n=e[n],r=null,"string"!=typeof n)?n:t(n,r))};a.resolve=t;return a}(async function(e,t){if(e.startsWith(Cg)&&(e=e.substring(Cg.length)),/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,null==t?location:t).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Ag("illegal name");const n=Lg(e);if(!n)return`${Cg}${e}`;if(!n.version&&null!=t&&t.startsWith(Cg)){const e=await Mg(Lg(t.substring(Cg.length)));n.version=e.dependencies&&e.dependencies[n.name]||e.peerDependencies&&e.peerDependencies[n.name]}if(n.path&&!Ng.test(n.path)&&(n.path+=".js"),n.path&&n.version&&Tg.test(n.version))return`${Cg}${n.name}@${n.version}/${n.path}`;const r=await Mg(n);return`${Cg}${r.name}@${r.version}/${n.path||function(e){for(const t of Pg){const n=e[t];if("string"==typeof n)return Ng.test(n)?n:`${n}.js`}}(r)||"index.js"}`});function Ig(e){const t={};for(const n of e)for(const e in n)Sg.call(n,e)&&(null==n[e]?Object.defineProperty(t,e,{get:Rg(n,e)}):t[e]=n[e]);return t}function Rg(e,t){return()=>e[t]}function Dg(e){return e+""=="exports"}function Fg(e,t,n){const r=arguments.length;r<2?(n=e,t=[]):r<3&&(n=t,t="string"==typeof e?[]:e),kg.push(xg.call(t,Dg)?e=>{const r={};return Promise.all(Eg.call(t,t=>Dg(t+="")?r:e(t))).then(e=>(n.apply(null,e),r))}:e=>Promise.all(Eg.call(t,e)).then(e=>"function"==typeof n?n.apply(null,e):n))}Fg.amd={};const jg=function(e){return function(t,n){if(n.update){let r=n.text.join("\n"),i=r.length-(t.indexFromPos(n.to)-t.indexFromPos(n.from));if(i<=0)return!0;(i=t.doc.getLength()+i-e)>0&&(r=r.substr(0,r.length-i),n.update(n.from,n.to,r.split("\n")))}return!0}}(65536),Hg={scroll:!1},$g={insert_node:"bg-washed-green",remove_node:"bg-washed-red"},Ug=`Type, then ${rm("Shift-Enter")} to run.`,Wg=`${rm("Alt-Backspace")} to delete.`;let Bg;class Vg extends G.Component{constructor(...e){super(...e),qc(this,"state",{dirty:!1}),qc(this,"ref",null),qc(this,"editor",null),qc(this,"editorGeneration",void 0),qc(this,"height",void 0),qc(this,"errorLine",null),qc(this,"errorIcons",this.renderErrorIcons()),qc(this,"onRef",e=>{this.ref=e}),qc(this,"onFocus",(e,t)=>{const{id:n,focused:r,onFocus:i}=this.props;r||i(n),t&&!t.relatedTarget||e.scrollIntoView(),e.setOption("placeholder",Ug)}),qc(this,"onBlur",e=>{e.setOption("placeholder",""),window.innerWidth<=640&&this.save()}),qc(this,"onBeforeChange",e=>{fm(e)&&e.setOption("placeholder",Ug)}),qc(this,"onChanges",e=>{const{dirty:t}=this.state,n=this.editorGeneration!==e.changeGeneration();t!==n&&this.setState({dirty:n})}),qc(this,"onUpdate",e=>{const{clientHeight:t}=e.getScrollInfo(),n=Math.max(Dm,t);if(n!==this.height){const{id:e,onHeight:t}=this.props;this.height=n,t(e,n)}}),qc(this,"onRefresh",()=>{this.errorLine&&this.renderError()}),qc(this,"userSave",async()=>{const{cell:{disabled:e}}=this.props;if(!e){if(jf&&jf.getItem("tryPrettier"))try{const e=this.editor.getValue(),n=this.editor.indexFromPos(this.editor.getCursor()),{cursorOffset:r,text:i}=await async function(e,t){try{return Bg||(Bg=await Og("https://static.observablehq.com/format.c605882244d10482397514ccc0218d31afa3db7560093ef9e3f58b0e5c5db476.js")),Bg(e,t)}catch(n){console.error(n)}}(e,n);i!==e&&(this.editor.setValue(i),this.editor.setCursor(this.editor.posFromIndex(r)))}catch(t){}this.save()}}),qc(this,"save",()=>{const{id:e,onInput:t}=this.props;this.editorGeneration=this.editor.changeGeneration(),this.setState({dirty:!1}),t(e,this.editor.getValue(),!0)}),qc(this,"togglePin",()=>{const{id:e,pinned:t,onPinNode:n}=this.props;n(e,!t)})}componentDidMount(){const{focused:e,value:t,cell:{selections:n,error:r},cellNames:i,autoClosePairs:o}=this.props,s=sm.keyMap.default==sm.keyMap.macDefault;this.editor=sm(this.ref,{value:t,mode:{name:"r-javascript",cellNames:i},theme:"observable",autofocus:e,placeholder:e?Ug:"",lineNumbers:!1,lineWrapping:!0,indentUnit:2,tabSize:2,indentWithTabs:!1,autoClosePairs:o,viewportMargin:1/0,matchBrackets:!0,extraKeys:{[s?"Alt-Tab":"Shift-Alt-Down"]:()=>this.moveFocus(1),[s?"Shift-Alt-Tab":"Shift-Alt-Up"]:()=>this.moveFocus(-1),[s?"Cmd-/":"Ctrl-/"]:mg,[s?"Cmd-Alt-Up":"Shift-Ctrl-Up"]:()=>this.move(-1),[s?"Cmd-Alt-Down":"Shift-Ctrl-Down"]:()=>this.move(1),"Shift-Enter":this.userSave,"Ctrl-K":ug,"Ctrl-Y":cg,Backspace:e=>{if(!fm(e))return sm.Pass;e.setOption("placeholder",Wg)},"Alt-Enter":()=>this.split(!1),"Shift-Alt-Enter":()=>this.split(!0),"Alt-Backspace":()=>this.merge(!0),"Ctrl-Alt-D":()=>this.merge(!1),"Shift-Ctrl-P":()=>this.togglePin(),"Ctrl-Alt-Tab":e=>e.execCommand("insertTab"),Esc:e=>{if(this.editor.doc.listSelectionIndexes().length>1)return sm.Pass;e.getInputField().blur(),this.props.onBlur()},Tab:e=>{if(function(e,t){const n=e.getTokenAt(e.getCursor());if(1!==e.listSelections().length||e.somethingSelected()||/\b(?:string|comment)\b/.test(n.type)||!/^[\w$_]+$/.test(n.string)&&"."!==n.string)return sm.Pass;{e.state.completionActive&&e.state.completionActive.close();const n=e.state.completionActive=new ng(e,t);sm.signal(e,"startCompletion",e),n.update(!0).then(t=>{t&&t.list.length||e.replaceSelection(" ")})}}(e,this.props.workerAutocomplete)===sm.Pass){if(e.somethingSelected()){if(this.editor.getSelections("\n").every(e=>e.indexOf("\n")>-1))return void e.execCommand("indentMore")}e.execCommand("insertSoftTab")}},"Alt-B":!1,"Alt-F":!1,"Alt-D":!1,"Cmd-D":!1,"Cmd-U":!1,"Cmd-Y":!1,"Shift-Cmd-U":!1,Up:e=>{if(e.somethingSelected()||0!==e.getCursorIndex())return sm.Pass;this.moveFocus(-1)},Down:e=>{if(e.somethingSelected()||e.getCursorIndex()!==this.editor.doc.getLength())return sm.Pass;this.moveFocus(1)}}}),this.editor.setSize(null,"auto"),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("update",this.onUpdate),this.editor.on("beforeChange",jg),this.editor.on("beforeChange",this.onBeforeChange),this.editor.on("changes",this.onChanges),this.editor.on("refresh",this.onRefresh),n&&n.length&&this.editor.doc.setSelectionIndexes(n,null,Hg),r&&this.renderError(),this.editorGeneration=this.editor.changeGeneration(),this.onUpdate(this.editor)}componentWillReceiveProps({focused:e,value:t,cellNames:n,cell:{selections:r,disabled:i}}){const o=this.editor.getValue();if(i!==this.editor.isReadOnly()&&(this.editor.setOption("theme",i?"disabled":"observable"),this.editor.setOption("readOnly",!!i&&"nocursor")),e!==this.props.focused)if(e)this.editor.focus();else{if(/^\s*$/.test(o))return this.props.onRemoveNode(this.props.id);this.editor.getInputField().blur()}if(t===o)this.setState({dirty:!1});else if(t===this.props.value)e||this.save();else{const e=this.editor.doc.listSelections();this.editor.setValue(t),this.editor.doc.setSelections(e,null,Hg),this.editorGeneration=this.editor.changeGeneration(),this.setState({dirty:!1})}(function(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0})(this.props.cellNames,n)||this.editor.setOption("mode",{name:"r-javascript",cellNames:n}),r!==this.props.cell.selections&&this.editor.doc.setSelectionIndexes(r,null,Hg)}componentDidUpdate(e,t){e.cell.error===this.props.cell.error&&t.dirty===this.state.dirty||this.renderError()}componentWillUnmount(){const{id:e,value:t,onHeight:n,onInput:r,onRemoveNode:i,onSelect:o}=this.props;this.editor.off("focus",this.onFocus),this.editor.off("blur",this.onBlur),this.editor.off("update",this.onUpdate),this.editor.off("beforeChange",jg),this.editor.off("beforeChange",this.onBeforeChange),this.editor.off("changes",this.onChanges),this.editor.off("refresh",this.onRefresh);const s=this.editor.getValue();if(t!==s){if(/^\s*$/.test(s))return i(e);r(e,s,!1)}o(e,this.editor.doc.listSelectionIndexes()),n(e,0)}moveFocus(e){const{id:t,onMoveFocus:n}=this.props;n(t,e)}move(e){const{id:t,onMoveNode:n}=this.props;n(t,e)}merge(e){const{id:t,onMergeNode:n}=this.props;if(this.editor.getCursorIndex()!==(e?0:this.editor.doc.getLength()))return sm.Pass;n(t,this.editor.getValue(),e)}split(e){const{id:t,pinned:n,onInsertBefore:r,onInsertAfter:i}=this.props,o=this.editor.getCursorIndex(),s=this.editor.getValue(),a=s.substring(0,o),l=s.substring(o);a.length<l.length?(this.editor.setValue(l),this.save(),r(t,a,e,a&&n)):(this.editor.setValue(a),this.save(),i(t,l,!e,l&&n))}renderError(){const e=this.props.cell.error;if(this.errorLine&&(this.errorIcons.caret.remove(),this.errorIcons.margin.remove(),this.errorLine=null),e&&!this.state.dirty){const t=e.line-1;if(this.errorLine=this.editor.getLineHandle(t),!this.errorLine)return;this.editor.addWidget({line:t,ch:e.column},this.errorIcons.caret),this.editor.addWidget({line:t,ch:0},this.errorIcons.margin)}}renderErrorIcons(){const e=document.createElement("div");Wa.render(G.createElement(Gu,{className:"db relative w1 h1 dark-red pen z-1",style:{marginTop:-8,marginLeft:-2}}),e);const t=document.createElement("div");return Wa.render(G.createElement(Ku,{className:"db relative dark-red",style:{marginTop:-21,marginLeft:-4}}),t),{margin:t,caret:e}}render(){const{cell:{disabled:e,source:t},hovered:n,focused:r,type:i}=this.props,{dirty:o}=this.state,s=("insert_node"!==i&&"remove_node"!==i||"base"!==t)&&$g[i]||"bg-near-white";return G.createElement("div",{ref:this.onRef,className:`relative pea ${s}`},!e&&(n||r)&&G.createElement("a",{onMouseDown:yg,onClick:this.userSave,title:`Click to save. ${om("Shift-Enter")}`,className:`absolute top-0 right-0 pa2 z-2 pointer ${o?"blue hover-dark-blue":"black-30 hover-black"}`,style:{userSelect:"none"}},G.createElement(qu,{strong:o})))}}qc(Vg,"defaultProps",{id:void 0,value:void 0,pinned:void 0,focused:!1,cellNames:new Set,cell:void 0,onFocus:void 0,onHeight:void 0,onInput:void 0,onInsertBefore:void 0,onInsertAfter:void 0,onMergeNode:void 0,onMoveFocus:void 0,onMoveNode:void 0,onPinNode:void 0,onRemoveNode:void 0,onSelect:void 0,autoClosePairs:!1,type:"normal"});class zg extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{menu:!1,removing:!1}),qc(this,"scrollLoop",null),qc(this,"scrollTime",null),qc(this,"scrollDirection",-1),qc(this,"toggleMenu",e=>{e.stopPropagation(),this.setState(({menu:e})=>({menu:!e,removing:!1}))}),qc(this,"buttonRef",e=>{e&&e.addEventListener("touchstart",this.touchStart,{passive:!1})}),qc(this,"closeMenu",e=>{e.stopPropagation(),this.setState({menu:!1,removing:!1})}),qc(this,"onClick",()=>{const{node:{id:e},onClick:t}=this.props;t(e,!1)}),qc(this,"removeConfirm",e=>{this.setState({removing:!0}),e.stopPropagation()}),qc(this,"remove",e=>{const{node:{id:t},onRemove:n}=this.props;n(t),this.closeMenu(e)}),qc(this,"comment",e=>{const{onCommentOpen:t,commentNodeId:n}=this.props;t(n),this.closeMenu(e)}),qc(this,"insertNode",e=>{const{nextId:t,onInsert:n}=this.props;e.stopPropagation(),n(t)}),qc(this,"mouseDown",e=>{e.view.addEventListener("mousemove",this.windowMouseMove),e.view.addEventListener("mouseup",this.windowMouseUp);const{onNodeDragStart:t,node:{id:n}}=this.props;t(n)}),qc(this,"autoscroll",()=>{this.scrollTime&&window.scrollBy(0,(Date.now()-this.scrollTime)*this.scrollDirection),this.scrollTime=Date.now(),this.scrollLoop=window.requestAnimationFrame(this.autoscroll)}),qc(this,"windowMouseMove",e=>{const{onNodeDrag:t}=this.props;t(e.pageY),this.maybeScroll(e.clientY)}),qc(this,"maybeScroll",e=>{if(e<50)this.scrollDirection=-1;else{if(!(e>window.innerHeight-50))return this.stopScrolling();this.scrollDirection=1}this.scrollLoop||(this.scrollTime=null,this.scrollLoop=window.requestAnimationFrame(this.autoscroll))}),qc(this,"windowMouseUp",e=>{e.view.removeEventListener("mousemove",this.windowMouseMove),e.view.removeEventListener("mouseup",this.windowMouseUp);const{onNodeDrop:t}=this.props;t(e.pageY),this.stopScrolling()}),qc(this,"stopScrolling",()=>{window.cancelAnimationFrame(this.scrollLoop),this.scrollTime=null,this.scrollLoop=null}),qc(this,"gutterClick",e=>{this.onClick(e),this.closeMenu(e)}),qc(this,"touchStart",e=>{const{onNodeDragStart:t,node:{id:n}}=this.props,{touches:[{pageY:r}]}=e;e.stopPropagation(),e.preventDefault(),t(n),this.tapCancelled=!1,this.initialTouchY=r}),qc(this,"touchMove",e=>{const{onNodeDrag:t}=this.props;e.stopPropagation();const{touches:[{pageY:n,clientY:r}]}=e;t(n),this.maybeScroll(r),Math.abs(n-this.initialTouchY)>10&&(this.tapCancelled=!0)}),qc(this,"touchEnd",e=>{const{onNodeDrop:t}=this.props,{changedTouches:[{pageY:n}]}=e;t(n),this.stopScrolling(),this.tapCancelled||this.setState(({menu:e})=>({menu:!e}))}),qc(this,"onPinClick",e=>{const{node:{id:t},onClick:n}=this.props;n(t,!0),e.stopPropagation()}),qc(this,"onPermalinkClick",e=>{this.closeMenu(e)})}render(){const{menu:e,removing:t}=this.state,{focused:n,hovered:r,open:i,node:{pinned:o},commentable:s,cell:{name:a,workerHeight:l,disabled:c,empty:u},type:h,mobile:d}=this.props,p=!c&&!u;return G.createElement("div",{title:e||u?"":`Click to ${i&&!o&&p?`close. ${om("Escape")}`:"edit."}`,className:`absolute pointer pea tr top-0 br hide-child\n          ${n?"bg-near-white black b--black":`bg-white ${e?"":"hover-bg-near-white hover-black"}  black-30 ${"safe"===h||i||o||r?"b--black-30":"b--white"}`}`,onMouseDown:"safe"===h&&!o&&p?null:yg,onClick:this.gutterClick,style:{height:"100%",padding:"6px 0.25rem",left:"-50vw",width:"50vw"}},G.createElement("div",{className:"dib absolute right-0"},(r||n||e||d)&&G.createElement("button",{onClick:this.toggleMenu,onMouseDown:this.mouseDown,onTouchMove:this.touchMove,onTouchCancel:this.touchEnd,onTouchEnd:this.touchEnd,ref:this.buttonRef,type:"button",title:"Click for options.\nDrag to move.",style:{padding:"9px 6px 10px",marginTop:-6,cursor:"grab"},className:`inline-flex hover-black black-30 ${e?"bg-light-gray":"hover-bg-light-gray bg-transparent"} bn `},G.createElement(Zu,null)),e&&G.createElement(gh,{onClickOutside:this.closeMenu},G.createElement("nav",{className:"db absolute lh-solid tl z-4",style:{width:"auto",left:"1.75rem",top:0},"aria-label":"submenu","aria-hidden":""+!i},G.createElement("div",{className:"absolute",style:{clip:"rect(0 18px 14px -4px)",left:-14,top:8,transform:"rotate(-90deg)"}},G.createElement("div",{className:"bg-white",style:{width:10,height:10,boxShadow:"0 2px 3px 0 rgba(0,0,0,.2)",transform:"rotate(45deg) translate(8px, 6px)"}})),G.createElement("div",{className:"bg-white br2 overflow-hidden shadow-4"},G.createElement("div",{className:"pv1 sans-serif"},a?G.createElement("a",{href:`#${a}`,onClick:this.onPermalinkClick,className:"flex mw5 items-center pa2 pt1 code f7 truncate no-underline black-50 hover-blue bb b--black-10 pointer"},a):null,i||o?!o&&p?G.createElement("a",{onClick:this.gutterClick,className:"flex items-center pa2 f6 black-70 hover-blue hover-bg-near-white pointer"},G.createElement(Eu,{className:"w1 h1 mr1"}),"Close"):null:G.createElement("a",{onClick:this.gutterClick,className:"flex items-center pa2 f6 black-70 hover-blue hover-bg-near-white pointer"},G.createElement(ku,{className:"w1 h1 mr1"}),"Edit"),s&&"scratchpad"!==h?G.createElement("a",{onClick:this.comment,className:"flex items-center pa2 f6 black-70 hover-blue hover-bg-near-white pointer"},G.createElement(_u,{className:"w1 h1 mr1"}),"Comment"):null,t?G.createElement(G.Fragment,null,G.createElement("div",{className:"ph2 pt2 f7 black-50 nowrap"},"Are you sure?"),G.createElement("div",{className:"pv2"},G.createElement("a",{onClick:this.remove,className:"flex items-center pa2 f6 black-70 hover-red bg-washed-red pointer"},G.createElement(Du,{className:"w1 h1 mr1"}),"Delete"))):G.createElement("a",{onClick:this.removeConfirm,className:"flex items-center pa2 f6 black-70 hover-red hover-bg-near-white pointer"},G.createElement(Du,{className:"w1 h1 mr1"}),"Delete…")))))),"safe"!==h&&p&&n&&G.createElement("div",{className:"absolute right-0 mv1",style:{top:l}},G.createElement("a",{className:`dib br-pill v-top ${o?"blue":"hover-black black-30"}`,title:`Click to ${o?"unpin":"pin"}. ${om("Ctrl-Shift-P")}`,style:{width:20,height:20,padding:2},onMouseDown:yg,onClick:this.onPinClick},G.createElement(Yu,{className:"v-top"}))))}}function qg({onPutBack:e}){return G.createElement(nh,null,G.createElement("div",{className:"flex"},G.createElement("div",null,G.createElement(Du,{className:"dib w1 h1 mt1 mr2"})),G.createElement("div",null,G.createElement("h3",{className:"mt1 fw7 black-70"},"This notebook is in the trash."),G.createElement("p",{className:"lh-copy"},"Notebooks can’t be edited from the trash. To edit this notebook, first put it back from the trash."),G.createElement("div",{className:"mt3 tr"},G.createElement(Yp,{highlight:!0,onClick:e},G.createElement(wu,{className:"w1 h1 mr1"}),"Put back from trash")))))}qc(zg,"defaultProps",{focused:void 0,onClick:void 0,onCommentOpen:void 0,onRemove:void 0});const Gg="bg-white black br2",Kg="hover-blue black-30";function Yg({id:e,source:t,diff:n,edited:r,onChangeSource:i,notebook:o,baseNotebook:s}){const a=Lh(s,o),l=n=>{(r||t!==n)&&i(e,n)};return G.createElement("div",{style:{height:Dm,paddingTop:3,paddingBottom:3,paddingRight:3},className:"flex relative justify-between pl3 sans-serif bg-light-gray pea"},G.createElement("div",{className:"inline-flex items-center f7 fw7 black-50"},function(e,t,n){return e?"You edited":"modify_node"===n.type?t?"Changed":`Changed in ${n.modified_by}`:t?n.target?"Added":"Removed":"insert_node"===n.type?`Added in ${n.target?"target":"base"}`:`Removed in ${n.target?"base":"target"}`}(r,a,n)),G.createElement("div",{className:"flex items-stretch f7 fw6 br1 overflow-hidden pointer",style:{padding:3}},G.createElement("div",{className:`ph2 inline-flex items-center ${"base"!==t||r?Kg:Gg}`,title:`Select changes from ${a?"before":"base"}`,onClick:()=>l("base")},a?"Before":"Base"),"modify_node"===n.type&&G.createElement("div",{className:`ph2 inline-flex items-center ${"diff"===t?Gg:Kg}`,onClick:()=>l("diff")},"Diff"),G.createElement("div",{className:`ph2 inline-flex items-center ${"target"!==t||r?Kg:Gg}`,title:`Select changes from ${a?"after":"target"}`,onClick:()=>l("target")},a?"After":"Target")))}class Xg extends G.PureComponent{constructor(...e){super(...e),qc(this,"diff",null),qc(this,"ref",null),qc(this,"onRef",e=>{this.ref=e})}componentDidMount(){const e=Math.max(Dm,this.ref.clientHeight),{id:t,onHeight:n}=this.props;n(t,e)}componentWillUnmount(){const{id:e,onHeight:t}=this.props;t(e,0)}render(){const{diff:{lineDiff:e}}=this.props;return G.createElement("div",{ref:this.onRef,className:"relative cm-s-observable cm-s-diff pea CodeMirror-wrap"},G.createElement("pre",{className:"ma0",style:{paddingTop:6,paddingBottom:6}},e.map((e,t)=>G.createElement("div",{key:t,className:`relative ${e.added?"bg-washed-green":e.removed?"bg-washed-red":""}`,style:{paddingLeft:14,paddingRight:14}},G.createElement("div",{className:"absolute code f7 prevent-selection black-50",style:{left:3,marginTop:1}},e.added?"+":e.removed?"-":""),e.wordDiff?G.createElement(G.Fragment,null,e.wordDiff.map((t,n)=>G.createElement("span",{key:n,className:`${e.added&&t.added?"bg-light-green":""} ${e.removed&&t.removed?"bg-light-red":""}`},t.value))):e.value))))}}function Qg({id:e,onMerge:t,onInsert:n,merge:r,hovered:i,visible:o}){return G.createElement("a",{className:`absolute pointer ${i?"black bg-near-white":o?"black-30":"transparent"} hover-black hover-bg-near-white br1 pea z-2`,title:`Click to insert. ${om("Alt-Enter")}${t?`\nShift-click to merge. ${om("Alt-Backspace")}`:""}`,style:{top:-20,left:-12,width:24,height:24,padding:4},onClick:r=>{(r.shiftKey&&t?t:n)(e)}},r&&t?G.createElement("svg",{viewBox:"0.5 -0.5 16 17",width:"16",height:"17",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("path",{d:"M5.5 11.5 L8 9.5 L10.5 11.5 M8 16.5 L8 9.5"}),G.createElement("path",{d:"M5.5 11 L8 9 L10.5 11 M8 15.5 L8 9",transform:"rotate(180, 8, 8)translate(0, 0.5)"})):G.createElement("svg",{viewBox:"0 0 15 15",width:"15",height:"15",stroke:"currentColor",style:{strokeWidth:"1",strokeLinecap:"round"}},G.createElement("line",{x1:"7.5",x2:"7.5",y1:"2.5",y2:"12.5"}),G.createElement("line",{y1:"7.5",y2:"7.5",x1:"2.5",x2:"12.5"})))}function Jg({notebook:{fork_of:e,forks:t,id:n,owner:r,slug:i},userLogin:o}){const s=e&&e.owner;if(!e&&!t)return null;const a=e?G.createElement(G.Fragment,null,"Fork of"," ",G.createElement(Wc,{key:1,className:"no-underline black-70 hover-blue",to:Qh(e)},Jh(e)),r.id!==s.id?G.createElement(G.Fragment,null," by ",G.createElement(Wc,{key:2,className:"no-underline black-70 hover-blue",to:`/@${s.login}`},G.createElement(uh,{user:s,s:16,style:{verticalAlign:"text-bottom"},className:"w1 h1 mr1 br-100"}),s.name||s.login)):null):null,l=t?G.createElement(G.Fragment,null,e?" · ":"",G.createElement(Wc,{key:1,className:"no-underline black-70 hover-blue",to:i?`/@${o}/${i}/forks`:`/d/${n}/forks`},bh(t)," ",t>1?"forks":"fork")):null;return G.createElement("div",{className:"inline-flex f6 fw4"},G.createElement(Wu,{className:"mr1 black-30",style:{strokeWidth:1}}),G.createElement("div",{className:"black-50"},a,l))}function Zg({participants:e}){return G.createElement(rh.Consumer,null,t=>G.createElement("div",{className:"flex flex-column items-center mt2 show-children"},G.createElement("div",{className:"flex flex-row-reverse items-center"},[t].concat(e).map((e,t)=>G.createElement("div",{key:e.id,className:`relative flex hover-z-bump hide-child ${0===t?"":"nr2"}`},G.createElement(Wc,{to:`/@${e.login}`},G.createElement(uh,{user:e,s:24,style:{flexShrink:0},className:"ba b--white br-100 bw1"})),G.createElement("div",{className:"absolute top-2 w4 f6 nowrap tc truncate child",style:{left:"-3rem"}},e.name?e.name:`@${e.login}`)))),G.createElement("span",{className:"nowrap black-70 show-child",style:{height:0}},e.length+1," editing")))}function ev({children:e,actions:t,exitTo:n}){return G.createElement("div",{className:"flex justify-between items-center ph3 pa2 mb3 f6 fw4 lh-copy black-70 bg-washed-yellow br2",style:{marginLeft:21}},G.createElement("div",{className:"pv1 mr2"},e),G.createElement("div",{className:"flex mt2 mt0-ns"},t,n&&G.createElement(Wc,{className:"ph3 pa1 nt1 nb1 no-underline black-50 hover-blue bg-white hover-bg-white ba b--black-10 br2 pointer",to:n},"Exit")))}function tv(e){return(e=new Date(e)).setHours(0,0,0,0),e}function nv(e){return(e=new Date(e)).setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes()),e}function rv(e){return(e=new Date(e)).setTime(e-e.getMilliseconds()-1e3*e.getSeconds()),e}qc(Xg,"defaultProps",{id:void 0,diff:void 0,onHeight:void 0});const iv="black hover-blue no-underline";let ov=({notebook:e,formattedTime:t,other:n})=>G.createElement("div",null,n&&e.id===n.id?G.createElement(G.Fragment,null,G.createElement(Wc,{className:iv,to:Qh(e,e.save_version)},"Version ",e.save_version),G.createElement("span",{className:"ml1"},t)):G.createElement(Wc,{className:iv,to:Qh(e)},Jh(e)),n&&e.owner.id!==n.owner.id&&G.createElement(G.Fragment,null," ",G.createElement("span",{className:"nowrap"},G.createElement("span",{className:"mr1"},"by"),G.createElement(Wc,{className:iv,to:nd(e.owner)},G.createElement(uh,{user:e.owner,s:16,className:"mr1 br-100",style:{verticalAlign:"text-bottom"}}),rd(e.owner)))));class sv extends G.Component{constructor(...e){super(...e),qc(this,"state",{open:!1}),qc(this,"toggle",e=>{e.stopPropagation(),this.setState(({open:e})=>({open:!e}))}),qc(this,"onBase",e=>{this.changeAllSource("base",e)}),qc(this,"onTarget",e=>{this.changeAllSource("target",e)}),qc(this,"onDiff",e=>{this.changeAllSource("diff",e)})}changeAllSource(e,t){const{changeAllSource:n}=this.props;t.currentTarget&&t.currentTarget.blur(),this.toggle(t),n(e)}render(){const{open:e}=this.state,{chronological:t}=this.props;return G.createElement("div",{className:"relative"},G.createElement("div",{onClick:this.toggle,className:"inline-flex items-center black-50 hover-blue bg-white bg-transparent pointer"},G.createElement(Au,{className:"w1 h1"})),e&&G.createElement(vh,{extraStyle:{right:-16,width:"7rem"},onClickOutside:this.toggle},G.createElement("div",{className:"pv2"},G.createElement("div",{onClick:this.onDiff,className:"flex items-center ph3 pv2 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(yu,{className:"w1 h1 mr1"}),"Diff"),G.createElement("div",{onClick:this.onBase,className:"flex items-center ph3 pv2 fw6 no-underline black-70 hover-black bg-washed-red hover-bg-light-red pointer"},G.createElement(bu,{className:"w1 h1 mr1"})," ",t?"Before":"Base"),G.createElement("div",{onClick:this.onTarget,className:"flex items-center ph3 pv2 fw6 no-underline black-70 hover-black bg-washed-green hover-bg-light-green pointer"},G.createElement(vu,{className:"w1 h1 mr1"})," ",t?"After":"Target"))))}}class av extends G.Component{constructor(...e){super(...e),qc(this,"state",{dismissAutoMerge:!1}),qc(this,"autoMerge",()=>{const{autoMerge:e}=this.props;this.dismissAutoMerge(),e()}),qc(this,"dismissAutoMerge",()=>{this.setState(()=>({dismissAutoMerge:!0}))})}render(){const{changeAllSource:e,notebook:t,baseNotebook:n,ancestry:r,user:i,type:o}=this.props,{dismissAutoMerge:s}=this.state,a=Lh(n,t),[l,c]=function(e,t){const n={};return tv(e)-tv(t)==0&&(n.hour="numeric",nv(e)-nv(t)==0&&(n.minute="numeric",rv(e)-rv(t)==0&&(n.second="numeric")),tv(new Date)-tv(t)==0)?[`at ${e.toLocaleString(void 0,n)}`,`at ${t.toLocaleString(void 0,n)}`]:(n.month="short",n.day="numeric",n.year="numeric",[`on ${e.toLocaleString(void 0,n)}`,`on ${t.toLocaleString(void 0,n)}`])}(new Date(n.update_time),new Date(t.update_time)),u=!s&&Dh(i,n)&&function(e){return Kh(e).length>0}(r);return G.createElement(G.Fragment,null,G.createElement("div",{style:{marginLeft:21},className:`ph3 pa2 f6 fw4 lh-copy black-70 bg-washed-yellow ${"compare"===o&&null!=t.suggestion_from?"br--bottom":""} ${u?"":"br2 mb4"}`},G.createElement("div",{className:"flex justify-between items-center"},G.createElement("div",{className:"pv1 mr2"},G.createElement("span",{className:"fw7"},"Comparing"," ",t.id===n.id?"versions":"notebooks",".")," ",Dh(i,n)?n.id===t.id?"Merge to overwrite this notebook.":"Merge to overwrite the base notebook.":Ah(i,n)&&n.id!==t.id?G.createElement(G.Fragment,null,"To merge these changes,"," ",G.createElement(Wc,{className:iv,to:td(n,null,t,Vh(t)?null:t.save_version)},"compare to the latest base.")):null),G.createElement(sv,{changeAllSource:e,chronological:a})),G.createElement("div",{className:"pv1"},G.createElement("div",{className:"flex"},G.createElement("div",{className:"flex-shrink-0 w3 tr"},G.createElement("span",{className:"i"},a?"Before":"Base")," ",G.createElement("span",{className:"mr1"},"=")),G.createElement(ov,{notebook:n,other:t,formattedTime:l})),G.createElement("div",{className:"flex"},G.createElement("div",{className:"flex-shrink-0 w3 tr"},G.createElement("span",{className:"i"},a?"After":"Target")," ",G.createElement("span",{className:"mr1"},"=")),G.createElement(ov,{notebook:t,other:n,formattedTime:c})))),u?G.createElement("div",{style:{marginLeft:21},className:"ph3 pa2 flex mb4 flex-column lh-copy flex-row-ns justify-between items-center f6 fw4 black-70 bg-washed-yellow br2 br--bottom bt b--black-05"},G.createElement("div",{className:"pv1 mr2"},G.createElement("span",{className:"fw7"},"Missing changes.")," The target is missing some base changes. Apply them below?"),G.createElement("div",{className:"flex mt2 mt0-ns"},G.createElement("a",{className:"mr2 ph3 nt1 nb1 pa1 no-underline black-50 hover-blue ba b--transparent pointer",onClick:this.dismissAutoMerge},"Ignore"),G.createElement("a",{className:"ph3 nt1 nb1 pa1 no-underline black-50 hover-blue bg-white hover-bg-white ba b--black-10 br2 pointer",onClick:this.autoMerge},"Apply"))):null)}}function lv({suggestion:e,id:t,i:n}){const{from_id:r,from_owner:i,create_time:o,to_owner:s}=e,a=r===t?"to":"from",l="from"===a?i:s;return G.createElement(Wc,{title:"View suggestion",to:ed(e),className:`db ph3 pv2 f6 fw4 lh-copy no-underline black-70 hover-blue ${0===n?"":"bt b--black-05"}`},e.description?G.createElement("div",null,"“",e.description,"”"):null," ",mh(new Date(o))," ",a,G.createElement(uh,{user:l,s:16,className:"mh1 br-100",style:{verticalAlign:"sub"}}),l.name||l.login)}class cv extends G.Component{constructor(...e){super(...e),qc(this,"state",{open:!1}),qc(this,"togglePopover",e=>{e.stopPropagation(),this.setState(({open:e})=>({open:!e}))}),qc(this,"closePopover",e=>{e.stopPropagation(),this.setState({open:!1})})}render(){const{open:e}=this.state,{id:t,suggestions:n}=this.props,r=G.createElement("span",{className:"inline-flex items-center f6"},G.createElement(Cu,{className:`mr1 ${e?"black":"black-30"}`,style:{strokeWidth:1}}),`${bh(n.length)} suggestion${n.length>1?"s":""}`);return G.createElement("div",{className:`relative ${e?"black":"black-70 hover-blue"} pointer inline-flex items-center mr4 f6 fw4`,onClick:this.togglePopover},r,e&&G.createElement(vh,{left:!0,leftPos:-16,onClickOutside:this.closePopover,extraStyle:{width:"18rem",marginTop:"0.5rem"}},G.createElement("div",{className:"pv1"},n.map((e,n)=>G.createElement(lv,{suggestion:e,id:t,key:n,i:n})))))}}const uv=G.memo(function({notebook:{likes:e,like:t},onClick:n}){return G.createElement("a",{onClick:n,title:`${t?"Unlike":"Like"} this notebook.`,className:"flex-column inline-flex w2 items-stretch black-50 hover-bg-light-gray ba b--black-10 br2 pointer overflow-hidden"},G.createElement("div",{className:"flex h2 items-center justify-center pa1"},G.createElement(ju,{className:t?"bump":"",fill:t?"var(--pink)":"var(--white)",stroke:t?"var(--pink)":"var(--black-50)",style:{width:22,height:22,strokeWidth:1,transition:"all 0.4s ease-in-out"}})),e>0&&G.createElement("div",{style:{paddingTop:2,paddingBottom:2},className:"f6 tc bg-white bt b--black-10"},bh(e)))});function hv({onHelp:e,save:t}){return G.createElement("div",{className:"flex flex-items-center justify-between items-start mb4 f5 f6 lh-copy black-50",style:{marginLeft:21}},G.createElement("div",null,G.createElement("div",{className:"f5 fw7 black-70 semitracked"},"Playground"),G.createElement("div",{className:"measure-wide mt2 fw4"},"Use this notebook to start playing with Observable. Edit the code below, then ",rm("Shift-Enter")," ",om("Shift-Enter")," to run. To save your changes,"," ",G.createElement("a",{className:"blue hover-dark-blue link pointer",onClick:t},"sign in"),".")),G.createElement("div",{className:"ph2 nowrap"},G.createElement("div",{className:"f5 fw7 black-70 semitracked"},"Help"),G.createElement(Wc,{to:"/collection/@observablehq/introduction",target:"_blank",rel:"noopener noreferrer",className:"db mt2 blue hover-dark-blue link"},"Introduction"),G.createElement(Wc,{to:"/collection/@observablehq/tutorial",target:"_blank",rel:"noopener noreferrer",className:"db blue hover-dark-blue link"},"Tutorials"),G.createElement("a",{onClick:e,className:"db blue hover-dark-blue link pointer"},"Keyboard shortcuts"),G.createElement("a",{href:"https://talk.observablehq.com/",target:"_blank",rel:"noopener noreferrer",className:"db blue hover-dark-blue link"},"Forum")))}var dv={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},pv="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",fv={5:pv,6:pv+" const class extends export import super"},mv=/^in(stanceof)?$/,gv="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",vv="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",bv=new RegExp("["+gv+"]"),yv=new RegExp("["+gv+vv+"]");gv=vv=null;var wv=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],kv=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function Ev(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function xv(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&bv.test(String.fromCharCode(e)):!1!==t&&Ev(e,wv)))}function Sv(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&yv.test(String.fromCharCode(e)):!1!==t&&(Ev(e,wv)||Ev(e,kv)))))}var Cv=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function _v(e,t){return new Cv(e,{beforeExpr:!0,binop:t})}var Tv={beforeExpr:!0},Nv={startsExpr:!0},Pv={};function Av(e,t){return void 0===t&&(t={}),t.keyword=e,Pv[e]=new Cv(e,t)}var Lv={num:new Cv("num",Nv),regexp:new Cv("regexp",Nv),string:new Cv("string",Nv),name:new Cv("name",Nv),eof:new Cv("eof"),bracketL:new Cv("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Cv("]"),braceL:new Cv("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Cv("}"),parenL:new Cv("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Cv(")"),comma:new Cv(",",Tv),semi:new Cv(";",Tv),colon:new Cv(":",Tv),dot:new Cv("."),question:new Cv("?",Tv),arrow:new Cv("=>",Tv),template:new Cv("template"),invalidTemplate:new Cv("invalidTemplate"),ellipsis:new Cv("...",Tv),backQuote:new Cv("`",Nv),dollarBraceL:new Cv("${",{beforeExpr:!0,startsExpr:!0}),eq:new Cv("=",{beforeExpr:!0,isAssign:!0}),assign:new Cv("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Cv("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Cv("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:_v("||",1),logicalAND:_v("&&",2),bitwiseOR:_v("|",3),bitwiseXOR:_v("^",4),bitwiseAND:_v("&",5),equality:_v("==/!=/===/!==",6),relational:_v("</>/<=/>=",7),bitShift:_v("<</>>/>>>",8),plusMin:new Cv("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:_v("%",10),star:_v("*",10),slash:_v("/",10),starstar:new Cv("**",{beforeExpr:!0}),_break:Av("break"),_case:Av("case",Tv),_catch:Av("catch"),_continue:Av("continue"),_debugger:Av("debugger"),_default:Av("default",Tv),_do:Av("do",{isLoop:!0,beforeExpr:!0}),_else:Av("else",Tv),_finally:Av("finally"),_for:Av("for",{isLoop:!0}),_function:Av("function",Nv),_if:Av("if"),_return:Av("return",Tv),_switch:Av("switch"),_throw:Av("throw",Tv),_try:Av("try"),_var:Av("var"),_const:Av("const"),_while:Av("while",{isLoop:!0}),_with:Av("with"),_new:Av("new",{beforeExpr:!0,startsExpr:!0}),_this:Av("this",Nv),_super:Av("super",Nv),_class:Av("class",Nv),_extends:Av("extends",Tv),_export:Av("export"),_import:Av("import"),_null:Av("null",Nv),_true:Av("true",Nv),_false:Av("false",Nv),_in:Av("in",{beforeExpr:!0,binop:7}),_instanceof:Av("instanceof",{beforeExpr:!0,binop:7}),_typeof:Av("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Av("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Av("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Mv=/\r\n?|\n|\u2028|\u2029/,Ov=new RegExp(Mv.source,"g");function Iv(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var Rv=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Dv=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Fv=Object.prototype,jv=Fv.hasOwnProperty,Hv=Fv.toString;function $v(e,t){return jv.call(e,t)}var Uv=Array.isArray||function(e){return"[object Array]"===Hv.call(e)},Wv=function(e,t){this.line=e,this.column=t};Wv.prototype.offset=function(e){return new Wv(this.line,this.column+e)};var Bv=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function Vv(e,t){for(var n=1,r=0;;){Ov.lastIndex=r;var i=Ov.exec(e);if(!(i&&i.index<t))return new Wv(n,t-r);++n,r=i.index+i[0].length}}var zv={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function qv(e){var t={};for(var n in zv)t[n]=e&&$v(e,n)?e[n]:zv[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),Uv(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return Uv(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,o,s,a){var l={type:n?"Block":"Line",value:r,start:i,end:o};e.locations&&(l.loc=new Bv(this,s,a)),e.ranges&&(l.range=[i,o]),t.push(l)}}(t,t.onComment)),t}var Gv=2,Kv=1|Gv,Yv=4,Xv=8;function Qv(e,t){return Gv|(e?Yv:0)|(t?Xv:0)}function Jv(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var Zv=function(e,t,n){this.options=e=qv(e),this.sourceFile=e.sourceFile,this.keywords=Jv(fv[e.ecmaVersion>=6?6:5]);var r="";if(!e.allowReserved){for(var i=e.ecmaVersion;!(r=dv[i]);i--);"module"===e.sourceType&&(r+=" await")}this.reservedWords=Jv(r);var o=(r?r+" ":"")+dv.strict;this.reservedWordsStrict=Jv(o),this.reservedWordsStrictBind=Jv(o+" "+dv.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Mv).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Lv.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},eb={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0}};Zv.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},eb.inFunction.get=function(){return(this.currentVarScope().flags&Gv)>0},eb.inGenerator.get=function(){return(this.currentVarScope().flags&Xv)>0},eb.inAsync.get=function(){return(this.currentVarScope().flags&Yv)>0},eb.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},eb.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},Zv.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&Gv)>0},Zv.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},Zv.parse=function(e,t){return new this(t,e).parse()},Zv.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},Zv.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(Zv.prototype,eb);var tb=Zv.prototype,nb=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;function rb(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}tb.strictDirective=function(e){for(;;){Dv.lastIndex=e,e+=Dv.exec(this.input)[0].length;var t=nb.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length}},tb.eat=function(e){return this.type===e&&(this.next(),!0)},tb.isContextual=function(e){return this.type===Lv.name&&this.value===e&&!this.containsEsc},tb.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},tb.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},tb.canInsertSemicolon=function(){return this.type===Lv.eof||this.type===Lv.braceR||Mv.test(this.input.slice(this.lastTokEnd,this.start))},tb.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},tb.semicolon=function(){this.eat(Lv.semi)||this.insertSemicolon()||this.unexpected()},tb.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},tb.expect=function(e){this.eat(e)||this.unexpected()},tb.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},tb.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},tb.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},tb.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},tb.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var ib=Zv.prototype;ib.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==Lv.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var ob={kind:"loop"},sb={kind:"switch"};ib.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Dv.lastIndex=this.pos;var e=Dv.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123===n)return!0;if(xv(n,!0)){for(var r=t+1;Sv(this.input.charCodeAt(r),!0);)++r;var i=this.input.slice(t,r);if(!mv.test(i))return!0}return!1},ib.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Dv.lastIndex=this.pos;var e=Dv.exec(this.input),t=this.pos+e[0].length;return!(Mv.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&Sv(this.input.charAt(t+8)))},ib.parseStatement=function(e,t,n){var r,i=this.type,o=this.startNode();switch(this.isLet()&&(i=Lv._var,r="let"),i){case Lv._break:case Lv._continue:return this.parseBreakContinueStatement(o,i.keyword);case Lv._debugger:return this.parseDebuggerStatement(o);case Lv._do:return this.parseDoStatement(o);case Lv._for:return this.parseForStatement(o);case Lv._function:return e&&(this.strict||"if"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1,!e);case Lv._class:return e&&this.unexpected(),this.parseClass(o,!0);case Lv._if:return this.parseIfStatement(o);case Lv._return:return this.parseReturnStatement(o);case Lv._switch:return this.parseSwitchStatement(o);case Lv._throw:return this.parseThrowStatement(o);case Lv._try:return this.parseTryStatement(o);case Lv._const:case Lv._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(o,r);case Lv._while:return this.parseWhileStatement(o);case Lv._with:return this.parseWithStatement(o);case Lv.braceL:return this.parseBlock(!0,o);case Lv.semi:return this.parseEmptyStatement(o);case Lv._export:case Lv._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===Lv._import?this.parseImport(o):this.parseExport(o,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(o,!0,!e);var s=this.value,a=this.parseExpression();return i===Lv.name&&"Identifier"===a.type&&this.eat(Lv.colon)?this.parseLabeledStatement(o,s,a,e):this.parseExpressionStatement(o,a)}},ib.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(Lv.semi)||this.insertSemicolon()?e.label=null:this.type!==Lv.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},ib.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},ib.parseDoStatement=function(e){return this.next(),this.labels.push(ob),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(Lv._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Lv.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},ib.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ob),this.enterScope(0),this.expect(Lv.parenL),this.type===Lv.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===Lv._var||this.type===Lv._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===Lv._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,r)):(this.options.ecmaVersion>=9&&(this.type===Lv._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r))}var o=new rb,s=this.parseExpression(!0,o);return this.type===Lv._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===Lv._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(s,!1,o),this.checkLVal(s),this.parseForIn(e,s)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,s))},ib.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,lb|(n?0:cb),!1,t)},ib.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(Lv._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},ib.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Lv.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},ib.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(Lv.braceL),this.labels.push(sb),this.enterScope(0);for(var n=!1;this.type!==Lv.braceR;)if(this.type===Lv._case||this.type===Lv._default){var r=this.type===Lv._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(Lv.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},ib.parseThrowStatement=function(e){return this.next(),Mv.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var ab=[];ib.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===Lv._catch){var t=this.startNode();if(this.next(),this.eat(Lv.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(Lv.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(Lv._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},ib.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},ib.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ob),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},ib.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},ib.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},ib.parseLabeledStatement=function(e,t,n,r){for(var i=0,o=this.labels;i<o.length;i+=1){o[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var s=this.type.isLoop?"loop":this.type===Lv._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var l=this.labels[a];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=s}return this.labels.push({name:t,kind:s,statementStart:this.start}),e.body=this.parseStatement(r),("ClassDeclaration"===e.body.type||"VariableDeclaration"===e.body.type&&"var"!==e.body.kind||"FunctionDeclaration"===e.body.type&&(this.strict||e.body.generator||e.body.async))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},ib.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},ib.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(Lv.braceL),e&&this.enterScope(0);!this.eat(Lv.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},ib.parseFor=function(e,t){return e.init=t,this.expect(Lv.semi),e.test=this.type===Lv.semi?null:this.parseExpression(),this.expect(Lv.semi),e.update=this.type===Lv.parenR?null:this.parseExpression(),this.expect(Lv.parenR),this.exitScope(),e.body=this.parseStatement("for"),this.labels.pop(),this.finishNode(e,"ForStatement")},ib.parseForIn=function(e,t){var n=this.type===Lv._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(Lv.parenR),this.exitScope(),e.body=this.parseStatement("for"),this.labels.pop(),this.finishNode(e,n)},ib.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(Lv.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===Lv._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===Lv._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(Lv.comma))break}return e},ib.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,"var"===t?1:2,!1)};var lb=1,cb=2;ib.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(e.generator=this.eat(Lv.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&lb&&(e.id=4&t&&this.type!==Lv.name?null:this.parseIdent(),!e.id||t&cb||this.checkLVal(e.id,this.inModule&&!this.inFunction?2:3));var i=this.yieldPos,o=this.awaitPos;return this.yieldPos=0,this.awaitPos=0,this.enterScope(Qv(e.async,e.generator)),t&lb||(e.id=this.type===Lv.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.yieldPos=i,this.awaitPos=o,this.finishNode(e,t&lb?"FunctionDeclaration":"FunctionExpression")},ib.parseFunctionParams=function(e){this.expect(Lv.parenL),e.params=this.parseBindingList(Lv.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},ib.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),r=!1;for(n.body=[],this.expect(Lv.braceL);!this.eat(Lv.braceR);){var i=this.parseClassElement(null!==e.superClass);i&&(n.body.push(i),"MethodDefinition"===i.type&&"constructor"===i.kind&&(r&&this.raise(i.start,"Duplicate constructor in the same class"),r=!0))}return e.body=this.finishNode(n,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},ib.parseClassElement=function(e){var t=this;if(this.eat(Lv.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,o=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===Lv.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,o),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(Lv.star),o=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(o=!0,i=this.options.ecmaVersion>=9&&this.eat(Lv.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var s=n.key,a=!1;return n.computed||n.static||!("Identifier"===s.type&&"constructor"===s.name||"Literal"===s.type&&"constructor"===s.value)?n.static&&"Identifier"===s.type&&"prototype"===s.name&&this.raise(s.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(s.start,"Constructor can't have get/set modifier"),i&&this.raise(s.start,"Constructor can't be a generator"),o&&this.raise(s.start,"Constructor can't be an async method"),n.kind="constructor",a=e),this.parseClassMethod(n,i,o,a),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},ib.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},ib.parseClassId=function(e,t){e.id=this.type===Lv.name?this.parseIdent():!0===t?this.unexpected():null},ib.parseClassSuper=function(e){e.superClass=this.eat(Lv._extends)?this.parseExprSubscripts():null},ib.parseExport=function(e,t){if(this.next(),this.eat(Lv.star))return this.expectContextual("from"),this.type!==Lv.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(Lv._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===Lv._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|lb,!1,n,!0)}else if(this.type===Lv._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==Lv.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var o=0,s=e.specifiers;o<s.length;o+=1){var a=s[o];this.checkUnreserved(a.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},ib.checkExport=function(e,t,n){e&&($v(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},ib.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var o=i[r];this.checkPatternExport(e,o)}else if("ArrayPattern"===n)for(var s=0,a=t.elements;s<a.length;s+=1){var l=a[s];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},ib.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},ib.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},ib.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(Lv.braceL);!this.eat(Lv.braceR);){if(n)n=!1;else if(this.expect(Lv.comma),this.afterTrailingComma(Lv.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},ib.parseImport=function(e){return this.next(),this.type===Lv.string?(e.specifiers=ab,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===Lv.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},ib.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===Lv.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(Lv.comma))return e}if(this.type===Lv.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(Lv.braceL);!this.eat(Lv.braceR);){if(t)t=!1;else if(this.expect(Lv.comma),this.afterTrailingComma(Lv.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},ib.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},ib.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var ub=Zv.prototype;ub.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.toAssignable(o,t),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||this.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},ub.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var o=e[n-1];6===this.options.ecmaVersion&&t&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return e},ub.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},ub.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==Lv.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},ub.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Lv.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(Lv.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case Lv.braceL:return this.parseObj(!0)}return this.parseIdent()},ub.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(Lv.comma),t&&this.type===Lv.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===Lv.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),r.push(o),this.type===Lv.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var s=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(s),r.push(s)}return r},ub.parseBindingListItem=function(e){return e},ub.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Lv.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},ub.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&($v(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.checkLVal(o,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var s=0,a=e.elements;s<a.length;s+=1){var l=a[s];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var hb=Zv.prototype;hb.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===o&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var s=t[r="$"+r];if(s)("init"===o?this.strict&&s.init||s.get||s.set:s.init||s[o])&&this.raiseRecoverable(i.start,"Redefinition of property");else s=t[r]={init:!1,get:!1,set:!1};s[o]=!0}}},hb.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===Lv.comma){var o=this.startNodeAt(n,r);for(o.expressions=[i];this.eat(Lv.comma);)o.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(o,"SequenceExpression")}return i},hb.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield();this.exprAllowed=!1}var r=!1,i=-1,o=-1,s=-1;t?(i=t.parenthesizedAssign,o=t.trailingComma,s=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new rb,r=!0);var a=this.start,l=this.startLoc;this.type!==Lv.parenL&&this.type!==Lv.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,a,l)),this.type.isAssign){var u=this.startNodeAt(a,l);return u.operator=this.value,u.left=this.type===Lv.eq?this.toAssignable(c,!1,t):c,r||rb.call(t),t.shorthandAssign=-1,this.checkLVal(c),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),o>-1&&(t.trailingComma=o),s>-1&&(t.shorthandAssign=s),c},hb.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(Lv.question)){var o=this.startNodeAt(n,r);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(Lv.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return i},hb.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},hb.parseExprOp=function(e,t,n,r,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==Lv._in)&&o>r){var s=this.type===Lv.logicalOR||this.type===Lv.logicalAND,a=this.value;this.next();var l=this.start,c=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,o,i),h=this.buildBinary(t,n,e,u,a,s);return this.parseExprOp(h,t,n,r,i)}return e},hb.buildBinary=function(e,t,n,r,i,o){var s=this.startNodeAt(e,t);return s.left=n,s.operator=i,s.right=r,this.finishNode(s,o?"LogicalExpression":"BinaryExpression")},hb.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var o=this.startNode(),s=this.type===Lv.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),s?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(o,s?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var a=this.startNodeAt(r,i);a.operator=this.value,a.prefix=!1,a.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(a,"UpdateExpression")}}return!t&&this.eat(Lv.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},hb.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var o=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===o.type&&(e.parenthesizedAssign>=o.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=o.start&&(e.parenthesizedBind=-1)),o},hb.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end),o=void 0;;)if((o=this.eat(Lv.bracketL))||this.eat(Lv.dot)){var s=this.startNodeAt(t,n);s.object=e,s.property=o?this.parseExpression():this.parseIdent(!0),s.computed=!!o,o&&this.expect(Lv.bracketR),e=this.finishNode(s,"MemberExpression")}else if(!r&&this.eat(Lv.parenL)){var a=new rb,l=this.yieldPos,c=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var u=this.parseExprList(Lv.parenR,this.options.ecmaVersion>=8,!1,a);if(i&&!this.canInsertSemicolon()&&this.eat(Lv.arrow))return this.checkPatternErrors(a,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=c,this.parseArrowExpression(this.startNodeAt(t,n),u,!0);this.checkExpressionErrors(a,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=c||this.awaitPos;var h=this.startNodeAt(t,n);h.callee=e,h.arguments=u,e=this.finishNode(h,"CallExpression")}else{if(this.type!==Lv.backQuote)return e;var d=this.startNodeAt(t,n);d.tag=e,d.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(d,"TaggedTemplateExpression")}},hb.parseExprAtom=function(e){this.type===Lv.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case Lv._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==Lv.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==Lv.dot&&this.type!==Lv.bracketL&&this.type!==Lv.parenL&&this.unexpected(),this.finishNode(t,"Super");case Lv._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case Lv.name:var r=this.start,i=this.startLoc,o=this.containsEsc,s=this.parseIdent(this.type!==Lv.name);if(this.options.ecmaVersion>=8&&!o&&"async"===s.name&&!this.canInsertSemicolon()&&this.eat(Lv._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(Lv.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[s],!1);if(this.options.ecmaVersion>=8&&"async"===s.name&&this.type===Lv.name&&!o)return s=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(Lv.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[s],!0)}return s;case Lv.regexp:var a=this.value;return(t=this.parseLiteral(a.value)).regex={pattern:a.pattern,flags:a.flags},t;case Lv.num:case Lv.string:return this.parseLiteral(this.value);case Lv._null:case Lv._true:case Lv._false:return(t=this.startNode()).value=this.type===Lv._null?null:this.type===Lv._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case Lv.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),c;case Lv.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(Lv.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case Lv.braceL:return this.parseObj(!1,e);case Lv._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case Lv._class:return this.parseClass(this.startNode(),!1);case Lv._new:return this.parseNew();case Lv.backQuote:return this.parseTemplate();default:this.unexpected()}},hb.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},hb.parseParenExpression=function(){this.expect(Lv.parenL);var e=this.parseExpression();return this.expect(Lv.parenR),e},hb.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,s=this.start,a=this.startLoc,l=[],c=!0,u=!1,h=new rb,d=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==Lv.parenR;){if(c?c=!1:this.expect(Lv.comma),i&&this.afterTrailingComma(Lv.parenR,!0)){u=!0;break}if(this.type===Lv.ellipsis){o=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===Lv.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(Lv.parenR),e&&!this.canInsertSemicolon()&&this.eat(Lv.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(n,r,l);l.length&&!u||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,l.length>1?((t=this.startNodeAt(s,a)).expressions=l,this.finishNodeAt(t,"SequenceExpression",f,m)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},hb.parseParenItem=function(e){return e},hb.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var db=[];hb.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(Lv.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.eat(Lv.parenL)?e.arguments=this.parseExprList(Lv.parenR,this.options.ecmaVersion>=8,!1):e.arguments=db,this.finishNode(e,"NewExpression")},hb.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===Lv.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===Lv.backQuote,this.finishNode(n,"TemplateElement")},hb.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===Lv.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Lv.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(Lv.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},hb.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===Lv.name||this.type===Lv.num||this.type===Lv.string||this.type===Lv.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Lv.star)&&!Mv.test(this.input.slice(this.lastTokEnd,this.start))},hb.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(Lv.braceR);){if(r)r=!1;else if(this.expect(Lv.comma),this.afterTrailingComma(Lv.braceR))break;var o=this.parseProperty(e,t);e||this.checkPropClash(o,i,t),n.properties.push(o)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},hb.parseProperty=function(e,t){var n,r,i,o,s=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(Lv.ellipsis))return e?(s.argument=this.parseIdent(!1),this.type===Lv.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(s,"RestElement")):(this.type===Lv.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),s.argument=this.parseMaybeAssign(!1,t),this.type===Lv.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(s,"SpreadElement"));this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(n=this.eat(Lv.star)));var a=this.containsEsc;return this.parsePropertyName(s),!e&&!a&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(s)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(Lv.star),this.parsePropertyName(s,t)):r=!1,this.parsePropertyValue(s,e,n,r,i,o,t,a),this.finishNode(s,"Property")},hb.parsePropertyValue=function(e,t,n,r,i,o,s,a){if((n||r)&&this.type===Lv.colon&&this.unexpected(),this.eat(Lv.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===Lv.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||a||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===Lv.comma||this.type===Lv.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,o,e.key):this.type===Lv.eq&&s?(s.shorthandAssign<0&&(s.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},hb.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(Lv.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(Lv.bracketR),e.key;e.computed=!1}return e.key=this.type===Lv.num||this.type===Lv.string?this.parseExprAtom():this.parseIdent(!0)},hb.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},hb.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,o=this.awaitPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.enterScope(64|Qv(t,r.generator)|(n?128:0)),this.expect(Lv.parenL),r.params=this.parseBindingList(Lv.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1),this.yieldPos=i,this.awaitPos=o,this.finishNode(r,"FunctionExpression")},hb.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos;return this.enterScope(16|Qv(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.yieldPos=r,this.awaitPos=i,this.finishNode(e,"ArrowFunctionExpression")},hb.parseFunctionBody=function(e,t){var n=t&&this.type!==Lv.braceL,r=this.strict,i=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);r&&!o||(i=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!r&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=s}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=r},hb.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},hb.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var o=i[r];this.checkLVal(o,1,t?null:n)}},hb.parseExprList=function(e,t,n,r){for(var i=[],o=!0;!this.eat(e);){if(o)o=!1;else if(this.expect(Lv.comma),t&&this.afterTrailingComma(e))break;var s=void 0;n&&this.type===Lv.comma?s=null:this.type===Lv.ellipsis?(s=this.parseSpread(r),r&&this.type===Lv.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):s=this.parseMaybeAssign(!1,r),i.push(s)}return i},hb.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},hb.parseIdent=function(e,t){var n=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===Lv.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||this.checkUnreserved(n),n},hb.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===Lv.semi||this.canInsertSemicolon()||this.type!==Lv.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(Lv.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},hb.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var pb=Zv.prototype;pb.raise=function(e,t){var n=Vv(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},pb.raiseRecoverable=pb.raise,pb.curPosition=function(){if(this.options.locations)return new Wv(this.curLine,this.pos-this.lineStart)};var fb=Zv.prototype,mb=function(e){this.flags=e,this.var=[],this.lexical=[]};fb.enterScope=function(e){this.scopeStack.push(new mb(e))},fb.exitScope=function(){this.scopeStack.pop()},fb.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e)}else if(4===t){this.currentScope().lexical.push(e)}else if(3===t){var o=this.currentScope();r=o.lexical.indexOf(e)>-1,o.var.push(e)}else for(var s=this.scopeStack.length-1;s>=0;--s){var a=this.scopeStack[s];if(a.lexical.indexOf(e)>-1&&!(32&a.flags)&&a.lexical[0]===e&&(r=!0),a.var.push(e),a.flags&Kv)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},fb.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},fb.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Kv)return t}},fb.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Kv&&!(16&t.flags))return t}};var gb=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new Bv(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},vb=Zv.prototype;function bb(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}vb.startNode=function(){return new gb(this,this.start,this.startLoc)},vb.startNodeAt=function(e,t){return new gb(this,e,t)},vb.finishNode=function(e,t){return bb.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},vb.finishNodeAt=function(e,t,n,r){return bb.call(this,e,t,n,r)};var yb=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},wb={b_stat:new yb("{",!1),b_expr:new yb("{",!0),b_tmpl:new yb("${",!1),p_stat:new yb("(",!1),p_expr:new yb("(",!0),q_tmpl:new yb("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new yb("function",!1),f_expr:new yb("function",!0),f_expr_gen:new yb("function",!0,!1,null,!0),f_gen:new yb("function",!1,!1,null,!0)},kb=Zv.prototype;kb.initialContext=function(){return[wb.b_stat]},kb.braceIsBlock=function(e){var t=this.curContext();return t===wb.f_expr||t===wb.f_stat||(e!==Lv.colon||t!==wb.b_stat&&t!==wb.b_expr?e===Lv._return||e===Lv.name&&this.exprAllowed?Mv.test(this.input.slice(this.lastTokEnd,this.start)):e===Lv._else||e===Lv.semi||e===Lv.eof||e===Lv.parenR||e===Lv.arrow||(e===Lv.braceL?t===wb.b_stat:e!==Lv._var&&e!==Lv._const&&e!==Lv.name&&!this.exprAllowed):!t.isExpr)},kb.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},kb.updateContext=function(e){var t,n=this.type;n.keyword&&e===Lv.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},Lv.parenR.updateContext=Lv.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===wb.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},Lv.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?wb.b_stat:wb.b_expr),this.exprAllowed=!0},Lv.dollarBraceL.updateContext=function(){this.context.push(wb.b_tmpl),this.exprAllowed=!0},Lv.parenL.updateContext=function(e){var t=e===Lv._if||e===Lv._for||e===Lv._with||e===Lv._while;this.context.push(t?wb.p_stat:wb.p_expr),this.exprAllowed=!0},Lv.incDec.updateContext=function(){},Lv._function.updateContext=Lv._class.updateContext=function(e){!e.beforeExpr||e===Lv.semi||e===Lv._else||e===Lv._return&&Mv.test(this.input.slice(this.lastTokEnd,this.start))||(e===Lv.colon||e===Lv.braceL)&&this.curContext()===wb.b_stat?this.context.push(wb.f_stat):this.context.push(wb.f_expr),this.exprAllowed=!1},Lv.backQuote.updateContext=function(){this.curContext()===wb.q_tmpl?this.context.pop():this.context.push(wb.q_tmpl),this.exprAllowed=!1},Lv.star.updateContext=function(e){if(e===Lv._function){var t=this.context.length-1;this.context[t]===wb.f_expr?this.context[t]=wb.f_expr_gen:this.context[t]=wb.f_gen}this.exprAllowed=!0},Lv.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==Lv.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Eb={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(Eb.$LONE,Eb.General_Category),Eb.gc=Eb.General_Category,Eb.sc=Eb.Script_Extensions=Eb.scx=Eb.Script;var xb=Zv.prototype,Sb=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Cb(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function _b(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function Tb(e){return e>=65&&e<=90||e>=97&&e<=122}function Nb(e){return Tb(e)||95===e}function Pb(e){return Nb(e)||Ab(e)}function Ab(e){return e>=48&&e<=57}function Lb(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Mb(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function Ob(e){return e>=48&&e<=55}Sb.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Sb.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Sb.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?r:(r<<10)+t.charCodeAt(e+1)-56613888},Sb.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?e+1:e+2},Sb.prototype.current=function(){return this.at(this.pos)},Sb.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},Sb.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},Sb.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},xb.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},xb.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},xb.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},xb.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},xb.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},xb.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},xb.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},xb.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},xb.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},xb.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},xb.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},xb.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},xb.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},xb.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},xb.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},xb.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},xb.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!_b(t)&&(e.lastIntValue=t,e.advance(),!0)},xb.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!_b(n);)e.advance();return e.pos!==t},xb.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},xb.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},xb.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},xb.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Cb(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Cb(e.lastIntValue);return!0}return!1},xb.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return xv(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},xb.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return Sv(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},xb.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},xb.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},xb.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},xb.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},xb.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},xb.regexp_eatZero=function(e){return 48===e.current()&&!Ab(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},xb.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},xb.regexp_eatControlLetter=function(e){var t=e.current();return!!Tb(t)&&(e.lastIntValue=t%32,e.advance(),!0)},xb.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,n=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(e.switchU&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(r-55296)+(o-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((t=e.lastIntValue)>=0&&t<=1114111))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=n}return!1},xb.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},xb.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},xb.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},xb.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},xb.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Eb.hasOwnProperty(t)&&-1!==Eb[t].indexOf(n)||e.raise("Invalid property name")},xb.regexp_validateUnicodePropertyNameOrValue=function(e,t){-1===Eb.$LONE.indexOf(t)&&e.raise("Invalid property name")},xb.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Nb(t=e.current());)e.lastStringValue+=Cb(t),e.advance();return""!==e.lastStringValue},xb.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Pb(t=e.current());)e.lastStringValue+=Cb(t),e.advance();return""!==e.lastStringValue},xb.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},xb.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},xb.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},xb.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||Ob(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},xb.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},xb.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!Ab(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},xb.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},xb.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ab(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},xb.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Lb(n=e.current());)e.lastIntValue=16*e.lastIntValue+Mb(n),e.advance();return e.pos!==t},xb.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},xb.regexp_eatOctalDigit=function(e){var t=e.current();return Ob(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},xb.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!Lb(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Mb(i),e.advance()}return!0};var Ib=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new Bv(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Rb=Zv.prototype;function Db(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}Rb.next=function(){this.options.onToken&&this.options.onToken(new Ib(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Rb.getToken=function(){return this.next(),new Ib(this)},"undefined"!=typeof Symbol&&(Rb[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===Lv.eof,value:t}}}}),Rb.curContext=function(){return this.context[this.context.length-1]},Rb.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(Lv.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},Rb.readToken=function(e){return xv(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},Rb.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},Rb.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(Ov.lastIndex=n;(e=Ov.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},Rb.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Iv(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},Rb.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&Rv.test(String.fromCharCode(e))))break e;++this.pos}}},Rb.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},Rb.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(Lv.ellipsis)):(++this.pos,this.finishToken(Lv.dot))},Rb.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(Lv.assign,2):this.finishOp(Lv.slash,1)},Rb.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?Lv.star:Lv.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=Lv.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(Lv.assign,n+1):this.finishOp(r,n)},Rb.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?Lv.logicalOR:Lv.logicalAND,2):61===t?this.finishOp(Lv.assign,2):this.finishOp(124===e?Lv.bitwiseOR:Lv.bitwiseAND,1)},Rb.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Lv.assign,2):this.finishOp(Lv.bitwiseXOR,1)},Rb.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Mv.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Lv.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(Lv.assign,2):this.finishOp(Lv.plusMin,1)},Rb.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(Lv.assign,n+1):this.finishOp(Lv.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(Lv.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Rb.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(Lv.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Lv.arrow)):this.finishOp(61===e?Lv.eq:Lv.prefix,1)},Rb.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Lv.parenL);case 41:return++this.pos,this.finishToken(Lv.parenR);case 59:return++this.pos,this.finishToken(Lv.semi);case 44:return++this.pos,this.finishToken(Lv.comma);case 91:return++this.pos,this.finishToken(Lv.bracketL);case 93:return++this.pos,this.finishToken(Lv.bracketR);case 123:return++this.pos,this.finishToken(Lv.braceL);case 125:return++this.pos,this.finishToken(Lv.braceR);case 58:return++this.pos,this.finishToken(Lv.colon);case 63:return++this.pos,this.finishToken(Lv.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Lv.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(Lv.prefix,1)}this.raise(this.pos,"Unexpected character '"+Db(e)+"'")},Rb.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},Rb.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Mv.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var o=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(o);var a=this.regexpState||(this.regexpState=new Sb(this));a.reset(n,i,s),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var l=null;try{l=new RegExp(i,s)}catch(c){}return this.finishToken(Lv.regexp,{pattern:i,flags:s,value:l})},Rb.readInt=function(e,t){for(var n=this.pos,r=0,i=0,o=null==t?1/0:t;i<o;++i){var s=this.input.charCodeAt(this.pos),a=void 0;if((a=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0)>=e)break;++this.pos,r=r*e+a}return this.pos===n||null!=t&&this.pos-n!==t?null:r},Rb.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),xv(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Lv.num,t)},Rb.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),xv(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),o=n?parseInt(i,8):parseFloat(i);return this.finishToken(Lv.num,o)},Rb.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},Rb.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(Iv(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(Lv.string,t)};var Fb={};Rb.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Fb)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Rb.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Fb;this.raise(e,t)},Rb.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==Lv.template&&this.type!==Lv.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(Lv.template,e)):36===n?(this.pos+=2,this.finishToken(Lv.dollarBraceL)):(++this.pos,this.finishToken(Lv.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Iv(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},Rb.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(Lv.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Rb.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Db(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return String.fromCharCode(t)}},Rb.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},Rb.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(Sv(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var o=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var s=this.readCodePoint();(t?xv:Sv)(s,r)||this.invalidStringToken(o,"Invalid Unicode escape"),e+=Db(s),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},Rb.readWord=function(){var e=this.readWord1(),t=Lv.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=Pv[e]),this.finishToken(t,e)};var jb=function(e){return e&&e.default||e}(Object.freeze({version:"6.0.4",parse:function(e,t){return Zv.parse(e,t)},parseExpressionAt:function(e,t,n){return Zv.parseExpressionAt(e,t,n)},tokenizer:function(e,t){return Zv.tokenizer(e,t)},Parser:Zv,defaultOptions:zv,Position:Wv,SourceLocation:Bv,getLineInfo:Vv,Node:gb,TokenType:Cv,tokTypes:Lv,keywordTypes:Pv,TokContext:yb,tokContexts:wb,isIdentifierChar:Sv,isIdentifierStart:xv,Token:Ib,isNewLine:Iv,lineBreak:Mv,lineBreakG:Ov,nonASCIIwhitespace:Rv}));const Hb=jb.tokTypes,$b=jb.isIdentifierStart;var Ub=function(e){return class extends e{parseLiteral(e){const t=super.parseLiteral(e);return 110==t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw),t}readRadixNumber(e){let t=this.pos;this.pos+=2;let n=this.readInt(e);if(null===n&&this.raise(this.start+2,`Expected number in radix ${e}`),110==this.input.charCodeAt(this.pos)){let e=this.input.slice(t,this.pos);n="undefined"!=typeof BigInt?BigInt(e):null,++this.pos}else $b(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(Hb.num,n)}readNumber(e){let t=this.pos;if(e)return super.readNumber(e);if(48===this.input.charCodeAt(t)&&110!==this.input.charCodeAt(t+1))return super.readNumber(e);if(null===this.readInt(10)&&this.raise(t,"Invalid number"),110!=this.input.charCodeAt(this.pos))return this.pos=t,super.readNumber(e);let n=this.input.slice(t,this.pos),r="undefined"!=typeof BigInt?BigInt(n):null;return++this.pos,this.finishToken(Hb.num,r)}}};function Wb(e){const t=new e;function n({input:e,pos:n}){return t.input=e,t.pos=n,t.nextToken(),t}return class extends e{parseExprAtom(){if(this.type===Lv._import){const{type:e}=n(this);if(e===Lv.parenL)return function(e){const t=e.startNode();return e.expect(Lv._import),e.finishNode(t,"Import")}(this);this.unexpected()}return super.parseExprAtom.apply(this,arguments)}parseStatement(){if(this.type===Lv._import){const{type:e}=n(this);if(e===Lv.parenL)return function(e){const t=e.startNode(),{start:n}=e,r=e.startNode(),i=e.parseExprAtom();e.expect(Lv.parenL),r.arguments=[e.parseMaybeAssign()],r.callee=i,e.finishNode(r,"CallExpression"),e.expect(Lv.parenR);const o=e.parseSubscripts(r,n);return e.parseExpressionStatement(t,o)}(this)}return super.parseStatement.apply(this,arguments)}}}Lv._import.startsExpr=!0;var Bb=new Set(["Array","ArrayBuffer","atob","AudioContext","Blob","Boolean","BigInt","btoa","clearInterval","clearTimeout","console","crypto","CustomEvent","DataView","Date","decodeURI","decodeURIComponent","devicePixelRatio","document","encodeURI","encodeURIComponent","Error","escape","eval","fetch","File","FileList","FileReader","Float32Array","Float64Array","Function","Headers","Image","ImageData","Infinity","Int16Array","Int32Array","Int8Array","Intl","isFinite","isNaN","JSON","Map","Math","NaN","Number","navigator","Object","parseFloat","parseInt","performance","Path2D","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","cancelAnimationFrame","requestAnimationFrame","Set","setInterval","setTimeout","String","Symbol","SyntaxError","TextDecoder","TextEncoder","this","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","undefined","unescape","URIError","URL","WeakMap","WeakSet","WebSocket","Worker","window"]);function Vb(e,t,n,r){var i=[];n||(n=Kb),function e(r,o,s){var a=s||r.type,l=t[a],c=r!==i[i.length-1];c&&i.push(r),n[a](r,o,e),l&&l(r,o||i,i),c&&i.pop()}(e,r)}var zb=Object.create||function(e){function t(){}return t.prototype=e,new t};function qb(e,t,n){n(e,t)}function Gb(e,t,n){}var Kb={};Kb.Program=Kb.BlockStatement=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1){n(i[r],t,"Statement")}},Kb.Statement=qb,Kb.EmptyStatement=Gb,Kb.ExpressionStatement=Kb.ParenthesizedExpression=function(e,t,n){return n(e.expression,t,"Expression")},Kb.IfStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Statement"),e.alternate&&n(e.alternate,t,"Statement")},Kb.LabeledStatement=function(e,t,n){return n(e.body,t,"Statement")},Kb.BreakStatement=Kb.ContinueStatement=Gb,Kb.WithStatement=function(e,t,n){n(e.object,t,"Expression"),n(e.body,t,"Statement")},Kb.SwitchStatement=function(e,t,n){n(e.discriminant,t,"Expression");for(var r=0,i=e.cases;r<i.length;r+=1){var o=i[r];o.test&&n(o.test,t,"Expression");for(var s=0,a=o.consequent;s<a.length;s+=1){n(a[s],t,"Statement")}}},Kb.SwitchCase=function(e,t,n){e.test&&n(e.test,t,"Expression");for(var r=0,i=e.consequent;r<i.length;r+=1){n(i[r],t,"Statement")}},Kb.ReturnStatement=Kb.YieldExpression=Kb.AwaitExpression=function(e,t,n){e.argument&&n(e.argument,t,"Expression")},Kb.ThrowStatement=Kb.SpreadElement=function(e,t,n){return n(e.argument,t,"Expression")},Kb.TryStatement=function(e,t,n){n(e.block,t,"Statement"),e.handler&&n(e.handler,t),e.finalizer&&n(e.finalizer,t,"Statement")},Kb.CatchClause=function(e,t,n){e.param&&n(e.param,t,"Pattern"),n(e.body,t,"Statement")},Kb.WhileStatement=Kb.DoWhileStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.body,t,"Statement")},Kb.ForStatement=function(e,t,n){e.init&&n(e.init,t,"ForInit"),e.test&&n(e.test,t,"Expression"),e.update&&n(e.update,t,"Expression"),n(e.body,t,"Statement")},Kb.ForInStatement=Kb.ForOfStatement=function(e,t,n){n(e.left,t,"ForInit"),n(e.right,t,"Expression"),n(e.body,t,"Statement")},Kb.ForInit=function(e,t,n){"VariableDeclaration"===e.type?n(e,t):n(e,t,"Expression")},Kb.DebuggerStatement=Gb,Kb.FunctionDeclaration=function(e,t,n){return n(e,t,"Function")},Kb.VariableDeclaration=function(e,t,n){for(var r=0,i=e.declarations;r<i.length;r+=1){n(i[r],t)}},Kb.VariableDeclarator=function(e,t,n){n(e.id,t,"Pattern"),e.init&&n(e.init,t,"Expression")},Kb.Function=function(e,t,n){e.id&&n(e.id,t,"Pattern");for(var r=0,i=e.params;r<i.length;r+=1){n(i[r],t,"Pattern")}n(e.body,t,e.expression?"Expression":"Statement")},Kb.Pattern=function(e,t,n){"Identifier"===e.type?n(e,t,"VariablePattern"):"MemberExpression"===e.type?n(e,t,"MemberPattern"):n(e,t)},Kb.VariablePattern=Gb,Kb.MemberPattern=qb,Kb.RestElement=function(e,t,n){return n(e.argument,t,"Pattern")},Kb.ArrayPattern=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var o=i[r];o&&n(o,t,"Pattern")}},Kb.ObjectPattern=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];"Property"===o.type?(o.computed&&n(o.key,t,"Expression"),n(o.value,t,"Pattern")):"RestElement"===o.type&&n(o.argument,t,"Pattern")}},Kb.Expression=qb,Kb.ThisExpression=Kb.Super=Kb.MetaProperty=Gb,Kb.ArrayExpression=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var o=i[r];o&&n(o,t,"Expression")}},Kb.ObjectExpression=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1){n(i[r],t)}},Kb.FunctionExpression=Kb.ArrowFunctionExpression=Kb.FunctionDeclaration,Kb.SequenceExpression=function(e,t,n){for(var r=0,i=e.expressions;r<i.length;r+=1){n(i[r],t,"Expression")}},Kb.TemplateLiteral=function(e,t,n){for(var r=0,i=e.quasis;r<i.length;r+=1){n(i[r],t)}for(var o=0,s=e.expressions;o<s.length;o+=1){n(s[o],t,"Expression")}},Kb.TemplateElement=Gb,Kb.UnaryExpression=Kb.UpdateExpression=function(e,t,n){n(e.argument,t,"Expression")},Kb.BinaryExpression=Kb.LogicalExpression=function(e,t,n){n(e.left,t,"Expression"),n(e.right,t,"Expression")},Kb.AssignmentExpression=Kb.AssignmentPattern=function(e,t,n){n(e.left,t,"Pattern"),n(e.right,t,"Expression")},Kb.ConditionalExpression=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Expression"),n(e.alternate,t,"Expression")},Kb.NewExpression=Kb.CallExpression=function(e,t,n){if(n(e.callee,t,"Expression"),e.arguments)for(var r=0,i=e.arguments;r<i.length;r+=1){n(i[r],t,"Expression")}},Kb.MemberExpression=function(e,t,n){n(e.object,t,"Expression"),e.computed&&n(e.property,t,"Expression")},Kb.ExportNamedDeclaration=Kb.ExportDefaultDeclaration=function(e,t,n){e.declaration&&n(e.declaration,t,"ExportNamedDeclaration"===e.type||e.declaration.id?"Statement":"Expression"),e.source&&n(e.source,t,"Expression")},Kb.ExportAllDeclaration=function(e,t,n){n(e.source,t,"Expression")},Kb.ImportDeclaration=function(e,t,n){for(var r=0,i=e.specifiers;r<i.length;r+=1){n(i[r],t)}n(e.source,t,"Expression")},Kb.ImportSpecifier=Kb.ImportDefaultSpecifier=Kb.ImportNamespaceSpecifier=Kb.Identifier=Kb.Literal=Gb,Kb.TaggedTemplateExpression=function(e,t,n){n(e.tag,t,"Expression"),n(e.quasi,t,"Expression")},Kb.ClassDeclaration=Kb.ClassExpression=function(e,t,n){return n(e,t,"Class")},Kb.Class=function(e,t,n){e.id&&n(e.id,t,"Pattern"),e.superClass&&n(e.superClass,t,"Expression"),n(e.body,t)},Kb.ClassBody=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1){n(i[r],t)}},Kb.MethodDefinition=Kb.Property=function(e,t,n){e.computed&&n(e.key,t,"Expression"),n(e.value,t,"Expression")};var Yb=function(e,t){var n=zb(t||Kb);for(var r in e)n[r]=e[r];return n}({Import(){},SpreadProperty(e,t,n){n(e.argument,t,"Expression")},ObjectPattern(e,t,n){const r=e.properties;for(let i=0;i<r.length;++i){const e=r[i];n(e.value||e.argument,t,"Pattern")}},ViewExpression(e,t,n){n(e.id,t,"Identifier")},MutableExpression(e,t,n){n(e.id,t,"Identifier")}});function Xb(e){return"FunctionExpression"===e.type||"FunctionDeclaration"===e.type||"ArrowFunctionExpression"===e.type||"Program"===e.type}function Qb(e){return"BlockStatement"===e.type||"ForInStatement"===e.type||"ForOfStatement"===e.type||"ForStatement"===e.type||Xb(e)}function Jb(e){return"FunctionExpression"===e.type||"FunctionDeclaration"===e.type}const Zb=2,ey=4,ty=8;function ny(e,{globals:t}={}){return function(e,t,n=Bb){if(e.body&&"ImportDeclaration"!==e.body.type)try{e.references=function(e,t){const n={type:"Program",body:[e.body]},r=new Map,i=new Set(t),o=[];function s(e,t){const n=r.get(e);return!!n&&n.has(t)}function a(e,t){const n=r.get(e);n?n.add(t.name):r.set(e,new Set([t.name]))}function l(e){e.params.forEach(t=>c(t,e)),e.id&&a(e,e.id)}function c(e,t){switch(e.type){case"Identifier":a(t,e);break;case"ObjectPattern":e.properties.forEach(e=>c(e,t));break;case"ArrayPattern":e.elements.forEach(e=>e&&c(e,t));break;case"Property":c(e.value,t);break;case"RestElement":c(e.argument,t);break;case"AssignmentPattern":c(e.left,t);break;default:throw new Error("Unrecognized pattern type: "+e.type)}}function u(e){a(n,e.local)}function h(e,t){let n=e.name;if("undefined"!==n){for(let r=t.length-2;r>=0;--r){if("arguments"===n&&Jb(t[r]))return;if(s(t[r],n))return;"ViewExpression"===t[r].type&&(n=`viewof ${(e=t[r]).id.name}`),"MutableExpression"===t[r].type&&(n=`mutable ${(e=t[r]).id.name}`)}if(!i.has(n)){if("arguments"===n)throw Object.assign(new ReferenceError("arguments is not allowed"),{node:e});i.add(n),o.push(e)}}}function d(e,t){switch(e.type){case"Identifier":case"VariablePattern":n(e,t);break;case"ArrayPattern":case"ObjectPattern":Vb(e,{Identifier:n,VariablePattern:n},Yb)}function n(e,n){for(const r of t)if(s(r,e.name))return;if("MutableExpression"!==n[n.length-2].type)throw Object.assign(new TypeError(`Assignment to constant variable ${e.name}`),{node:e})}}function p(e,t){d(e.left,t)}return Vb(n,{VariableDeclaration:(e,t)=>{let n=null;for(let r=t.length-1;r>=0&&null===n;--r)("var"===e.kind?Xb(t[r]):Qb(t[r]))&&(n=t[r]);e.declarations.forEach(e=>c(e.id,n))},FunctionDeclaration:(e,t)=>{let n=null;for(let r=t.length-2;r>=0&&null===n;--r)Xb(t[r])&&(n=t[r]);a(n,e.id),l(e)},Function:l,ClassDeclaration:(e,t)=>{let n=null;for(let r=t.length-2;r>=0&&null===n;r--)Xb(t[r])&&(n=t[r]);a(n,e.id)},Class:function(e){e.id&&a(e,e.id)},CatchClause:function(e){e.param&&c(e.param,e)},ImportDefaultSpecifier:u,ImportSpecifier:u,ImportNamespaceSpecifier:u},Yb),Vb(n,{VariablePattern:h,Identifier:h},Yb),Vb(n,{AssignmentExpression:p,UpdateExpression:function(e,t){d(e.argument,t)},ForOfStatement:p,ForInStatement:p},Yb),o}(e,n)}catch(r){if(r.node){const e=Vv(t,r.node.start);r.message+=` (${e.line}:${e.column})`,r.pos=r.node.start,r.loc=e,delete r.node}throw r}return e}(ry.parse(e),e,t)}class ry extends(Zv.extend(Ub,Wb)){constructor(...e){super(...e)}enterScope(e){return e&Zb&&++this.O_function,super.enterScope.apply(this,arguments)}exitScope(){return this.currentScope().flags&Zb&&--this.O_function,super.exitScope.apply(this,arguments)}parseForIn(e){return 1===this.O_function&&e.await&&(this.O_async=!0),super.parseForIn.apply(this,arguments)}parseAwait(){return 1===this.O_function&&(this.O_async=!0),super.parseAwait.apply(this,arguments)}parseYield(){return 1===this.O_function&&(this.O_generator=!0),super.parseYield.apply(this,arguments)}parseImport(e){return this.next(),e.specifiers=this.parseImportSpecifiers(),this.type===Lv._with&&(this.next(),e.injections=this.parseImportSpecifiers()),this.expectContextual("from"),e.source=this.type===Lv.string?this.parseExprAtom():this.unexpected(),this.finishNode(e,"ImportDeclaration")}parseImportSpecifiers(){const e=[];let t=!0;for(this.expect(Lv.braceL);!this.eat(Lv.braceR);){if(t)t=!1;else if(this.expect(Lv.comma),this.afterTrailingComma(Lv.braceR))break;const n=this.startNode();n.view=this.eatContextual("viewof"),n.view||(n.mutable=this.eatContextual("mutable")),n.imported=this.parseIdent(),this.eatContextual("as")?n.local=this.parseIdent():(this.checkUnreserved(n.imported),n.local=n.imported),this.checkLVal(n.local,"let"),e.push(this.finishNode(n,"ImportSpecifier"))}return e}parseExprAtom(){return this.parseMaybeKeywordExpression("viewof","ViewExpression")||this.parseMaybeKeywordExpression("mutable","MutableExpression")||super.parseExprAtom.apply(this,arguments)}parseCell(e,t){const n=new ry({},this.input,this.start);let r=n.getToken(),i=null,o=null;return this.O_function=0,this.O_async=!1,this.O_generator=!1,this.strict=!0,this.enterScope(Zb|ey|ty),r.type===Lv._import&&n.getToken().type!==Lv.parenL?i=this.parseImport(this.startNode()):r.type!==Lv.eof&&r.type!==Lv.semi&&(r.type===Lv.name&&("viewof"!==r.value&&"mutable"!==r.value||(r=n.getToken()).type!==Lv.name&&n.unexpected(),(r=n.getToken()).type===Lv.eq&&(o=this.parseMaybeKeywordExpression("viewof","ViewExpression")||this.parseMaybeKeywordExpression("mutable","MutableExpression")||this.parseIdent(),r=n.getToken(),this.expect(Lv.eq))),r.type===Lv.braceL?i=this.parseBlock():(i=this.parseExpression(),null!==o||"FunctionExpression"!==i.type&&"ClassExpression"!==i.type||(o=i.id))),this.semicolon(),t&&this.expect(Lv.eof),e.id=o,e.async=this.O_async,e.generator=this.O_generator,e.body=i,this.exitScope(),this.finishNode(e,"Cell")}parseTopLevel(e){return this.parseCell(e,!0)}toAssignable(e){return"MutableExpression"===e.type?e:super.toAssignable.apply(this,arguments)}checkUnreserved(e){return"viewof"!==e.name&&"mutable"!==e.name||this.raise(e.start,`Unexpected keyword '${e.name}'`),super.checkUnreserved(e)}checkLVal(e,t,n){return"MutableExpression"===e.type?super.checkLVal.call(this,e.id,t,n):super.checkLVal.apply(this,arguments)}unexpected(e){this.raise(null!=e?e:this.start,this.type===Lv.eof?"Unexpected end of input":"Unexpected token")}parseMaybeKeywordExpression(e,t){if(this.isContextual(e)){const e=this.startNode();return this.next(),e.id=this.parseIdent(),this.finishNode(e,t)}}}var iy=new Set(["Array","ArrayBuffer","atob","AudioContext","Blob","Boolean","BigInt","btoa","clearInterval","clearTimeout","console","crypto","CustomEvent","DataView","Date","decodeURI","decodeURIComponent","devicePixelRatio","document","encodeURI","encodeURIComponent","Error","escape","eval","fetch","File","FileList","FileReader","Float32Array","Float64Array","Function","Headers","Image","ImageData","Infinity","Int16Array","Int32Array","Int8Array","Intl","isFinite","isNaN","JSON","Map","Math","NaN","Number","navigator","Object","parseFloat","parseInt","performance","Path2D","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","cancelAnimationFrame","requestAnimationFrame","Set","setInterval","setTimeout","String","Symbol","SyntaxError","TextDecoder","TextEncoder","this","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","undefined","unescape","URIError","URL","WeakMap","WeakSet","WebSocket","Worker","window"]);class oy{constructor(){this._nameNode=null,this._inputNodes=[],this._offsets=[{line:1,column:0,lineOffset:0,columnOffset:0}]}_ensureOffset(e,t){let n=this._closest(e,t);n&&n.line===e&&n.column===t||this._offsets.push({line:e,column:t,lineOffset:n?n.lineOffset:0,columnOffset:n&&n.line===e?n.columnOffset:0})}_closest(e,t){let n=null;return this._offsets.forEach(r=>{(r.line<e||r.line===e&&r.column<=t)&&(!n||r.line>n.line||r.line===n.line&&r.column>n.column)&&(n=r)}),n}translate(e,t){const n=this._closest(e,t);if(n)return{line:e+n.lineOffset,column:e===n.line?t+n.columnOffset:t}}translateError(e){let t;if(e.runtime){const t=e.runtime.input?this._inputNodes.find(t=>e.runtime.input===("ViewExpression"===t.type?`viewof ${t.id.name}`:t.name)):this._nameNode;return t&&{line:t.location.line,column:t.location.column+1}}if(e.message&&(t=/^[\s\S]+\((\d+):(\d+)\)$/m.exec(e.message)))return this.translate(+t[1],+t[2]+1);if(e.stack){const n=e.stack.split("\n");for(let e=n.length-1;e>=0;e--){const r=n[e];if((t=/<anonymous>:(\d+):(\d+)\)$/.exec(r))||(t=/Function:(\d+):(\d+)$/.exec(r)),t)return this.translate(+t[1],+t[2])}}}name(e){this._nameNode=e}inputs(e){this._inputNodes=e}insert(e,t,n){const{line:r,column:i}=Vv(e,t),o=Vv(n,n.length);return--o.line,this._ensureOffset(r,i),this._offsets.forEach(e=>{if(e.line>r)e.line+=o.line,e.lineOffset-=o.line;else if(e.line===r&&e.column>=i)if(e.line+=o.line,e.lineOffset-=o.line,o.line){const t=o.column+(e.column-i);e.columnOffset+=e.column-t,e.column=t}else e.column+=o.column,e.columnOffset-=o.column}),e.slice(0,t)+n+e.slice(t)}delete(e,t,n){const{line:r,column:i}=Vv(e,t),{line:o,column:s}=Vv(e,n),a=o-r,l=o===r?s-i:0;return this._ensureOffset(o,s),this._offsets=this._offsets.filter(e=>{if(r<e.line&&o>e.line||e.line===r&&o>r&&e.column>=i||e.line===o&&r<o&&e.column<s||r===e.line&&o===e.line&&e.column>=i&&e.column<s)return!1;if(e.line>r){if(e.line===o){const t=i+e.column-s;e.columnOffset+=e.column-t,e.column=t}e.line-=a,e.lineOffset+=a}else e.line===r&&e.line===o&&e.column>=s&&(e.column-=l,e.columnOffset+=l);return!0}),e.slice(0,t)+e.slice(n)}sort(){return this._offsets.sort((e,t)=>e.line===t.line?e.column-t.column:e.line-t.line),this}}const sy=/^\s*#+\s*(.*)$/m;async function ay(e,t,n,r){const i=new Map,o=new Map,s=l(e,t,n);function a(e){let t=i.get(e);return t||i.set(e,t=async function(e){const t=await r(e),n=new Map;return t.nodes.forEach(t=>{const r=hy(t.value);if(r.name)n.set(r.name,r);else if(r.imports){const i=l(e,t.id,r);r.imports.forEach(e=>{n.set(e.name,{name:e.name,remote:e.remote,module:i})})}}),n}(e)),t}function l(e,t,n){let r=n.module;if(!n.exports)return r;let o=e+"/"+t;return i.set(o,a(r).then(t=>(t=new Map(t),n.exports.forEach(n=>{t.set(n.name,{name:n.name,remote:n.remote,module:e})}),t))),o}try{await async function t(n,r,i){if(n===e)return;if(i>8)throw new RangeError("Maximum import stack size exceeded");const s=await a(n);let l=o.get(n);const c=new Map;l||o.set(n,l=new Map);for(const e of r){let t=s.get(e);if(t)if(l.set(e,t),t.module){let e=c.get(t.module);e||c.set(t.module,e=new Set),e.add(t.remote)}else t.inputs.forEach(r.add,r)}for(const[e,o]of c)await t(e,o,i+1)}(s,(c=n.imports,new Set(c.map(ly))),1)}catch(u){return{name:void 0,view:!1,inputs:[],body:`throw new ${u.constructor.name}(${JSON.stringify(u.message)})`,sourcemap:new oy}}var c;return{id:s,imports:n.imports,module:n.module,modules:Array.from(o,cy)}}function ly(e){return e.remote}function cy(e){return{id:e[0],values:Array.from(e[1].values())}}const uy={globals:iy};function hy(e){const t=new oy;try{const r={},i=ny(e,uy),o=new Map;let s,a=!1,l=!1;if(null===i.body)return{name:s,view:a,mutable:l,inputs:[],features:r,body:"",sourcemap:t};if("ImportDeclaration"===i.body.type)return function(e){return{module:e.source.value,imports:fy(e.specifiers),exports:e.injections&&fy(e.injections)}}(i.body);const{references:c}=i;for(const t of c)t.location=Vv(e,t.start);let u;t.inputs(c);let h=0;const d=function(n){let r=o.get(n.id.name);if(!r){let e=-1;u||(u=function(e){const t=new Set;return Vb(e,{Identifier:e=>t.add(e.name)},Yb),t}(i.body));do{r=`$${++e}`}while(u.has(r));u.add(r),o.set(n.id.name,r)}const s="ViewExpression"===n.type?r:`${r}.value`;e=t.delete(e,n.start+h,n.end+h),e=t.insert(e,n.start+h,s),h+=n.start-n.end+s.length};if(Vb(i.body,{ViewExpression:d,MutableExpression:d},Yb),Vb(i.body,{Import:function(n,i){const o=i[i.length-2].arguments[0];r.dynamicImport=!0,"Literal"!==o.type||/^(\w+:|\.?\.?\/)/.test(o.value)||(e=t.insert(e,o.end-1+h,"?module"),e=t.insert(e,o.start+1+h,"https://unpkg.com/"),h+=25)}},Yb),Vb(i.body,{Literal:function(e){e.bigint&&(r.bigInt=!0)}},Yb),i.id){a="ViewExpression"===i.id.type,l="MutableExpression"===i.id.type;const n=a||l?i.id.id:i.id;if(s=n.name,n.location=Vv(e,n.start),iy.has(s)||"arguments"===s){const{line:e,column:t}=n.location;throw new ReferenceError(`${s} is reserved (${e}:${t})`)}t.name(n)}i.body.end+h<e.length&&(e=t.delete(e,i.body.end+h,e.length)),i.body.start>0&&(e=t.delete(e,0,i.body.start)),i.async&&i.generator&&(r.asyncGenerator=!0);let p=`${i.async?"async ":""}function${i.generator?"*":""}`;const f=c.map(py,o);return"BlockStatement"===i.body.type?(e=t.insert(e,0,`"use strict";(${p}(${f})\n`),e=t.insert(e,e.length,"\n)")):(e=t.insert(e,0,`"use strict";(${p}(${f}){return(\n`),e=t.insert(e,e.length,"\n)})")),t.sort(),{name:s,view:a,mutable:l,inputs:c.map(dy),body:e,features:r,sourcemap:t}}catch(n){return{name:void 0,view:!1,mutable:!1,features:{},inputs:[],body:`throw new ${n.constructor.name}(${JSON.stringify(n.message)})`,sourcemap:new oy}}}function dy(e){return"ViewExpression"===e.type?`viewof ${e.id.name}`:"MutableExpression"===e.type?`mutable ${e.id.name}`:e.name}function py(e){return"ViewExpression"===e.type||"MutableExpression"===e.type?this.get(e.id.name):e.name}function fy(e){const t=[];for(const{local:{name:n},imported:{name:r},view:i,mutable:o}of e)t.push({name:n,remote:r}),i?t.push({name:`viewof ${n}`,remote:`viewof ${r}`}):o&&t.push({name:`mutable ${n}`,remote:`mutable ${r}`});return t}const my=e=>e?`https://${e}.static.observableusercontent.com`:"https://anonymous.static.observableusercontent.com";class gy extends G.Component{constructor(...e){super(...e),qc(this,"ref",null),qc(this,"queue",null),qc(this,"workerResolve",null),qc(this,"worker",null),qc(this,"hoverId",null),qc(this,"onRef",e=>{this.ref=e}),qc(this,"onWorkerLoaded",()=>{const{id:e,path:t}=this.props;this.worker.postMessage({type:"hello",id:e,path:t},"*")}),qc(this,"onWorkerMessaged",e=>{const{login:t}=this.props;if(e.origin!==my(t)||e.source!==this.worker)return;const{onWorkerEvent:n,onNodeHover:r}=this.props;switch(e.data.type){case"ready":this.workerResolve();break;case"hover":return void r(this.hoverId=e.data.id)}n(e.data)}),qc(this,"importNotebook",async e=>{if(!/^([0-9a-f]{16}|@[0-9a-z_-]+\/[0-9a-z_-]+(\/[0-9]+)?)(@\d+)?$/i.test(e))throw new ReferenceError("notebook not found");const t=await fetch(`https://api.observablehq.com/document/${e}`,{credentials:"include"});if(404===t.status)throw new ReferenceError("notebook not found");if(!t.ok)throw new Error("unable to load notebook");const n=await t.json(),{login:r}=this.props;if(!n.publish_time&&n.owner.login!==r)throw new ReferenceError("notebook not found");return n})}componentDidMount(){addEventListener("message",this.onWorkerMessaged),this.queue=new Promise(e=>this.workerResolve=e),this.worker=this.ref.contentWindow,this.queueEvents()}componentWillReceiveProps({id:e,path:t}){this.props.id===e&&this.props.path===t||this.worker.postMessage({type:"hello",id:e,path:t},"*")}componentDidUpdate(){this.queueEvents()}componentWillUnmount(){removeEventListener("message",this.onWorkerMessaged),this.queue=null,this.workerResolve=null,this.worker=null}queueEvents(){const{events:e}=this.props;e.length&&(this.queue=this.queue.then(this.postEvents.bind(this,e.map(this.processEvent,this))),e.length=0)}async processEvent(e){const{id:t}=this.props;switch(e.type){case"insert_node":case"modify_node":let n=e.new_node_value;n.imports&&((n=await ay(t,e.node_id,n,this.importNotebook)).origin="https://beta.observablehq.com",e.new_node_value=n)}return e}async postEvents(e){e=await Promise.all(e),this.worker&&this.worker.postMessage({type:"bundle",events:e},"*")}render(){const{login:e,height:t,pointerEvents:n}=this.props;return G.createElement("iframe",{ref:this.onRef,onLoad:this.onWorkerLoaded,style:{height:t,minWidth:"100%",width:0},className:`absolute bn ${n?"":"pen"}`,scrolling:"no",sandbox:`allow-same-origin allow-scripts allow-popups allow-forms allow-popups-to-escape-sandbox allow-top-navigation${/\bfirefox\b/i.test(navigator.userAgent)?"":"-by-user-activation"}`,allow:"geolocation; microphone; camera; midi; encrypted-media; autoplay; accelerometer; magnetometer; gyroscope; vr",allowFullScreen:!0,src:my(e)+"/worker/worker.f0307b57a96cd26df0723bc2dfc3d2fa58b5d057c846ef352e9df998f7648783.html"})}}function vy({collection:e,notebook:t,add:n}){const r=!!t.collections.find(t=>t.id==e.id);return G.createElement("div",{className:`flex items-center pb1 ${r?"black":"black-50"} pointer`},G.createElement("input",{type:"checkbox",id:`collection-${e.id}`,checked:r,onChange:()=>n(e,r)}),G.createElement("label",{htmlFor:`collection-${e.id}`,title:`@${e.owner.login}/${e.slug}`,className:"flex-auto pl2 truncate"},e.title))}class by extends G.Component{constructor(...e){super(...e),qc(this,"state",{collectionGroups:void 0,notebook:void 0,newCollectionTitle:void 0}),qc(this,"add",async(e,t)=>{const{api:n,notebook:{id:r}}=this.props;t?(this.setState(({notebook:t})=>({notebook:Gc({},t,{collections:t.collections.filter(t=>t.id!==e.id)})})),await n.collectionRemoveDocument({id:e.id,document_id:r})):(this.setState(({notebook:t})=>({notebook:Gc({},t,{collections:t.collections.concat(e)})})),await n.collectionAddDocument({id:e.id,document_id:r}))}),qc(this,"onChangeNewCollectionTitle",e=>{this.setState({newCollectionTitle:e.target.value})}),qc(this,"createAndAdd",async e=>{const{api:t,notebook:{id:n},onDismiss:r}=this.props;e.preventDefault();const{newCollectionTitle:i}=this.state;if(!i)return;this.setState({newCollectionTitle:void 0});const{id:o}=await t.collectionNew({title:i,description:"",pinned:!1});await t.collectionAddDocument({id:o,document_id:n}),r()})}componentWillMount(){this.reload()}componentWillReceiveProps(e){this.setState({collectionGroups:[]}),this.reload(e)}reload(e=this.props){const{api:t,user:n,team:r,notebook:i}=e,{id:o}=i;if(!n)return;let s=[];i.owner.id===n.id&&s.push(n);const a=n.teams.find(e=>"observablehq"===e.login);a&&s.push(a),r&&(n.teams.find(e=>e.id===r.id)&&!a||r.id!==a.id)&&s.push(r),t.init({cache:"no-cache"}).documentLoad(o).then(e=>(this.setState({notebook:e}),Promise.all(s.map(n=>t.init({cache:"no-cache"}).collectionsLoadUser(n.login).then(t=>({user:n,collections:t.map(e=>Gc({owner:n},e)).sort(t=>e.collections.find(e=>e.id==t.id)?-1:1)})))))).then(e=>{this.setState({collectionGroups:e.sort(({user:e},{user:t})=>e.id===n.id?-1:t.id===n.id?1:e.login>t.login)})})}render(){const{onDismiss:e}=this.props,{collectionGroups:t,notebook:n,newCollectionTitle:r}=this.state;return G.createElement("div",{className:"relative w5 pa2"},G.createElement("div",{onClick:e,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(Eu,{className:"w1 h1"})),G.createElement("h3",{className:"ma0 mb2 f4 fw4 black-70"},"Add to collection"),G.createElement("div",{className:"pa2 bg-near-white br2 overflow-auto",style:{minHeight:80,maxHeight:250}},t&&(t.some(({collections:e})=>e.length)?t.map(({collections:e,user:t},r)=>G.createElement("div",{key:t.id,className:r>0?"bt b--black-10 pt2 mt2":""},G.createElement("div",{className:"flex items-center pb2 black-50"},G.createElement(uh,{user:t,s:16,className:"mr1 br-100"}),G.createElement("span",null,t.name||t.login)),e.map(e=>G.createElement(vy,{collection:e,notebook:n,key:e.id,add:this.add})))):G.createElement("div",{className:"lh-copy tc black-70"},"You don’t have any collections."))),G.createElement("div",{className:"pt3"},G.createElement(Yp,{highlight:!0,type:"button",onClick:e},"Done")),G.createElement("form",{onSubmit:this.createAndAdd,className:"flex flex-column flex-auto items-stretch mt3 bt b--black-10"},G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"name"},"Add to new collection"),G.createElement("div",{className:"flex items-stretch ba b--black-10 br2"},G.createElement("input",{minLength:"1",maxLength:"255",name:"title",className:"flex-auto pa2 black-70 br2 br--left bn hover-b--black-30",placeholder:"Title",required:!0,value:r,onChange:this.onChangeNewCollectionTitle}),G.createElement("button",{className:`ph3 pv2 f6 fw6 br--right br2 pointer bn\n              ${r?"white bg-blue hover-bg-dark-blue pointer":"white bg-light-gray"}`},"Add"))))}}class yy extends G.Component{constructor(...e){super(...e),qc(this,"state",{suggesting:!1,description:""}),qc(this,"setDescription",({target:{value:e}})=>{this.setState({description:e})}),qc(this,"send",e=>{e.preventDefault(),this.setState({suggesting:!0});const{description:t}=this.state,{suggest:n,suggestFromTeam:r}=this.props;n({description:t,team:r})})}render(){const{onDismiss:e,recipient:t,suggester:n,editable:r,notebookStatus:i}=this.props,{description:o,suggesting:s}=this.state;return G.createElement(nh,{onDismiss:e},G.createElement("form",{onSubmit:this.send},G.createElement("h3",{className:"mt1 mb1 mr7-ns f4 fw7 black-70"},"Send suggestion"),G.createElement("p",{className:"f6 lh-copy black-50"},G.createElement(uh,{user:t,s:16,className:"mr1 br-100",style:{verticalAlign:"sub"}}),t.name||t.login," will be notified",n.id!==t.id?" and allowed to comment":"","."),G.createElement("input",{type:"text",maxLength:"255",placeholder:"Brief description of changes…",autoFocus:!0,value:o,onChange:this.setDescription,className:"w-100 pa2 f6 bg-near-white ba b--black-20 br2"}),G.createElement("div",{className:"flex-ns items-center-ns justify-between-ns mt3 tr"},G.createElement("div",{className:"mt2 mt0-ns mr3-ns f7 tl black-50"},(!r||"private"===i)&&n.id!==t.id&&"The notebook will be visible to anyone with the link."),G.createElement("div",{className:"mt3 mt0-ns"},G.createElement("span",{className:"mr2"},G.createElement(Yp,{type:"button",secondary:!0,onClick:e},"Cancel")),G.createElement(Yp,{type:"submit",highlight:!s,disabled:s},"Send")))))}}const wy=Symbol("ALREADY_PUBLISHED"),ky=Symbol("ALREADY_SHARED"),Ey=Symbol("NEVER_PUBLISHED"),xy=Symbol("NEVER_PUBLISHED_IN_TEAM"),Sy=Symbol("NEEDS_REPUBLISH"),Cy=Symbol("NEEDS_RESHARE");function _y({notebook:e,state:t,publish:n,share:r,inList:i}){const{owner:o}=e;const s={[wy]:"This notebook has already been published with these changes.",[Sy]:"This notebook has been edited since publishing.",[ky]:"This notebook has already been shared with these changes.",[Cy]:"This notebook has been edited since sharing."}[t]||"",a=i?"flex w-100 items-center ph3 pv2 f6 fw6 black-70 bn bg-white hover-black hover-bg-near-white pointer":`br2 pv2 ph2 f6 inline-flex fw6 mr3-ns mr2 ${{[Ey]:"bn black-70 hover-black bg-light-gray hover-bg-moon-gray pointer",[xy]:"bn black-70 hover-black bg-light-gray hover-bg-moon-gray pointer",[Sy]:"bn white bg-blue hover-bg-dark-blue pointer",[wy]:"bn black-40 bg-light-gray",[Cy]:"bn white bg-blue hover-bg-dark-blue pointer",[ky]:"bn black-40 bg-light-gray"}[t]}`;return G.createElement("button",{onClick:r||(()=>{Xh(e)&&!confirm(`Are you sure you want to publish this ${o.name||o.login} team notebook? This will make the notebook publicly visible.`)||n()}),disabled:!i&&(t===wy||t===ky),title:s,className:a},G.createElement(Ru,{className:"w1 h1 mr1-ns"}),G.createElement("span",{className:"dn di-ns"},r?"Reshare":"Publish",Xh(e)?"…":""))}class Ty extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{actionsPopover:!1,addToCollectionModal:!1,suggestModal:!1,suggestFromTeam:void 0}),qc(this,"toggleActionsPopover",e=>{e.stopPropagation(),this.setState({actionsPopover:!this.state.actionsPopover})}),qc(this,"share",async()=>{!function(e){const t=document.body.appendChild(document.createElement("input"));t.style.position="absolute",t.style.left="-9999px",t.setAttribute("readonly",""),t.value=""+e,t.select();try{document.execCommand("copy")}catch(n){return!1}finally{t.parentNode.removeChild(t)}}(window.location.href);const{user:e,notebook:t,publishUnlisted:n}=this.props;this.setState({actionsPopover:!1}),Oh(e,t)&&await n()}),qc(this,"unpublish",async()=>{const{unpublish:e}=this.props;this.setState({actionsPopover:!1}),e()}),qc(this,"merge",()=>{const{merge:e,baseNotebook:t}=this.props;confirm(`Are you sure you want to merge these changes into ‘${Jh(t)}’?`)&&e()}),qc(this,"showAddToCollectionModal",()=>{this.setState({addToCollectionModal:!0,actionsPopover:!1})}),qc(this,"hideAddToCollectionModal",()=>{const{reloadCollections:e}=this.props;this.setState({addToCollectionModal:!1}),e()}),qc(this,"download",async e=>{const{user:t,notebook:n,publishUnlisted:r}=this.props;if(this.toggleActionsPopover(e),Oh(t,n)){const t=e.target.href,n=window.open("about:blank","_blank");e.preventDefault(),await r(),n.location=t}}),qc(this,"trash",()=>{if(!confirm("Are you sure you want to move this notebook to the trash?"))return;const{trash:e}=this.props;this.setState({actionsPopover:!1}),e()}),qc(this,"toggleSuggestModal",(e={})=>{const{team:t}=e;this.setState(({suggestModal:e})=>({suggestFromTeam:t||void 0,suggestModal:!e,actionsPopover:!1}))}),qc(this,"revert",()=>{const{revert:e,notebook:t}=this.props;confirm(`Are you sure you want to discard your ${Fh(t)?"unpublished":"unshared"} changes?`)&&(this.setState({actionsPopover:!1}),e())}),qc(this,"fullscreen",()=>{const{fullscreen:e}=this.props;this.setState({actionsPopover:!1}),e()}),qc(this,"fork",(...e)=>{this.setState({actionsPopover:!1}),this.props.fork.apply(this,e)}),qc(this,"suggest",(...e)=>{this.setState({actionsPopover:!1}),this.props.suggest.apply(this,e)}),qc(this,"closeSuggestion",(...e)=>{this.setState({actionsPopover:!1}),this.props.closeSuggestion.apply(this,e)}),qc(this,"transfer",(...e)=>{this.setState({actionsPopover:!1}),this.props.transfer.apply(this,e)})}render(){const{actionsPopover:e,addToCollectionModal:t,suggestModal:n,suggestFromTeam:r}=this.state,{user:i,type:o,publish:s,notebook:a,baseNotebook:l,primaryAction:c,unsavedChanges:u,hasUnpublishedChanges:h,editable:d,notebookStatus:p,fullscreen:f,suggestion:m}=this.props,{comments:g,slug:v,id:b,fork_of:y,owner:w}=a,k=jh(a),E=c===kh||c===Eh||c===xh,x=k?h?Cy:ky:v?h?Sy:wy:"team"===w.type?xy:Ey,S=r||(d?w:i),C="compare"===o?l&&l.owner:d?y?y.owner:null:w;return G.createElement(G.Fragment,null,G.createElement("div",{className:"relative",key:"2"},G.createElement("button",{title:"More actions…",onClick:this.toggleActionsPopover,className:"pointer flex fw6 black-20 hover-black-50 bg-transparent mr2 br2 pv2 ph2 bn f6"},G.createElement(Ju,null)),e&&G.createElement(vh,{extraStyle:{right:-2,width:"13rem"},onClickOutside:this.toggleActionsPopover},G.createElement("div",{className:"pv2"},m&&!m.close_time&&G.createElement("a",{onClick:this.closeSuggestion,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},G.createElement(Eu,{className:"w1 h1 mr1"}),"Close suggestion"),d&&(!E||E&&k)&&G.createElement(_y,{notebook:a,inList:!0,publish:s,state:x}),d&&!v&&!(E&&k)&&G.createElement("a",{onClick:this.share,className:"flex items-center justify-between ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},G.createElement("div",{className:"flex items-center"},G.createElement(zu,{className:"w1 h1 mr1"}),"Share link")),d&&(Ih(i,a)||function(e,t){return Ah(e,t)&&jh(t)}(i,a))&&G.createElement("a",{onClick:this.unpublish,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-red hover-bg-near-white pointer"},G.createElement(Eu,{className:"w1 h1 mr1"}),v?"Unpublish":"Unshare"),(Rh(i,a)||function(e,t){return!Ah(e,t)&&Vh(t)&&!Yh(t)&&(zh(t)||Gh(t))}(i,a))&&c!==Nh&&c!==Ph&&G.createElement(Pp,{inList:!0,notebook:a,onClick:this.toggleSuggestModal}),c!==Sh&&c!==Ch&&G.createElement(Tp,{fork:this.fork,inList:!0}),"compare"!==o&&d&&h&&G.createElement("a",{onClick:this.revert,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},G.createElement(gu,{className:"w1 h1 mr1"}),"Revert…"),"compare"!==o&&i&&(d||function(e){if(null==e)return!1;const{teams:t}=e;return t.some(e=>"observablehq"===e.login)}(i))&&v&&G.createElement("a",{onClick:this.showAddToCollectionModal,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},G.createElement(Fu,{className:"w1 h1 mr1"}),"Add to collection…"),f&&G.createElement("a",{onClick:this.fullscreen,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},G.createElement(mu,{className:"w1 h1 mr1"}),"Fullscreen"),("default"===o&&y||"versioned"===o)&&G.createElement(Wc,{to:"default"===o?`/compare/${y.id}...${b}`:`/compare/${b}@${a.save_version}...${b}`,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white no-underline pointer"},G.createElement(yu,{className:"w1 h1 mr1"}),"default"===o?"Compare fork":"Compare to latest"),"compare"===o&&(T=a,!((_=l)&&T&&_.id===T.id&&_.save_version===T.save_version))&&G.createElement(G.Fragment,null,G.createElement(Wc,{className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white no-underline pointer",to:td(a,Vh(a)?null:a.save_version,l,Vh(l)?null:l.save_version)},G.createElement(Tu,{className:"w1 h1 mr1"}),"Compare reverse")),"compare"!==o&&d&&!v&&G.createElement(Np,{transfer:this.transfer,owner:w,inList:!0}),"compare"!==o&&G.createElement(G.Fragment,null,G.createElement("a",{href:Zh(a,"js"),onClick:this.download,rel:"noopener noreferrer",target:"_blank",className:"flex items-center ph3 pv2 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(Uu,{className:"w1 h1 mr1"}),"Download code"),G.createElement("a",{href:Zh(a,"tgz"),onClick:this.download,rel:"noopener noreferrer",target:"_blank",className:"flex items-center ph3 pv2 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(xu,{className:"w1 h1 mr1"}),"Download tarball")),d&&G.createElement("a",{onClick:this.trash,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-red hover-bg-near-white pointer"},G.createElement(Du,{className:"w1 h1 mr1"}),"Trash…"))),t&&G.createElement(nh,{onDismiss:this.hideAddToCollectionModal},G.createElement(ih.Consumer,null,e=>G.createElement(by,{notebook:a,api:e,user:i,team:"team"===w.type?w:null,onDismiss:this.hideAddToCollectionModal})))),E?G.createElement("div",{className:"inline-flex items-center"},G.createElement(_y,{notebook:a,share:k&&this.share,publish:s,state:x})):c===Sh||c===Ch?G.createElement(Tp,{fork:this.fork,highlight:c===Ch}):c===_h||c===Th?G.createElement("button",{onClick:this.merge,className:`br2 pa2 f6 inline-flex fw6 mr3-ns mr2 bn pointer ${c===Th?"white bg-blue hover-bg-dark-blue":"black-70 hover-black bg-light-gray hover-bg-moon-gray"}`},G.createElement(Nu,{className:"w1 h1 v-top mr1-ns"}),G.createElement("span",{className:"dn db-ns"},"Merge")):c===Nh||c===Ph?G.createElement(Pp,{onClick:this.toggleSuggestModal,notebook:a,highlight:c===Ph}):null,n?G.createElement(yy,{suggest:this.suggest,suggestFromTeam:r,onDismiss:()=>this.setState({suggestModal:!1}),recipient:C,suggester:S,unsavedChanges:u,editable:d,notebookStatus:p,highlight:u>0||g.length>0,type:o}):null);var _,T}}function Ny({forkFromPlayground:e}){return G.createElement(G.Fragment,null,G.createElement("div",{className:"relative",key:"2"},G.createElement("button",{onClick:e,className:"br2 pa2 f6 inline-flex fw6 mr3-ns mr2 bn white bg-blue hover-bg-dark-blue pointer"},G.createElement(Vu,{className:"w1 h1 v-top mr2-ns"}),G.createElement("span",{className:"dn db-ns mr2-ns"},"Save"))))}const Py=G.memo(function({notebook:{collections:e}}){let t=hm(e.map(({slug:e,owner:{login:t},title:n},r)=>G.createElement(Wc,{key:r,className:"no-underline black-70 hover-blue",to:`/collection/@${t}/${e}`},n)));return G.createElement("div",{className:"inline-flex mr4 f6 fw4 black-50"},G.createElement(Fu,{className:"mr1 black-30",style:{strokeWidth:1}}),G.createElement("div",null,"Featured in ",t))});function Ay({notebook:e}){return G.createElement("div",{className:"relative"},G.createElement("div",{className:"br--top cover bg-center",style:Gc({paddingTop:"62.5%"},{backgroundImage:e&&e.thumbnail?`url(https://static.observableusercontent.com/thumbnail/${e.thumbnail}.jpg)`:"var(--checkboard)"})}),G.createElement("div",{className:"truncate"},G.createElement("div",{className:"f6 fw4 db ph2 flex lh-solid"},G.createElement("div",{title:e.title||"",className:"pv2 truncate"},Jh(e)))))}const Ly=G.memo(function({collection:e,notebook:{id:t}}){let n,r,i=e.documents.findIndex(e=>e.id===t);i>0&&(n=e.documents[i-1]),i<e.documents.length-1&&(r=e.documents[i+1]);const{owner:{login:o}}=e;return G.createElement("div",{className:"pb4"},G.createElement("div",{className:"pv2 pt2 pt4-ns f5 fw7 black-50"},"Continue reading"," ",G.createElement(Wc,{className:"no-underline black-70 hover-blue",to:`/collection/@${o}/${e.slug}`},e.title)),G.createElement("div",{className:"mw6 pt2 cf"},n&&G.createElement(Wc,{to:Qh(n),className:"w-50 pr1 pr2-ns no-underline fl"},G.createElement("div",{className:"db pv1 f7 fw4 tracked ttu black-50"},"Previous"),G.createElement("div",{className:"black hover-blue bg-white br2 overflow-hidden hover-shadow-4"},G.createElement(Ay,{notebook:n,id:t}))),r&&G.createElement(Wc,{to:Qh(r),className:`fl w-50 no-underline${n?" pl1 pl2-ns":""}`},G.createElement("div",{className:"db pv1 f7 fw4 tracked ttu black-50"},"Next"),G.createElement("div",{className:"black hover-blue bg-white br2 overflow-hidden hover-shadow-4"},G.createElement(Ay,{notebook:r,id:t})))))});class My extends G.PureComponent{constructor(...e){super(...e),qc(this,"closeSuggestion",()=>{const{closeSuggestion:e}=this.props;confirm("Are you sure you want to close this suggestion?")&&e()})}render(){const{suggestion:e,toNotebook:t,type:n}=this.props,{close_time:r,creator:i,closer:o,merge:s,to_title:a,description:l}=e;return G.createElement(rh.Consumer,null,c=>G.createElement("div",{className:`flex justify-between items-center ph3 pa2 ${"compare"===n?"br--top bb b--black-05":"mb3"} f6 fw4 lh-copy black-70 bg-washed-yellow br2`,style:{marginLeft:21}},G.createElement("div",{className:"flex items-start pv1 mr2"},null!=s?G.createElement(Nu,{className:"flex-shrink-0 relative mr1 purple",style:{top:3}}):null!=r?G.createElement(Wu,{className:"flex-shrink-0 relative mr1 dark-red",style:{top:3}}):G.createElement(Cu,{className:"flex-shrink-0 relative mr1 dark-green",style:{top:3}}),G.createElement("div",null,null!=s?G.createElement(G.Fragment,null,G.createElement(Wc,{className:"no-underline black hover-blue",to:nd(o)},rd(o))," merged this","compare"!==n&&" into "):null!=r?G.createElement(G.Fragment,null,G.createElement(Wc,{className:"no-underline black hover-blue",to:nd(o)},rd(o))," ","closed this suggestion","compare"!==n&&" to "):G.createElement(G.Fragment,null,G.createElement(Wc,{className:"no-underline black hover-blue",to:nd(i)},rd(i))," ","suggests merging this","compare"!==n&&" into "),"compare"!==n&&G.createElement(Wc,{className:"no-underline black hover-blue",to:Qh(t)},Jh({title:a})),r&&G.createElement(G.Fragment,null," ","on"," ",new Date(r).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric"})),l?`: “${l}”`:".","compare"!==n&&null==r?G.createElement(Wc,{className:"ml1 no-underline black hover-blue",to:ed(e)},"View changes?"):null!=s&&Ah(c,t)&&G.createElement(Wc,{className:"ml1 no-underline black hover-blue",to:td(t,s.start_version,t,s.end_version)},"View changes?"))),"compare"===n&&null==r&&G.createElement("a",{className:"ph3 pa1 nt1 nb1 no-underline black-50 hover-blue pointer",onClick:this.closeSuggestion},"Close…")))}}function Oy({unsavedChanges:e,editable:t,type:n,baseNotebook:r,notebook:i}){return e&&"playground"!==n?G.createElement(rh.Consumer,null,o=>G.createElement("div",{className:`fixed bottom-0 left-0 right-0 pv2 f6 black-80 bg-near-white bt b--black-10 z-2 ${t?"fade-in delay-short":""}`},G.createElement("div",{className:lh},G.createElement("div",{className:"flex items-center mr5 mr0-ns lh-title"},t?G.createElement(G.Fragment,null,G.createElement(Iu,{className:"w1 h1 mr2 red",style:{flexShrink:0}}),"You have ",e," unsaved change",1===e?"":"s",", which will be saved when the server reconnects."):G.createElement(G.Fragment,null,G.createElement(Ou,{className:"w1 h1 mr2 red",style:{flexShrink:0}}),`You have ${e} unsaved change${1===e?"":"s"}. ${Rh(o,i)?`Suggest ${1===e?"it":"them"}, or fork`:"compare"===n&&Dh(o,r)?"Merge or fork":"Fork"} this notebook to\n                        save.`))))):null}class Iy extends G.Component{constructor(e){super(e),qc(this,"maybeUpdate",()=>{const e=mh(this.props.time);e!==this.state.relativeTime&&this.setState({relativeTime:e})}),this.state={relativeTime:mh(e.time)}}componentDidMount(){this.updateInterval=setInterval(this.maybeUpdate,1e3)}componentWillUnmount(){clearInterval(this.updateInterval)}render(){const e=this.props,{time:t}=e,n=Kc(e,["time"]);return G.createElement("span",Object.assign({},n,{title:t.toLocaleString()}),this.state.relativeTime)}}const Ry=()=>/((?:https?(?::\/\/))(?:www\.)?(?:[a-zA-Z\d-_.]+(?:\.[a-zA-Z\d]{2,})|localhost)(?:(?:[-a-zA-Z\d:%_+.~#!?&\/\/=@]*)(?:[,](?![\s]))*)*|\B@[\w-]{1,39})/g;function Dy({content:e}){const t=[];let n=0,r=0;const i=e.split("\n");for(let o of i){let e=!1;for(let r of o.split(Ry()))e?"@"===r[0]?t.push(G.createElement(Wc,{key:++n,to:`/${r}`,className:"no-underline black hover-blue"},r)):t.push(G.createElement("a",{rel:"noopener noreferrer",className:"no-underline black hover-blue",target:"_blank",key:++n,href:r},r)):t.push(G.createElement("span",{key:++n},r)),e=!e;i.length>1&&++r<i.length&&t.push(G.createElement("br",{key:++n}))}return t}const Fy=G.memo(function({comment:{create_time:e,update_time:t,content:n,user:r,id:i,nonce:o},onCommentRemove:s,isRepeat:a,first:l}){return G.createElement("div",{className:`ph3 pv2 ${a||l?"":"bt b--black-10"}`},G.createElement("div",{className:"flex items-center justify-between pb1 sans-serif f6 lh-title black-70"},G.createElement("div",{className:"flex items-center"},a?void 0:G.createElement(G.Fragment,null,G.createElement(Wc,{to:`/@${r.login}`,className:"inline-flex items-center no-underline black hover-blue"},G.createElement(uh,{user:r,s:24,className:"mr2 br-100",style:{flexShrink:"0"}}),G.createElement("span",{className:""},r.name||r.login)),G.createElement("span",{className:"ph1"},"·")),G.createElement("span",{className:"inline-flex items-end black-40"},G.createElement(Iy,{time:new Date(t||e)}))),s&&G.createElement("div",{className:"inline-flex items-center"},G.createElement("div",{className:"inline-flex items-center ph1 nr1 black-10 hover-red pointer",title:"Delete comment.",onClick:()=>s(i,o)},G.createElement(Eu,{className:"w1 h1 ml1"})))),G.createElement("div",{className:"sans-serif f6 lh-copy black-70 comment-content"},G.createElement(Dy,{content:n})))});function jy({children:e}){return G.createElement("span",{className:"disappear-child relative v-mid",style:{lineHeight:0}},G.createElement("span",{className:"dib ml2 f7 tc black-70 hover-black bg-white ba b--black-10 br-pill pointer",style:{width:"1.1rem",height:"1.1rem",lineHeight:"1.15rem"}},"?"),G.createElement("nav",{className:"db absolute lh-solid tl z-2 child",style:{right:"-12px",width:"16rem"},"aria-label":"submenu","aria-hidden":""+!open},G.createElement("div",{className:"bg-white br2 shadow-4 overflow-hidden",style:{marginTop:"10px"}},G.createElement("div",{className:"pa2 lh-copy"},e)),G.createElement("div",{className:"absolute right-1",style:{top:"-4px",clip:"rect(0 18px 14px -4px)"}},G.createElement("div",{className:"w1 h1 bg-white",style:{boxShadow:"0 2px 3px 0 rgba(0,0,0,.2)",transform:"rotate(45deg) translate(6px, 6px)"}}))))}class Hy extends G.Component{constructor(e){super(e),qc(this,"state",{value:""}),qc(this,"onChange",({target:{value:e}})=>{const{current:t}=this.textareaRef;t.style.height="auto",t.style.height=`${t.scrollHeight}px`,this.setState({value:e})}),qc(this,"close",()=>{const{onCommentClose:e,commentNodeId:t}=this.props;e(t),this.setState({value:""})}),qc(this,"onComment",e=>{e.preventDefault();const{onCommentInsert:t,onCommentClose:n,commentNodeId:r}=this.props;let{value:i}=this.state;(i=i.trim())&&(t(i,r),n(r),this.setState({value:""}))}),qc(this,"onKeyDown",e=>{"Enter"===e.key&&e.shiftKey?this.onComment(e):"Escape"!==e.key||this.state.value.trim()||this.close()}),qc(this,"onUpdate",()=>{const{onCommentHeight:e,node:t}=this.props,{height:n}=this.containerRef.current.getBoundingClientRect();n!==this.lastHeight&&(this.lastHeight=n,e(t.id,n))}),this.containerRef=G.createRef(),this.textareaRef=G.createRef(),this.lastHeight=void 0}componentDidMount(){this.onUpdate()}componentDidUpdate(){this.onUpdate()}componentWillUnmount(){const{onCommentHeight:e,node:t}=this.props;e(t.id,0)}render(){let{value:e}=this.state;const{open:t,comments:n,commentNodeId:r,suggestion:i,notebook:o,onCommentRemove:s,onCommentResolve:a,onCommentOpen:l}=this.props,{owner:c}=o;let u;return G.createElement(rh.Consumer,null,h=>{const d=Ah(h,o),p=i?"Participants in the suggestion will see this.":d?Uh(o)?`Only members of ${c.name||c.login} will see this.`:"Only you will see this.":`Suggest to share this with ${Uh(o)?`members of ${c.name||c.login}`:`${c.name||c.login}`}.`;return G.createElement("div",{ref:this.containerRef,className:"pt2 f5"},G.createElement("div",{className:"relative w-100 pea",style:{maxWidth:640}},n.length>0?G.createElement("div",{className:"pv1 bg-washed-yellow"},n.map((e,t)=>{const{user:{id:n}}=e,r=n===h.id,i=u===n;return u=n,G.createElement(Fy,{key:e.id||`nonce-${e.nonce}`,comment:e,isRepeat:i,onCommentRemove:(e.id||!d)&&r&&s,first:0===t})})):null,t?G.createElement("div",{className:"sans-serif"},G.createElement("form",{onSubmit:this.onComment,className:"flex flex-column relative items-stretch bg-washed-yellow bt",style:{borderColor:"#e6e2d4"}},G.createElement("textarea",{className:"w-100 pa3 sans-serif f6 lh-copy black-70 bg-transparent br3 bn",style:{resize:"none"},onKeyDown:this.onKeyDown,autoFocus:t,rows:1,ref:this.textareaRef,value:e,name:"comment_description",placeholder:"",maxLength:"65536",onChange:this.onChange}),G.createElement("div",{className:"flex justify-between pa2"},G.createElement("button",{type:"button",onClick:this.close,className:"inline-flex items-center pa2 f6 fw6 black-30 hover-red bg-washed-yellow br2 pointer bn"},"Cancel"),G.createElement("div",{className:"inline-flex items-center"},G.createElement("div",{className:"db-ns dn ml2 f6 f7 black-50"},p),G.createElement(jy,null,G.createElement("div",{className:"f6 black-70"},"Use plain text. URLs are auto-linked.",G.createElement("span",{className:"dn-ns di"}," ",p))),G.createElement("button",{className:`ml2 ph3 pv2 f6 fw6 white ${e.trim()?"bg-blue hover-bg-dark-blue pointer":"bg-silver"} br2 bn`},"Comment"))))):G.createElement("div",{className:`flex justify-${d?"between":"end"} bg-washed-yellow`},d&&G.createElement("button",{type:"button",onClick:()=>a(r),className:"inline-flex items-center ph3 pt1 pb3 f6 fw6 black-30 hover-black-70 bg-transparent br2 pointer bn"},"Resolve"),G.createElement("button",{className:"inline-flex items-center ph3 pt1 pb3 f6 fw6 black-30 hover-black-70 bg-transparent br2 pointer bn",onClick:()=>l(r)},G.createElement(vu,{className:"w1 h1 mr1"}),"Comment"))))})}}qc(Hy,"defaultProps",{node:void 0,comments:[],commentNodeId:void 0,open:!1,onComment:()=>{},getUser:()=>{},onCommentHeight:()=>{}});let $y=0;class Uy{constructor({name:e,loaded:t=!1,edited:n=!1,imports:r,selections:i=[],source:o,empty:s=!1,disabled:a=!1,editorHeight:l=0,workerHeight:c=Dm,commentHeight:u=0,diff:h,error:d,sourcemap:p,features:f}){this.name=e,this.loaded=t,this.edited=n,this.imports=r,this.selections=i,this.source=o,this.empty=s,this.disabled=a,this.editorHeight=l,this.comparerHeight=h&&"noop"!==h.type?Dm:0,this.workerHeight=c,this.commentHeight=u,this.diff=h,this.error=d,this.sourcemap=p,this.features=f}}const Wy=(e,t)=>({type:"offset_node",node_id:e,height:t.editorHeight+t.comparerHeight+t.commentHeight}),By=function(e){let t,n,r,i;const o=(e,t)=>e===n[t];return function(){const s=Array.from(arguments);return i&&t===this&&n.length===arguments.length&&s.every(o)?r:(r=e.apply(this,s),i=!0,t=this,n=s,r)}}(e=>{let t=new Set;for(let n of e.values())if(n.name&&t.add(n.name),n.imports)for(let e of n.imports){let{name:n}=e;t.add(n)}return t});const Vy=(e,t,n)=>{for(let r of n){let{type:n,node_id:i,new_node_value:o,new_next_node_id:s}=r;switch(n){case"insert_node":case"modify_node":const r=hy(o),{sourcemap:a,features:l}=r;let c;if(e=new Map(e),"insert_node"===n)c=new Uy({name:r.name,imports:r.imports,empty:""===r.body,sourcemap:a,features:l});else{(c=e.get(i)).empty!==(c=new Uy(Gc({},c,{name:r.name,imports:r.imports,empty:""===r.body,error:void 0,sourcemap:a,features:l}))).empty&&(c.editorHeight+=(c.empty?-1:1)*Dm,t.push(Wy(i,c)))}e.set(i,c),c.sourcemap=r.sourcemap,delete r.sourcemap,t.push({type:n,node_id:i,new_node_value:r,new_next_node_id:s});break;case"remove_node":(e=new Map(e)).delete(i),t.push({type:n,node_id:i});break;case"move_node":t.push({type:n,node_id:i,new_next_node_id:s})}}return{workerEvents:t,cells:e}};function zy(e,t,n,r){const{model:i}=e;let o=!0,s=[],a=e=>{"noop"!==e.type&&(o=!1),s.push(e)},l=i.apply(r,a);if(o)return{notebook:Gc({},e,{model:i}),workerEvents:n,cells:t};if(i.nodes[0]!==l.nodes[0]&&i.version<l.version){const e=function(e){try{const{body:n}=ny(e);if(n&&"TaggedTemplateExpression"===n.type&&"md"===n.tag.name&&(e=sy.exec(e.slice(n.quasi.start+1,n.quasi.end-1))))return e[1]}catch(t){}}(l.nodes[0].value)||"";e!==i.title&&(l=l.apply([{type:"modify_title",new_node_value:e}],a))}return({workerEvents:n,cells:t}=Vy(t,n,s)),{notebook:Gc({},e,{model:l}),workerEvents:n,cells:t}}function qy(e,t,n,r=!0,i=!1){return({workerEvents:o,notebook:s,cells:a})=>{let{model:l}=s;const{nodes:c}=l,u=l.events.length;let h;if(n)h=e;else if(null===e){h=c[0].id}else{const t=c.findIndex(t=>t.id===e);h=t<c.length-1?c[t+1].id:null}if(({notebook:s,workerEvents:o,cells:a}=zy(s,a,o,[{type:"insert_node",node_id:u,new_node_value:t,new_node_pinned:i,new_next_node_id:h}])),r){const e=n?t.length:0;(a=new Map(a)).set(u,new Uy(Gc({},a.get(u),{selections:[{anchor:e,head:e}]})))}return{notebook:s,cells:a,workerEvents:o,focusId:r?u:e}}}function Gy(e,t,n,r){return qy(e,t,!0,n,r)}const Ky=(e,t,n)=>({notebook:r,cells:i,workerEvents:o})=>{let{model:{nodes:s}}=r;const a=s.findIndex(t=>t.id===e),l=s[n?a-1:a+1];if(!l)return;const c=[{type:"remove_node",node_id:e}];t&&(c.push({type:"modify_node",node_id:l.id,new_node_value:n?l.value+t:t+l.value}),s[a].pinned&&!l.pinned&&c.push({type:"pin_node",node_id:l.id})),({notebook:r,workerEvents:o,cells:i}=zy(r,i,o,c));const u=(n?l.value:t).length;return(i=new Map(i)).set(l.id,new Uy(Gc({},i.get(l.id),{selections:[{anchor:u,head:u}]}))),{notebook:r,cells:i,workerEvents:o,focusId:l.id}},Yy=e=>({notebook:t,cells:n,workerEvents:r})=>{const{model:{nodes:i},comments:o}=t;if(i.find(t=>t.id===e)&&!o.find(t=>t.node_id===e))return zy(t,n,r,[1===i.length?{type:"modify_node",node_id:e,new_node_value:""}:{type:"remove_node",node_id:e}])},Xy=(e,t)=>({notebook:n,cells:r,workerEvents:i})=>{const{model:{nodes:o}}=n,s=o.findIndex(t=>t.id===e);if(t>0&&++t,s+t<0||s+t>o.length)return;const a=o[s+t];return zy(n,r,i,[{type:"move_node",node_id:e,new_next_node_id:a?a.id:null}])},Qy=(e,t)=>({notebook:n,cells:r,workerEvents:i})=>Gc({},zy(n,r,i,[{type:"move_node",node_id:e,new_next_node_id:t}]),{dragging:!1}),Jy=(e,t)=>({notebook:n})=>({notebook:Gc({},n,{model:n.model.apply([{type:t?"pin_node":"unpin_node",node_id:e}])})}),Zy=({id:e,error:t})=>({cells:n})=>{const r=n.get(e);if(r)return t&&r.sourcemap&&(t=r.sourcemap.translateError(t)),(n=new Map(n)).set(e,new Uy(Gc({},r,{error:t}))),{cells:n}},ew=(e,t,n)=>({notebook:r,cells:i,workerEvents:o})=>{const{model:s}=r;if(!i.has(e))return;const a={type:"modify_node",node_id:e,new_node_value:t};let l;if((i=new Map(i)).set(e,new Uy(Gc({},i.get(e),{edited:!0}))),({notebook:l,cells:i,workerEvents:o}=zy(r,i,o,[a])),s!==l.model)return{notebook:l,cells:i,workerEvents:o};if(n){i=new Map(i);const n=hy(t),{sourcemap:r}=n;let s=new Uy(Gc({},i.get(e),{name:n.name,imports:n.imports,error:void 0,sourcemap:r}));return i.set(e,s),s.sourcemap=n.sourcemap,delete n.sourcemap,o.push({type:"modify_node",node_id:e,new_node_value:n}),{cells:i,workerEvents:o}}},tw=({notebook:e,cells:t,workerEvents:n,ancestry:r})=>{const i=new Set(Kh(r));t=new Map(t);const o=[];for(let[s,a]of t){const{diff:{baseId:e}}=a;if(i.has(e)){const e=a.diff.base;t.set(s,new Uy(Gc({},a,{edited:!1,disabled:!e,source:"base"}))),o.push({type:"modify_node",node_id:s,new_node_value:e&&e.value})}}return zy(e,t,n,o)},nw=(e,t)=>({notebook:n,cells:r,workerEvents:i})=>{r=new Map(r);const o=[];for(let[s,a]of r){if("all"!==t&&t!==s||"noop"===a.diff.type)continue;const n="diff"===e&&"modify_node"!==a.diff.type?"target":e,i=a.diff["diff"===n?"target":n];r.set(s,new Uy(Gc({},a,{edited:!1,disabled:!i,source:n}))),(a.edited||a.source!==n&&!("diff"===a.source&&"target"===n||"target"===a.source&&"diff"===n))&&o.push({type:"modify_node",node_id:s,new_node_value:i&&i.value})}return zy(n,r,i,o)},rw=(e,t,n)=>({notebook:r,workerEvents:i,focusId:o,cells:s})=>{const a=o===e,{pinned:l}=r.model.nodes.find(t=>t.id===e),c=s.get(e),u="compare"===n&&c.diff&&"noop"!==c.diff.type;return t&&(({notebook:r,cells:s,workerEvents:i}=zy(r,s,i,[{type:l?"unpin_node":"pin_node",node_id:e}])),a||l)?{notebook:r,workerEvents:i}:{notebook:r,focusId:!a||l||u?e:null,cells:s,workerEvents:i}},iw=(e,t)=>({notebook:n,cells:r,workerEvents:i,notebook:{publish_version:o}})=>{const s=n.model.events.length,a={version:s,type:"revert",node_id:o};try{({notebook:n,cells:r,workerEvents:i}=zy(n,r,i,[a]))}catch(l){return n.model.events.push(a),e(s).then(t),{notebook:n}}return{notebook:n,cells:r,workerEvents:i}},ow=(e,t)=>({cells:n})=>{const r=n.get(e);if(r)return(n=new Map(n)).set(e,new Uy(Gc({},r,{selections:t.slice()}))),{cells:n}},sw=(e,t,n,r,i)=>({notebook:o})=>{const{id:s,model:{version:a},comments:l}=o,c=s&&Ah(r,o);for(let h=l.length-1;h>=0;--h){const s=l[h];if(s.node_id===t){if(s.user.id===r.id&&(s.id?new Date(s.create_time)>Date.now()-18e4:!c&&!i)){e=s.content+"\n\n"+e,(c||i)&&n.send({type:"commentmodify",id:s.id,content:e});const t=l.slice();return t.splice(h,1,Gc({},s,{version:a,content:e,update_time:new Date})),{notebook:Gc({},o,{comments:t})}}break}}const u=++$y;return(c||i)&&n.send({type:"comment",nonce:u,node_id:t,content:e}),{notebook:Gc({},o,{comments:l.concat({nonce:u,node_id:t,version:a,content:e,user:r,create_time:new Date,update_time:null})})}},aw=(e,t,n,r)=>({notebook:i})=>{const{id:o,comments:s}=i;return o&&Ah(r,i)&&n.send({type:"commentdelete",ids:[e]}),{notebook:Gc({},i,{comments:s.filter(e?t=>t.id!==e:e=>e.nonce!==t)})}},lw=(e,t)=>({notebook:n})=>{const{comments:r}=n;return t.send({type:"commentresolve",ids:r.filter(t=>t.id&&t.node_id===e).map(e=>e.id),resolved:!0}),{notebook:Gc({},n,{comments:r.filter(t=>t.id&&t.node_id!==e)})}},cw=e=>({notebook:t})=>{const{comments:n}=t,r=n.slice();for(const i of e){const e=r.findIndex(e=>e.id===i.id);-1!==e?i.resolved||i.deleted?r.splice(e,1):r.splice(e,1,i):i.resolved||i.deleted||r.push(i)}return{notebook:Gc({},t,{comments:r})}},uw=(e,t)=>({cells:n,workerEvents:r})=>{let i=n.get(e);if(i)return n=new Map(n),i=new Uy(Gc({},i,{commentHeight:t})),n.set(e,i),r.push(Wy(e,i)),{cells:n,workerEvents:r}},hw=(e,t)=>({cells:n,workerEvents:r})=>{let i=n.get(e);if(i)return i.empty&&(t-=Dm),n=new Map(n),i=new Uy(Gc({},i,{editorHeight:t})),n.set(e,i),r.push(Wy(e,i)),{cells:n,workerEvents:r}};var dw=n(function(e,t){function n(){}function r(e,t,n,r,i){for(var o=0,s=t.length,a=0,l=0;o<s;o++){var c=t[o];if(c.removed){if(c.value=e.join(r.slice(l,l+c.count)),l+=c.count,o&&t[o-1].added){var u=t[o-1];t[o-1]=t[o],t[o]=u}}else{if(!c.added&&i){var h=n.slice(a,a+c.count);h=h.map(function(e,t){var n=r[l+t];return n.length>e.length?n:e}),c.value=e.join(h)}else c.value=e.join(n.slice(a,a+c.count));a+=c.count,c.added||(l+=c.count)}}var d=t[s-1];return s>1&&"string"==typeof d.value&&(d.added||d.removed)&&e.equals("",d.value)&&(t[s-2].value+=d.value,t.pop()),t}t.__esModule=!0,t.default=n,n.prototype={diff:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.callback;"function"==typeof n&&(i=n,n={}),this.options=n;var o=this;function s(e){return i?(setTimeout(function(){i(void 0,e)},0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var a=(t=this.removeEmpty(this.tokenize(t))).length,l=e.length,c=1,u=a+l,h=[{newPos:-1,components:[]}],d=this.extractCommon(h[0],t,e,0);if(h[0].newPos+1>=a&&d+1>=l)return s([{value:this.join(t),count:t.length}]);function p(){for(var n=-1*c;n<=c;n+=2){var i=void 0,u=h[n-1],d=h[n+1],p=(d?d.newPos:0)-n;u&&(h[n-1]=void 0);var f=u&&u.newPos+1<a,m=d&&0<=p&&p<l;if(f||m){if(!f||m&&u.newPos<d.newPos?(i={newPos:(g=d).newPos,components:g.components.slice(0)},o.pushComponent(i.components,void 0,!0)):((i=u).newPos++,o.pushComponent(i.components,!0,void 0)),p=o.extractCommon(i,t,e,n),i.newPos+1>=a&&p+1>=l)return s(r(o,i.components,t,e,o.useLongestToken));h[n]=i}else h[n]=void 0}var g;c++}if(i)!function e(){setTimeout(function(){if(c>u)return i();p()||e()},0)}();else for(;c<=u;){var f=p();if(f)return f}},pushComponent:function(e,t,n){var r=e[e.length-1];r&&r.added===t&&r.removed===n?e[e.length-1]={count:r.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,r){for(var i=t.length,o=n.length,s=e.newPos,a=s-r,l=0;s+1<i&&a+1<o&&this.equals(t[s+1],n[a+1]);)s++,a++,l++;return l&&e.components.push({count:l}),e.newPos=s,a},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}}});t(dw);var pw=n(function(e,t){t.__esModule=!0,t.characterDiff=void 0,t.diffChars=function(e,t,n){return i.diff(e,t,n)};var n,r=(n=dw)&&n.__esModule?n:{default:n};var i=t.characterDiff=new r.default});t(pw);pw.characterDiff,pw.diffChars;var fw=n(function(e,t){t.__esModule=!0,t.generateOptions=function(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}});t(fw);fw.generateOptions;var mw=n(function(e,t){t.__esModule=!0,t.wordDiff=void 0,t.diffWords=function(e,t,n){return n=(0,fw.generateOptions)(n,{ignoreWhitespace:!0}),s.diff(e,t,n)},t.diffWordsWithSpace=function(e,t,n){return s.diff(e,t,n)};var n,r=(n=dw)&&n.__esModule?n:{default:n};var i=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,o=/\S/,s=t.wordDiff=new r.default;s.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!o.test(e)&&!o.test(t)},s.tokenize=function(e){for(var t=e.split(/(\s+|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&i.test(t[n])&&i.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t}});t(mw);mw.wordDiff,mw.diffWords,mw.diffWordsWithSpace;var gw=n(function(e,t){t.__esModule=!0,t.lineDiff=void 0,t.diffLines=function(e,t,n){return i.diff(e,t,n)},t.diffTrimmedLines=function(e,t,n){var r=(0,fw.generateOptions)(n,{ignoreWhitespace:!0});return i.diff(e,t,r)};var n,r=(n=dw)&&n.__esModule?n:{default:n};var i=t.lineDiff=new r.default;i.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t}});t(gw);gw.lineDiff,gw.diffLines,gw.diffTrimmedLines;var vw=n(function(e,t){t.__esModule=!0,t.sentenceDiff=void 0,t.diffSentences=function(e,t,n){return i.diff(e,t,n)};var n,r=(n=dw)&&n.__esModule?n:{default:n};var i=t.sentenceDiff=new r.default;i.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)}});t(vw);vw.sentenceDiff,vw.diffSentences;var bw=n(function(e,t){t.__esModule=!0,t.cssDiff=void 0,t.diffCss=function(e,t,n){return i.diff(e,t,n)};var n,r=(n=dw)&&n.__esModule?n:{default:n};var i=t.cssDiff=new r.default;i.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)}});t(bw);bw.cssDiff,bw.diffCss;var yw=n(function(e,t){t.__esModule=!0,t.jsonDiff=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.diffJson=function(e,t,n){return s.diff(e,t,n)},t.canonicalize=a;var r,i=(r=dw)&&r.__esModule?r:{default:r};var o=Object.prototype.toString,s=t.jsonDiff=new i.default;function a(e,t,r,i,s){t=t||[],r=r||[],i&&(e=i(s,e));var l=void 0;for(l=0;l<t.length;l+=1)if(t[l]===e)return r[l];var c=void 0;if("[object Array]"===o.call(e)){for(t.push(e),c=new Array(e.length),r.push(c),l=0;l<e.length;l+=1)c[l]=a(e[l],t,r,i,s);return t.pop(),r.pop(),c}if(e&&e.toJSON&&(e=e.toJSON()),"object"===(void 0===e?"undefined":n(e))&&null!==e){t.push(e),c={},r.push(c);var u=[],h=void 0;for(h in e)e.hasOwnProperty(h)&&u.push(h);for(u.sort(),l=0;l<u.length;l+=1)c[h=u[l]]=a(e[h],t,r,i,h);t.pop(),r.pop()}else c=e;return c}s.useLongestToken=!0,s.tokenize=gw.lineDiff.tokenize,s.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,i=void 0===r?function(e,t){return void 0===t?n:t}:r;return"string"==typeof e?e:JSON.stringify(a(e,null,null,i),i,"  ")},s.equals=function(e,t){return i.default.prototype.equals.call(s,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))}});t(yw);yw.jsonDiff,yw.diffJson,yw.canonicalize;var ww=n(function(e,t){t.__esModule=!0,t.arrayDiff=void 0,t.diffArrays=function(e,t,n){return i.diff(e,t,n)};var n,r=(n=dw)&&n.__esModule?n:{default:n};var i=t.arrayDiff=new r.default;i.tokenize=function(e){return e.slice()},i.join=i.removeEmpty=function(e){return e}});t(ww);ww.arrayDiff,ww.diffArrays;var kw=n(function(e,t){t.__esModule=!0,t.parsePatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),r=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],o=0;function s(){var e={};for(i.push(e);o<n.length;){var r=n[o];if(/^(\-\-\-|\+\+\+|@@)\s/.test(r))break;var s=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(r);s&&(e.index=s[1]),o++}for(a(e),a(e),e.hunks=[];o<n.length;){var c=n[o];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(c))break;if(/^@@/.test(c))e.hunks.push(l());else{if(c&&t.strict)throw new Error("Unknown line "+(o+1)+" "+JSON.stringify(c));o++}}}function a(e){var t=/^(---|\+\+\+)\s+(.*)$/.exec(n[o]);if(t){var r="---"===t[1]?"old":"new",i=t[2].split("\t",2),s=i[0].replace(/\\\\/g,"\\");/^".*"$/.test(s)&&(s=s.substr(1,s.length-2)),e[r+"FileName"]=s,e[r+"Header"]=(i[1]||"").trim(),o++}}function l(){for(var e=o,i=n[o++],s=i.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),a={oldStart:+s[1],oldLines:+s[2]||1,newStart:+s[3],newLines:+s[4]||1,lines:[],linedelimiters:[]},l=0,c=0;o<n.length&&!(0===n[o].indexOf("--- ")&&o+2<n.length&&0===n[o+1].indexOf("+++ ")&&0===n[o+2].indexOf("@@"));o++){var u=0==n[o].length&&o!=n.length-1?" ":n[o][0];if("+"!==u&&"-"!==u&&" "!==u&&"\\"!==u)break;a.lines.push(n[o]),a.linedelimiters.push(r[o]||"\n"),"+"===u?l++:"-"===u?c++:" "===u&&(l++,c++)}if(l||1!==a.newLines||(a.newLines=0),c||1!==a.oldLines||(a.oldLines=0),t.strict){if(l!==a.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(c!==a.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return a}for(;o<n.length;)s();return i}});t(kw);kw.parsePatch;var Ew=n(function(e,t){t.__esModule=!0,t.default=function(e,t,n){var r=!0,i=!1,o=!1,s=1;return function a(){if(r&&!o){if(i?s++:r=!1,e+s<=n)return s;o=!0}if(!i)return o||(r=!0),t<=e-s?-s++:(i=!0,a())}}});t(Ew);var xw=n(function(e,t){t.__esModule=!0,t.applyPatch=i,t.applyPatches=function(e,t){"string"==typeof e&&(e=(0,kw.parsePatch)(e));var n=0;!function r(){var o=e[n++];if(!o)return t.complete();t.loadFile(o,function(e,n){if(e)return t.complete(e);var s=i(n,o,t);t.patched(o,s,function(e){if(e)return t.complete(e);r()})})}()};var n,r=(n=Ew)&&n.__esModule?n:{default:n};function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof t&&(t=(0,kw.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var i=e.split(/\r\n|[\n\v\f\r\x85]/),o=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],s=t.hunks,a=n.compareLine||function(e,t,n,r){return t===r},l=0,c=n.fuzzFactor||0,u=0,h=0,d=void 0,p=void 0;function f(e,t){for(var n=0;n<e.lines.length;n++){var r=e.lines[n],o=r.length>0?r[0]:" ",s=r.length>0?r.substr(1):r;if(" "===o||"-"===o){if(!a(t+1,i[t],o,s)&&++l>c)return!1;t++}}return!0}for(var m=0;m<s.length;m++){for(var g=s[m],v=i.length-g.oldLines,b=0,y=h+g.oldStart-1,w=(0,r.default)(y,u,v);void 0!==b;b=w())if(f(g,y+b)){g.offset=h+=b;break}if(void 0===b)return!1;u=g.offset+g.oldStart+g.oldLines}for(var k=0,E=0;E<s.length;E++){var x=s[E],S=x.oldStart+x.offset+k-1;k+=x.newLines-x.oldLines,S<0&&(S=0);for(var C=0;C<x.lines.length;C++){var _=x.lines[C],T=_.length>0?_[0]:" ",N=_.length>0?_.substr(1):_,P=x.linedelimiters[C];if(" "===T)S++;else if("-"===T)i.splice(S,1),o.splice(S,1);else if("+"===T)i.splice(S,0,N),o.splice(S,0,P),S++;else if("\\"===T){var A=x.lines[C-1]?x.lines[C-1][0]:null;"+"===A?d=!0:"-"===A&&(p=!0)}}}if(d)for(;!i[i.length-1];)i.pop(),o.pop();else p&&(i.push(""),o.push("\n"));for(var L=0;L<i.length-1;L++)i[L]=i[L]+o[L];return i.join("")}});t(xw);xw.applyPatch,xw.applyPatches;var Sw=n(function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,r,i,o,s,a){a||(a={}),void 0===a.context&&(a.context=4);var l=(0,gw.diffLines)(r,i,a);function c(e){return e.map(function(e){return" "+e})}l.push({value:"",lines:[]});for(var u=[],h=0,d=0,p=[],f=1,m=1,g=function(e){var t=l[e],o=t.lines||t.value.replace(/\n$/,"").split("\n");if(t.lines=o,t.added||t.removed){var s;if(!h){var g=l[e-1];h=f,d=m,g&&(p=a.context>0?c(g.lines.slice(-a.context)):[],h-=p.length,d-=p.length)}(s=p).push.apply(s,n(o.map(function(e){return(t.added?"+":"-")+e}))),t.added?m+=o.length:f+=o.length}else{if(h)if(o.length<=2*a.context&&e<l.length-2){var v;(v=p).push.apply(v,n(c(o)))}else{var b,y=Math.min(o.length,a.context);(b=p).push.apply(b,n(c(o.slice(0,y))));var w={oldStart:h,oldLines:f-h+y,newStart:d,newLines:m-d+y,lines:p};if(e>=l.length-2&&o.length<=a.context){var k=/\n$/.test(r),E=/\n$/.test(i);0!=o.length||k?k&&E||p.push("\\ No newline at end of file"):p.splice(w.oldLines,0,"\\ No newline at end of file")}u.push(w),h=0,d=0,p=[]}f+=o.length,m+=o.length}},v=0;v<l.length;v++)g(v);return{oldFileName:e,newFileName:t,oldHeader:o,newHeader:s,hunks:u}}function i(e,t,n,i,o,s,a){var l=r(e,t,n,i,o,s,a),c=[];e==t&&c.push("Index: "+e),c.push("==================================================================="),c.push("--- "+l.oldFileName+(void 0===l.oldHeader?"":"\t"+l.oldHeader)),c.push("+++ "+l.newFileName+(void 0===l.newHeader?"":"\t"+l.newHeader));for(var u=0;u<l.hunks.length;u++){var h=l.hunks[u];c.push("@@ -"+h.oldStart+","+h.oldLines+" +"+h.newStart+","+h.newLines+" @@"),c.push.apply(c,h.lines)}return c.join("\n")+"\n"}t.__esModule=!0,t.structuredPatch=r,t.createTwoFilesPatch=i,t.createPatch=function(e,t,n,r,o,s){return i(e,e,t,n,r,o,s)}});t(Sw);Sw.structuredPatch,Sw.createTwoFilesPatch,Sw.createPatch;var Cw=n(function(e,t){function n(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}t.__esModule=!0,t.arrayEqual=function(e,t){if(e.length!==t.length)return!1;return n(e,t)},t.arrayStartsWith=n});t(Cw);Cw.arrayEqual,Cw.arrayStartsWith;var _w=n(function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){var t=function e(t){var n=0;var r=0;t.forEach(function(t){if("string"!=typeof t){var i=e(t.mine),o=e(t.theirs);void 0!==n&&(i.oldLines===o.oldLines?n+=i.oldLines:n=void 0),void 0!==r&&(i.newLines===o.newLines?r+=i.newLines:r=void 0)}else void 0===r||"+"!==t[0]&&" "!==t[0]||r++,void 0===n||"-"!==t[0]&&" "!==t[0]||n++});return{oldLines:n,newLines:r}}(e.lines),n=t.oldLines,r=t.newLines;void 0!==n?e.oldLines=n:delete e.oldLines,void 0!==r?e.newLines=r:delete e.newLines}function i(e,t){if("string"==typeof e){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,kw.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,Sw.structuredPatch)(void 0,void 0,t,e)}return e}function o(e){return e.newFileName&&e.newFileName!==e.oldFileName}function s(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function a(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function l(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function c(e,t,i,o,s){var a={offset:t,lines:i,index:0},l={offset:o,lines:s,index:0};for(p(e,a,l),p(e,l,a);a.index<a.lines.length&&l.index<l.lines.length;){var c=a.lines[a.index],g=l.lines[l.index];if("-"!==c[0]&&"+"!==c[0]||"-"!==g[0]&&"+"!==g[0])if("+"===c[0]&&" "===g[0]){var v;(v=e.lines).push.apply(v,n(m(a)))}else if("+"===g[0]&&" "===c[0]){var b;(b=e.lines).push.apply(b,n(m(l)))}else"-"===c[0]&&" "===g[0]?h(e,a,l):"-"===g[0]&&" "===c[0]?h(e,l,a,!0):c===g?(e.lines.push(c),a.index++,l.index++):d(e,m(a),m(l));else u(e,a,l)}f(e,a),f(e,l),r(e)}function u(e,t,r){var i=m(t),o=m(r);if(g(i)&&g(o)){var s,a;if((0,Cw.arrayStartsWith)(i,o)&&v(r,i,i.length-o.length))return void(s=e.lines).push.apply(s,n(i));if((0,Cw.arrayStartsWith)(o,i)&&v(t,o,o.length-i.length))return void(a=e.lines).push.apply(a,n(o))}else if((0,Cw.arrayEqual)(i,o)){var l;return void(l=e.lines).push.apply(l,n(i))}d(e,i,o)}function h(e,t,r,i){var o,s=m(t),a=function(e,t){var n=[],r=[],i=0,o=!1,s=!1;for(;i<t.length&&e.index<e.lines.length;){var a=e.lines[e.index],l=t[i];if("+"===l[0])break;if(o=o||" "!==a[0],r.push(l),i++,"+"===a[0])for(s=!0;"+"===a[0];)n.push(a),a=e.lines[++e.index];l.substr(1)===a.substr(1)?(n.push(a),e.index++):s=!0}"+"===(t[i]||"")[0]&&o&&(s=!0);if(s)return n;for(;i<t.length;)r.push(t[i++]);return{merged:r,changes:n}}(r,s);a.merged?(o=e.lines).push.apply(o,n(a.merged)):d(e,i?a:s,i?s:a)}function d(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function p(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r),t.offset++}}function f(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function m(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var r=e.lines[e.index];if("-"===n&&"+"===r[0]&&(n="+"),n!==r[0])break;t.push(r),e.index++}return t}function g(e){return e.reduce(function(e,t){return e&&"-"===t[0]},!0)}function v(e,t,n){for(var r=0;r<n;r++){var i=t[t.length-n+r].substr(1);if(e.lines[e.index+r]!==" "+i)return!1}return e.index+=n,!0}t.__esModule=!0,t.calcLineCount=r,t.merge=function(e,t,n){e=i(e,n),t=i(t,n);var r={};(e.index||t.index)&&(r.index=e.index||t.index);(e.newFileName||t.newFileName)&&(o(e)?o(t)?(r.oldFileName=s(r,e.oldFileName,t.oldFileName),r.newFileName=s(r,e.newFileName,t.newFileName),r.oldHeader=s(r,e.oldHeader,t.oldHeader),r.newHeader=s(r,e.newHeader,t.newHeader)):(r.oldFileName=e.oldFileName,r.newFileName=e.newFileName,r.oldHeader=e.oldHeader,r.newHeader=e.newHeader):(r.oldFileName=t.oldFileName||e.oldFileName,r.newFileName=t.newFileName||e.newFileName,r.oldHeader=t.oldHeader||e.oldHeader,r.newHeader=t.newHeader||e.newHeader));r.hunks=[];var u=0,h=0,d=0,p=0;for(;u<e.hunks.length||h<t.hunks.length;){var f=e.hunks[u]||{oldStart:1/0},m=t.hunks[h]||{oldStart:1/0};if(a(f,m))r.hunks.push(l(f,d)),u++,p+=f.newLines-f.oldLines;else if(a(m,f))r.hunks.push(l(m,p)),h++,d+=m.newLines-m.oldLines;else{var g={oldStart:Math.min(f.oldStart,m.oldStart),oldLines:0,newStart:Math.min(f.newStart+d,m.oldStart+p),newLines:0,lines:[]};c(g,f.oldStart,f.lines,m.oldStart,m.lines),h++,u++,r.hunks.push(g)}}return r}});t(_w);_w.calcLineCount,_w.merge;var Tw=n(function(e,t){t.__esModule=!0,t.convertChangesToDMP=function(e){for(var t=[],n=void 0,r=void 0,i=0;i<e.length;i++)n=e[i],r=n.added?1:n.removed?-1:0,t.push([r,n.value]);return t}});t(Tw);Tw.convertChangesToDMP;var Nw=n(function(e,t){function n(e){var t=e;return t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")}t.__esModule=!0,t.convertChangesToXML=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push(n(i.value)),i.added?t.push("</ins>"):i.removed&&t.push("</del>")}return t.join("")}});t(Nw);Nw.convertChangesToXML;var Pw=n(function(e,t){t.__esModule=!0,t.canonicalize=t.convertChangesToXML=t.convertChangesToDMP=t.merge=t.parsePatch=t.applyPatches=t.applyPatch=t.createPatch=t.createTwoFilesPatch=t.structuredPatch=t.diffArrays=t.diffJson=t.diffCss=t.diffSentences=t.diffTrimmedLines=t.diffLines=t.diffWordsWithSpace=t.diffWords=t.diffChars=t.Diff=void 0;var n,r=(n=dw)&&n.__esModule?n:{default:n};t.Diff=r.default,t.diffChars=pw.diffChars,t.diffWords=mw.diffWords,t.diffWordsWithSpace=mw.diffWordsWithSpace,t.diffLines=gw.diffLines,t.diffTrimmedLines=gw.diffTrimmedLines,t.diffSentences=vw.diffSentences,t.diffCss=bw.diffCss,t.diffJson=yw.diffJson,t.diffArrays=ww.diffArrays,t.structuredPatch=Sw.structuredPatch,t.createTwoFilesPatch=Sw.createTwoFilesPatch,t.createPatch=Sw.createPatch,t.applyPatch=xw.applyPatch,t.applyPatches=xw.applyPatches,t.parsePatch=kw.parsePatch,t.merge=_w.merge,t.convertChangesToDMP=Tw.convertChangesToDMP,t.convertChangesToXML=Nw.convertChangesToXML,t.canonicalize=yw.canonicalize});t(Pw);Pw.canonicalize,Pw.convertChangesToXML,Pw.convertChangesToDMP,Pw.merge,Pw.parsePatch,Pw.applyPatches,Pw.applyPatch,Pw.createPatch,Pw.createTwoFilesPatch,Pw.structuredPatch,Pw.diffArrays,Pw.diffJson,Pw.diffCss,Pw.diffSentences,Pw.diffTrimmedLines;var Aw=Pw.diffLines,Lw=Pw.diffWordsWithSpace;Pw.diffWords,Pw.diffChars,Pw.Diff;function Mw(e){return[e[1],e[0]]}function Ow(e){const{type:t,base:n,target:r}=e;return"insert_node"!==t||r?"remove_node"!==t||n?t:"insert_node":"remove_node"}function Iw({model:e,diff:t,cells:n}){const r=new Map(t.map(e=>[e.id,e])),i=[],o=[],s=e.nodes.filter(e=>!n.get(e.id).disabled),a=Rf.of(Gc({},e,{nodes:s}));return s.forEach(e=>{const t=r.get(e.id);t&&(null!=t.baseId&&i.push([t.baseId,e.id]),null!=t.targetId&&o.push([t.targetId,e.id]))}),{patchModel:a,baseToLocal:i,targetToLocal:o}}function Rw(e,t){for(let n of e.events)n.version=++t}function Dw(e,t,n){const r=new Map(n.map(Mw)),i=new Map(e.mapping.filter(([,e])=>r.has(e)).map(([e,t])=>[e,r.get(t)]));for(let o of e.events)"insert_node"===o.type&&i.has(o.node_id)&&(o.target_document_id=t,o.target_node_id=i.get(o.node_id))}const Fw=1e3;class jw extends G.Component{constructor(...e){super(...e),qc(this,"state",{notebook:{model:void 0,comments:[],likes:0,forks:0,like:!1,collections:[],save_version:void 0,latest_version:void 0},baseNotebook:void 0,newId:void 0,shiftKey:!1,created:!1,bottomHover:!1,hoverId:null,focusId:null,errorMessage:void 0,hintVisible:!1,keyboardShortcutsModal:!1,ancestry:void 0,cells:new Map,workerEvents:[],workerKey:void 0,diff:void 0,platformSupport:[],participants:[],openComments:new Set}),qc(this,"anchorId",null),qc(this,"autocompleteResolve",null),qc(this,"cropResolve",null),qc(this,"contentRef",null),qc(this,"clientRef",null),qc(this,"onFullScreen",()=>{vf.fullscreenElement===this.contentRef?(this.contentRef.focus(),this.contentRef.classList.add("fullscreen-stretch")):this.contentRef.classList.remove("fullscreen-stretch")}),qc(this,"fullscreen",()=>{vf.requestFullscreen(this.contentRef)}),qc(this,"reloadCollections",async()=>{const{notebook:{id:e}}=this.state,{api:t}=this.props,{collections:n}=await t.init({cache:"no-cache"}).documentLoad(e);this.setState(({notebook:e})=>({notebook:Gc({},e,{collections:n})})),n.length?t.collectionLoad(n[0].owner.login,n[0].slug).then(e=>{this.setState({collectionContext:e})}):this.setState({collectionContext:void 0})}),qc(this,"workerAutocomplete",({name:e,path:t,prefix:n,nonce:r})=>(this.setState(({workerEvents:i})=>(i.push({type:"autocomplete",name:e,path:t,prefix:n,nonce:r}),{workerEvents:i})),new Promise(e=>this.autocompleteResolve=e))),qc(this,"onContentRef",e=>{this.contentRef=e}),qc(this,"commit",async()=>{const{focusId:e,notebook:{model:{version:t}}}=this.state;return null!==e&&(await new Promise(e=>this.setState({focusId:null},e)),await new Promise(e=>this.setState({},e))),t}),qc(this,"save",async e=>{let{notebook:{save_version:t}}=this.state;for(;t<e;)t=await new Promise(e=>this.saveResolve=e)}),qc(this,"publish",async e=>{if(e){let{target:t}=e;for(;t&&t.tabIndex<0;)t=t.parentNode;t&&t.blur&&t.blur()}const{api:t,history:n,location:r}=this.props,i=await this.commit();await this.save(i);try{const{notebook:{id:e,owner:{login:s},model:{title:a}}}=this.state,{update_time:l,slug:c}=await t.documentPublish(e,i,a),u=`/@${s}/${c}`;u!==r.pathname?n.push(u):this.setState(({notebook:e})=>({notebook:Gc({},e,{edit_unpublished:!1,publish_time:e.publish_time||new Date(l),publish_version:i})}))}catch(o){this.setState({errorMessage:"Oops, publishing failed. Try again?"})}}),qc(this,"publishUnlisted",async()=>{const{api:e}=this.props,t=await this.commit();await this.save(t);const{notebook:{id:n,model:{title:r}}}=this.state;try{const{update_time:o}=await e.documentPublish(n,t,r,!0);this.setState(({notebook:e})=>({notebook:Gc({},e,{edit_unpublished:!1,publish_time:new Date(o),publish_version:t})}))}catch(i){this.setState({errorMessage:"Oops, sharing failed. Try again?"})}}),qc(this,"unpublish",async()=>{const{notebook:{id:e}}=this.state,{api:t,match:{params:{documentSlug:n}},history:r}=this.props;try{await t.documentUnpublish(e),this.setState(({notebook:e})=>({notebook:Gc({},e,{slug:void 0,edit_unpublished:!1,publish_time:void 0,publish_version:void 0})}),n?()=>{r.replace(`/d/${e}`)}:void 0)}catch(i){this.setState({errorMessage:`Oops, un${n?"publishing":"sharing"} failed. Try again?`})}}),qc(this,"reload",e=>{e&&e.preventDefault(),window.location.reload(!0)}),qc(this,"trash",async()=>{const{api:e,history:t}=this.props,{notebook:{id:n}}=this.state;try{await e.documentTrash(n),t.push("/")}catch(r){console.log(r),this.setState({errorMessage:"Oops, trashing failed. Try again?"})}}),qc(this,"setError",e=>this.setState({errorMessage:e})),qc(this,"unsavedEvents",()=>{const{notebook:{save_version:e,model:t}}=this.state;return t.events.slice(e+1,t.version+1).map(Df)}),qc(this,"doFork",async({team:e}={})=>{const{api:t,user:n}=this.props,{notebook:r}=this.state;return t.documentFork(r.id,r.save_version,{events:this.unsavedEvents(),comments:Ah(n,r)?[]:r.comments.map(e=>{return Kc(e,["id","user","create_time"])}),team:e})}),qc(this,"fork",async({team:e}={})=>{await this.commit();const{history:t,user:n,type:r}=this.props,{notebook:{id:i,save_version:o,comments:s},openComments:a}=this.state;if("compare"===r)return this.forkFromCompare({team:e});if(!a.size||confirm("Your unsaved comments will be lost. Continue?"))if(n)try{const n=await this.doFork({team:e});t.push(`/d/${n.id}`)}catch(l){this.setState({errorMessage:"Oops, forking failed. Try again?"})}else this.props.showLogin({loginReason:"fork",loginAction:()=>{Hf&&(Hf.setItem("forkId",i),Hf.setItem("fork",JSON.stringify({save_version:o,events:this.unsavedEvents(),comments:s})))}})}),qc(this,"forkFromPlayground",async()=>{await this.commit();const{notebook:{id:e,save_version:t}}=this.state;this.props.showLogin({loginReason:"playground",loginAction:()=>{Hf&&(Hf.setItem("forkId",e),Hf.setItem("fork",JSON.stringify({save_version:t,events:this.unsavedEvents()}))),jf&&jf.removeItem("playground")}})}),qc(this,"forkFromCompare",async({team:e,internal:t}={})=>{await this.commit();const{api:n,history:r}=this.props,{notebook:i,baseNotebook:o,diff:s,cells:a,openComments:l}=this.state;if(l.size&&!confirm("Your unsaved comments will be lost. Continue?"))return;const{patchModel:c,baseToLocal:u,targetToLocal:h}=Iw({model:i.model,diff:s,cells:a}),d=i.save_model.patch(c,h);Rw(d,i.save_version),Dw(d,o.id,u);try{const s=await n.documentFork(i.id,i.save_version,{events:[],team:e});if(await n.documentMerge(s.id,i.save_version,{events:d.events.map(Df),target:{id:o.id,version:o.save_version}}),t)return s;r.push(`/d/${s.id}`)}catch(p){if(t)return!1;this.setState({errorMessage:"Oops, forking failed. Try again?"})}}),qc(this,"transfer",async e=>{await this.commit();const{api:t}=this.props,{notebook:{id:n}}=this.state;try{await t.documentTransfer(n,e),this.load(this.props)}catch(r){this.setState({errorMessage:"Oops, transfer failed. Try again?"})}}),qc(this,"merge",async()=>{await this.commit();const{api:e,history:t}=this.props,{notebook:n,baseNotebook:r,diff:i,cells:o}=this.state,{patchModel:s,baseToLocal:a,targetToLocal:l}=Iw({model:n.model,diff:i,cells:o}),c=r.save_model.patch(s,a);Rw(c,r.save_version),Dw(c,n.id,l);try{await e.documentMerge(r.id,r.save_version,{events:c.events.map(Df),target:{id:n.id,version:n.save_version}}),t.push(`/d/${r.id}`)}catch(u){this.setState({errorMessage:"Oops, merging failed. Try again?"})}}),qc(this,"closeSuggestion",async()=>{const{api:e,history:t,location:n,user:r}=this.props,{notebook:i}=this.state;try{await e.suggestionClose(i.suggestion_from.id),Qh(i)!==n.pathname?t.push(Qh(i)):this.setState(({notebook:e})=>({notebook:Gc({},e,{suggestion_from:Gc({},e.suggestion_from,{close_time:new Date,closer:r})})}))}catch(o){this.setState({errorMessage:"Oops, closing the suggestion failed. Try again?"})}}),qc(this,"targetPatchSize",()=>{const{notebook:e,diff:t,cells:n}=this.state,{patchModel:r,targetToLocal:i}=Iw({model:e.model,diff:t,cells:n});return e.save_model.patch(r,i).events.length}),qc(this,"suggest",async({description:e,team:t}={})=>{await this.commit();const{api:n,history:r,type:i,user:o,location:s}=this.props,{notebook:a,baseNotebook:l}=this.state;let c,u,h;try{if(Ah(o,a))if("compare"===i)c=a.id,u=l.id,h=a.save_version;else{if(!a.fork_of)throw new Error("can't suggest");c=a.id,u=a.fork_of.id,h=await this.commit()}else{const e=await("compare"===i?this.forkFromCompare({team:t,internal:!0}):this.doFork({team:t}));c=e.id,u=a.id,h=e.version}const p=ed(await n.documentSuggest(c,{to_id:u,from_title:a.model.title,version:h,description:e}));p!==s.pathname?r.push(p):this.reload()}catch(d){this.setState({errorMessage:"Oops, suggesting failed. Try again?"})}}),qc(this,"onKeydown",e=>{"Shift"===e.key?this.setState({shiftKey:!0}):"s"===e.key&&e.metaKey?e.preventDefault():Hm.has(e.target.tagName)||"true"===e.target.contentEditable||("?"===e.key?this.setState(({notebook:e,keyboardShortcutsModal:t})=>{if(e.model&&!$h(e))return{keyboardShortcutsModal:!t}}):"Tab"===e.key&&e.altKey&&this.setState(({notebook:{model:t},focusId:n})=>{if(t){if(e.preventDefault(),null===n)return{focusId:t.nodes[e.shiftKey?t.nodes.length-1:0].id};const r=document.querySelector(`[data-node-id="${n}"] textarea`);r&&r.focus()}}))}),qc(this,"onKeyup",e=>{"Shift"===e.key&&this.setState({shiftKey:!1})}),qc(this,"onNodeEditorMoveFocus",(e,t)=>{const{notebook:{model:{nodes:n}}}=this.state,r=n[n.findIndex(t=>t.id===e)+t];r&&this.setState({focusId:r.id})}),qc(this,"onNodeEditorSelect",(e,t)=>{this.setState(ow(e,t))}),qc(this,"onNodeEditorInput",(e,t,n)=>{this.setState(ew(e,t,n))}),qc(this,"onNodeEditorInsertBefore",(e,t,n,r)=>{this.setState(Gy(e,t,n,r))}),qc(this,"onNodeEditorInsertAfter",(e,t,n,r)=>{this.setState(function(e,t,n,r){return qy(e,t,!1,n,r)}(e,t,n,r))}),qc(this,"onNodeEditorMoveNode",(e,t)=>{this.setState(Xy(e,t))}),qc(this,"onNodeEditorPinNode",(e,t)=>{this.setState(Jy(e,t))}),qc(this,"onNodeEditorRemoveNode",e=>{this.setState(Yy(e))}),qc(this,"onNodeEditorMergeNode",(e,t,n)=>{this.setState(Ky(e,t,n))}),qc(this,"onNodeInserterInsert",e=>{this.setState(Gy(e,""))}),qc(this,"setError",e=>{this.setState(Zy(e))}),qc(this,"onNodeComparerChangeSource",(e,t)=>{this.setState(nw(t,e))}),qc(this,"revert",()=>{this.setState(iw(this.save,()=>window.location.reload()))}),qc(this,"onLike",()=>{const{api:e,user:t}=this.props;if(!t)return this.props.showLogin({loginReason:"like"});const{notebook:n}=this.state;this.setState({notebook:Gc({},n,{like:!n.like,likes:n.like?n.likes-1:n.likes+1})},async()=>{try{await e.documentLike(n.id,!n.like)}catch(t){this.setState(({notebook:e})=>({notebook:Gc({},e,{like:e.like,likes:e.likes})})),this.setState({errorMessage:"Oops, liking failed. Try again?"})}})}),qc(this,"onCommentOpen",e=>{this.setState(({openComments:t})=>(t.add(e),{openComments:t}))}),qc(this,"onCommentClose",e=>{this.setState(({openComments:t})=>(t.delete(e),{openComments:t}))}),qc(this,"onCommentHeight",(e,t)=>{this.setState(uw(e,t))}),qc(this,"insertComment",(e,t)=>{const{notebook:n}=this.state;this.setState(sw(e,t,this.clientRef,this.props.user,Yh(n)))}),qc(this,"removeComment",(e,t)=>{confirm("Delete this comment?")&&this.setState(aw(e,t,this.clientRef,this.props.user))}),qc(this,"resolveComments",e=>{this.setState(lw(e,this.clientRef))}),qc(this,"onClientComments",e=>{this.setState(cw(e))}),qc(this,"onClientCommentConfirm",async(e,t)=>{this.setState(({notebook:n})=>({notebook:Gc({},n,{comments:n.comments.map(n=>n.nonce===t?Gc({id:e},n):n)})}))}),qc(this,"onNodeEditorFocus",e=>{this.setState({focusId:e})}),qc(this,"onNodeEditorBlur",()=>{this.setState({focusId:null})}),qc(this,"onNodeEditorHeight",(e,t)=>{this.setState(hw(e,t))}),qc(this,"onNodeInserterMerge",e=>{const{notebook:{model:{nodes:t}}}=this.state;this.onNodeEditorMergeNode(e,t.find(t=>t.id===e).value,!0)}),qc(this,"onNodeHover",e=>{this.setState({hoverId:e})}),qc(this,"onBottomEnter",()=>{this.setState({bottomHover:!0})}),qc(this,"onBottomLeave",()=>{this.setState({bottomHover:!1})}),qc(this,"onWorkerEvent",e=>{const{cells:t}=this.state;let n;switch(e.type){case"load":if(!(n=t.get(e.id)))return;n.loaded=!0,this.maybeScrollIfLoaded();break;case"cropped":this.cropResolve(e);break;case"error":this.setError(e);break;case"resize":if(!(n=t.get(e.id)))return;n.workerHeight!==e.height&&(n.workerHeight=e.height,this.setState({cells:new Map(t)}));break;case"secrets":this.onSecrets();break;case"autocompleted":this.autocompleteResolve(e);break;case"ready":this.setState({platformSupport:e.platformSupport})}}),qc(this,"onClientRef",e=>{this.clientRef=e}),qc(this,"onClientSave",(e,t)=>{this.setState(({focusId:n,cells:r,workerEvents:i,notebook:o})=>{let s;const a=o.model;try{const n=[];o=Gc({},o,{model:s=a.merge(e,e=>n.push(e)),save_version:t,update_time:new Date}),({cells:r,workerEvents:i}=Vy(r,i,n))}catch(l){return{errorMessage:G.createElement("div",null,"Oops, someone reverted this notebook!",G.createElement("a",{href:"#",className:"ml1 black-70 hover-blue link",onClick:this.reload},"Please reload?"))}}if(null!=n&&!r.has(n)){let e,t=a.nodes.findIndex(e=>e.id===n)+1;for(;t<a.nodes.length;){let n=a.nodes[t].id;if(s.nodes.some(e=>e.id===n)){e=n;break}}({notebook:o,cells:r,workerEvents:i}=zy(o,r,i,[{type:"insert_node",node_id:n,new_next_node_id:e}]))}return{cells:r,workerEvents:i,notebook:o}})}),qc(this,"onClientSaveConfirm",e=>{this.saveResolve&&(this.saveResolve(e),this.saveResolve=null),this.setState(({notebook:t})=>({notebook:Gc({},t,{save_version:e,latest_version:e,update_time:new Date})}))}),qc(this,"onClientError",()=>{this.setState({errorMessage:G.createElement("div",null,"Oops, unable to connect.",G.createElement("a",{href:"#",className:"ml1 black-70 hover-blue link",onClick:this.reload},"Try reloading?"))})}),qc(this,"onClientPresence",e=>{this.setState({participants:e})}),qc(this,"onPutBack",async()=>{const{api:e}=this.props,{notebook:{id:t,model:n}}=this.state;await e.documentPutBack(t),this.setState(({notebook:e})=>({notebook:Gc({},e,{trashed:!1}),focusId:n.nodes[0].id}))}),qc(this,"onNodeGutterClick",(e,t)=>{const{type:n}=this.props;this.disallowHint(),this.setState(rw(e,t,n))}),qc(this,"onNodeDragStart",e=>{this.nodeDraggingId=e,this.nodePositions=[...document.querySelectorAll("[data-node-id]")].map(e=>{const t=e.getBoundingClientRect();return{id:+e.dataset.nodeId,elem:e,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY}}),this.setState({dragging:!0})}),qc(this,"findClosest",e=>{if(!this.nodePositions)return;let t=1/0,n=void 0,r=void 0;for(let i=0;i<this.nodePositions.length;i++){const o=this.nodePositions[i];let s=Math.abs(e-o.top),a=Math.abs(e-o.bottom);s<t&&(t=s,n=o.id),a<t&&(t=a,n=this.nodePositions.length>i+1?this.nodePositions[i+1].id:null,r=o.id)}return{next:n,before:r}}),qc(this,"clearPreview",()=>{for(let e of document.querySelectorAll(".show-before,.show-after"))e.classList.remove("show-before","show-after")}),qc(this,"onNodeDrag",e=>{if(null==this.nodeDraggingId)return;let{next:t,before:n}=this.findClosest(e);this.clearPreview(),null!==t?document.querySelector(`[data-node-id="${t}"]`).classList.add("show-before"):document.querySelector(`[data-node-id="${n}"]`).classList.add("show-after")}),qc(this,"onNodeDrop",e=>{if(void 0===this.nodeDraggingId)return;let{next:t}=this.findClosest(e);this.nodePositions=[];const{nodeDraggingId:n}=this;return this.nodeDraggingId=void 0,this.clearPreview(),this.setState(Qy(n,t))}),qc(this,"onSecrets",async()=>{const{user:e}=this.props,{notebook:{id:t},notebook:n}=this.state;let r=null;if(function(e,t){return Ah(e,t)&&!Hh(t)}(e,n)){const{api:e}=this.props;null===(r=await e.documentLoadSecrets(t))&&confirm("Allow this notebook to access your secrets?")&&(r=await e.documentAllowSecrets(t,!0))}this.setState(({workerEvents:e})=>(e.push({type:"secrets",secrets:r}),{workerEvents:e}))}),qc(this,"maybeScrollIfLoaded",e=>{if(this.anchorId){const{notebook:{model:t},cells:n}=this.state;if(!e)for(const e of t.nodes){const{id:t}=e;if(t===this.anchorId)break;if(!n.get(t).loaded)return}const r=n.get(this.anchorId);if(r){const e=document.getElementById(r.name);window.scrollBy(0,e.getBoundingClientRect().top)}this.anchorId=null}}),qc(this,"showKeyboardShortcuts",()=>{this.setState({keyboardShortcutsModal:!0})}),qc(this,"hideKeyboardShortcuts",()=>{this.setState({keyboardShortcutsModal:!1})}),qc(this,"dismissHint",()=>{this.setState({hintVisible:!1}),this.disallowHint()}),qc(this,"disallowHint",()=>{let e=new Date(Date.now()+31536e6).toUTCString();document.cookie=`sawClickToEdit=true; Expires=${e}; Path=/`}),qc(this,"changeAllSource",e=>{this.setState(nw(e,"all"))}),qc(this,"autoMerge",()=>{this.setState(tw)})}componentDidMount(){this.load(this.props),addEventListener("keydown",this.onKeydown),addEventListener("keyup",this.onKeyup),vf.addEventListener("fullscreenchange",this.onFullScreen)}componentWillReceiveProps(e){const{type:t,match:{params:{id:n}}}=e;n&&n===this.state.notebook.id&&t===this.props.type&&"compare"!==t||this.props.location.pathname===e.location.pathname||this.load(e)}componentDidUpdate(e,{notebook:{model:t}}){const{api:n,type:r,history:i}=this.props,{id:o,created:s,notebook:{owner:a,save_version:l,model:c}}=this.state;"playground"===r&&c&&c!==t&&c.version>l&&jf&&jf.setItem("playground",JSON.stringify({id:o,save_version:l,events:c.events.slice(l+1).map(Df)})),"default"===r&&c&&c.version>1&&!o&&!s&&(this.setState({created:!0}),n.documentNew(c,"team"===a.type?a.id:void 0).then(({id:e,version:t,update_time:n})=>{this.setState(({notebook:r})=>({notebook:Gc({},r,{update_time:new Date(n),id:e,save_version:t})}),()=>i.replace(`/d/${e}`))}))}componentWillUnmount(){removeEventListener("keydown",this.onKeydown),removeEventListener("keyup",this.onKeyup),vf.removeEventListener("fullscreenchange",this.onFullScreen)}async load(e){const{user:t}=e;let{cells:n,workerEvents:r}=this.state,{api:i,type:o,match:{params:{baseId:s,baseVersion:a,documentSlug:l,id:c=s,version:u,userLogin:h,teamLogin:d}},history:p}=e,f=u;"compare"===o&&(a=/^~/.test(a)?await i.documentVersion(s)-a.substr(1):a&&+a.substr(1),f=u=u&&+u.substr(1)),n.clear(),r.length=0,this.setState({id:c,cells:n,hoverId:null,focusId:null,errorMessage:void 0,keyboardShortcutsModal:!1,hintVisible:this.hintAllowed(),workerEvents:r,workerKey:Date.now(),notebook:{likes:0,like:!1,collections:[],comments:[]},ancestry:void 0,collectionContext:void 0,openComments:new Set,participants:[],created:!(!l&&!c)});let m,g,v,b,y,w,k={};switch(o){case"safe":case"default":if(c){if((k=await i.documentLoad(c)).slug)return p.replace(`/@${k.owner.login}/${k.slug}`)}else if(l)k=await i.documentLoadPublished(h,l,t&&(t.login===h||t.teams.some(e=>e.login===h))?"latest":void 0);else{if(d&&!t.teams.some(e=>e.login===d))throw new Zc;k={version:1,creator:t,owner:d?Gc({},t.teams.find(e=>e.login===d),{type:"team"}):Gc({},t,{type:"individual"}),update_time:new Date,nodes:[{id:0,value:"md`# Untitled`"}]}}k.collections&&k.collections.length&&i.collectionLoad(k.collections[0].owner.login,k.collections[0].slug).then(e=>{this.setState({collectionContext:e})});break;case"compare":[k,m,g,v,b]=await Promise.all([i.documentLoad(c,u),i.documentLoad(s,a),t&&i.documentLoadMeta(c),t&&i.documentLoadMeta(s),f&&a?i.documentsLoadCommonAncestry(s,a,c,f):null]),k=Gc({},k,g),m=Gc({},m,v),null==b&&(b=await i.documentsLoadCommonAncestry(s,m.version,c,k.version));break;case"versioned":case"thumbnail":k=l?await i.documentLoadPublished(h,l,u):await i.documentLoad(c,u);break;case"playground":jf&&jf.getItem("playground")?(({id:c,save_version:u,events:y}=JSON.parse(jf.getItem("playground"))),k=await i.documentLoad(c,u)):k=await i.documentLoadPublished("observablehq","playground")}k.comments=[],m&&(m.comments=[]),"thumbnail"!==o&&"compare"!==o&&k&&k.id&&t&&i.documentLoadMeta(k.id).then(({latest_version:e,forks:t,fork_of:n,like:r,suggestion_from:i,suggestions_to:o})=>{this.setState(({notebook:s})=>({notebook:Gc({},s,{latest_version:e,forks:t,fork_of:n,like:r,suggestion_from:i,suggestions_to:o})}))}),"compare"===o?(k.save_model=Rf.of(k),k.collections=[],m.save_model=Rf.of(m),({diff:w}=function(e,{mapping:t,target_changes:n,base_changes:r}){const i=new Map(t.map(Mw)),o=new Set(n),s=new Set(r),a={insert_node:0,modify_node:0,remove_node:0,noop:0,total:0};for(const[l,c]of e.entries())if(a[Ow(c)]++,"noop"!==c.type&&a.total++,c.id=l,c.baseId=c.base?c.base.id:null,c.targetId=c.target?c.target.id:null,null==c.baseId&&i.has(c.targetId)&&(c.baseId=i.get(c.targetId)),c.base&&c.target){c.modified_by=o.has(c.targetId)&&s.has(c.baseId)?"both":s.has(c.baseId)?"base":"target";const e=Aw(c.base.value,c.target.value);e.forEach((t,n)=>{const r=e[n-1],i=e[n+1];let o;if(t.added&&r&&r.removed&&(o=r),t.removed&&i&&i.added&&(o=i),o){const e=Lw(t.added?o.value:t.value,t.added?t.value:o.value).filter(e=>t.added?!e.removed:!e.added);e.forEach((e,t,n)=>{const r=n[t-1],i=n[t+1];r&&r.added&&i&&i.added&&" "===e.value&&!e.added&&(e.added=!0),r&&r.removed&&i&&i.removed&&" "===e.value&&!e.removed&&(e.removed=!0)}),t.wordDiff=e}}),c.lineDiff=e}return{diff:e,count:a}}(m.save_model.diff(k.save_model,b.mapping),b)),m.save_version=m.version,k.save_version=k.version):(k.save_version=k.version,k.model=Rf.of(k),k.save_version&&(k.model.events.length=k.save_version+1)),y&&(k.model=k.model.apply(y));const E="compare"===o?w.map(e=>Gc({},e.target||Gc({},e.base,{value:"",disabled:!0}),{id:e.id})):k.model.nodes,x=E.map(e=>{const{id:t,value:n,pinned:r}=e;return{type:"insert_node",node_id:t,new_node_value:n,new_node_pinned:r}});if(({cells:n,workerEvents:r}=Vy(n,r,x)),"compare"===o&&(k.model=Rf.of({version:x.length,title:k.title,nodes:E}),w.forEach(e=>{const t=n.get(e.id);t.diff=e,t.source="modify_node"===e.type?"diff":"target",t.disabled=!t.diff.target})),("default"===o||"safe"===o)&&jf&&jf.getItem(`notebook-${k.id}`))try{const e=JSON.parse(jf.getItem(`notebook-${k.id}`));if(jf.removeItem(`notebook-${k.id}`),k.model.version===e[0].version-1){const t=[];k.model=k.model.merge(e,e=>t.push(e)),({cells:n,workerEvents:r}=Vy(n,r,t))}}catch(_){}const S=k.model.nodes[0].id;1===k.model.version&&(n.get(S).selections=[{anchor:5,head:13}]);const C=e.location.hash;if(C)for(const[T,{name:N}]of n)if(N===C.substr(1)){this.anchorId=T,setTimeout(()=>this.maybeScrollIfLoaded(!0),Fw);break}k.update_time&&(k.update_time=new Date(k.update_time)),k.publish_time&&(k.publish_time=new Date(k.publish_time)),delete k.version,m&&delete m.version,this.setState({notebook:k,baseNotebook:m,ancestry:b,cells:n,focusId:1===k.model.version?S:null,workerEvents:r,diff:w})}hintAllowed(){const{type:e}=this.props;return"default"===e&&!document.cookie.split("; ").includes("sawClickToEdit=true")}render(){let{type:e,token:t,user:n,location:r,match:i}=this.props;const{params:{userLogin:o}}=i,{notebook:s,baseNotebook:a,shiftKey:l,cells:c,bottomHover:u,hoverId:h,focusId:d,workerEvents:p,workerKey:f,errorMessage:m,keyboardShortcutsModal:g,hintVisible:v,collectionContext:b,platformSupport:y,ancestry:w,participants:k,openComments:E,dragging:x}=this.state;let S=Fm;const{model:C,comments:_,save_version:T,suggestion_from:N,suggestions_to:P}=s;if(C)for(const G of C.nodes){const{editorHeight:e,commentHeight:t,comparerHeight:n,workerHeight:r}=c.get(G.id);S+=e+t+n+r+jm}const A=k.find(e=>e.id!==n.id),L=s.id&&Ah(n,s),M=L&&"versioned"!==e&&"compare"!==e,O=Yh(s),I=function(e){if(!e)return!1;const{publish_time:t}=e;return null==t}(s)?"private":jh(s)?"shared":"published",R="compare"!==e?C&&C.title:s&&a&&`Comparing ‘${Jh(a)}’ to ‘${Jh(s)}’`,D=qh(s);let F=C&&("compare"!==e?C.version-T:this.targetPatchSize());const j=Mh(n,s),H=n&&("default"===e||"safe"===e||"compare"===e&&Wh(s)&&Bh(s,a)&&Vh(s));let $=j?0:_.filter(e=>e.user.id===n.id).length;F+=$;const U="compare"===e?function(e,t,n){return Dh(e,t)?(Bh(t,n)||Bh(n,t))&&Vh(n)&&Vh(t)?Th:_h:Rh(e,n)&&Bh(n,t)&&Vh(n)&&Vh(t)?Gh(n)?Ph:Nh:null}(n,a,s):function(e,t){return Gh(t)&&!Mh(e,t)?Ph:Ah(e,t)?Hh(t)?qh(t)?xh:Eh:kh:zh(t)?Ch:Sh}(n,s),W=!(!s.collections||!s.collections.length),B="playground"!==e&&(s.fork_of||s.forks||W||N||P&&P.length),V="playground"!==e,z=(q=U)===Th||q===xh||q===Ch||q===Ph;var q;return G.createElement(Nd,{query:{maxWidth:1024}},i=>G.createElement(Rp,Object.assign({contextUI:C&&("playground"===e?G.createElement(Ny,{forkFromPlayground:this.forkFromPlayground}):$h(s)?null:"compare"===e||C.version>1?G.createElement(Ty,{user:n,notebook:s,baseNotebook:a,primaryAction:U,fullscreen:vf.fullscreenEnabled&&this.fullscreen,editable:M,notebookStatus:I,unsavedChanges:F,hasUnpublishedChanges:D,suggestion:O&&N,type:e,publish:this.publish,publishUnlisted:this.publishUnlisted,unpublish:this.unpublish,suggest:this.suggest,merge:this.merge,revert:this.revert,trash:this.trash,reloadCollections:this.reloadCollections,closeSuggestion:this.closeSuggestion,fork:this.fork,transfer:this.transfer}):null),isNotebook:!0,footerContent:b&&G.createElement(Ly,{collection:b,notebook:s}),grayFooter:!!b,nofooter:"thumbnail"===e,stickyHeader:z,hintVisible:v&&!z,onDismissHint:this.dismissHint},this.props),G.createElement(rl,null,C&&G.createElement("title",null,R)),m?G.createElement("div",{className:"relative w-100"},G.createElement("div",{className:"absolute w-100 nt4 tc"},G.createElement("div",{className:"dib ph2 pv1 f7 fw4 dark-red black-50 bg-washed-red br2 br--bottom"},m))):C&&M&&D&&G.createElement("div",{className:"relative w-100"},G.createElement("div",{className:"absolute w-100 nt4 tc"},G.createElement("div",{className:"dib ph2 pv1 f7 fw4 black-50 bg-near-white br2 br--bottom"},"This notebook has been edited since",s.slug?" publishing":" sharing",".",G.createElement(Wc,{className:"ml1 no-underline black-70 hover-blue",to:`/compare/${s.id}@${s.publish_version}`},"View changes?")))),$h(s)?G.createElement(qg,{onPutBack:this.onPutBack}):C&&(L||O)&&H&&G.createElement(Qf,{ref:this.onClientRef,notebook:s,token:t,editable:M,onSave:this.onClientSave,onSaveConfirm:this.onClientSaveConfirm,onPresence:this.onClientPresence,onComments:this.onClientComments,onCommentConfirm:this.onClientCommentConfirm,onError:this.onClientError}),N&&("default"===e||"compare"===e&&N.to_id===a.id&&Vh(a)&&Vh(s))?G.createElement(My,{type:e,suggestion:N,toNotebook:"compare"===e?a:s.fork_of,closeSuggestion:this.closeSuggestion}):null,"compare"===e&&s&&s.id&&a&&a.id&&G.createElement(av,{type:e,user:n,notebook:s,baseNotebook:a,ancestry:w,autoMerge:this.autoMerge,changeAllSource:this.changeAllSource}),"versioned"===e&&G.createElement(ev,{exitTo:`/d/${s.id}`},G.createElement("b",null,"Showing version ",s.save_version,".")," Any changes you make will not be saved."),"safe"===e&&G.createElement(ev,{exitTo:r.pathname.slice(0,-5)},G.createElement("b",null,"Safe mode enabled.")," Use this code-only view to fix issues that might crash or hang the normal editor."),V&&s.owner&&G.createElement("div",{className:"flex justify-between ph3"},G.createElement(sf,{user:s.owner,creator:s.creator,time:"versioned"===e?s.update_time:s.publish_time||s.update_time,updateTime:"versioned"!==e&&s.publish_time&&s.update_time>s.publish_time?s.update_time:void 0,status:I}),("compare"!==e&&s.publish_version||A)&&G.createElement("div",{className:"flex flex-column items-center ml2 f6"},"compare"!==e&&s.publish_version&&G.createElement(uv,{notebook:s,onClick:this.onLike}),A&&G.createElement(Zg,{participants:k}))),B?G.createElement("div",{className:"ph3 mt4",style:{minHeight:"2rem"}},W?G.createElement(Py,{notebook:s}):null,P&&P.length?G.createElement(cv,{id:s.id,suggestions:P}):null,G.createElement(Jg,{notebook:s,userLogin:o})):null,"playground"===e&&G.createElement(hv,{save:this.forkFromPlayground,onHelp:this.showKeyboardShortcuts}),"default"===e&&G.createElement(pm,{cells:c,platformSupport:y}),C&&G.createElement("div",{className:`relative mh0-ns nl3 ${B||"playground"===e?"":"mt5"}`,style:{marginLeft:21}},G.createElement("div",{ref:this.onContentRef,tabIndex:"-1",className:"relative outline-0",onMouseLeave:()=>this.onNodeHover(null)},"safe"!==e&&G.createElement(gy,{key:f,id:s.id,login:s.owner.login,events:p,height:S,path:r.pathname+r.search,pointerEvents:!x,onNodeHover:this.onNodeHover,onWorkerEvent:this.onWorkerEvent}),G.createElement("div",{className:"absolute h-100",style:{width:"50vw",left:"-50vw"}}),G.createElement("div",{className:"dib relative w-100 code f6 lh-copy black pen"},C&&C.nodes&&C.nodes.map((t,r)=>{const o=c.get(t.id),u=t.id===d||t.pinned||o.empty||"safe"===e||"compare"===e&&o.diff&&"noop"!==o.diff.type,p="compare"===e&&o.diff?Ow(o.diff):"normal",f={};o.name&&(f.id=o.name);const m="compare"===e?o.diff&&o.diff.targetId:t.id,g=_.filter(e=>e.node_id===m),v=E.has(m);return G.createElement("div",Object.assign({},f,{"data-node-id":t.id,key:t.id,className:"relative",onMouseEnter:()=>this.onNodeHover(t.id),style:{marginTop:Fm,marginBottom:jm,paddingTop:"safe"===e||o.empty||o.disabled?0:o.workerHeight}}),G.createElement("div",{className:"bg-light-blue drag-marker-before"}),G.createElement("div",{className:"bg-light-blue drag-marker-after"}),G.createElement(Qg,{id:t.id,merge:l,visible:t.id===h||t.id===d||r>0&&C.nodes[r-1].id===h||r>0&&C.nodes[r-1].id===d,onInsert:this.onNodeInserterInsert,onMerge:r>0&&this.onNodeInserterMerge}),u&&G.createElement(G.Fragment,null,"compare"===e&&o.diff&&"noop"!==o.diff.type&&G.createElement(Yg,{id:t.id,source:o.source,edited:o.edited,onChangeSource:this.onNodeComparerChangeSource,diff:o.diff,notebook:s,baseNotebook:a}),("compare"!==e||"diff"!==o.source)&&G.createElement(Vg,{id:t.id,value:o.disabled?o.diff["base"===o.source?"target":"base"].value:t.value,pinned:t.pinned,type:p,cell:o,hovered:t.id===h,focused:t.id===d,cellNames:By(c),workerAutocomplete:this.workerAutocomplete,onFocus:this.onNodeEditorFocus,onBlur:this.onNodeEditorBlur,onHeight:this.onNodeEditorHeight,onInput:this.onNodeEditorInput,onInsertBefore:this.onNodeEditorInsertBefore,onInsertAfter:this.onNodeEditorInsertAfter,onMergeNode:this.onNodeEditorMergeNode,onRemoveNode:this.onNodeEditorRemoveNode,onMoveFocus:this.onNodeEditorMoveFocus,onMoveNode:this.onNodeEditorMoveNode,onPinNode:this.onNodeEditorPinNode,onSelect:this.onNodeEditorSelect,autoClosePairs:n&&n.setting_autoclose_pairs}),"compare"===e&&"diff"===o.source&&G.createElement(Xg,{id:t.id,diff:o.diff,onHeight:this.onNodeEditorHeight})),G.createElement(zg,{mobile:i,cell:o,node:t,hovered:t.id===h,focused:t.id===d,type:e,open:u,commentable:H&&null!=m,commentNodeId:m,onCommentOpen:this.onCommentOpen,onRemove:this.onNodeEditorRemoveNode,onNodeDragStart:this.onNodeDragStart,onNodeDrag:this.onNodeDrag,onNodeDrop:this.onNodeDrop,onClick:this.onNodeGutterClick}),(g.length>0||v)&&G.createElement(Hy,{node:t,commentNodeId:m,open:v,notebook:s,owned:L,suggestion:O&&N,onCommentOpen:this.onCommentOpen,onCommentClose:this.onCommentClose,onCommentHeight:this.onCommentHeight,onCommentInsert:this.insertComment,onCommentRemove:this.removeComment,onCommentResolve:this.resolveComments,comments:g}))}),G.createElement("div",{className:"relative",style:{marginTop:Fm,marginBottom:jm}},G.createElement(Qg,{id:null,merge:l,hovered:u,visible:u||C.nodes[C.nodes.length-1].id===h||C.nodes[C.nodes.length-1].id===d,onInsert:this.onNodeInserterInsert}))),G.createElement("div",{className:"relative h4 pointer",onMouseEnter:this.onBottomEnter,onMouseLeave:this.onBottomLeave,onClick:()=>this.onNodeInserterInsert(null),title:`Click to insert. ${om("Alt-Enter")}`,style:{marginLeft:"-50vw",width:"calc(100% + 50vw)"}}))),Wa.createPortal(G.createElement("div",null,G.createElement(Oy,{type:e,unsavedChanges:F,editable:M,baseNotebook:a,notebook:s}),G.createElement("div",{className:"fixed bottom-1 right-1 tc z-2"},"thumbnail"!==e&&G.createElement(Mp,{keyboardShortcuts:!0,showKeyboardShortcuts:this.showKeyboardShortcuts}))),document.getElementsByClassName("overlay")[0]),g&&G.createElement(nh,{onDismiss:this.hideKeyboardShortcuts,wrapperClass:"overflow-y-auto"},G.createElement(um,{onDismiss:this.hideKeyboardShortcuts}))))}}qc(jw,"defaultProps",{api:void 0,type:"default",user:void 0,token:void 0,history:void 0,match:void 0,latest:void 0});var Hw=[{license:{license:"MIT"},modules:[{author:"mrmrs",modules:["tachyons-custom"]},{author:"Facebook, Inc. and its affiliates.",modules:["react-dom","react","scheduler"]},{author:"NFL",modules:["react-helmet"]},{author:"Michael Jackson and Ryan Florence",modules:["react-router","react-router-dom"]},{author:"Sindre Sorhus",modules:["query-string","object-assign"]},{author:"Michael Jackson",modules:["react-media","history","resolve-pathname","value-equal"]},{author:"Rafael Pedicini",modules:["fscreen"]},{author:"Marijn Haverbeke",modules:["codemirror"]},{author:"John-David Dalton",modules:["lodash-es"]},{author:"Misha Moroshko",modules:["react-autosuggest","react-autowhatever","shallow-equal","section-iterator"]},{author:"Blake Embrey",modules:["path-to-regexp"]},{author:"Kevin Mårtensson",modules:["strict-uri-encode"]},{author:"Sam Verschueren",modules:["decode-uri-component"]},{author:"Facebook, Inc.",modules:["prop-types"]},{author:"Dan Abramov",modules:["react-side-effect"]},{author:"James Halliday",modules:["deep-equal"]},{author:"Andres Suarez",modules:["invariant"]},{author:"Julian Gruber",modules:["isarray"]},{author:"Marijn Haverbeke, Ingvar Stepanyan and Adrian Heine",modules:["acorn","acorn-walk"]},{author:"Alberto Leal",modules:["shallowequal"]},{author:"Mark Dalgleish",modules:["react-themeable"]},{author:"by Adrian Heine",modules:["acorn-bigint"]}]},{license:{license:"ISC"},modules:[{author:"Observable, Inc.",modules:["d3-require","@observablehq/runtime","@observablehq/parser","@observablehq/inspector","@observablehq/stdlib"]}]},{license:{license:"BSD-3-Clause"},modules:[{author:"Kevin Decker",modules:["diff"]},{author:"Berkeley Martinez",modules:["warning"]},{author:"Michael Ridgway",modules:["hoist-non-react-statics"]},{author:"Jed Watson",modules:["exenv"]}]}];function $w(e){return G.createElement(Rp,Object.assign({},e,{gray:!0}),G.createElement(rl,null,G.createElement("title",null,"Open Source")),G.createElement("h2",{className:"mt4 mb2 f4 fw7 lh-title black-70"},"Open Source"),G.createElement("div",{className:"measure-wide f5 fw4 lh-copy black-70"},G.createElement("p",null,"Observable wouldn’t be possible without the code written and freely shared by the open source community. This web application includes code from the following modules."),Hw.map(({license:e,modules:t},n)=>G.createElement("div",{key:n,className:"mt4"},G.createElement("div",{className:"mb3 f5 fw7 semitracked"},function e(t){return t.license?-1!==t.license.indexOf("LicenseRef")?'License Reference "'+t.license+'"':[G.createElement("a",{key:1,className:"no-underline black-70 hover-blue",href:`https://spdx.org/licenses/${t.license}.html`},t.license),t.plus?" or newer":"",t.exception?" with "+t.exception:""]:[e(t.left)," ",t.conjunction," ",e(t.right)]}(e)),G.createElement("div",{className:"mt2 lh-copy"},t.map(({author:e,modules:t},n)=>G.createElement("div",{key:n,className:"mt1"},function(e){if(2===(e=e.map((e,t)=>G.createElement("a",{key:t,className:"no-underline blue hover-dark-blue",href:`https://npmjs.org/package/${e}`},e))).length)e.splice(1,0," and ");else if(e.length>2){let t=[];for(let n=0;n<e.length;n++)t.push(e[n]),n<e.length-1&&(n==e.length-2?t.push(", and "):t.push(", "));e=t}return e}(t)," © ",e)))))))}Hw.find(e=>"MIT"===e.license.license).modules.push({author:"Cole Bemis",modules:["feather-icons"]},{author:"Khan Academy",modules:["katex"]},{author:"Christopher Jeffrey",modules:["marked"]}),Hw.find(e=>"ISC"===e.license.license).modules.push({author:"Dominic Tobias",modules:["react-image-crop"]});const Uw=Rc(class extends G.Component{async componentDidMount(){let{api:e,history:t,match:{params:{path:n}},location:{search:r}}=this.props;const{signup:i}=lu(r);if(n=n?`/${n.replace(/^(loggedin\/)+/,"")}`:"/",!sh.user)return window.history.replaceState(null,"",n),void window.location.reload(!0);const o=Hf&&Hf.getItem("fork");if(o){const t=Hf.getItem("forkId"),r=JSON.parse(o),{save_version:i}=r,s=Kc(r,["save_version"]),{id:a}=await e.documentFork(t,i,s);n=`/d/${a}`,Hf.removeItem("forkId"),Hf.removeItem("fork")}t.replace(n,{signup:i})}render(){return G.createElement(Rp,this.props,G.createElement(rl,null,G.createElement("title",null,"Logged In")))}});class Ww extends G.Component{render(){throw new Zc}}class Bw extends G.Component{constructor(...e){super(...e),qc(this,"controller",null)}componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){this.load(e)}componentWillUnmount(){this.abort()}parseParams(e){const{query:t,offset:n}=lu(e.location.search);return{query:t,offset:+n||0}}abort(){this.controller&&(this.controller.abort(),this.controller=null)}load(e){const{query:t,offset:n}=this.parseParams(e);if(this.abort(),!t)return void this.setState({notebooks:[]});const{api:r}=e;this.controller=new AbortController,this.setState({notebooks:new Array(27).fill(void 0)}),r.init({signal:this.controller.signal}).documentSearch(t,n).then(e=>{this.controller=null,this.setState({notebooks:e})})}render(){const{notebooks:e}=this.state,{query:t,offset:n}=this.parseParams(this.props);return G.createElement(Rp,Object.assign({},this.props,{gray:!0}),G.createElement(rl,null,G.createElement("title",null,"Search")),t?G.createElement("div",null,G.createElement("div",{className:"mv4 f4 fw4 lh-copy black-70"},"Search results for ‘",t,"’"),0===e.length?G.createElement("div",{className:"flex h5 items-center justify-center"},G.createElement("div",{className:"black-50"},"We couldn’t find any notebooks that matched your search.")):G.createElement("div",null,G.createElement("div",{className:"listing-grid"},e.slice(0,27).map((e,n)=>G.createElement(ld,Object.assign({},this.props,{key:e?e.id:n,notebook:e,query:t})))),e.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Wc,{to:`?query=${encodeURIComponent(t)}&offset=${n+27}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…")))):G.createElement("div",{className:"flex justify-center pv5"},G.createElement("form",null,G.createElement("div",{className:"mb3 f4 lh-copy black-50"},"🔍 Search for notebooks"),G.createElement("div",{className:"flex content-stretch items-top"},G.createElement("input",{name:"query",maxLength:"256",className:"flex-auto ph2 mr2 bg-white ba b--black-10 br2 hover-b--black-30 input-reset w-auto"}),G.createElement("input",{type:"submit",value:"Search",className:"pa2 white bg-blue hover-bg-dark-blue br2 pointer bn"})))))}}class Vw extends G.Component{render(){const{code:e}=lu(this.props.location.search);switch(window.history.replaceState(null,"","/"),e){case"401":throw new Qc;case"404":throw new Zc;default:throw new Yc}}}class zw extends G.Component{constructor(...e){super(...e),qc(this,"state",{customer:void 0,error:void 0}),qc(this,"onToken",async e=>{const{team:{id:t},api:n}=this.props;try{await n.teamBillingUpdate(t,e.id)}catch(r){this.setState({error:"Whoops, this payment method could not be used. Please try again, or use another form of payment."})}this.load(this.props)}),qc(this,"updateBilling",()=>{this.openHandler("Update")}),qc(this,"addBilling",()=>{this.openHandler("Subscribe")}),qc(this,"openHandler",e=>{const{team:t,user:n,team:{id:r}}=this.props,{handler:i}=this.state,o=n.teams.find(e=>e.id===r).email;i.open({name:"Observable, Inc.",image:"https://static.observablehq.com/favicon-512.e994d8ef78e387a9715cc1aab4dfdbc250bf565186e1165a931b055d1e02e84d.png",description:`${t.name||t.login}: Team account`,email:o,panelLabel:e})}),qc(this,"removeBilling",async()=>{const{team:e}=this.props;if(!confirm(`Are you sure you want to cancel the subscription for ${e.name||e.login}?`))return;const{team:{id:t},api:n}=this.props;await n.teamBillingDelete(t),this.load(this.props)}),qc(this,"dismissError",()=>{this.setState({error:void 0})})}componentWillMount(){Og("https://checkout.stripe.com/checkout.js").catch(()=>this.setState({handler:window.StripeCheckout.configure({key:"pk_live_A5hiyxHhT8FK6EIWYFZMuHo8",locale:"auto",zipCode:!0,token:this.onToken})})),this.load(this.props)}componentWillReceiveProps(e){this.load(e)}componentWillUnmount(){const{handler:e}=this.state;e&&e.close()}load({team:e,api:t}){e&&t.teamBilling(e.id).then(e=>this.setState({customer:e}))}render(){const{customer:e,error:t}=this.state;if(void 0===e)return G.createElement(Xp,null,"Loading billing information…");let n,r,i,o;try{({sources:{data:[n]}}=e),({subscriptions:{data:[{quantity:r,plan:{amount:i}}]}}=e),o=!!(n&&r&&i)}catch(s){o=!1}return G.createElement(G.Fragment,null,t&&G.createElement("div",{className:"relative pa3 mb4 bg-washed-yellow br2"},G.createElement("button",{className:"inline-flex absolute right-1 top-1 pa1 black-50 hover-black bg-transparent bn pointer",onClick:this.dismissError},G.createElement(Eu,{className:"w1 h1"})),G.createElement("div",{className:"mr3 lh-copy black-70"},t)),G.createElement("div",{className:"fw5"},"Your plan"),!0===o?G.createElement("div",{className:"mt3"},G.createElement("div",null,G.createElement("span",{className:"mr2 fw5 black"},"$",(i*r/100).toFixed(0),"/month"),G.createElement("span",{className:"black-30"},r," user",1===r?"":"s"," at $",(i/100).toFixed(0),"/month")),G.createElement("div",{className:"mt4 fw5"},"Payment method"),G.createElement("div",{className:"mt3"},n.brand," ending in ",n.last4," Expiration ",n.exp_month,"/",n.exp_year),G.createElement("div",{className:"mt3"},G.createElement(Yp,{secondary:!0,onClick:this.updateBilling},"Update payment method")),G.createElement("div",{className:"flex items-center justify-center mt5"},G.createElement("button",{className:"ph2 pv1 f6 black-70 hover-white bg-transparent hover-bg-red ba b--black-10 br2 pointer",title:"Delete payment method",onClick:this.removeBilling},"Cancel subscription"))):!1===o?G.createElement("div",null,G.createElement("div",{className:"mv3 lh-copy black-70"},"This team has no attached payment information. To avoid it being deactivated in the next billing cycle, please set up billing."),G.createElement("button",{className:"ph3 pv2 f6 fw6 white bg-blue hover-bg-dark-blue br2 pointer bn",onClick:this.addBilling},"Add payment method")):null)}}class qw extends G.Component{constructor(...e){super(...e),qc(this,"state",{popover:!1}),qc(this,"togglePopover",e=>{e.stopPropagation(),this.setState(({popover:e})=>({popover:!e}))}),qc(this,"remove",async()=>{const{api:e,team:t,member:n,reload:r}=this.props;confirm(`Are you sure you want to remove @${n.login} from the team?`)&&(await e.teamMemberRemove(t.id,n.id),await r())}),qc(this,"promote",async()=>{const{api:e,team:t,member:n,reload:r}=this.props;await e.teamMemberRole(t.id,n.id,"owner"),await r(),this.setState({popover:!1})}),qc(this,"demote",async()=>{const{api:e,team:t,member:n,reload:r}=this.props;await e.teamMemberRole(t.id,n.id,"member"),await r(),this.setState({popover:!1})})}render(){const{popover:e}=this.state,{member:t,team:{role:n},user:r}=this.props;return G.createElement("div",{className:"flex justify-between items-center pv2"},G.createElement(Wc,{className:"inline-flex items-center no-underline black hover-blue",to:`/@${t.login}`},G.createElement(uh,{user:t,s:16,className:"mr2 br-100"}),t.name||t.login),G.createElement("div",{className:"inline-flex relative items-center"},G.createElement("span",{className:"mh2 f7 fw4 ttu black-30"},"owner"===t.role?"OWNER":"MEMBER"),"owner"===n&&t.id!==r.id&&G.createElement("button",{onClick:this.togglePopover,title:"Team member actions…",className:"inline-flex pa0 black-30 hover-black bg-transparent bn pointer"},G.createElement(Au,{className:"w1 h1"})),e&&G.createElement(vh,{onClickOutside:this.togglePopover,extraStyle:{right:-16,width:"13rem",top:18}},G.createElement("div",{className:"pv2"},"member"===t.role&&G.createElement("a",{onClick:this.remove,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},"Remove from team…"),G.createElement("a",{onClick:"owner"===t.role?this.demote:this.promote,className:"flex items-center ph3 pv2 f6 fw6 lh-copy black-70 hover-black hover-bg-near-white pointer"},"owner"===t.role?"Change role to member":"Change role to owner")))))}}class Gw extends G.Component{constructor(...e){super(...e),qc(this,"state",{members:[],email:"",invitations:[]}),qc(this,"reload",()=>{const{api:e}=this.props;this.load(Gc({},this.props,{api:e.init({cache:"no-cache"})}))}),qc(this,"onChangeEmail",e=>{const{target:{value:t}}=e;this.setState({email:t})}),qc(this,"rescind",async e=>{if(!e.id)return void alert("This invitation was just sent; please wait a moment.");if(!confirm(`Are you sure you want to rescind the invitation to ${e.email}?`))return;const{api:t,team:n}=this.props;this.setState(({invitations:t})=>({invitations:t.filter(t=>e!==t)})),await t.teamRescindInvitation(n.id,e.id),this.load(this.props)}),qc(this,"invite",async e=>{e.preventDefault();const{api:t,team:n,user:r}=this.props,{email:i}=this.state;this.setState(({invitations:e})=>({email:"",invitations:e.filter(e=>e.email!==i).concat({email:i,create_time:new Date,accept_time:null,owner:r})})),await t.teamInvite(n.id,i),this.load(this.props)})}componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){this.load(e)}load({team:e,api:t}){e&&(t.teamMembers(e.id).then(e=>this.setState({members:e.sort((e,t)=>t.role.localeCompare(e.role)||(e.name||e.login).localeCompare(t.name||t.login))})),"owner"===e.role&&t.teamInvitations(e.id).then(e=>this.setState({invitations:e.map(e=>{let{create_time:t}=e;return Gc({},Kc(e,["create_time"]),{create_time:new Date(t)})})})))}render(){const{team:e}=this.props,{members:t,email:n,invitations:r}=this.state,i=r.filter(e=>!e.accept_time);return G.createElement("div",null,G.createElement("div",{className:"mb3 fw5"},"Members"),G.createElement("div",{className:"pv2 bt bb b--black-10"},t.map(e=>G.createElement(qw,Object.assign({key:e.id,member:e},this.props,{reload:this.reload})))),"owner"===e.role?G.createElement("div",null,i.length>0&&G.createElement(G.Fragment,null,G.createElement("div",{className:"mt5 mb3 fw5"},"Invitations"),G.createElement("div",{className:"pv2 bt bb b--black-10"},i.map((e,t)=>G.createElement("div",{key:t,className:"pv2"},G.createElement("div",{className:"flex justify-between items-center"},e.email,e.id?G.createElement("button",{onClick:this.rescind.bind(this,e),title:"Click to rescind invitation.",className:"inline-flex pa0 black-30 hover-white bg-transparent hover-bg-dark-red bn pointer"},G.createElement(Eu,{className:"w1 h1 ma1"})):null),G.createElement("div",{className:"mt1 f7 fw4 black-30"},"Invited"," ",G.createElement(Iy,{time:e.create_time})," by"," ",G.createElement(Wc,{to:`/@${e.owner.login}`,className:"no-underline black-50 hover-blue"},e.owner.name||e.owner.login)))))),G.createElement("div",{className:"mt5"},G.createElement("form",{className:"flex flex-column mw5-ns center items-stretch",onSubmit:this.invite},G.createElement("h3",{className:"ma0 f6 fw5 black-70"},"Invite member"),G.createElement("label",{className:"db mt3 mb1 f6 fw5 black-50",htmlFor:"invite-email"},"Email"),G.createElement("input",{id:"invite-email",name:"email",type:"email",maxLength:"255",required:!0,value:n,onChange:this.onChangeEmail,className:"pa2 mb2 bg-white ba b--black-10 br2 hover-b--black-30",placeholder:"user@email.com"}),G.createElement(Yp,{disabled:!n,highlight:n},"Send")))):G.createElement("div",{className:"pv2 mt3 f6 tc black-30"},"Owners in this team can invite new members and change roles."))}}var Kw=({onDismiss:e})=>G.createElement(nh,{onDismiss:e},G.createElement("div",{className:"relative"},G.createElement("div",{onClick:e,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(Eu,{className:"w1 h1"})),G.createElement("h3",{className:"mt0 mb2 f4 fw7 black"},"Please check your email to accept this change."),G.createElement("div",{className:"mt3 f6 lh-copy"},"You should receive an email momentarily confirming this email address change. If you do not receive it, please check your Spam folder, wait a few minutes, or contact Observable support."),G.createElement("div",{className:"flex items-center justify-end mt3"},G.createElement("button",{onClick:e,className:"inline-flex ph3 pv2 f6 fw6 white bg-blue hover-bg-dark-blue br2 pointer bn"},"Close"))));const Yw="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";function Xw(e){const t=e.getBoundingClientRect(),n=document.documentElement;return{top:t.top+window.pageYOffset-n.clientTop,left:t.left+window.pageXOffset-n.clientLeft}}function Qw(e){let t,n;return e.touches?(t=e.touches[0].pageX,n=e.touches[0].pageY):(t=e.pageX,n=e.pageY),{x:t,y:n}}function Jw(e,t,n){return Math.min(Math.max(e,t),n)}function Zw(e){return e&&e.width&&e.height}function ek(e){let t;return"n"===e?t="s":"ne"===e?t="sw":"e"===e?t="w":"se"===e?t="nw":"s"===e?t="n":"sw"===e?t="ne":"w"===e?t="e":"nw"===e&&(t="se"),t}class tk extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{}),qc(this,"onCropMouseTouchDown",e=>{const{crop:t}=this.props;e.preventDefault();const n=Qw(e);this.componentRef.focus({preventScroll:!0});const{ord:r}=e.target.dataset,i="nw"===r||"w"===r||"sw"===r,o="nw"===r||"n"===r||"ne"===r;let s;t.aspect&&(s=Xw(this.cropSelectRef)),this.evData={clientStartX:n.x,clientStartY:n.y,cropStartWidth:t.width,cropStartHeight:t.height,cropStartX:i?t.x+t.width:t.x,cropStartY:o?t.y+t.height:t.y,xInversed:i,yInversed:o,xCrossOver:i,yCrossOver:o,startXCrossOver:i,startYCrossOver:o,isResize:e.target!==this.cropSelectRef,ord:r,cropOffset:s},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),qc(this,"onComponentMouseTouchDown",e=>{const{crop:t,keepSelection:n,onChange:r}=this.props;if(e.target!==this.imageRef)return;if(n&&Zw(t))return;e.preventDefault();const i=Qw(e);this.componentRef.focus({preventScroll:!0});const o=Xw(this.imageRef),s=(i.x-o.left)/this.imageRef.width*100,a=(i.y-o.top)/this.imageRef.height*100,l={aspect:t?t.aspect:void 0,x:s,y:a,width:0,height:0};this.evData={clientStartX:i.x,clientStartY:i.y,cropStartWidth:l.width,cropStartHeight:l.height,cropStartX:l.x,cropStartY:l.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},this.mouseDownOnCrop=!0,r(l,nk(this.imageRef,l)),this.setState({cropIsActive:!0})}),qc(this,"onDocMouseTouchMove",e=>{const{crop:t,onChange:n,onDragStart:r}=this.props;if(r(),!this.mouseDownOnCrop)return;e.preventDefault();const{evData:i}=this,o=Qw(e);i.isResize&&t.aspect&&i.cropOffset&&(o.y=this.straightenYPath(o.x));const s=o.x-i.clientStartX;i.xDiffPc=s/this.imageRef.width*100;const a=o.y-i.clientStartY;let l;i.yDiffPc=a/this.imageRef.height*100,n(l=i.isResize?this.resizeCrop():this.dragCrop(),nk(this.imageRef,l))}),qc(this,"onComponentKeyDown",e=>{const{crop:t,onChange:n,onComplete:r}=this.props,i=e.which;let o=!1;if(!Zw(t))return;const s=this.makeNewCrop();i===tk.arrowKey.left?(s.x-=tk.nudgeStep,o=!0):i===tk.arrowKey.right?(s.x+=tk.nudgeStep,o=!0):i===tk.arrowKey.up?(s.y-=tk.nudgeStep,o=!0):i===tk.arrowKey.down&&(s.y+=tk.nudgeStep,o=!0),o&&(e.preventDefault(),s.x=Jw(s.x,0,100-s.width),s.y=Jw(s.y,0,100-s.height),n(s,nk(this.imageRef,s)),r(s,nk(this.imageRef,s)))}),qc(this,"onDocMouseTouchEnd",()=>{const{crop:e,onComplete:t,onDragEnd:n}=this.props;n(),this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,t(e,nk(this.imageRef,e)),this.setState({cropIsActive:!1}))})}componentDidMount(){const e={passive:!1};if(document.addEventListener("mousemove",this.onDocMouseTouchMove,e),document.addEventListener("touchmove",this.onDocMouseTouchMove,e),document.addEventListener("mouseup",this.onDocMouseTouchEnd,e),document.addEventListener("touchend",this.onDocMouseTouchEnd,e),document.addEventListener("touchcancel",this.onDocMouseTouchEnd,e),this.imageRef.complete||this.imageRef.readyState)if(0===this.imageRef.naturalWidth){const{src:e}=this.imageRef;this.imageRef.src=Yw,this.imageRef.src=e}else this.onImageLoad(this.imageRef)}componentWillUnmount(){document.removeEventListener("mousemove",this.onDocMouseTouchMove),document.removeEventListener("touchmove",this.onDocMouseTouchMove),document.removeEventListener("mouseup",this.onDocMouseTouchEnd),document.removeEventListener("touchend",this.onDocMouseTouchEnd),document.removeEventListener("touchcancel",this.onDocMouseTouchEnd)}onImageLoad(e){this.props.onImageLoaded(e)}getCropStyle(){const{crop:e}=this.props;return{top:`${e.y}%`,left:`${e.x}%`,width:`${e.width}%`,height:`${e.height}%`}}getNewSize(){const{crop:e,minWidth:t,maxWidth:n,minHeight:r,maxHeight:i}=this.props,{evData:o}=this,s=this.imageRef.width/this.imageRef.height;let a,l=o.cropStartWidth+o.xDiffPc;return o.xCrossOver&&(l=Math.abs(l)),l=Jw(l,t,n),a=e.aspect?l/e.aspect*s:o.cropStartHeight+o.yDiffPc,o.yCrossOver&&(a=Math.min(Math.abs(a),o.cropStartY)),a=Jw(a,r,i),e.aspect&&(l=Jw(a*e.aspect/s,0,100)),{width:l,height:a}}dragCrop(){const e=this.makeNewCrop(),{evData:t}=this;return e.x=Jw(t.cropStartX+t.xDiffPc,0,100-e.width),e.y=Jw(t.cropStartY+t.yDiffPc,0,100-e.height),e}resizeCrop(){const e=this.makeNewCrop(),{evData:t}=this,{ord:n}=t,r=this.imageRef.width/this.imageRef.height;t.xInversed&&(t.xDiffPc-=2*t.cropStartWidth),t.yInversed&&(t.yDiffPc-=2*t.cropStartHeight);const i=this.getNewSize();let o=t.cropStartX,s=t.cropStartY;t.xCrossOver&&(o=e.x+(e.width-i.width)),t.yCrossOver&&(s=!1===t.lastYCrossover?e.y-i.height:e.y+(e.height-i.height));const a=function(e,t){const n=Gc({},e);let r=!1;n.x+n.width>100?(n.width=e.width+(100-(e.x+e.width)),n.x=e.x+(100-(e.x+n.width)),r=!0):n.x<0&&(n.width=e.x+e.width,n.x=0,r=!0),r&&e.aspect&&(n.height=n.width/e.aspect*t,n.y<e.y&&(n.y=e.y+(e.height-n.height)));let i=!1;return n.y+n.height>100?(n.height=e.height+(100-(e.y+e.height)),n.y=e.y+(100-(e.y+n.height)),i=!0):n.y<0&&(n.height=e.y+e.height,n.y=0,i=!0),i&&e.aspect&&(n.width=n.height*e.aspect/t,n.x<e.x&&(n.x=e.x+(e.width-n.width))),n}({x:o,y:s,width:i.width,height:i.height,aspect:e.aspect},r);return e.aspect||tk.xyOrds.indexOf(n)>-1?(e.x=a.x,e.y=a.y,e.width=a.width,e.height=a.height):tk.xOrds.indexOf(n)>-1?(e.x=a.x,e.width=a.width):tk.yOrds.indexOf(n)>-1&&(e.y=a.y,e.height=a.height),t.lastYCrossover=t.yCrossOver,this.crossOverCheck(),e}straightenYPath(e){const{evData:t}=this,{ord:n}=t,{cropOffset:r}=t,i=t.cropStartWidth/100*this.imageRef.width,o=t.cropStartHeight/100*this.imageRef.height;let s,a;return"nw"===n||"se"===n?(s=o/i,a=r.top-r.left*s):(s=-o/i,a=r.top+(o-r.left*s)),s*e+a}createCropSelection(){const e=this.getCropStyle();return G.createElement("div",{ref:e=>{this.cropSelectRef=e},style:e,className:"absolute top-0 left-0 ReactCrop__crop-selection",onMouseDown:this.onCropMouseTouchDown,onTouchStart:this.onCropMouseTouchDown},G.createElement("div",{className:"ReactCrop__drag-elements"},G.createElement("div",{className:"absolute ReactCrop__drag-bar ord-n","data-ord":"n"}),G.createElement("div",{className:"absolute ReactCrop__drag-bar ord-e","data-ord":"e"}),G.createElement("div",{className:"absolute ReactCrop__drag-bar ord-s","data-ord":"s"}),G.createElement("div",{className:"absolute ReactCrop__drag-bar ord-w","data-ord":"w"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-nw","data-ord":"nw"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-n","data-ord":"n"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-ne","data-ord":"ne"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-e","data-ord":"e"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-se","data-ord":"se"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-s","data-ord":"s"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-sw","data-ord":"sw"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-w","data-ord":"w"})))}makeNewCrop(){return Gc({},tk.defaultCrop,this.props.crop)}crossOverCheck(){const{evData:e}=this;(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiffPc>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiffPc<=0)&&(e.xCrossOver=!e.xCrossOver),(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiffPc>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiffPc<=0)&&(e.yCrossOver=!e.yCrossOver);const t=e.xCrossOver!==e.startXCrossOver,n=e.yCrossOver!==e.startYCrossOver;e.inversedXOrd=!!t&&ek(e.ord),e.inversedYOrd=!!n&&ek(e.ord)}render(){const{children:e,crossorigin:t,crop:n,imageAlt:r,src:i,style:o,imageStyle:s}=this.props,{cropIsActive:a}=this.state;let l;Zw(n)&&(l=this.createCropSelection());const c=["ReactCrop relative dib overflow-hidden bg-black"];return a&&c.push("ReactCrop--active"),n&&(n.aspect&&c.push("ReactCrop--fixed-aspect"),!a||n.width&&n.height||c.push("ReactCrop--crop-invisible")),G.createElement("div",{ref:e=>{this.componentRef=e},className:c.join(" "),style:o,onTouchStart:this.onComponentMouseTouchDown,onMouseDown:this.onComponentMouseTouchDown,tabIndex:"1",onKeyDown:this.onComponentKeyDown},G.createElement("img",{ref:e=>{this.imageRef=e},crossOrigin:t,className:"db ReactCrop__image",style:s,src:i,onLoad:e=>this.onImageLoad(e.target),alt:r}),l,e)}}function nk(e,t){const n=Math.round(e.naturalWidth*(t.x/100)),r=Math.round(e.naturalHeight*(t.y/100)),i=Math.round(e.naturalWidth*(t.width/100)),o=Math.round(e.naturalHeight*(t.height/100));return{x:n,y:r,width:Jw(i,0,e.naturalWidth-n),height:Jw(o,0,e.naturalHeight-r)}}tk.xOrds=["e","w"],tk.yOrds=["n","s"],tk.xyOrds=["nw","ne","se","sw"],tk.arrowKey={left:37,up:38,right:39,down:40},tk.nudgeStep=.2,tk.defaultCrop={x:0,y:0,width:0,height:0},tk.defaultProps={crop:void 0,crossorigin:void 0,imageAlt:"",maxWidth:100,maxHeight:100,minWidth:0,minHeight:0,keepSelection:!1,onComplete:()=>{},onImageLoaded:()=>{},onDragStart:()=>{},onDragEnd:()=>{},children:void 0,style:void 0,imageStyle:void 0};const rk=460;class ik extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{saving:!1,maxDimension:Math.min(window.innerWidth-40,rk),crop:{aspect:1}}),qc(this,"onCrop",e=>{this.setState({crop:e})}),qc(this,"saveAvatar",async()=>{this.setState({saving:!0});const{crop:e}=this.state,{teamId:t,fileURL:n,hideAvatarModal:r,refreshUser:i,reloadTeam:o,api:s}=this.props,a=await new Promise((e,t)=>{const r=new Image;r.onload=(()=>e(r)),r.onerror=(e=>t(e)),r.src=n}),{x:l,y:c,width:u,height:h}=nk(a,e),d=document.createElement("canvas");d.width=rk,d.height=rk,d.getContext("2d").drawImage(a,l,c,u,h,0,0,rk,rk);const p=d.toDataURL("image/jpeg",.7);await(t?s.teamEditAvatar(t,p):s.userEditAvatar(p)),await Promise.all([i(),o&&o()]),r()}),qc(this,"onImageLoaded",e=>{this.setState({crop:e.width>e.height?{aspect:1,height:100,width:100*e.height/e.width,x:100*(e.width-e.height)/e.width/2,y:0}:{aspect:1,height:100*e.width/e.height,width:100,x:0,y:100*(e.height-e.width)/e.height/2}})})}render(){const{saving:e,crop:t,maxDimension:n}=this.state,{fileURL:r,hideAvatarModal:i}=this.props;return G.createElement(nh,{onDismiss:i},G.createElement("div",{className:"relative"},G.createElement("div",{onClick:i,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(Eu,{className:"w1 h1"})),G.createElement("h3",{className:"mt0 mb2 f4 fw7 black"},"Replace your avatar"),G.createElement("div",{className:"pv2"},G.createElement(tk,{src:r,onChange:this.onCrop,imageStyle:{maxWidth:n,maxHeight:n},crop:t,onImageLoaded:this.onImageLoaded})),G.createElement("div",{className:`flex items-center justify-end mt3 ${e?"pen o-50":""}`},G.createElement("div",{className:"mr2"},G.createElement(Yp,{secondary:!0,onClick:i},"Cancel")),G.createElement(Yp,{highlight:!0,onClick:this.saveAvatar},"Save"))))}}class ok extends G.Component{constructor(e){super(e),qc(this,"state",{user:{},email:void 0,fileURL:void 0,saved:!1,saveTimer:void 0,sendingEmailConfirmation:!1,emailConfirmationModal:!1,avatarModal:!1}),qc(this,"hideEmailConfirmation",()=>{this.setState({emailConfirmationModal:!1})}),qc(this,"onChange",e=>{const{target:{name:t,value:n,type:r,checked:i}}=e;this.setState(({user:e})=>({user:Gc({},e,{[t]:"checkbox"===r?i:n})}))}),qc(this,"onChangeEmail",e=>{const{target:{value:t}}=e;this.setState({email:t})}),qc(this,"save",async e=>{e.preventDefault();const{teamId:t,api:n,refreshUser:r,reloadTeam:i}=this.props,{user:o}=this.state;await(t?n.teamEdit(t,o):n.userEdit(o)),await Promise.all([r(),i&&i()]),this.setState({saved:!0,saveTimer:setTimeout(()=>{this.setState({saved:!1})},1e3)})}),qc(this,"saveEmail",async e=>{e.preventDefault(),document.activeElement&&document.activeElement.blur();const{teamId:t,api:n}=this.props,{email:r}=this.state;this.setState({sendingEmailConfirmation:!0}),await(t?n.teamEditEmail(t,r):n.userEditEmail(r)),this.setState({emailConfirmationModal:!0,sendingEmailConfirmation:!1})}),qc(this,"triggerAvatar",()=>{const e=this.fileInputRef.current;e&&e.click()}),qc(this,"onFileChange",async e=>{const[t]=e.target.files;e.target.value="",this.setState({avatarModal:!0,file:t,fileURL:URL.createObjectURL(t)})}),qc(this,"hideAvatarModal",()=>{const{fileURL:e}=this.state;URL.revokeObjectURL(e),this.setState({avatarModal:!1,fileURL:void 0})}),this.fileInputRef=G.createRef()}componentWillMount(){this.reload()}componentWillReceiveProps(e){this.state.avatar_url===e.user.avatar_url?this.reload(e):this.setState({avatar_url:e.user.avatar_url})}reload(e=this.props){const{user:{name:t,home_url:n,bio:r,email:i,setting_autoclose_pairs:o,avatar_url:s}}=e;this.setState({user:{name:t,home_url:n,bio:r,setting_autoclose_pairs:o},avatar_url:s,email:i})}render(){const{refreshUser:e}=this.props,{user:t,saved:n,email:r,emailConfirmationModal:i,sendingEmailConfirmation:o,avatarModal:s,fileURL:a,avatar_url:l}=this.state,{teamId:c,user:u,reloadTeam:h}=this.props,d=u.name!==t.name||u.home_url!==t.home_url||u.bio!==t.bio||u.setting_autoclose_pairs!==t.setting_autoclose_pairs,p=u.email!==r;return G.createElement(G.Fragment,null,G.createElement(Ul,{when:d||p,message:"Are you sure you want to leave before saving changes?"}),G.createElement("form",{onSubmit:this.save,className:"flex flex-column items-stretch"},G.createElement("div",{className:"flex-ns"},G.createElement("div",{className:"flex flex-column w4 items-stretch"},G.createElement("img",{className:`w4 h4 mt4 br-100 ${l?"":"ba b--black-10"}`,src:l?`${l}?s=256`:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}),G.createElement("button",{type:"button",className:"pv2 mt2 f6 fw6 no-underline black-70 hover-black bg-light-gray hover-bg-moon-gray br2 pointer bn",onClick:this.triggerAvatar},"Change avatar")),G.createElement("div",{className:"flex flex-column flex-auto items-stretch mt4 mt0-ns ml4-ns"},G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"name"},c?"Team display name":"Display name"),G.createElement("input",{id:"name",name:"name",maxLength:"255",className:"pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",onChange:this.onChange,value:t.name}),G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"home_url"},c?"Team URL":"URL"),G.createElement("input",{id:"home_url",name:"home_url",type:"url",maxLength:"255",onChange:this.onChange,className:"pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",value:t.home_url}),G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"bio"},c?"Team bio":"Bio"),G.createElement("textarea",{id:"bio",name:"bio",maxLength:"255",onChange:this.onChange,className:"pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",rows:"5",value:t.bio}),!c&&G.createElement("div",{className:"pa2 mt2 bg-near-white br2"},G.createElement("div",{className:"pb1 f6 fw5 black-50"},"Advanced settings"),G.createElement("div",{className:"flex items-center pt2"},G.createElement("input",{type:"checkbox",id:"setting_autoclose_pairs",name:"setting_autoclose_pairs",onChange:this.onChange,className:"mr1",checked:!!t.setting_autoclose_pairs}),G.createElement("label",{className:"inline-flex items-center mr2 f6 black-50",htmlFor:"setting_autoclose_pairs"},"Auto-close pairs",G.createElement(jy,null,"When you type the first character of a pair",G.createElement("code",{className:"pa1 mh1 f7 bg-near-white"},"({['\"`"),"the editor will automatically insert its complementary closing character,",G.createElement("code",{className:"pa1 ml1 f7 bg-near-white"},")}]'\"`"))))),G.createElement("div",{className:"flex items-center justify-end pt3"},n&&G.createElement("div",{className:"mr3 f6 ttu black-30"},"Saved"),G.createElement(Yp,{disabled:!d,highlight:d},"Save"))))),G.createElement("h3",{className:"pt5 ma0 mb2 f4 fw4 black-70"},"Email settings"),G.createElement("form",{onSubmit:this.saveEmail,className:"flex flex-column items-stretch",style:o?{pointerEvents:"none",opacity:.5}:{}},G.createElement("label",{className:"flex justify-between pt3 pb1 f6 fw5 black-50",htmlFor:"email"},c?"Team email":"Email"),G.createElement("input",{id:"email",name:"email",type:"email",maxLength:"255",className:"pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",onChange:this.onChangeEmail,value:r}),G.createElement("div",{className:"flex items-center justify-end pt3"},G.createElement(Yp,{disabled:!p,highlight:p},o?"Sending…":"Change email"))),i&&G.createElement(Kw,{onDismiss:this.hideEmailConfirmation}),s&&G.createElement(ik,{api:this.props.api,refreshUser:e,reloadTeam:h,fileURL:a,hideAvatarModal:this.hideAvatarModal,teamId:c}),G.createElement("input",{type:"file",className:"dn",accept:".jpg, .jpeg, .png",onChange:this.onFileChange,ref:this.fileInputRef}))}}function sk(e,t){return e.name.localeCompare(t.name)}class ak extends G.Component{constructor(e){super(e),qc(this,"state",{name:"",value:"",saveValue:"",focused:!1}),qc(this,"onFocus",()=>{this.setState({focused:!0})}),qc(this,"onBlur",()=>{this.setState({focused:!1})}),qc(this,"onChangeName",e=>{const{target:{value:t}}=e;this.setState({name:t})}),qc(this,"onChangeValue",e=>{const{target:{value:t}}=e;this.setState({value:t})}),qc(this,"setSecret",e=>{e.preventDefault();const{isNew:t}=this.props,{name:n,value:r}=this.state;this.props.setSecret({name:n,value:r}),this.setState(t?{name:"",value:""}:{saveValue:r})}),e.secret&&(this.state.name=e.secret.name,this.state.value=e.secret.value,this.state.saveValue=e.secret.value)}componentWillReceiveProps(e){e.secret!==this.props.secret&&this.setState({name:e.secret.name,value:e.secret.value,saveValue:e.secret.value})}render(){const{deleteSecret:e,isNew:t}=this.props,{name:n,value:r,focused:i,saveValue:o}=this.state;return G.createElement("form",{onSubmit:this.setSecret,style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gridGap:"5px",marginBottom:5}},t?G.createElement("input",{name:"name",type:"text",maxLength:"255",required:!0,placeholder:"Name",spellCheck:"false",autoComplete:"off",value:n,onChange:this.onChangeName,className:"pa2 code bg-white ba b--black-10 br2 hover-b--black-30"}):G.createElement("div",{className:"pa2 code truncate"},n),G.createElement("input",{name:"value",type:i?"text":"password",maxLength:"1023",placeholder:"Value",spellCheck:"false",autoComplete:"off",required:!0,value:r,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChangeValue,className:"pa2 code bg-white ba b--black-10 br2 hover-b--black-30"}),t||o!==r?G.createElement(Yp,{disabled:!n||!r,highlight:n&&r},"Save"):G.createElement("button",{onClick:()=>e(n),type:"button",title:"Click to delete secret.",className:"inline-flex w3 pa0 mt2 black-30 hover-white hover-dark-red bg-transparent bn pointer"},G.createElement(Eu,{className:"w1 h1 ma1"})))}}class lk extends G.Component{constructor(...e){super(...e),qc(this,"state",{secrets:[],name:"",value:""}),qc(this,"deleteSecret",async e=>{const{api:t,teamId:n}=this.props;this.setState(({secrets:t})=>({secrets:t.filter(t=>t.name!==e)})),await(n?t.teamSetSecret(n,{name:e,value:null}):t.userSetSecret({name:e,value:null})),this.load(this.props)}),qc(this,"setSecret",async({name:e,value:t})=>{const{api:n,teamId:r}=this.props;this.setState(({secrets:n})=>({name:"",value:"",secrets:n.filter(t=>t.name!==e).concat({name:e,value:t}).sort(sk)})),await(r?n.teamSetSecret(r,{name:e,value:t}):n.userSetSecret({name:e,value:t})),this.load(this.props)})}componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){this.load(e)}load({teamId:e,api:t}){(e?t.teamSecrets(e):t.userSecrets()).then(e=>this.setState({secrets:e.sort(sk)}))}render(){const{secrets:e}=this.state;return G.createElement("div",{className:"mw6-ns center"},G.createElement("div",{className:"flex justify-between mb4"},G.createElement("div",{className:"fw5"},"Secrets"),G.createElement(jy,null,G.createElement("div",{className:"f6 black-50"},"Secrets can be accessed by your notebooks using the"," ",G.createElement("code",null,"Secret()")," function. Use secrets to store API keys and other sensitive values you don’t want to be public."))),G.createElement("div",{className:"f6"},e.map(e=>G.createElement(ak,{key:e.name,secret:e,setSecret:this.setSecret,deleteSecret:this.deleteSecret})),G.createElement(ak,{setSecret:this.setSecret,isNew:!0})))}}function ck(e,t){return`db fw5 pv2 ph3 mr2 f6 no-underline br2 br--top bt bl br ${e===t?"black-70 bg-white b--black-10":"black-50 hover-black b--transparent"}`}class uk extends G.PureComponent{render(){const{user:e,match:{params:{tab:t}}}=this.props;return G.createElement(Nd,{query:{maxWidth:640}},n=>G.createElement(Rp,Object.assign({},this.props,{gray:!n}),G.createElement(rl,null,G.createElement("title",null,"Settings")),G.createElement("div",{className:"mw6-ns center-ns ph0-ns ph2 pt4 pb5 mt5-ns bg-white b--black-10 br2 ba-ns"},G.createElement("div",{className:"ph4-ns"},G.createElement(sf,{user:e})),G.createElement("div",null,G.createElement("div",{className:"bb b--black-10"},G.createElement("div",{className:"flex justify-between items-center mh2 mh4-ns mt4",style:{marginBottom:-1}},G.createElement("div",{className:"flex"},G.createElement(Wc,{className:ck(void 0,t),to:"/settings"},"Profile"),G.createElement(Wc,{className:ck("/secrets",t),to:"/settings/secrets"},"Secrets")))),G.createElement("div",{className:"pt4"},G.createElement("div",{className:"ph4-ns"},void 0===t?G.createElement(ok,this.props):"/secrets"===t?G.createElement(lk,this.props):null))))))}}class hk extends G.Component{constructor(...e){super(...e),qc(this,"state",{walkthrough:this.props.location.state&&this.props.location.state.walkthrough}),qc(this,"dismissTeamWalkthrough",()=>{this.setState({walkthrough:!1})})}render(){const{user:e,match:{params:{tab:t,teamLogin:n}}}=this.props,{walkthrough:r}=this.state,i=e.teams.find(e=>e.login===n);if(!i)throw new Zc;return G.createElement(Nd,{query:{maxWidth:640}},n=>G.createElement(Rp,Object.assign({},this.props,{gray:!n}),G.createElement(rl,null,G.createElement("title",null,i.name||i.login)),r&&G.createElement("div",{className:"flex mw6-ns center-ns pa3 nt4 bg-washed-yellow br2 br--bottom"},G.createElement("div",{className:"flex-auto f6 lh-copy black-50"},"Finish setting up your team with a display name, avatar, URL, and team email address. Then"," ",G.createElement(Wc,{className:"no-underline black hover-blue",to:`/team/@${i.login}/settings`},"invite the rest of your team.")),G.createElement("div",{onClick:this.dismissTeamWalkthrough,className:"pl2 light-silver hover-black pointer"},G.createElement(Eu,{className:"w1 h1"}))),G.createElement("div",{className:"mw6-ns center-ns ph0-ns ph2  pb5 bg-white b--black-10 br2 ba-ns pt4 "+(r?"mt4-ns":"mt5-ns")},G.createElement("div",{className:"ph4-ns"},G.createElement(sf,{user:i})),G.createElement("div",{className:"bb b--black-10"},G.createElement("div",{className:"flex justify-between items-center mh2 mh4-ns mt4",style:{marginBottom:-1}},G.createElement("div",{className:"flex"},G.createElement(Wc,{className:ck(void 0,t),to:`/team/@${i.login}/settings`},"Team"),"owner"===i.role&&G.createElement(Wc,{className:ck("/profile",t),to:`/team/@${i.login}/settings/profile`},"Profile"),G.createElement(Wc,{className:ck("/secrets",t),to:`/team/@${i.login}/settings/secrets`},"Secrets"),"owner"===i.role&&G.createElement(Wc,{className:ck("/billing",t),to:`/team/@${i.login}/settings/billing`},"Billing")))),G.createElement("div",{className:"pt4"},G.createElement("div",{className:"ph4-ns"},void 0===t?G.createElement(Gw,Object.assign({},this.props,{team:i})):"/billing"===t?G.createElement(zw,Object.assign({},this.props,{team:i})):"/profile"===t?G.createElement(ok,Object.assign({},this.props,{reloadTeam:this.reload,teamId:i.id,user:Gc({email:e.teams.find(e=>e.id===i.id).email},i)})):"/secrets"===t?G.createElement(lk,Object.assign({},this.props,{teamId:i.id})):null)))))}}function dk({suggestion:e={},first:t,mobile:n}){let{to_title:r,from_id:i,description:o,create_time:s,close_time:a,merge:l,creator:c}=e;const u=G.createElement(Iy,{time:new Date(a||s)}),h=G.createElement("div",{style:n?{flexBasis:0,flexGrow:"3"}:null,className:`flex-auto ${n?"pt1":"pr2"} pv1 truncate`},Jh({title:r})," ",G.createElement("span",{className:"o-80"},o?` – ${function(e,t=55){if(e.length<=t)return e;const n=e.split(" ");let r="";for(;r.length<t;)r&&(r+=" "),r+=n.shift();return r+"…"}(o)}`:""));return G.createElement(Wc,{to:a?Qh({id:i}):ed(e),className:`db ph3 pv2 no-underline black-70 hover-blue hover-bg-washed-blue ${t?"":"bt b--black-10"}`},G.createElement("div",{className:"flex items-start justify-between"},G.createElement("div",{style:n?null:{flexBasis:"12rem",flexShrink:0},className:"flex items-center pv1 mr2 truncate"},G.createElement("span",{style:{lineHeight:0},title:null!=l?"Merged":a?"Closed":"Open"},null!=l?G.createElement(Nu,{className:"w1 h1 mr2 purple"}):a?G.createElement(Wu,{className:"w1 h1 mr2 red"}):G.createElement(Cu,{className:"w1 h1 mr2 green"})),G.createElement(uh,{user:c,s:16,className:"mr2 br-100"}),G.createElement("span",{className:"truncate"},rd(c))),n?null:h,G.createElement("div",{style:n?null:{flexBasis:"8rem"},className:"flex-shrink-0 pv1 truncate o-60"},u)),n?h:null)}function pk({suggestions:e,youDont:t,type:n,mobile:r}){return G.createElement("div",{className:"mt3"},e.length?G.createElement(G.Fragment,null,G.createElement("div",{className:"b--black-10 ba w-100 br2 overflow-hidden bg-white lh-copy f6"},e.map((e,t)=>G.createElement(dk,{mobile:r,key:e.id,suggestion:e,first:0===t}))),e.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Wc,{to:`?${cu({tab:"suggestions",before:e[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))):G.createElement(Xp,null,`${t} ${`have any ${"closed"===n?"closed ":"open"} suggestions.`}`))}function fk({userLogin:e,query:t}){const n="flex items-center pv1 mr3 no-underline black-50 hover-blue ph2 pv1 fw5 ba br2 ";return G.createElement("div",{className:"flex justify-between items-center nt3 f5"},G.createElement("div",{className:"flex items-start"},G.createElement(Wc,{to:`/@${e}?${cu({tab:"suggestions"})}`,className:n+("closed"!==t.type?" bg-white black b--black-10":" b--transparent")},G.createElement("span",null,"Open")),G.createElement(Wc,{to:`/@${e}?${cu({tab:"suggestions",type:"closed"})}`,className:n+("closed"===t.type?" bg-white black b--black-10":" b--transparent")},G.createElement("span",null,"Closed"))))}function mk({pinnedCollections:e}){return G.createElement("div",{className:"pv3 mb4"},G.createElement("div",{className:"flex justify-between mb3"},G.createElement(Wc,{to:"?tab=collections",className:"inline-flex items-center f5 fw4 no-underline black-70 hover-blue hide-child"},"Featured collections",G.createElement(Su,{className:"w1 h1 ml1 child",style:{strokeWidth:1}}))),G.createElement("div",{className:"dg-ns",style:{gridTemplateColumns:"repeat(4, 1fr)",gridGap:16}},e.slice(0,4).map(e=>G.createElement(gk,{key:e.id,collection:e}))))}function gk({collection:e}){const t=e?`/collection/@${e.owner.login}/${e.slug}`:"#",n=e&&e.thumbnail;return G.createElement(Nd,{query:{maxWidth:640}},r=>G.createElement(Wc,{to:t,className:`flex-auto no-underline black br2 ${r?"":"hover-blue hover-shadow-4-trigger"} hide-child`,style:{scrollSnapAlign:"start"}},G.createElement("div",{className:`bg-white br2 ${n?"cover bg-center":""} ${r?"ba b--black-10":"hover-shadow-4"}`,style:{height:"7rem",backgroundImage:n?`url(https://static.observableusercontent.com/thumbnail/${n}.jpg)`:"var(--checkerboard)"}}),G.createElement("div",{className:"flex items-center justify-between pt2 pb3 pb0-ns f6"},G.createElement("div",{className:"fw7 truncate"},e?e.title:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~"),G.createElement(Su,{className:"w1 h1 v-top ml1 child",style:{strokeWidth:1.5}})))))}function vk({stats:e}){return G.createElement("div",{className:"flex items-center pt3 pt0-ns f6"},e?G.createElement(G.Fragment,null,G.createElement("div",{className:"mr1 fw6 black"},yh(e.published_document_count)),G.createElement("div",{className:"mr3 black-50 fw4"},`public notebook${e.published_document_count>1?"s":""}`),G.createElement("div",{className:"mr1 fw6 black"},yh(e.like_count)),G.createElement("div",{className:"mr3 black-50 fw4"},1===e.like_count?"like":"likes"),G.createElement("div",{className:"mr1 fw6 black"},yh(e.fork_count)),G.createElement("div",{className:"black-50 fw4"},1===e.fork_count?"fork":"forks")):G.createElement("span",{className:"near-white bg-near-white"},"~~~~~~~~~~~~~~"))}function bk({document_count:e}){return e>0}function yk(e){const t=lu(e),{type:n,types:r,tab:i}=t;return Gc({},Kc(t,["type","types","tab"]),{type:"trash"===i?"trash":n||r,tab:i})}function wk({showCollectionModal:e}){return G.createElement("div",{onClick:e,className:"inline-flex items-center ph3 pv2 mr2 f6 fw5 no-underline black-50 hover-black pointer"},G.createElement(vu,{className:"w1 h1 mr1"}),G.createElement("div",null,"New collection"))}function kk({emptyTrash:e}){return G.createElement(G.Fragment,null,G.createElement("div",{className:"pa3 f5 lh-copy bg-white ba b--red br2 mb0 mb4-ns"},G.createElement("div",{className:"flex items-center"},G.createElement(Mu,{className:"mr3 red",style:{width:"1.5em",height:"1.5em",strokeWidth:1,flexShrink:0}}),G.createElement("div",{className:"flex-auto"},G.createElement("span",{className:"flex-auto f6 lh-copy black-70",style:{maxWidth:500}},"Notebooks in the trash for more than 30 days will be automatically deleted.")),G.createElement("button",{onClick:e,className:"dn db-ns ph3 pa2 f6 nowrap no-underline dark-red hover-dark-red bg-white hover-bg-washed-red br2 pointer bn"},"Empty trash now"))),G.createElement("button",{onClick:e,className:"db dn-ns center ph3 pa2 mt3 f6 f5 nowrap no-underline dark-red hover-dark-red bg-white hover-bg-washed-red br2 pointer bn mb4"},"Empty trash now"))}function Ek({user:e,tab:t,userLogin:n,role:r}){const i=(e,t)=>`db pv2 mr3 f6 no-underline br2 br--top bb bw2 ${e==t?"black fw5 b--light-blue":"black-50 hover-black b--transparent"}`;return G.createElement("div",{className:"flex flex-auto overflow-x-auto overflow-x-visible-ns"},G.createElement(Wc,{className:i(void 0,t),to:`/@${n}`},"Notebooks"),G.createElement(Wc,{className:i("collections",t),to:"?tab=collections"},"Collections"),"self"===r&&G.createElement(Wc,{className:i("likes",t),to:"?tab=likes"},"Likes"),("self"===r||"member"===r)&&G.createElement(G.Fragment,null,e&&G.createElement(Wc,{className:i("suggestions",t),to:"?tab=suggestions"},"Suggestions"),G.createElement(Wc,{className:i("trash",t),to:"?tab=trash"},"Trash")))}function xk({collections:e,tab:t,type:n,role:r,owner:i,youDont:o}){return G.createElement("div",null,e.length?G.createElement("div",null,G.createElement("div",{className:"dg grid-gap1 grid-template-columns-1 grid-template-columns-3-ns"},e.map((e,t)=>G.createElement(dh,{key:e?e.id:t,collection:e}))),e.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Wc,{to:`?${cu({tab:t,types:n,before:e[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))):"none"===r?G.createElement(Xp,null,"📦 This ","team"===i.type?"team":"person"," doesn’t have any collections."):G.createElement(Xp,null,o," have any collections."))}function Sk({notebooks:e,tab:t,role:n,youDont:r,owner:i,type:o,reload:s}){return e.length>0?G.createElement("div",null,G.createElement("div",{className:"listing-grid"},e.slice(0,27).map((e,t)=>G.createElement(ld,{key:e?e.id:t,notebook:e,reload:s}))),e.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Wc,{to:`?${cu({tab:t,types:o,before:"likes"===t?e[26].like_time:e[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))):"none"!==n?G.createElement("div",{className:"flex flex-column justify-center items-center pv5"},G.createElement("div",{className:"mb2 f4 lh-copy tc black-50"},"trash"===t?`${r} have anything in the trash.`:"likes"===t?`${r} have any likes.`:`${r} have any ${o} notebooks.`),!t&&G.createElement(Wc,{to:"team"===i.type?`/team/@${i.login}/new`:"/new",className:"inline-flex items-center justify-center ph3 pa2 blue hover-dark-blue bg-white br2 link shadow-hover"},G.createElement(vu,{className:"w1 h1 mr1",style:{strokeWidth:1}}),G.createElement("div",null,"Start a new notebook"))):G.createElement(Xp,null,"📚 This ","team"===i.type?"team":"person"," hasn’t published any notebooks.")}class Ck extends G.Component{constructor(e){super(e),qc(this,"state",{notebooks:new Array(27).fill(void 0),collections:new Array(27).fill(void 0),suggestions:[],pinnedCollections:[],owner:void 0,stats:void 0,collectionModal:!1,role:"none"}),qc(this,"emptyTrash",async()=>{document.activeElement.blur();const{owner:e}=this.state;"team"===e.type?await this.props.api.documentsEmptyTrash(e.id):await this.props.api.documentsEmptyTrash(),this.reload(this.props)}),qc(this,"reload",({user:e,match:{params:{userLogin:t}},location:{search:n},api:r}=this.props)=>{const{before:i,tab:o,type:s}=yk(n);let a,l="none";if(e&&(t===e.login?(l="self",a=e):(a=e.teams.find(e=>t===e.login))&&(l="member",a=Gc({type:"team"},a))),a?this.setState({owner:a,role:l}):((a=r.userLoad(t)).then(e=>this.setState({owner:e})),this.setState({role:l})),r.userLoadStats(t).then(e=>this.setState({stats:e})),Promise.all([a,r.collectionsLoadUserPinned(t)]).then(([e,t])=>{this.setState({pinnedCollections:t.map(t=>Gc({},t,{owner:e}))})}),"collections"===o)Promise.all([a,r.collectionsLoadUser(t,{before:i})]).then(([e,t])=>{"none"===l&&(t=t.filter(bk)),this.setState({collections:t.map(t=>Gc({},t,{owner:e}))})}),this.setState({notebooks:[]});else if("suggestions"===o)this.setState({suggestions:[]}),("self"===l?r.userSuggestions({type:s,before:i}):r.teamSuggestions(a.id,{type:s,before:i})).then(e=>this.setState({suggestions:e}));else{let e;switch(l){case"none":e=Promise.all([a,r.documentLoadByUser(t,i)]).then(([e,t])=>t.map(t=>Gc({},t,{owner:e})));break;case"self":e="likes"===o?r.documentsLoadUserLikes(i):r.documentsLoadUser({before:i,types:s}).then(e=>e.map(e=>Gc({},e,{owner:a})));break;case"member":e=r.documentsLoadTeam(a.id,{before:i,types:s}).then(e=>e.map(e=>Gc({},e,{owner:a})))}"trash"===o&&(e=e.then(e=>e.map(e=>Gc({},e,{trashed:!0})))),e.then(e=>this.setState({notebooks:e}))}}),qc(this,"changeFilter",e=>{const{history:t,location:n}=this.props;let r=e.target.value;t.push(Gc({},n,{search:cu(r?{types:r}:{})}))}),qc(this,"showCollectionModal",()=>{this.setState({collectionModal:!0})}),qc(this,"hideCollectionModal",()=>{this.setState({collectionModal:!1})}),e.preloadData&&(this.state=Gc({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.reload(this.props)}componentWillReceiveProps(e){this.setState({notebooks:new Array(27).fill(void 0)}),this.reload(e)}render(){const{user:e,location:{search:t},match:{params:{userLogin:n}}}=this.props;let{notebooks:r,collections:i,suggestions:o,owner:s,role:a,stats:l,collectionModal:c,pinnedCollections:u}=this.state;const h=lu(t),{tab:d,type:p}=yk(t),f=!d&&"none"!==a&&G.createElement("select",{className:"w-100 mb0-ns mb4 f6 fw6 black-50 bg-light-gray w-auto-ns bn",onChange:this.changeFilter,value:p},G.createElement("option",{value:""},"All"),G.createElement("option",{value:"public"},"Public"),G.createElement("option",{value:"shared"},"Shared"),G.createElement("option",{value:"private"},"Private")),m="self"===a?"You don’t":"This team doesn’t";return G.createElement(Nd,{query:{maxWidth:479}},t=>G.createElement(Rp,Object.assign({},this.props,{gray:!0,seamless:!0}),G.createElement(rl,null,s&&G.createElement("title",null,s.name||s.login),G.createElement("link",{rel:"alternate",type:"application/rss+xml",href:`https://api.observablehq.com/documents/${n}.rss`}),s&&G.createElement("meta",{name:"description",content:`Recently published notebooks by ${s.name||s.login}`})),G.createElement("div",{className:"mb4 nt4 bg-white bb b--black-10 w--full"},G.createElement("div",{className:lh},G.createElement("div",{className:"flex-ns justify-between pv4"},s&&G.createElement(sf,{user:s,socialLinks:!0}),G.createElement(vk,{stats:l})),("none"!==a||u.length>0)&&G.createElement("div",{className:"flex justify-between items-center",style:{marginBottom:-1}},G.createElement(Ek,{user:e,userLogin:n,tab:d,role:a}),!t&&"collections"===d&&"none"!==a&&G.createElement(wk,{showCollectionModal:this.showCollectionModal}),("self"===a||"member"===a)&&G.createElement("div",{className:"inline-flex items-center"},s&&G.createElement(Wc,{className:"inline-flex items-center ph1 ph3-ns pv2 mr2-ns mr0 f6 fw5 no-underline black-50 hover-black",to:"team"===s.type?`/team/@${s.login}/settings`:"/settings"},G.createElement(Au,{className:"w1 h1 ma0 mr2-ns"}),G.createElement("span",{className:"dn di-ns"},"Settings")),f&&!t&&f)))),G.createElement(G.Fragment,null,f&&t&&f,t&&"collections"===d&&"none"!==a&&G.createElement("div",{className:"flex justify-end pb2"},G.createElement(wk,{showCollectionModal:this.showCollectionModal})),"collections"===d?G.createElement(xk,{collections:i,tab:d,type:p,role:a,owner:s,youDont:m}):"suggestions"===d?G.createElement(G.Fragment,null,G.createElement(fk,{history:this.props.history,userLogin:n,query:h}),G.createElement(pk,{mobile:t,type:p,owner:s,suggestions:o.slice(0,29),youDont:m}),o.length>29&&G.createElement("div",{className:"mt4 tc"},G.createElement(Wc,{to:`?${cu({tab:d,type:p,before:o[28].create_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more…"))):G.createElement(G.Fragment,null,"none"!==a&&"trash"===d&&r.length>0?G.createElement(kk,{emptyTrash:this.emptyTrash}):null,!d&&!p&&u.length>0?G.createElement(mk,{pinnedCollections:u}):null,G.createElement(Sk,{notebooks:r,tab:d,role:a,youDont:m,owner:s,type:p,reload:this.reload}))),c&&G.createElement(nh,{onDismiss:this.hideCollectionModal},G.createElement(af,Object.assign({onDismiss:this.hideCollectionModal,owner:s},this.props)))))}}qc(Ck,"preload",({match:{params:{userLogin:e}},location:{search:t},api:n})=>{const{before:r,tab:i}=lu(t);return"trash"===i||"likes"===i?null:Promise.all([n.userLoad(e),n.userLoadStats(e),n.collectionsLoadUserPinned(e),"collections"===i?n.collectionsLoadUser(e,{before:r}):[],"collections"!==i?n.documentLoadByUser(e,r):[]]).then(([e,t,n,r,i])=>({owner:e,notebooks:i.map(t=>Gc({},t,{owner:e})),collections:r.filter(bk).map(t=>Gc({},t,{owner:e})),pinnedCollections:n.map(t=>Gc({},t,{owner:e})),stats:t,role:"none"}))});class _k extends G.Component{constructor(...e){super(...e),qc(this,"state",{login:"",name:"",email:this.props.user.email,stripe_source:void 0,handler:void 0,cardError:!1,loading:void 0,serverError:void 0}),qc(this,"onToken",async e=>{const{api:t,history:n,refreshUser:r}=this.props,{login:i}=this.state;this.setState({loading:!0});try{await t.teamCreate({login:i,stripe_token:e.id}),await r(),n.push(`/team/@${i}/settings/profile`,{walkthrough:!0})}catch(o){if(!o.errors)throw o;const e=o.errors[0].code;switch(e){case"LOGIN_CONFLICT":case"LOGIN_INVALID":this.setState({loginValid:!1,serverError:e,loading:!1});break;case"CARD_ERROR":this.setState({cardError:!0,loading:!1})}}}),qc(this,"addBilling",()=>{const{email:e,login:t,handler:n}=this.state;n.open({name:"Observable, Inc.",image:"https://static.observablehq.com/favicon-512.e994d8ef78e387a9715cc1aab4dfdbc250bf565186e1165a931b055d1e02e84d.png",description:`${t}: Team account`,email:e,panelLabel:"Save"})}),qc(this,"onChange",e=>{const{target:{name:t,value:n}}=e;this.setState({[t]:n})}),qc(this,"onLoginChange",e=>{this.setState({serverError:void 0,login:e})}),qc(this,"onLoginValid",e=>{this.setState({loginValid:e})})}componentWillMount(){Og("https://checkout.stripe.com/checkout.js").catch(()=>this.setState({handler:window.StripeCheckout.configure({key:"pk_live_A5hiyxHhT8FK6EIWYFZMuHo8",locale:"auto",zipCode:!0,token:this.onToken})}))}render(){const{loginValid:e,loading:t,cardError:n,serverError:r}=this.state;return G.createElement(Nd,{query:{maxWidth:640}},i=>G.createElement(Rp,Object.assign({},this.props,{gray:!i}),G.createElement(rl,null,"Observable / Create a team"),G.createElement("div",{className:"mw6-ns center-ns ph0-ns ph2 pt4 pb5 mt5-ns bg-white b--black-10 br2 ba-ns"},G.createElement("div",{className:"ph4-ns"},G.createElement("div",{className:"flex-ns justify-between items-center mt0 mb2"},G.createElement("h3",{className:"ma0 f4 fw7 black"},"Create a team"),G.createElement("div",{className:"mt2 mt0-ns f6 black-70"},"$12 per member, billed monthly")),G.createElement("div",{className:"pv2 f6 lh-copy"},G.createElement("div",{className:"pb1 black-50"},"Team accounts include:"),G.createElement("div",null,"• Unlimited public notebooks"),G.createElement("div",null,"• Unlimited private notebooks"),G.createElement("div",null,"• Real-time collaborative editing"),G.createElement("div",null,"• Email support")),G.createElement(Bp,Object.assign({},this.props,{title:"Team URL",name:"team URL",serverError:r,onLoginChange:this.onLoginChange,onLoginValid:this.onLoginValid})),G.createElement("div",null,n&&G.createElement("div",{className:"flex items-center pv1 f6 dark-red"},G.createElement(Mu,{className:"w1 h1 mr1"}),"We weren’t able to charge this card."),G.createElement("button",{className:`mt3 inline-flex justify-center items-center ph3 pv2 f6 fw6  br2 pointer bn\n                      ${e?" bg-blue hover-bg-dark-blue white hover-white ":"bg-light-gray hover-bg-moon-gray black-70 hover-black  "} ${t?"o-50 pen":""}`,onClick:this.addBilling},"Add payment method & create team",G.createElement(Su,{className:"ml1"})))))))}}class Tk extends G.Component{constructor(...e){super(...e),qc(this,"state",{confirmed:"initial"})}componentDidMount(){this.confirm()}async confirm(){const{match:{params:{token:e}},api:t,refreshUser:n}=this.props;try{await t.userEmailConfirm(e),await n(),this.setState({confirmed:!0})}catch(r){this.setState({confirmed:!1})}}render(){const{confirmed:e}=this.state;return G.createElement(Nd,{query:{maxWidth:640}},t=>G.createElement(Rp,Object.assign({},this.props,{gray:!t}),G.createElement(rl,null,"Confirm email"),G.createElement("div",{className:"flex flex-column measure-narrow center-ns items-center justify-center ph0 ph4-ns ph2 pv5 mt5-ns black-70 bg-white b--black-10 br2 ba-ns"},"initial"===e?G.createElement("h3",{className:"ma0 mb2 f4 fw4"},"Confirming…"):e?G.createElement(G.Fragment,null,G.createElement("h3",{className:"ma0 mb2 f4 fw4"},"Email change confirmed"),G.createElement(Wc,{to:"/",className:"inline-flex ph3 pv2 mt4 f6 fw6 no-underline white bg-blue hover-bg-dark-blue br2 pointer bn"},"Return to home page")):G.createElement(G.Fragment,null,G.createElement("h3",{className:"ma0 mb2 f4 fw4"},"Email could not be confirmed"),G.createElement("div",{className:"mv3 f6 lh-copy"},"The confirmation link you followed may have already been used, or was issued for another user. The email attached to your account has not been changed."),G.createElement(Wc,{to:"/",className:"inline-flex ph3 pv2 mt4 f6 fw6 no-underline white bg-blue hover-bg-dark-blue br2 pointer bn"},"Return to home page")))))}}class Nk extends G.Component{render(){const{user:{login:e},match:{params:{folder:t}}}=this.props,n={"/trash":{tab:"trash"},"/public":{types:"public"},"/likes":{tab:"likes"},undefined:{types:"private"}}[t];return G.createElement(lc,{to:`/@${e}?${cu(n)}`})}}const Pk=({match:{params:{collectionSlug:e}}})=>G.createElement(lc,{to:`/collection/@observablehq/${e}`});class Ak extends G.Component{render(){return G.createElement(G.Fragment,null,G.createElement(rl,{defaultTitle:"Observable",titleTemplate:"%s / Observable"}),G.createElement(Fc,null,G.createElement(zp,{error:this.props.error},G.createElement(Sc,null,G.createElement(ah,{exact:!0,path:"/",component:Fp}),G.createElement(ah,{permissions:"private",exact:!0,path:"/notebooks:folder(/public|/trash)?",component:Nk}),G.createElement(ah,{permissions:"private",exact:!0,path:"/likes",component:({user:{login:e}})=>G.createElement(lc,{to:`/@${e}?${cu({tab:"likes"})}`})}),G.createElement(ah,{permissions:"private",exact:!0,path:"/new",component:jw}),G.createElement(ah,{exact:!0,path:"/d/:id([0-9a-f]+)",component:jw}),G.createElement(ah,{exact:!0,path:"/d/:id([0-9a-f]+)@:version([0-9]+)",component:e=>G.createElement(jw,Object.assign({},e,{type:"versioned"}))}),G.createElement(ah,{exact:!0,path:"/d/:id([0-9a-f]+)/safe",component:e=>G.createElement(jw,Object.assign({},e,{type:"safe"}))}),G.createElement(ah,{userRedirect:"/@observablehq/playground",exact:!0,path:"/playground",component:e=>G.createElement(jw,Object.assign({},e,{type:"playground"}))}),G.createElement(ah,{exact:!0,path:"/compare/:baseId([0-9a-f]+):baseVersion(@[0-9]+)?...:id([0-9a-f]+):version(@[0-9]+)?",component:e=>G.createElement(jw,Object.assign({},e,{type:"compare"}))}),G.createElement(ah,{exact:!0,path:"/compare/:baseId([0-9a-f]+):baseVersion([@~][0-9]+)",component:e=>G.createElement(jw,Object.assign({},e,{type:"compare"}))}),G.createElement(ah,{permissions:"private",exact:!0,path:"/settings:tab(/secrets)?",component:uk}),G.createElement(ah,{permissions:"private",exact:!0,path:"/settings/confirm-email/:token([0-9a-z]+)",component:Tk}),G.createElement(ah,{permissions:"private",exact:!0,path:"/team/new",component:_k}),G.createElement(ah,{permissions:"private",exact:!0,path:"/team/@:teamLogin([0-9a-z_-]+)/settings:tab(/billing|/profile|/secrets)?",component:hk}),G.createElement(ah,{permissions:"private",exact:!0,path:"/team/@:teamLogin([0-9a-z_-]+)/new",component:jw}),G.createElement(ah,{permissions:"private",exact:!0,path:"/team/:teamId/accept/:id([0-9a-f]+)",component:Kp}),G.createElement(ah,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+)",component:jw}),G.createElement(ah,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+/[0-9]+)",component:jw}),G.createElement(ah,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+)@:version([0-9]+)",component:e=>G.createElement(jw,Object.assign({},e,{type:"versioned"}))}),G.createElement(ah,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+/[0-9]+)@:version([0-9]+)",component:e=>G.createElement(jw,Object.assign({},e,{type:"versioned"}))}),G.createElement(ah,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+)/safe",component:e=>G.createElement(jw,Object.assign({},e,{type:"safe"}))}),G.createElement(ah,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+/[0-9]+)/safe",component:e=>G.createElement(jw,Object.assign({},e,{type:"safe"}))}),G.createElement(ah,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+)/forks",component:uf}),G.createElement(ah,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+/[0-9]+)/forks",component:uf}),G.createElement(ah,{exact:!0,path:"/d/:id/forks",component:uf}),G.createElement(ah,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)",component:Ck}),G.createElement(ah,{exact:!0,path:"/search",component:Bw}),G.createElement(ah,{exact:!0,path:"/recent",component:Gp}),G.createElement(ah,{exact:!0,path:"/collection/:collectionSlug([0-9a-z_-]+)",component:Pk}),G.createElement(ah,{exact:!0,path:"/collection/:collectionSlug([0-9a-z_-]+/[0-9]+)",component:Pk}),G.createElement(ah,{exact:!0,path:"/collection/@:userLogin([0-9a-z_-]+)/:collectionSlug([0-9a-z_-]+)",component:cf}),G.createElement(ah,{exact:!0,path:"/collection/@:userLogin([0-9a-z_-]+)/:collectionSlug([0-9a-z_-]+/[0-9]+)",component:cf}),G.createElement(lc,{from:"/collections/featured",to:"/@observablehq?tab=collections"}),G.createElement(lc,{from:"/scratchpad",to:"/playground"}),G.createElement(ah,{permissions:"anon-only",path:"/login",component:$p}),G.createElement(ah,{path:"/loggedin/:path*",component:e=>G.createElement(Uw,e)}),G.createElement(ah,{exact:!0,path:"/error",component:Vw}),G.createElement(ah,{exact:!0,path:"/thumbnail/:id([0-9a-f]+)@:version([0-9]+)",component:e=>G.createElement(jw,Object.assign({},e,{type:"thumbnail"}))}),G.createElement(ah,{exact:!0,path:"/open-source",component:$w}),G.createElement(ah,{component:Ww})))))}}window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-112925870-1","auto"),ga("set","transport","beacon"),ga("set","anonymizeIp",!0),ga("set","page",location.pathname+location.search),ga("send","pageview"),async function(){const e=document.querySelector("#app"),t=e.getAttribute("csrf-token");e.removeAttribute("csrf-token");try{await oh(t),Wa.render(G.createElement(Ak,null),e)}catch(n){Wa.render(G.createElement(Ak,{error:n}),e)}}()}();

//# sourceMappingURL=bundle.968c438f27294cf12e27bedda51eb123d8623a0319280b48e50b3676755f4405.js.map